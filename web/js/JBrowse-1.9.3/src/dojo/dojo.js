//>>built
(function(h,j){var g,i,f=function(){},d=function(a){for(var b in a)return 0;return 1},b={}.toString,e=function(a){return"[object Function]"==b.call(a)},c=function(a){return"[object String]"==b.call(a)},a=function(a){return"[object Array]"==b.call(a)},k=function(a,b){if(a)for(var c=0;c<a.length;)b(a[c++])},p=function(a,b){for(var c in b)a[c]=b[c];return a},q=function(a,b){return p(Error(a),{src:"dojoLoader",info:b})},m=1,o=function(){return"_"+m++},l=function(a,b,c){return X(a,b,c,0,l)},n=this,s=n.document,
u=s&&s.createElement("DiV"),r=l.has=function(a){return e(v[a])?v[a]=v[a](n,s,u):v[a]},v=r.cache=j.hasCache;r.add=function(a,b,c,e){(void 0===v[a]||e)&&(v[a]=b);return c&&r(a)};for(var t in h.has)r.add(t,h.has[t],0,1);l.async=1;var w=new Function("return eval(arguments[0]);");l.eval=function(a,b){return w(a+"\r\n////@ sourceURL="+b)};var x={},B=l.signal=function(b,c){var e=x[b];k(e&&e.slice(0),function(b){b.apply(null,a(c)?c:[c])})},A=l.on=function(a,b){var c=x[a]||(x[a]=[]);c.push(b);return{remove:function(){for(var a=
0;a<c.length;a++)if(c[a]===b){c.splice(a,1);break}}}},E=[],H={},Q=[],K={},G=l.map={},z=[],y={},C="",F={},L={},J={},N=function(a){var b,c,e,d;for(b in L)c=L[b],(e=b.match(/^url\:(.+)/))?F["url:"+ya(e[1],a)]=c:"*now"==b?d=c:"*noref"!=b&&(e=ea(b,a),F[e.mid]=F["url:"+e.url]=c);d&&d(Y(a));L={}},T=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},I=function(a,b){b.splice(0,b.length);for(var c in a)b.push([c,a[c],RegExp("^"+T(c)+"(/|$)"),c.length]);b.sort(function(a,
b){return b[3]-a[3]});return b},D=function(a){var b=a.name;b||(b=a,a={name:b});a=p({main:"main"},a);a.location=a.location?a.location:b;if(a.packageMap)G[b]=a.packageMap;if(!a.main.indexOf("./"))a.main=a.main.substring(2);K[b]=a},V=[],M=function(a,b,e){for(var d in a){if("waitSeconds"==d)l.waitms=1E3*(a[d]||0);"cacheBust"==d&&(C=a[d]?c(a[d])?a[d]:(new Date).getTime()+"":"");if("baseUrl"==d||"combo"==d)l[d]=a[d];a[d]!==v&&(l.rawConfig[d]=a[d],"has"!=d&&r.add("config-"+d,a[d],0,b))}if(!l.baseUrl)l.baseUrl=
"./";/\/$/.test(l.baseUrl)||(l.baseUrl+="/");for(d in a.has)r.add(d,a.has[d],0,b);k(a.packages,D);for(i in a.packagePaths)k(a.packagePaths[i],function(a){var b=i+"/"+a;c(a)&&(a={name:a});a.location=b;D(a)});I(p(G,a.map),z);k(z,function(a){a[1]=I(a[1],[]);if("*"==a[0])z.star=a});I(p(H,a.paths),Q);k(a.aliases,function(a){c(a[0])&&(a[0]=RegExp("^"+T(a[0])+"$"));E.push(a)});if(b)V.push({config:a.config});else for(d in a.config)b=ba(d,e),b.config=p(b.config||{},a.config[d]);if(a.cache)N(),L=a.cache,a.cache["*noref"]&&
N();B("config",[a,l.rawConfig])};r("dojo-cdn");var P=s.getElementsByTagName("script");g=0;for(var O,R,Z,U;g<P.length;)if(O=P[g++],(Z=O.getAttribute("src"))&&(U=Z.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))){R=U[3]||"";j.baseUrl=j.baseUrl||R;(Z=O.getAttribute("data-dojo-config")||O.getAttribute("djConfig"))&&(J=l.eval("({ "+Z+" })","data-dojo-config"));break}l.rawConfig={};M(j,1);if(r("dojo-cdn"))(K.dojo.location=R)&&(R+="/"),K.dijit.location=R+"../dijit/",K.dojox.location=R+"../dojox/";M(h,1);M(J,1);var $=
function(a){ma(function(){k(a.deps,za)})},X=function(b,e,d,k,g){var m;if(c(b)){if((m=ba(b,k,!0))&&m.executed)return m.result;throw q("undefinedModule",b);}a(b)||(M(b,0,k),b=e,e=d);if(a(b))if(b.length){for(var d="require*"+o(),i,n=[],s=0;s<b.length;)i=b[s++],n.push(ba(i,k));m=p(fa("",d,0,""),{injected:2,deps:n,def:e||f,require:k?k.require:l,gc:1});y[m.mid]=m;$(m);var t=da&&0!="sync";ma(function(){na(m,t)});m.executed||S.push(m);ga()}else e&&e();return g},Y=function(a){if(!a)return l;var b=a.require;
if(!b)b=function(c,e,d){return X(c,e,d,a,b)},a.require=p(b,l),b.module=a,b.toUrl=function(b){return ya(b,a)},b.toAbsMid=function(b){return oa(b,a)};return b},S=[],aa=[],W={},ha=function(a){a.injected=1;W[a.mid]=1;a.url&&(W[a.url]=a.pack||1);Aa()},ja=function(a){a.injected=2;delete W[a.mid];a.url&&delete W[a.url];d(W)&&ia()},Ma=l.idle=function(){return!aa.length&&d(W)&&!S.length&&!da},pa=function(a,b){if(b)for(var c=0;c<b.length;c++)if(b[c][2].test(a))return b[c];return 0},Ba=function(a){for(var b=
[],c,e,a=a.replace(/\\/g,"/").split("/");a.length;)c=a.shift(),".."==c&&b.length&&".."!=e?(b.pop(),e=b[b.length-1]):"."!=c&&b.push(e=c);return b.join("/")},fa=function(a,b,c,e){return{pid:a,mid:b,pack:c,url:e,executed:0,def:0}},Ca=function(a,b,c,d,f,g,l,p){var m,i,n,o;o=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||o&&!b)return fa(0,a,0,a);a=Ba(o?b.mid+"/../"+a:a);if(/^\./.test(a))throw q("irrationalPath",a);b&&(n=pa(b.mid,g));(n=(n=n||g.star)&&pa(a,n[1]))&&(a=n[1]+a.substring(n[3]));b=(U=a.match(/^([^\/]+)(\/(.+))?$/))?
U[1]:"";(m=c[b])?a=b+"/"+(i=U[3]||m.main):b="";var s=0;k(E,function(b){var c=a.match(b[0]);c&&0<c.length&&(s=e(b[1])?a.replace(b[0],b[1]):b[1])});if(s)return Ca(s,0,c,d,f,g,l,p);if(c=d[a])return p?fa(c.pid,c.mid,c.pack,c.url):d[a];d=(n=pa(a,l))?n[1]+a.substring(n[3]):b?m.location+"/"+i:r("config-tlmSiblingOfDojo")?"../"+a:a;/(^\/)|(\:)/.test(d)||(d=f+d);return fa(b,a,m,Ba(d+".js"))},ea=function(a,b){return Ca(a,b,K,y,l.baseUrl,z,Q)},Da=function(a,b,c){return a.normalize?a.normalize(b,function(a){return oa(a,
c)}):oa(b,c)},Ea=0,ba=function(a,b,c){var e,d;(e=a.match(/^(.+?)\!(.*)$/))?(d=ba(e[1],b,c),5===d.executed&&!d.load&&qa(d),d.load?(e=Da(d,e[2],b),a=d.mid+"!"+(d.dynamic?++Ea+"!":"")+e):(e=e[2],a=d.mid+"!"+ ++Ea+"!waitingForPlugin"),a={plugin:d,mid:a,req:Y(b),prid:e}):a=ea(a,b);return y[a.mid]||!c&&(y[a.mid]=a)},oa=l.toAbsMid=function(a,b){return ea(a,b).mid},ya=l.toUrl=function(a,b){var c=ea(a+"/x",b),e=c.url;return Fa(0===c.pid?a:e.substring(0,e.length-5))},Ga={injected:2,executed:5,def:3,result:3},
ra=function(a){return y[a]=p({mid:a},Ga)},Na=ra("require"),Oa=ra("exports"),Pa=ra("module"),ka={},sa=0,qa=function(a){var b=a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},Qa=function(a){var b={};k(a.loadQ,function(c){var e=Da(a,c.prid,c.req.module),d=a.dynamic?c.mid.replace(/waitingForPlugin$/,e):a.mid+"!"+e,e=p(p({},c),{mid:d,prid:e,injected:0});y[d]||Ha(y[d]=e);b[c.mid]=y[d];ja(c);delete y[c.mid]});a.loadQ=0;var c=function(a){for(var c=a.deps||[],e=0;e<c.length;e++)(a=
b[c[e].mid])&&(c[e]=a)},e;for(e in y)c(y[e]);k(S,c)},ta=function(a){l.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=sa++;a.loadQ&&(qa(a),Qa(a));for(g=0;g<S.length;)S[g]===a?S.splice(g,1):g++;/^require\*/.test(a.mid)&&delete y[a.mid]},Ra=[],na=function(a,b){if(4===a.executed)return l.trace("loader-circular-dependency",[Ra.concat(a.mid).join("->")]),!a.def||b?ka:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return ka;var c=a.mid,d=a.deps||[],f,k=[],g=0;for(a.executed=4;g<d.length;){f=
d[g++];f=f===Na?Y(a):f===Oa?a.cjs.exports:f===Pa?a.cjs:na(f,b);if(f===ka)return a.executed=0,l.trace("loader-exec-module",["abort",c]),ka;k.push(f)}l.trace("loader-run-factory",[a.mid]);var c=a.def,p;if(r("config-dojo-loader-catches"))try{p=e(c)?c.apply(null,k):c}catch(m){B("error",a.result=q("factoryThrew",[a,m]))}else p=e(c)?c.apply(null,k):c;a.result=void 0===p&&a.cjs?a.cjs.exports:p;ta(a)}return a.result},da=0,ma=function(a){try{da++,a()}finally{da--}Ma()&&B("idle",[])},ga=function(){da||ma(function(){for(var a,
b,c=0;c<S.length;)a=sa,b=S[c],na(b),a!=sa?c=0:c++})};void 0===r("dojo-loader-eval-hint-url")&&r.add("dojo-loader-eval-hint-url",1);var Fa=function(a){a+="";return a+(C?(/\?/.test(a)?"&":"?")+C:"")},Ha=function(a){var b=a.plugin;5===b.executed&&!b.load&&qa(b);var c=function(b){a.result=b;ja(a);ta(a);ga()};b.load?b.load(a.prid,a.req,c):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],S.unshift(b),za(b))},ca=0,ua=0,va=0,Sa=function(a,b){r("config-stripStrict")&&(a=a.replace(/"use strict"/g,""));va=1;if(r("config-dojo-loader-catches"))try{a===
ca?ca.call(null):l.eval(a,r("dojo-loader-eval-hint-url")?b.url:b.mid)}catch(c){B("error",q("evalModuleThrew",b))}else a===ca?ca.call(null):l.eval(a,r("dojo-loader-eval-hint-url")?b.url:b.mid);va=0},za=function(a){var b=a.mid,c=a.url;if(!a.executed&&!a.injected&&!(W[b]||a.url&&(a.pack&&W[a.url]===a.pack||1==W[a.url])))if(ha(a),a.plugin)Ha(a);else{var e=function(){Ta(a);2!==a.injected&&(ja(a),p(a,Ga),l.trace("loader-define-nonmodule",[a.url]));ga()};(ca=F[b]||F["url:"+a.url])?(l.trace("loader-inject",
["cache",a.mid,c]),Sa(ca,a),e()):(l.trace("loader-inject",["script",a.mid,c]),ua=a,l.injectUrl(Fa(c),e,a),ua=0)}},wa=function(a,b,c){l.trace("loader-define-module",[a.mid,b]);if(2===a.injected)return B("error",q("multipleDefine",a)),a;p(a,{deps:b,def:c,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(b){a.cjs.exports=b},config:function(){return a.config}}});for(var d=0;d<b.length;d++)b[d]=ba(b[d],a);ja(a);if(!e(c)&&!b.length)a.result=c,ta(a);return a},Ta=function(a,b){for(var c=[],
e,d;aa.length;)d=aa.shift(),b&&(d[0]=b.shift()),e=d[0]&&ba(d[0])||a,c.push([e,d[1],d[2]]);N(a);k(c,function(a){$(wa.apply(null,a))})},la=0,ia=f,Aa=f;ia=function(){la&&clearTimeout(la);la=0};Aa=function(){ia();l.waitms&&(la=window.setTimeout(function(){ia();B("error",q("timeout",W))},l.waitms))};r.add("ie-event-behavior",!!s.attachEvent&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var xa=function(a,b,c,e){if(r("ie-event-behavior"))return a.attachEvent(c,e),function(){a.detachEvent(c,
e)};a.addEventListener(b,e,!1);return function(){a.removeEventListener(b,e,!1)}},Ua=xa(window,"load","onload",function(){l.pageLoaded=1;"complete"!=s.readyState&&(s.readyState="complete");Ua()}),Ia=s.getElementsByTagName("script")[0],Va=Ia.parentNode;l.injectUrl=function(a,b,c){var c=c.node=s.createElement("script"),e=xa(c,"load","onreadystatechange",function(a){var a=a||window.event,c=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(c.readyState))e(),d(),b&&b()}),d=xa(c,"error",
"onerror",function(b){e();d();B("error",q("scriptError",[a,b]))});c.type="text/javascript";c.charset="utf-8";c.src=a;Va.insertBefore(c,Ia);return c};l.log=f;l.trace=f;var Ja=function(a,b,d){var f=arguments.length,k=["require","exports","module"],g=[0,a,b];1==f?g=[0,e(a)?k:[],a]:2==f&&c(a)?g=[a,e(b)?k:[],b]:3==f&&(g=[a,b,d]);l.trace("loader-define",g.slice(0,2));if((f=g[0]&&ba(g[0]))&&!W[f.mid])$(wa(f,g[1],g[2]));else if(!r("ie-event-behavior")||va)aa.push(g);else{f=f||ua;if(!f)for(a in W)if((k=y[a])&&
k.node&&"interactive"===k.node.readyState){f=k;break}f?(N(f),$(wa(f,g[1],g[2]))):B("error",q("ieDefineFailed",g[0]));ga()}};Ja.amd={vendor:"dojotoolkit.org"};p(p(l,j.loaderPatch),h.loaderPatch);A("error",function(a){try{if(console.error(a),a instanceof Error)for(var b in a);}catch(c){}});p(l,{uid:o,cache:F,packs:K});if(!n.define){n.define=Ja;n.require=l;k(V,function(a){M(a)});var Ka=J.deps||h.deps||j.deps,La=J.callback||h.callback||j.callback;l.boot=Ka||La?[Ka||[],La]:0}})(this.dojoConfig||this.djConfig||
this.require||{},{async:0,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../../../src/dijit",name:"dijit"},{location:"../../../src/dojox",name:"dojox"},{location:"../../../src/JBrowse",name:"JBrowse"},{location:"../../../src/jszlib",name:"jszlib"},{location:"../../../src/dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../../../src/xstyle",main:"css",name:"xstyle"},{location:"../../../src/put-selector",
main:"put",name:"put-selector"},{location:"../../../src/json-schema",main:"lib/validate.js",name:"json-schema"},{location:"../../../src/jDataView",main:"jdataview",name:"jDataView"},{location:"../../../src/dbind",name:"dbind"},{location:"../../../src/lazyload",main:"lazyload",name:"lazyload"}]});
require({cache:{"JBrowse/main":function(){require("JBrowse/Browser,JBrowse/ConfigAdaptor/JB_json_v1,JBrowse/View/TrackList/Simple,JBrowse/Store/Sequence/StaticChunked,JBrowse/Store/SeqFeature/NCList,JBrowse/Store/TiledImage/Fixed,JBrowse/View/Track/Sequence,JBrowse/View/Track/HTMLFeatures,JBrowse/View/Track/FixedImage/Wiggle,JBrowse/View/Track/Wiggle,JBrowse/View/Track/Wiggle/XYPlot,JBrowse/View/Track/Wiggle/Density,JBrowse/View/Track/Alignments,JBrowse/View/Track/Alignments2,JBrowse/View/Track/FeatureCoverage,JBrowse/View/Track/SNPCoverage,JBrowse/View/TrackList/Simple,JBrowse/Store/TrackMetaData,xstyle/load-css,dojox/gfx/svg".split(","))},"JBrowse/Browser":function(){var h=
h||[];define("dojo/_base/lang,dojo/on,dojo/Deferred,dojo/DeferredList,dojo/topic,dojo/aspect,JBrowse/has,dojo/_base/array,dijit/layout/ContentPane,dijit/layout/BorderContainer,dijit/Dialog,dijit/form/ComboBox,dijit/form/Button,dijit/form/Select,dijit/form/DropDownButton,dijit/DropDownMenu,dijit/MenuItem,dijit/CheckedMenuItem,JBrowse/Util,JBrowse/Store/LazyTrie,JBrowse/Store/Names/LazyTrieDojoData,dojo/store/DataStore,JBrowse/Store/Names/Hash,JBrowse/GenomeView,JBrowse/TouchScreenSupport,JBrowse/ConfigManager,JBrowse/View/InfoDialog,JBrowse/View/FileDialog,JBrowse/Model/Location,JBrowse/View/LocationChoiceDialog,JBrowse/View/Dialog/SetHighlight,JBrowse/View/Dialog/QuickHelp,dijit/focus,lazyload,dojo/domReady!".split(","),
function(j,g,i,f,d,b,e,c,a,k,p,q,m,o,l,n,s,u,r,v,t,w,x,B,A,E,H,Q,K,G,z,y,C,F){var L=r.dojof,j=function(a){this.globalKeyboardShortcuts={};this.config=a;if(!this.config.unitTestMode){if(!this.config.baseUrl)this.config.baseUrl=r.resolveUrl(window.location.href,".")+"/data/";this.startTime=new Date;this.container=dojo.byId(this.config.containerID);this.container.onselectstart=function(){return!1};var b=this;dojo.addOnLoad(function(){b.loadConfig().then(function(){b.config.initialHighlight&&b.setHighlight(new K(b.config.initialHighlight));
b.loadNames();b.loadUserCSS().then(function(){b.initPlugins().then(function(){b.initTrackMetadata();b.loadRefSeqs().then(function(){b.initView().then(function(){A.loadTouch();b.navigateTo(b._initialLocation());b.passMilestone("completely initialized",{success:!0})});b.reportUsageStats()})})})})})}};j.prototype._initialLocation=function(){var a=dojo.fromJson(this.cookie("location"))||{};return this.config.location?this.config.location:a[this.refSeq.name]?a[this.refSeq.name].l||a[this.refSeq.name]:
this.config.defaultLocation?this.config.defaultLocation:r.assembleLocString({ref:this.refSeq.name,start:0.4*(this.refSeq.start+this.refSeq.end),end:0.6*(this.refSeq.start+this.refSeq.end)})};j.prototype.version=function(){return"1.9.3"}.call();j.prototype.getPlugin=function(a,b){this.afterMilestone("initPlugins",dojo.hitch(this,function(){b(this.plugins[a])}))};j.prototype.initPlugins=function(){return this._milestoneFunction("initPlugins",function(a){this.plugins={};var b=this.config.plugins||[],
b=c.map(dojo.isArray(b)?b:[b],function(a){return"object"==typeof a?a:{name:a}}),e=c.map(b,function(a){return a.name}),d=c.map(b,function(){return new i});(new f(d)).then(function(){a.resolve({success:!0})});require({packages:c.map(e,function(a){return{name:a,location:"../plugins/"+a+"/js"}},this)},e,dojo.hitch(this,function(){c.forEach(arguments,function(a,c){var f=e[c],k=d[c];if("string"==typeof a)console.error("could not load plugin "+f+": "+a);else{var g=dojo.mixin(dojo.clone(b[c]),{config:this.config[f]||
{}});g.browser=this;var g=dojo.mixin(g,{browser:this}),l=this._loadCSS({url:this.resolveUrl("plugins/"+f+"/css/main.css")});l.then(function(){k.resolve({success:!0})});g.cssLoaded=l;g=new a(g);this.plugins[f]=g}},this)}))})};j.prototype.resolveUrl=function(a){var b=this.config.browserRoot||"";b&&"/"!=b.charAt(b.length-1)&&(b+="/");return r.resolveUrl(b,a)};j.prototype.fatalError=function(a){a&&(a+="",/\.$/.exec(a)||(a+="."));if(this.hasFatalErrors){var b=dojo.byId("fatal_error_list")||document.body;
dojo.create("div",{className:"error",innerHTML:a+""},b)}else(dojo.byId(this.config.containerID||"GenomeBrowser")||document.body).innerHTML='<div class="fatal_error">  <h1>Congratulations, JBrowse is on the web!</h1>  <p>However, JBrowse could not start, either because it has not yet been configured     and loaded with data, or because of an error.</p>  <p style="font-size: 110%; font-weight: bold"><a title="View the tutorial" href="docs/tutorial/">If this is your first time running JBrowse, click here to follow the Quick-start Tutorial to get up and running.</a></p>  <p>Otherwise, please refer to the following resources for help in getting JBrowse up and running.</p>  <ul><li><a target="_blank" href="docs/tutorial/">Quick-start tutorial</a></li>      <li><a target="_blank" href="http://gmod.org/wiki/JBrowse">JBrowse wiki</a></li>      <li><a target="_blank" href="docs/config.html">Configuration reference</a></li>      <li><a target="_blank" href="docs/featureglyphs.html">Feature glyph reference</a></li>  </ul>  <div id="fatal_error_list" class="errors"> <h2>Error message(s):</h2>'+
(a?'<div class="error"> '+a+"</div>":"")+"  </div></div>",this.hasFatalErrors=!0};j.prototype.loadRefSeqs=function(){return this._milestoneFunction("loadRefSeqs",function(a){if("string"==typeof this.config.refSeqs)this.config.refSeqs={url:this.config.refSeqs};dojo.xhrGet({url:this.config.refSeqs.url,handleAs:"json",load:dojo.hitch(this,function(b){this.addRefseqs(b);a.resolve({success:!0})}),error:dojo.hitch(this,function(b){this.fatalError("Failed to load reference sequence info: "+b);a.resolve({success:!1,
error:b})})})})};j.prototype.onRefSeqsLoaded=function(){};j.prototype.loadUserCSS=function(){return this._milestoneFunction("loadUserCSS",function(a){if(this.config.css&&!dojo.isArray(this.config.css))this.config.css=[this.config.css];var b=this.config.css||[];if(b.length){var e=this,b=c.map(b,function(a){return e._loadCSS(a)});(new f(b)).then(function(){a.resolve({success:!0})})}else a.resolve({success:!0})})};j.prototype._loadCSS=function(a){var b=new i;"string"==typeof a&&(-1<a.indexOf("{")?(dojo.create("style",
{"data-from":"JBrowse Config",type:"text/css",innerHTML:a},document.head),b.resolve(!0)):a={url:a});"object"==typeof a&&F.css(a.url,function(){b.resolve(!0)});return b};j.prototype.loadNames=function(){return this._milestoneFunction("loadNames",function(a){var b=dojo.mixin(dojo.clone(this.config.names||{}),this.config.autocomplete||{});if(!b.url)b.url=this.config.nameUrl||"data/names/";if(b.baseUrl)b.url=r.resolveUrl(b.baseUrl,b.url);this.nameStore="Hash"==b.type?new x(dojo.mixin({browser:this},b)):
new w({store:new t({browser:this,namesTrie:new v(b.url,"lazy-{Chunk}.json"),stopPrefixes:b.stopPrefixes,resultLimit:b.resultLimit||15,tooManyMatchesMessage:b.tooManyMatchesMessage})});a.resolve({success:!0})})};j.prototype.compareReferenceNames=function(a,b){return this.regularizeReferenceName(a).localeCompare(this.regularizeReferenceName(b))};j.prototype.regularizeReferenceName=function(a){return this.config.exactReferenceSequenceNames?a:a=a.toLowerCase().replace(/^chro?m?(osome)?/,"chr").replace(/^co?n?ti?g/,
"ctg").replace(/^scaff?o?l?d?/,"scaffold").replace(/^([a-z]*)0+/,"$1").replace(/^(\d+)$/,"chr$1")};j.prototype.initView=function(){var b=this;return this._milestoneFunction("initView",function(c){function e(){var a=b.makeCurrentViewURL();b.config.updateBrowserURL&&window.history&&window.history.replaceState&&window.history.replaceState({},"",a);document.title=b.view.visibleRegionLocString()+" JBrowse"}dojo.addClass(this.container,"jbrowse");dojo.addClass(document.body,this.config.theme||"tundra");
var d=dojo.create("div",{style:{overflow:"hidden"}},this.container),f=this.browserMeta(),l=new H({title:"About "+f.title,content:f.description,className:"about-dialog"}),f=dojo.create("div",{className:this.config.show_nav?"menuBar":"topLink"});b.menuBar=f;(this.config.show_nav?d:this.container).appendChild(f);var p=dojo.create("div",{className:"overview",id:"overview"},d);this.overviewDiv=p;if(!this.config.show_overview)p.style.cssText="display: none";if(this.config.show_nav)this.navbox=this.createNavBox(d),
this.config.datasets&&!this.config.dataset_id&&console.warn("In JBrowse configuration, datasets specified, but dataset_id not set.  Dataset selector will not be shown."),this.config.datasets&&this.config.dataset_id?this.renderDatasetSelect(f):dojo.create("a",{className:"powered_by",innerHTML:"JBrowse",onclick:dojo.hitch(l,"show"),title:"powered by JBrowse"},f),this.addGlobalMenuItem("file",new s({label:"Open",iconClass:"dijitIconFolderOpen",onClick:dojo.hitch(this,"openFileDialog")})),this.renderGlobalMenu("file",
{text:"File"},f),this.addGlobalMenuItem("view",new s({label:"Set highlight",onClick:function(){(new z({browser:b,setCallback:dojo.hitch(b,"setHighlightAndRedraw")})).show()}})),this._highlightClearButton=new s({label:"Clear highlight",onClick:dojo.hitch(this,function(){var a=this.getHighlight();a&&(this.clearHighlight(),this.view.redrawRegion(a))})}),this._updateHighlightClearButton(),this.subscribe("/jbrowse/v1/n/globalHighlightChanged",dojo.hitch(this,"_updateHighlightClearButton")),this.addGlobalMenuItem("view",
this._highlightClearButton),this.renderGlobalMenu("view",{text:"View"},f),this.renderGlobalMenu("options",{text:"Options",title:"configure JBrowse"},f);this.config.show_nav&&(this.addGlobalMenuItem("help",new s({label:"About",onClick:dojo.hitch(l,"show")})),l=function(){(new y({browser:b})).show()},this.setGlobalKeyboardShortcut("?",l),this.addGlobalMenuItem("help",new s({label:"General",iconClass:"jbrowseIconHelp",onClick:l})),this.renderGlobalMenu("help",{},f));this.config.show_nav&&this.config.show_tracklist&&
this.config.show_overview?f.appendChild(this.makeShareLink()):f.appendChild(this.makeFullViewLink());this.viewElem=document.createElement("div");this.viewElem.className="dragWindow";this.container.appendChild(this.viewElem);this.containerWidget=new k({liveSplitters:!1,design:"sidebar",gutters:!1},this.container);new a({region:"top"},d);this.view=this.viewElem.view=new B(this,this.viewElem,250,this.refSeq,0.005);dojo.connect(this.view,"onFineMove",this,"onFineMove");dojo.connect(this.view,"onCoarseMove",
this,"onCoarseMove");this.browserWidget=new a({region:"center"},this.viewElem);dojo.connect(this.browserWidget,"resize",this,"onResize");dojo.connect(this.browserWidget,"resize",this.view,"onResize");dojo.connect(this,"onCoarseMove",e);this.subscribe("/jbrowse/v1/n/tracks/visibleChanged",e);this.subscribe("/jbrowse/v1/n/globalHighlightChanged",e);this.afterMilestone("loadRefSeqs",dojo.hitch(this,function(){this.afterMilestone("initTrackMetadata",dojo.hitch(this,function(){this.createTrackList().then(dojo.hitch(this,
function(){this.containerWidget.startup();this.onResize();this.view.onResize();g(document.body,"keypress",dojo.hitch(this,"globalKeyHandler"));this._initEventRouting();c.resolve({success:!0})}))}))}))})};j.prototype.renderDatasetSelect=function(a){var b=this.config.datasets||{},e=[],d;for(d in b)e.push(dojo.mixin({id:d},b[d]));(new o({name:"dataset",className:"dataset_select",value:this.config.dataset_id,options:c.map(e,function(a){return{label:a.name,value:a.id}}),onChange:dojo.hitch(this,function(a){if(a=
(this.config.datasets||{})[a])window.location=a.url;return!1})})).placeAt(a)};j.prototype.browserMeta=function(){var a=this.config.aboutThisBrowser||{};a.title=a.title||"JBrowse";var b=this.version&&this.version.match(/^\d/)?this.version:"(development version)";a.description=a.description?a.description+('<div class="powered_by">Powered by <a target="_blank" href="http://jbrowse.org">JBrowse '+b+"</a>.</div>"):'<div class="default_about">  <img class="logo" src="img/JBrowseLogo_small.png">  <h1>JBrowse '+
b+'</h1>  <div class="tagline">A next-generation genome browser<br> built with JavaScript and HTML5.</div>  <a class="mainsite" target="_blank" href="http://jbrowse.org">JBrowse website</a>  <div class="gmod">JBrowse is a <a target="_blank" href="http://gmod.org">GMOD</a> project.</div>  <div class="copyright">&copy; 2013 The Evolutionary Software Foundation</div></div>';return a};j.prototype.registerTrackType=function(a){var b=this.getTrackTypes(),e=a.type,d=a.defaultForStoreTypes||[];b.knownTrackTypes.push(e);
if(a.label)b.trackTypeLabels[e]=a.label;var f={};b.knownTrackTypes=c.filter(b.knownTrackTypes,function(a){var b=f[a];f[a]=!0;return!b});c.forEach(d,function(a){b.trackTypeDefaults[a]=e});this._knownTrackTypes=b};j.prototype.getTrackTypes=function(){if(!this._knownTrackTypes)this._knownTrackTypes={trackTypeDefaults:{"JBrowse/Store/SeqFeature/BAM":"JBrowse/View/Track/Alignments2","JBrowse/Store/SeqFeature/NCList":"JBrowse/View/Track/HTMLFeatures","JBrowse/Store/SeqFeature/BigWig":"JBrowse/View/Track/Wiggle/XYPlot",
"JBrowse/Store/Sequence/StaticChunked":"JBrowse/View/Track/Sequence","JBrowse/Store/SeqFeature/VCFTabix":"JBrowse/View/Track/HTMLVariants"},knownTrackTypes:"JBrowse/View/Track/Alignments,JBrowse/View/Track/Alignments2,JBrowse/View/Track/FeatureCoverage,JBrowse/View/Track/SNPCoverage,JBrowse/View/Track/HTMLFeatures,JBrowse/View/Track/HTMLVariants,JBrowse/View/Track/Wiggle/XYPlot,JBrowse/View/Track/Wiggle/Density,JBrowse/View/Track/Sequence".split(","),trackTypeLabels:{}};return this._knownTrackTypes};
j.prototype.openFileDialog=function(){(new Q({browser:this})).show({openCallback:dojo.hitch(this,function(a){var b=a.trackConfs||[];b.length&&(c.forEach(b,function(a){var b=a.store;if(b&&"object"==typeof b)delete a.store,b=this._addStoreConfig(b.name,b),a.store=b},this),this.publish("/jbrowse/v1/v/tracks/new",b),"openImmediately"==a.trackDisposition&&this.publish("/jbrowse/v1/v/tracks/show",b))})})};j.prototype.addTracks=function(a){this._addTrackConfigs(a)};j.prototype.replaceTracks=function(a){this._replaceTrackConfigs(a)};
j.prototype.deleteTracks=function(a){this._deleteTrackConfigs(a)};j.prototype.renderGlobalMenu=function(a,b,c){var e=this.makeGlobalMenu(a);e&&(b=dojo.mixin({className:a,innerHTML:'<span class="icon"></span> '+(b.text||r.ucFirst(a)),dropDown:e},b||{}),a=new l(b),dojo.addClass(a.domNode,"menu"),c.appendChild(a.domNode))};j.prototype.makeGlobalMenu=function(a){a=(this._globalMenuItems||{})[a]||[];if(!a.length)return null;var b=new n({leftClickToOpen:!0});dojo.forEach(a,function(a){b.addChild(a)});dojo.addClass(b.domNode,
"globalMenu");b.startup();return b};j.prototype.addGlobalMenuItem=function(a,b){if(!this._globalMenuItems)this._globalMenuItems={};this._globalMenuItems[a]||(this._globalMenuItems[a]=[]);this._globalMenuItems[a].push(b)};j.prototype._initEventRouting=function(){var a=this;a.subscribe("/jbrowse/v1/v/tracks/hide",function(b){a.publish("/jbrowse/v1/c/tracks/hide",b)});a.subscribe("/jbrowse/v1/v/tracks/show",function(b){a.addRecentlyUsedTracks(dojo.map(b,function(a){return a.label}));a.publish("/jbrowse/v1/c/tracks/show",
b)});a.subscribe("/jbrowse/v1/v/tracks/new",function(b){a.addTracks(b);a.publish("/jbrowse/v1/c/tracks/new",b)});a.subscribe("/jbrowse/v1/v/tracks/replace",function(b){a.replaceTracks(b);a.publish("/jbrowse/v1/c/tracks/replace",b)});a.subscribe("/jbrowse/v1/v/tracks/delete",function(b){a.deleteTracks(b);a.publish("/jbrowse/v1/c/tracks/delete",b)})};j.prototype.reportUsageStats=function(){if(!this.config.suppressUsageStatistics){var a=this._calculateClientStats();this._reportGoogleUsageStats(a);this._reportCustomUsageStats(a)}};
j.prototype._reportGoogleUsageStats=function(a){h.push.apply(h,[["_setAccount","UA-7115575-2"],["_setDomainName","none"],["_setAllowLinker",!0],["_setCustomVar",1,"tracks-count",a["tracks-count"],3],["_setCustomVar",2,"refSeqs-count",a["refSeqs-count"],3],["_setCustomVar",3,"refSeqs-avgLen",a["refSeqs-avgLen"],3],["_setCustomVar",4,"jbrowse-version",a.ver,3],["_setCustomVar",5,"loadTime",a.loadTime,3],["_trackPageview"]]);a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=
("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};j.prototype._reportCustomUsageStats=function(a){dojo.create("img",{style:{display:"none"},src:"http://jbrowse.org/analytics/clientReport?"+dojo.objectToQuery(a)},document.body)};j.prototype.getStore=function(a,b){if(!b)throw"invalid arguments";var c=this._storeCache||{};this._storeCache=c;if(c=c[a])c.refCount++,b(c.store);
else{var e=this.config.stores[a];e?(c=e.type)?require([c],dojo.hitch(this,function(c){var d={};dojo.mixin(d,e);dojo.mixin(d,{config:e,browser:this,refSeq:this.refSeq});c=new c(d);this._storeCache[a]={refCount:1,store:c};b(c);b=void 0})):(console.warn("store "+a+" has no type defined"),b(null)):(console.warn("store '"+a+"' not found"),b(null))}};var J=0;j.prototype._addStoreConfig=function(a,b){a=a||"addStore"+J++;if(!this.config.stores)this.config.stores={};if(!this._storeCache)this._storeCache={};
if(this.config.stores[a]||this._storeCache[a])throw"store "+a+" already exists!";this.config.stores[a]=b;return a};j.prototype.clearStores=function(){this._storeCache={}};j.prototype.releaseStore=function(a){var b=this._storeCache[a];b&&!--b.refCount&&delete this._storeCache[a]};j.prototype._calculateClientStats=function(){var a=screen||window.screen,b=new Date,c={ver:this.version||"dev","refSeqs-count":this.refSeqOrder.length,"refSeqs-avgLen":!this.refSeqOrder.length?null:L.reduce(dojo.map(this.refSeqOrder,
function(a){a=this.allRefs[a];return!a?0:a.end-a.start},this),"+"),"tracks-count":this.config.tracks.length,plugins:L.keys(this.plugins).sort().join(","),"scn-h":a?a.height:null,"scn-w":a?a.width:null,"win-h":document.body.offsetHeight,"win-w":document.body.offsetWidth,"el-h":this.container.offsetHeight,"el-w":this.container.offsetWidth,t:b.getTime()/1E3,tzoffset:b.getTimezoneOffset(),loadTime:(b.getTime()-this.startTime)/1E3};dojo.forEach(this.config.tracks,function(a){a="track-types-"+a.type||"null";
c[a]=(c[a]||0)+1});return c};j.prototype.publish=function(){return d.publish.apply(d,arguments)};j.prototype.subscribe=function(){return d.subscribe.apply(d,arguments)};j.prototype.onResize=function(){if(this.navbox)this.view.locationTrapHeight=dojo.marginBox(this.navbox).h};j.prototype.getRecentlyUsedTracks=function(){return dojo.fromJson(this.cookie("recentTracks")||"[]")};j.prototype.addRecentlyUsedTracks=function(a){a=r.uniq(dojo.map(a,function(a){return{label:a,time:Math.round(new Date/1E3)}},
this).concat(dojo.fromJson(this.cookie("recentTracks"))||[]),function(a){return a.label}).slice(0,this.config.maxRecentTracks||10);this.cookie("recentTracks",a,{expires:365});return a};j.prototype._milestoneFunction=function(a,b){var c=Array.prototype.slice.call(arguments,2),e=this._getDeferred(a);c.unshift(e);try{b.apply(this,c)}catch(d){console.error(d,d.stack),e.resolve({success:!1,error:d})}return e};j.prototype._getDeferred=function(a){if(!this._deferred)this._deferred={};return this._deferred[a]=
this._deferred[a]||new i};j.prototype.afterMilestone=function(a,b){return this._getDeferred(a).then(function(){try{b()}catch(a){console.error(""+a,a.stack,a)}})};j.prototype.passMilestone=function(a,b){return this._getDeferred(a).resolve(b)};j.prototype.reachedMilestone=function(a){return 0<=this._getDeferred(a).fired};j.prototype.loadConfig=function(){return this._milestoneFunction("loadConfig",function(a){(new E({config:this.config,defaults:this._configDefaults(),browser:this})).getFinalConfig(dojo.hitch(this,
function(b){this.config=b;var c=b.tracks||[];delete b.tracks;this._addTrackConfigs(c);dojo.forEach(["show_tracklist","show_nav","show_overview"],function(a){this.config[a]=this._coerceBoolean(this.config[a])},this);if(!this.config.tracks)this.config.tracks=[];a.resolve({success:!0})}))})};j.prototype._addTrackConfigs=function(a){if(!this.config.tracks)this.config.tracks=[];if(!this.trackConfigsByName)this.trackConfigsByName={};c.forEach(a,function(a){this.trackConfigsByName[a.label]=a;this.config.tracks.push(a)},
this);return a};j.prototype._replaceTrackConfigs=function(a){if(!this.trackConfigsByName)this.trackConfigsByName={};c.forEach(a,function(a){this.trackConfigsByName[a.label]||console.warn("track with label "+a.label+" does not exist yet.  creating a new one.");this.trackConfigsByName[a.label]=dojo.mixin(this.trackConfigsByName[a.label]||{},a)},this)};j.prototype._deleteTrackConfigs=function(a){this.config.tracks=c.filter(this.config.tracks||[],function(b){return!c.some(a,function(a){return a.label==
b.label})});c.forEach(a,function(a){this.trackConfigsByName[a.label]?delete this.trackConfigsByName[a.label]:console.warn("track "+a.label+" does not exist, cannot delete")},this)};j.prototype._configDefaults=function(){return{tracks:[],show_tracklist:!0,show_nav:!0,show_overview:!0}};j.prototype._coerceBoolean=function(a){return"string"==typeof a?(a=a.toLowerCase(),"true"==a?!0:"false"==a?!1:parseInt(a)):"boolean"==typeof a?a:"number"==typeof a?!!a:!0};j.prototype.addRefseqs=function(a){this.allRefs=
this.allRefs||{};var b=this.cookie("refseq");dojo.forEach(a,function(a){this.allRefs[a.name]=a;if(!this.refSeq&&b&&a.name.toLowerCase()==b.toLowerCase())this.refSeq=a},this);this.refSeqOrder=function(){var b;this.config.refSeqOrder?(b=a.slice(0),b.sort("length"==this.config.refSeqOrder?function(a,b){return a.length-b.length}:"length descending"==this.config.refSeqOrder?function(a,b){return b.length-a.length}:"name descending"==this.config.refSeqOrder?function(a,b){return b.name.localeCompare(a.name)}:
function(a,b){return a.name.localeCompare(b.name)})):b=a;return c.map(b,function(a){return a.name})}.call(this);this.refSeq=this.refSeq||this.allRefs[this.refSeqOrder[0]]};j.prototype.getCurrentRefSeq=function(){return this.refSeq||{}};j.prototype.getRefSeq=function(a,b){"string"!=typeof a&&(a=this.refSeqOrder[0]);b(this.allRefs[a])};j.prototype.onFineMove=function(a,b){if(this.locationTrap){var c=this.view.ref.end-this.view.ref.start,e=Math.round((a-this.view.ref.start)/c*this.view.overviewBox.w+
this.view.overviewBox.l),c=Math.round((b-this.view.ref.start)/c*this.view.overviewBox.w+this.view.overviewBox.l);dojo.style(this.locationTrap,{width:c-e+"px",borderBottomWidth:this.view.locationTrapHeight+"px",borderLeftWidth:e+"px",borderRightWidth:this.view.overviewBox.w-c+"px"})}};j.prototype.initTrackMetadata=function(){return this._milestoneFunction("initTrackMetadata",function(a){var b=dojo.map((this.config.trackMetadata||{}).sources||[],function(a){var b=a.url||"trackMeta.csv",c=a.type||(/\.csv$/i.test(b)?
"csv":/\.js(on)?$/i.test(b)?"json":"csv"),a=a["class"]||{csv:"dojox/data/CsvStore",json:"dojox/data/JsonRestStore"}[c];return!a?(console.error("No store class found for type '"+c+"', cannot load track metadata from URL "+b),null):{class_:a,url:b}});require(Array.prototype.concat.apply(["JBrowse/Store/TrackMetaData"],dojo.map(b,function(a){return a.class_})),dojo.hitch(this,function(c){for(var e=[],d=1;d<arguments.length;d++)e.push(new arguments[d]({url:b[d-1].url}));this.trackMetaDataStore=new c(dojo.mixin(dojo.clone(this.config.trackMetadata||
{}),{trackConfigs:this.config.tracks,browser:this,metadataStores:e}));a.resolve({success:!0})}))})};j.prototype.createTrackList=function(){return this._milestoneFunction("createTrack",function(a){var b=!this.config.show_tracklist?"Null":(this.config.trackSelector||{}).type?this.config.trackSelector.type:"Simple";/\//.test(b)||(b="JBrowse/View/TrackList/"+b);require([b],dojo.hitch(this,function(b){this.trackListView=new b(dojo.mixin(dojo.clone(this.config.trackSelector)||{},{trackConfigs:this.config.tracks,
browser:this,trackMetaData:this.trackMetaDataStore}));this.setGlobalKeyboardShortcut("t",this.trackListView,"toggle");this.subscribe("/jbrowse/v1/n/tracks/visibleChanged",dojo.hitch(this,function(){this.cookie("tracks",this.view.visibleTrackNames().join(","),{expires:60})}));this.showTracks(this.config.forceTracks||this.cookie("tracks")||this.config.defaultTracks||"DNA");a.resolve({success:!0})}))})};j.prototype.onVisibleTracksChanged=function(){};j.prototype.showRegion=function(a){var b=Math.round(0.2*
(a.end-a.start));this.navigateToLocation({ref:a.ref,start:a.start-b,end:a.end+b});a.tracks&&this.showTracks(c.map(a.tracks,function(a){return a&&(a.label||a.name)||a}))};j.prototype.navigateTo=function(a){this.afterMilestone("completely initialized",dojo.hitch(this,function(){var b="string"==typeof a?r.parseLocString(a):a;if(b)this.navigateToLocation(b);else if(b=r.matchRefSeqName(a,this.allRefs)){var c;try{c=r.parseLocString(dojo.fromJson(this.cookie("location"))[b.name].l),c.ref=b.name}catch(e){}c?
this.navigateToLocation(c):(c=b.end-b.start,this.navigateToLocation({ref:b.name,start:b.start+0.1*c,end:b.start+0.9*c}))}else this.searchNames(a)}))};j.prototype.navigateToLocation=function(a){var b=a.ref?r.matchRefSeqName(a.ref,this.allRefs):this.refSeq;if(b)a.ref=b.name,a.start=Math.max(0,a.start||0),a.end=Math.max(a.start,Math.min(b.end,a.end||b.end)),a.ref==this.refSeq.name?(this.view.setLocation(this.refSeq,a.start,a.end),this._updateLocationCookies(a)):(b=this.view.visibleTrackNames(),this.refSeq=
this.allRefs[a.ref],this.clearStores(),this.view.setLocation(this.refSeq,a.start,a.end),this._updateLocationCookies(a),this.showTracks(b))};j.prototype.searchNames=function(a){var b=this;this.nameStore.query({name:a}).then(function(c){if(c.length){for(var e,d=0;d<c.length;d++)c[d].name==a&&(e=c[d]);if(!e)for(d=0;d<c.length;d++)c[d].name.toLowerCase()==a.toLowerCase()&&(e=c[d]);e||(e=c[0]);e.location?b.showRegionWithHighlight(e.location):e.multipleLocations&&(new G({browser:b,locationChoices:e.multipleLocations,
title:"Choose "+e.name+" location",prompt:'"'+e.name+'" is found in multiple locations.  Please choose a location to view.'})).show()}else(new H({title:"Not found",content:'Not found: <span class="locString">'+a+"</span>",className:"notfound-dialog"})).show()},function(a){console.error(a);(new H({title:"Error",content:"Error reading from name store."})).show()})};j.prototype.showTracks=function(a){this.afterMilestone("completely initialized",dojo.hitch(this,function(){"string"==typeof a&&(a=a.split(","));
a&&(this.publish("/jbrowse/v1/c/tracks/show",dojo.filter(dojo.map(a,function(a){return this.trackConfigsByName[a]},this),function(a){return a})),this.publish("/jbrowse/v1/n/tracks/visibleChanged"))}))};j.prototype.setGlobalKeyboardShortcut=function(a){this.globalKeyboardShortcuts[a]&&console.warn("WARNING: JBrowse global keyboard shortcut '"+a+"' redefined");var b=dojo.hitch.apply(dojo,Array.prototype.slice.call(arguments,1));this.globalKeyboardShortcuts[a]=b};j.prototype.globalKeyHandler=function(a){if(!C.curNode){var b=
this.globalKeyboardShortcuts[a.keyChar||String.fromCharCode(a.charCode||a.keyCode)];b&&(b.call(this),a.stopPropagation())}};j.prototype.makeShareLink=function(){if("share_link"in this.config&&!this.config.share_link)return null;var a=this,b="#",c=new m({className:"share",innerHTML:'<span class="icon"></span> Share',title:"share this view",onClick:function(){f.value=b;k.href=b;g.show();var a=dojo.position(c.domNode);dojo.style(g.domNode,{top:a.y+a.h+"px",right:0,left:""});f.focus();f.select();d.style.display=
"block";return!1}}),e=dojo.create("div",{innerHTML:"Paste this link in <b>email</b> or <b>IM</b>"}),d=dojo.create("div",{className:"copyReminder",innerHTML:"Press CTRL-C to copy"}),f=dojo.create("input",{type:"text",value:b,size:50,readonly:"readonly",onclick:function(){this.select();d.style.display="block"},onblur:function(){d.style.display="none"}}),k=dojo.create("a",{innerHTML:"Preview",target:"_blank",href:b,style:{display:"block","float":"right"}},e),g=new p({className:"sharePane",title:"Share this view",
draggable:!1,content:[e,f,d],autofocus:!1}),e=function(){b=a.makeCurrentViewURL()};dojo.connect(this,"onCoarseMove",e);this.subscribe("/jbrowse/v1/n/tracks/visibleChanged",e);this.subscribe("/jbrowse/v1/n/globalHighlightChanged",e);return c.domNode};j.prototype.makeCurrentViewURL=function(a){var b=typeof this.config.shareURL;return"function"==b?this.config.shareURL.call(this,this):"string"==b?this.config.shareURL:"".concat(window.location.protocol,"//",window.location.host,window.location.pathname,
"?",dojo.objectToQuery(dojo.mixin(dojo.mixin({},this.config.queryParams||{}),dojo.mixin({loc:this.view.visibleRegionLocString(),tracks:this.view.visibleTrackNames().join(","),highlight:(this.getHighlight()||"").toString()},a||{}))))};j.prototype.makeFullViewLink=function(){var a=this,b=dojo.create("a",{className:"topLink",href:window.location.href,target:"_blank",title:"View in full browser",innerHTML:"Full view"}),c=this.config.makeFullViewURL||this.makeCurrentViewURL,e=function(){b.href=c.call(a,
a)};dojo.connect(this,"onCoarseMove",e);this.subscribe("/jbrowse/v1/n/tracks/visibleChanged",e);this.subscribe("/jbrowse/v1/n/globalHighlightChanged",e);return b};j.prototype.onCoarseMove=function(a,b){var c={start:a,end:b,ref:this.refSeq.name};this.locationBox&&(this.locationBox.set("value",r.assembleLocStringWithLength(c),!1),this.goButton.set("disabled",!0));this._updateRefSeqSelectBox();this.reachedMilestone("completely initialized")&&this._updateLocationCookies(c);this.publish("/jbrowse/v1/n/navigate",
c)};j.prototype._updateRefSeqSelectBox=function(){this.refSeqSelectBox&&(c.some(this.refSeqSelectBox.getOptions(),function(a){return a.value==this.refSeq.name},this)||this.refSeqSelectBox.set("options",this.refSeqSelectBox.getOptions().concat({label:this.refSeq.name,value:this.refSeq.name})),this.refSeqSelectBox.set("value",this.refSeq.name,!1))};j.prototype._updateLocationCookies=function(a){var a="string"==typeof a?a:r.assembleLocString(a),b=dojo.fromJson(this.cookie("location"))||{_version:1};
b._version||(b=this._migrateLocMap(b));b[this.refSeq.name]={l:a,t:Math.round((new Date).getTime()/1E3)-1340211510};b=this._limitLocMap(b,this.config.maxSavedLocations||10);this.cookie("location",dojo.toJson(b),{expires:60});this.cookie("refseq",this.refSeq.name)};j.prototype._migrateLocMap=function(a){var b={_version:1},c;for(c in a)b[c]={l:a[c],t:0};return b};j.prototype._limitLocMap=function(a,b){var c=L.keys(a);if(c.length<=b)return a;a=dojo.clone(a);c=c.sort(function(b,c){return a[c].t-a[b].t}).slice(b-
1);dojo.forEach(c,function(b){delete a[b]});return a};j.prototype.cookie=function(){arguments[0]=this.config.containerID+"-"+arguments[0];"object"==typeof arguments[1]&&(arguments[1]=dojo.toJson(arguments[1]));var a=this.config.cookieSizeLimit||1200;return arguments[1]&&arguments[1].length>a?(console.warn("not setting cookie '"+arguments[0]+"', value too big ("+arguments[1].length+" > "+a+")"),dojo.cookie(arguments[0])):dojo.cookie.apply(dojo.cookie,arguments)};j.prototype.createNavBox=function(a){var a=
dojo.create("div",{id:"navbox",style:{"text-align":"center"}},a),b=dojo.create("div",{className:"locationTrapContainer"},a);this.locationTrap=dojo.create("div",{className:"locationTrap"},b);b=String.fromCharCode(160);b=b+b+b+b;a.appendChild(document.createTextNode(b));var e=document.createElement("input");e.type="image";e.src=this.resolveUrl("img/slide-left.png");e.id="moveLeft";e.className="icon nav";e.style.height="40px";a.appendChild(e);dojo.connect(e,"click",this,function(a){dojo.stopEvent(a);
this.view.slide(0.9)});e=document.createElement("input");e.type="image";e.src=this.resolveUrl("img/slide-right.png");e.id="moveRight";e.className="icon nav";e.style.height="40px";a.appendChild(e);dojo.connect(e,"click",this,function(a){dojo.stopEvent(a);this.view.slide(-0.9)});a.appendChild(document.createTextNode(b));e=document.createElement("input");e.type="image";e.src=this.resolveUrl("img/zoom-out-2.png");e.id="bigZoomOut";e.className="icon nav";e.style.height="40px";a.appendChild(e);dojo.connect(e,
"click",this,function(a){dojo.stopEvent(a);this.view.zoomOut(void 0,void 0,2)});e=document.createElement("input");e.type="image";e.src=this.resolveUrl("img/zoom-out-1.png");e.id="zoomOut";e.className="icon nav";e.style.height="40px";a.appendChild(e);dojo.connect(e,"click",this,function(a){dojo.stopEvent(a);this.view.zoomOut()});e=document.createElement("input");e.type="image";e.src=this.resolveUrl("img/zoom-in-1.png");e.id="zoomIn";e.className="icon nav";e.style.height="40px";a.appendChild(e);dojo.connect(e,
"click",this,function(a){dojo.stopEvent(a);this.view.zoomIn()});e=document.createElement("input");e.type="image";e.src=this.resolveUrl("img/zoom-in-2.png");e.id="bigZoomIn";e.className="icon nav";e.style.height="40px";a.appendChild(e);dojo.connect(e,"click",this,function(a){dojo.stopEvent(a);this.view.zoomIn(void 0,void 0,2)});a.appendChild(document.createTextNode(b));var d=dojo.create("span",{},a);this.locationBox=new q({id:"location",name:"location",style:{width:"25ex"},maxLength:400,searchAttr:"name"},
dojo.create("input",{},a));this.afterMilestone("loadNames",dojo.hitch(this,function(){this.nameStore&&this.locationBox.set("store",this.nameStore)}));this.locationBox.focusNode.spellcheck=!1;dojo.query("div.dijitArrowButton",this.locationBox.domNode).orphan();dojo.connect(this.locationBox.focusNode,"keydown",this,function(a){a.keyCode==dojo.keys.ENTER?(this.locationBox.closeDropDown(!1),this.navigateTo(this.locationBox.get("value")),this.goButton.set("disabled",!0),dojo.stopEvent(a)):this.goButton.set("disabled",
!1)});dojo.connect(a,"onselectstart",function(a){a.stopPropagation();return!0});(function(){var a=eval(this.locationBox.dropDownClass).prototype,b=a._createOption;a._createOption=function(a){var c=b.apply(this,arguments);a.hitLimit&&dojo.addClass(c,"moreMatches");return c};var c=a.onClick;a.onClick=function(a){return dojo.hasClass(a,"moreMatches")?null:c.apply(this,arguments)}}).call(this);this.goButton=new m({label:"Go",onClick:dojo.hitch(this,function(a){this.navigateTo(this.locationBox.get("value"));
this.goButton.set("disabled",!0);dojo.stopEvent(a)})},dojo.create("button",{},a));this.afterMilestone("loadRefSeqs",dojo.hitch(this,function(){if(this.refSeqOrder&&this.refSeqOrder.length){for(var a=this.config.refSeqSelectorMaxSize||30,b=Math.min(a,this.refSeqOrder.length),e=[],f=0;f<b;f++)e.push({label:this.refSeqOrder[f],value:this.refSeqOrder[f]});var k="(first "+b+" ref seqs)";this.refSeqOrder.length>a&&e.push({label:k,value:k,disabled:!0});this.refSeqSelectBox=(new o({name:"refseq",value:this.refSeq?
this.refSeq.name:null,options:e,onChange:dojo.hitch(this,function(a){a==k?this.refSeqSelectBox.set("value",this.refSeq.name):a!=this.refSeq.name&&this.navigateTo(a)})})).placeAt(d)}this.locationBox.domNode.style.width=(this.config.locationBoxLength||function(){if(!this.refSeqOrder.length)return 20;var a=1E3>this.refSeqOrder.length&&function(){var a;c.forEach(this.refSeqOrder,function(b){b=this.allRefs[b];if(!b.length)b.length=b.end-b.start+1;if(!a||a.length<b.length)a=b},this);return a}.call(this)||
this.refSeqOrder.length&&this.allRefs[this.refSeqOrder[this.refSeqOrder.length-1]]||20;return r.assembleLocStringWithLength({ref:a.name,start:a.end-1,end:a.end,length:a.length}).length}.call(this)||20)+"ex"}));return a};j.prototype.getHighlight=function(){return this._highlight||null};j.prototype.setHighlight=function(a){if(a&&a instanceof K)this._highlight=a;else if(a)this._highlight=new K(a);this.publish("/jbrowse/v1/n/globalHighlightChanged",[this._highlight]);return this.getHighlight()};j.prototype._updateHighlightClearButton=
function(){this._highlightClearButton&&this._highlightClearButton.set("disabled",!this._highlight)};j.prototype.clearHighlight=function(){this._highlight&&(delete this._highlight,this.publish("/jbrowse/v1/n/globalHighlightChanged",[]))};j.prototype.setHighlightAndRedraw=function(a){var b=this.getHighlight();b&&this.view.hideRegion(b);this.view.hideRegion(a);this.setHighlight(a);this.view.showVisibleBlocks(!1)};j.prototype.showRegionWithHighlight=function(a){var b=this.getHighlight();b&&this.view.hideRegion(b);
this.view.hideRegion(a);this.setHighlight(a);this.showRegion(a)};return j})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(h,j){j.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var g=j("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],i=g.length,f=function(a,b,c){var e,d=0,f=h.global;if(!c)if(a.length){e=a[d++];try{c=h.scopeMap[e]&&h.scopeMap[e][1]}catch(g){}c=
c||(e in f?f[e]:b?f[e]={}:void 0)}else return f;for(;c&&(e=a[d++]);)c=e in c?c[e]:b?c[e]={}:void 0;return c},d=Object.prototype.toString,b=function(a,b,c){return(c||[]).concat(Array.prototype.slice.call(a,b||0))},e=/\{([^\}]+)\}/g,c={_extraNames:g,_mixin:function(a,b,c){var e,d,f,l={};for(e in b)if(d=b[e],!(e in a)||a[e]!==d&&(!(e in l)||l[e]!==d))a[e]=c?c(d):d;if(j("bug-for-in-skips-shadowed")&&b)for(f=0;f<i;++f)if(e=g[f],d=b[e],!(e in a)||a[e]!==d&&(!(e in l)||l[e]!==d))a[e]=c?c(d):d;return a},
mixin:function(a,b){a||(a={});for(var e=1,d=arguments.length;e<d;e++)c._mixin(a,arguments[e]);return a},setObject:function(a,b,c){var e=a.split("."),a=e.pop();return(c=f(e,!0,c))&&a?c[a]=b:void 0},getObject:function(a,b,c){return f(a.split("."),b,c)},exists:function(a,b){return void 0!==c.getObject(a,!1,b)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===d.call(a)},
isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||c.isArray(a)||c.isFunction(a))},isArrayLike:function(a){return a&&void 0!==a&&!c.isString(a)&&!c.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(c.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!c.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(""+a)},extend:function(a,b){for(var e=1,d=arguments.length;e<d;e++)c._mixin(a.prototype,arguments[e]);return a},_hitchArgs:function(a,b){var e=c._toArray(arguments,
2),d=c.isString(b);return function(){var f=c._toArray(arguments),g=d?(a||h.global)[b]:b;return g&&g.apply(a||this,e.concat(f))}},hitch:function(a,b){if(2<arguments.length)return c._hitchArgs.apply(h,arguments);b||(b=a,a=null);if(c.isString(b)){a=a||h.global;if(!a[b])throw['lang.hitch: scope["',b,'"] is null (scope="',a,'")'].join("");return function(){return a[b].apply(a,arguments||[])}}return!a?b:function(){return b.apply(a,arguments||[])}},delegate:function(){function a(){}return function(b,e){a.prototype=
b;var d=new a;a.prototype=null;e&&c._mixin(d,e);return d}}(),_toArray:j("ie")?function(){function a(a,b,c){c=c||[];for(b=b||0;b<a.length;b++)c.push(a[b]);return c}return function(c){return(c.item?a:b).apply(this,arguments)}}():b,partial:function(a){return c.hitch.apply(h,[null].concat(c._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||c.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);
var b,e,d;if(c.isArray(a)){b=[];for(e=0,d=a.length;e<d;++e)e in a&&b.push(c.clone(a[e]))}else b=a.constructor?new a.constructor:{};return c._mixin(b,a,c.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,b,d){return a.replace(d||e,c.isFunction(b)?b:function(a,e){return c.getObject(e,!1,b)})}};c.mixin(h,c);return c})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(h,
j,g,i){var f,d={},b={},e={config:j,global:this,dijit:d,dojox:b},d={dojo:["dojo",e],dijit:["dijit",d],dojox:["dojox",b]},i=g.map&&g.map[i.id.match(/[^\/]+/)[0]];for(f in i)d[f]?d[f][0]=i[f]:d[f]=[i[f],{}];for(f in d)i=d[f],i[1]._scopeName=i[0],j.noGlobals||(this[i[0]]=i[1]);e.scopeMap=d;e.baseUrl=e.config.baseUrl=g.baseUrl;e.isAsync=g.async;e.locale=j.locale;i="$Rev: 30226 $".match(/\d+/);e.version={major:1,minor:8,patch:3,flag:"",revision:i?+i[0]:NaN,toString:function(){var a=e.version;return a.major+
"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(e);e.exit=function(){};"undefined"!=typeof console||(console={});for(var d="assert,count,debug,dir,dirxml,error,group,groupEnd,info,profile,profileEnd,time,timeEnd,trace,warn,log".split(","),c,i=0;c=d[i++];)console[c]||function(){var a=c+"";console[a]="log"in console?function(){var b=Array.apply({},arguments);b.unshift(a+":");console.log(b.join(" "))}:
function(){};console[a]._fake=!0}();h.add("dojo-debug-messages",!!j.isDebug);e.deprecated=e.experimental=function(){};if(h("dojo-debug-messages"))e.deprecated=function(a,b,c){a="DEPRECATED: "+a;b&&(a+=" "+b);c&&(a+=" -- will be removed in version: "+c);console.warn(a)},e.experimental=function(a,b){var c="EXPERIMENTAL: "+a+" -- APIs subject to change without notice.";b&&(c+=" "+b);console.warn(c)};if(j.modulePaths){e.deprecated("dojo.modulePaths","use paths configuration");h={};for(f in j.modulePaths)h[f.replace(/\./g,
"/")]=j.modulePaths[f];g({paths:h})}e.moduleUrl=function(a,b){e.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var c=null;a&&(c=g.toUrl(a.replace(/\./g,"/")+(b?"/"+b:"")+"/*.*").replace(/\/\*\.\*/,"")+(b?"":"/"));return c};e._hasResource={};return e})},"dojo/has":function(){define(["require","module"],function(h){var j=h.has||function(){};j.add("dom-addeventlistener",!!document.addEventListener);j.add("touch","ontouchstart"in document);j.add("device-width",screen.availWidth||innerWidth);
h=document.createElement("form");j.add("dom-attributes-explicit",0==h.attributes.length);j.add("dom-attributes-specified-flag",0<h.attributes.length&&40>h.attributes.length);j.clearElement=function(g){g.innerHTML="";return g};j.normalize=function(g,i){var f=g.match(/[\?:]|[^:\?]*/g),d=0,b=function(e){var c=f[d++];if(":"==c)return 0;if("?"==f[d++]){if(!e&&j(c))return b();b(!0);return b(e)}return c||0};return(g=b())&&i(g)};j.load=function(g,i,f){g?i([g],f):f()};return j})},"dojo/_base/config":function(){define(["../has",
"require"],function(h,j){var g={},i=j.rawConfig,f;for(f in i)g[f]=i[f];return g})},"dojo/sniff":function(){define(["./has"],function(h){var j=navigator,g=j.userAgent,j=j.appVersion,i=parseFloat(j);h.add("air",0<=g.indexOf("AdobeAIR"));h.add("khtml",0<=j.indexOf("Konqueror")?i:void 0);h.add("webkit",parseFloat(g.split("WebKit/")[1])||void 0);h.add("chrome",parseFloat(g.split("Chrome/")[1])||void 0);h.add("safari",0<=j.indexOf("Safari")&&!h("chrome")?parseFloat(j.split("Version/")[1]):void 0);h.add("mac",
0<=j.indexOf("Macintosh"));h.add("quirks","BackCompat"==document.compatMode);h.add("ios",/iPhone|iPod|iPad/.test(g));h.add("android",parseFloat(g.split("Android ")[1])||void 0);if(!h("webkit")){0<=g.indexOf("Opera")&&h.add("opera",9.8<=i?parseFloat(g.split("Version/")[1])||i:i);0<=g.indexOf("Gecko")&&!h("khtml")&&!h("webkit")&&h.add("mozilla",i);h("mozilla")&&h.add("ff",parseFloat(g.split("Firefox/")[1]||g.split("Minefield/")[1])||void 0);if(document.all&&!h("opera"))g=parseFloat(j.split("MSIE ")[1])||
void 0,(j=document.documentMode)&&5!=j&&Math.floor(g)!=j&&(g=j),h.add("ie",g);h.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return h})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./has"],function(h,j,g){function i(a,b,d,f,k){if(f=b.match(/(.*):(.*)/))return b=f[2],f=f[1],e.selector(f,b).call(k,a,d);g("touch")&&(c.test(b)&&(d=w(d)),!g("event-orientationchange")&&"orientationchange"==b&&(b="resize",a=window,d=w(d)));m&&(d=m(d));if(a.addEventListener){var l=
b in p,i=l?p[b]:b;a.addEventListener(i,d,l);return{remove:function(){a.removeEventListener(i,d,l)}}}if(s&&a.attachEvent)return s(a,"on"+b,d);throw Error("Target must be an event emitter");}function f(){this.cancelable=!1}function d(){this.bubbles=!1}var b=window.ScriptEngineMajorVersion;g.add("jscript",b&&b()+ScriptEngineMinorVersion()/10);g.add("event-orientationchange",g("touch")&&!g("android"));g.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);
var e=function(a,b,c,d){return"function"==typeof a.on&&"function"!=typeof b?a.on(b,c):e.parse(a,b,c,i,d,this)};e.pausable=function(a,b,c,d){var f,a=e(a,b,function(){if(!f)return c.apply(this,arguments)},d);a.pause=function(){f=!0};a.resume=function(){f=!1};return a};e.once=function(a,b,c){var d=e(a,b,function(){d.remove();return c.apply(this,arguments)});return d};e.parse=function(a,b,c,e,d,f){if(b.call)return b.call(f,a,c);if(-1<b.indexOf(",")){for(var b=b.split(/\s*,\s*/),k=[],g=0,l;l=b[g++];)k.push(e(a,
l,c,d,f));k.remove=function(){for(var a=0;a<k.length;a++)k[a].remove()};return k}return e(a,b,c,d,f)};var c=/^touch/;e.selector=function(a,b,c){return function(d,f){function k(b){for(g=g&&g.matches?g:j.query;!g.matches(b,a,d);)if(b==d||!1===c||!(b=b.parentNode)||1!=b.nodeType)return;return b}var g="function"==typeof a?{matches:a}:this,l=b.bubble;return l?e(d,l(k),f):e(d,b,function(a){var b=k(a.target);return b&&f.call(b,a)})}};var a=[].slice,k=e.emit=function(b,c,e){var k=a.call(arguments,2),g="on"+
c;if("parentNode"in b){var l=k[0]={},p;for(p in e)l[p]=e[p];l.preventDefault=f;l.stopPropagation=d;l.target=b;l.type=c;e=l}do b[g]&&b[g].apply(b,k);while(e&&e.bubbles&&(b=b.parentNode));return e&&e.cancelable&&e},p={};if(!g("event-stopimmediatepropagation"))var q=function(){this.modified=this.immediatelyStopped=!0},m=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=q,a.apply(this,arguments)}};if(g("dom-addeventlistener"))p={focusin:"focus",focusout:"blur"},
e.emit=function(a,b,c){if(a.dispatchEvent&&document.createEvent){var d=a.ownerDocument.createEvent("HTMLEvents");d.initEvent(b,!!c.bubbles,!!c.cancelable);for(var f in c)f in d||(d[f]=c[f]);return a.dispatchEvent(d)&&d}return k.apply(e,arguments)};else{e._fixEvent=function(a,b){if(!a)a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event;if(!a)return a;o&&a.type==o.type&&(a=o);if(!a.target){a.target=a.srcElement;a.currentTarget=b||a.srcElement;if("mouseover"==a.type)a.relatedTarget=a.fromElement;
if("mouseout"==a.type)a.relatedTarget=a.toElement;if(!a.stopPropagation)a.stopPropagation=u,a.preventDefault=r;switch(a.type){case "keypress":var c="charCode"in a?a.charCode:a.keyCode;10==c?(c=0,a.keyCode=13):13==c||27==c?c=0:3==c&&(c=99);a.charCode=c;c=a;c.keyChar=c.charCode?String.fromCharCode(c.charCode):"";c.charOrCode=c.keyChar||c.keyCode}}return a};var o,l=function(a){this.handle=a};l.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var n=function(a){return function(b){var b=
e._fixEvent(b,this),c=a.call(this,b);b.modified&&(o||setTimeout(function(){o=null}),o=b);return c}},s=function(a,b,c){c=n(c);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>g("jscript"))&&!g("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var e=a[b];if(!e||!e.listeners){var d=e,e=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
e.listeners=[];a[b]=e;e.global=this;d&&e.listeners.push(_dojoIEListeners_.push(d)-1)}e.listeners.push(a=e.global._dojoIEListeners_.push(c)-1);return new l(a)}return h.after(a,b,c,!0)},u=function(){this.cancelBubble=!0},r=e._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1}}if(g("touch"))var v=function(){},t=window.orientation,w=function(a){return function(b){var c=b.corrected;if(!c){var e=b.type;try{delete b.type}catch(d){}b.type?
(v.prototype=b,c=new v,c.preventDefault=function(){b.preventDefault()},c.stopPropagation=function(){b.stopPropagation()}):(c=b,c.type=e);b.corrected=c;if("resize"==e){if(t==window.orientation)return null;t=window.orientation;c.type="orientationchange";return a.call(this,c)}if(!("rotation"in c))c.rotation=0,c.scale=1;var e=c.changedTouches[0],f;for(f in e)delete c[f],c[f]=e[f]}return a.call(this,c)}};return e})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise",
"./promise/instrumentation"],function(h,j,g,i,f){var d=Object.freeze||function(){},b=function(a,b,c,d,f){2===b&&k.instrumentRejected&&0===a.length&&k.instrumentRejected(c,!1,d,f);for(f=0;f<a.length;f++)e(a[f],b,c,d)},e=function(b,e,d,f){var g=b[e],i=b.deferred;if(g)try{var s=g(d);if(0===e)"undefined"!==typeof s&&a(i,e,s);else{if(s&&"function"===typeof s.then){b.cancel=s.cancel;s.then(c(i,1),c(i,2),c(i,0));return}a(i,1,s)}}catch(u){a(i,2,u)}else a(i,e,d);2===e&&k.instrumentRejected&&k.instrumentRejected(d,
!!g,f,i.promise)},c=function(b,c){return function(e){a(b,c,e)}},a=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);break;case 1:a.resolve(c);break;case 2:a.reject(c)}},k=function(a){var c=this.promise=new i,f=this,o,l,n,s=!1,u=[];Error.captureStackTrace&&(Error.captureStackTrace(f,k),Error.captureStackTrace(c,k));this.isResolved=c.isResolved=function(){return 1===o};this.isRejected=c.isRejected=function(){return 2===o};this.isFulfilled=c.isFulfilled=function(){return!!o};this.isCanceled=
c.isCanceled=function(){return s};this.progress=function(a,e){if(o){if(!0===e)throw Error("This deferred has already been fulfilled.");return c}b(u,0,a,null,f);return c};this.resolve=function(a,e){if(o){if(!0===e)throw Error("This deferred has already been fulfilled.");return c}b(u,o=1,l=a,null,f);u=null;return c};var h=this.reject=function(a,e){if(o){if(!0===e)throw Error("This deferred has already been fulfilled.");return c}Error.captureStackTrace&&Error.captureStackTrace(n={},h);b(u,o=2,l=a,n,
f);u=null;return c};this.then=c.then=function(a,b,d){var f=[d,a,b];f.cancel=c.cancel;f.deferred=new k(function(a){return f.cancel&&f.cancel(a)});o&&!u?e(f,o,l,n):u.push(f);return f.deferred.promise};this.cancel=c.cancel=function(b,c){if(o){if(!0===c)throw Error("This deferred has already been fulfilled.");}else{if(a)var e=a(b),b="undefined"===typeof e?b:e;s=!0;if(o){if(2===o&&l===b)return b}else return"undefined"===typeof b&&(b=new g),h(b),b}};d(c)};k.prototype.toString=function(){return"[object Deferred]"};
f&&f(k);return k})},"dojo/errors/CancelError":function(){define(["./create"],function(h){return h("CancelError",null,null,{dojoType:"cancel"})})},"dojo/errors/create":function(){define(["../_base/lang"],function(h){return function(j,g,i,f){var i=i||Error,d=function(b){if(i===Error){Error.captureStackTrace&&Error.captureStackTrace(this,d);var e=Error.call(this,b),c;for(c in e)e.hasOwnProperty(c)&&(this[c]=e[c]);this.message=b;this.stack=e.stack}else i.apply(this,arguments);g&&g.apply(this,arguments)};
d.prototype=h.delegate(i.prototype,f);d.prototype.name=j;return d.prototype.constructor=d}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(h){function j(){throw new TypeError("abstract");}return h.extend(function(){},{then:function(){j()},cancel:function(){j()},isResolved:function(){j()},isRejected:function(){j()},isFulfilled:function(){j()},isCanceled:function(){j()},always:function(g){return this.then(g,g)},otherwise:function(g){return this.then(null,g)},trace:function(){return this},
traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(h,j,g,i){function f(a,b,c){var e="";a&&a.stack&&(e+=a.stack);b&&b.stack&&(e+="\n    ----------------------------------------\n    rejected"+b.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));c&&c.stack&&(e+="\n    ----------------------------------------\n"+c.stack);console.error(a,e)}function d(a,
b,c,e){b||f(a,c,e)}function b(b,d,f,g){d?i.some(c,function(a,e){if(a.error===b)return c.splice(e,1),!0}):i.some(c,function(a){return a.error===b})||c.push({error:b,rejection:f,deferred:g,timestamp:(new Date).getTime()});a||(a=setTimeout(e,k))}function e(){var b=(new Date).getTime(),d=b-k;c=i.filter(c,function(a){return a.timestamp<d?(f(a.error,a.rejection,a.deferred),!1):!0});a=c.length?setTimeout(e,c[0].timestamp+k-b):!1}var c=[],a=!1,k=1E3;return function(a){var c=j("config-useDeferredInstrumentation");
if(c){h.on("resolved",g.hitch(console,"log","resolved"));h.on("rejected",g.hitch(console,"log","rejected"));h.on("progress",g.hitch(console,"log","progress"));var e=[];"string"===typeof c&&(e=c.split(","),c=e.shift());if("report-rejections"===c)a.instrumentRejected=d;else if("report-unhandled-rejections"===c||!0===c||1===c)a.instrumentRejected=b,k=parseInt(e[0],10)||k;else throw Error("Unsupported instrumentation usage <"+c+">");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise",
"../Evented"],function(h,j,g){function i(b){setTimeout(function(){d.apply(f,b)},0)}var f=new g,d=f.emit;f.emit=null;j.prototype.trace=function(){var b=h._toArray(arguments);this.then(function(e){i(["resolved",e].concat(b))},function(e){i(["rejected",e].concat(b))},function(e){i(["progress",e].concat(b))});return this};j.prototype.traceRejected=function(){var b=h._toArray(arguments);this.otherwise(function(e){i(["rejected",e].concat(b))});return this};return f})},"dojo/Evented":function(){define(["./aspect",
"./on"],function(h,j){function g(){}var i=h.after;g.prototype={on:function(f,d){return j.parse(this,f,d,function(b,e){return i(b,"on"+e,d,!0)})},emit:function(f,d){var b=[this];b.push.apply(b,arguments);return j.emit.apply(j,b)}};return g})},"dojo/aspect":function(){define([],function(){function h(b,c,a,d){var f=b[c],g="around"==c,m;if(g){var o=a(function(){return f.advice(this,arguments)});m={remove:function(){m.cancelled=!0},advice:function(a,b){return m.cancelled?f.advice(a,b):o.apply(a,b)}}}else m=
{remove:function(){var a=m.previous,d=m.next;if(!d&&!a)delete b[c];else if(a?a.next=d:b[c]=d,d)d.previous=a},id:i++,advice:a,receiveArguments:d};if(f&&!g)if("after"==c){for(;f.next&&(f=f.next););f.next=m;m.previous=f}else{if("before"==c)b[c]=m,m.next=f,f.previous=m}else b[c]=m;return m}function j(b){return function(c,a,d,f){var q=c[a],m;if(!q||q.target!=c){c[a]=m=function(){for(var a=i,b=arguments,c=m.before;c;)b=c.advice.apply(this,b)||b,c=c.next;if(m.around)var e=m.around.advice(this,b);for(c=m.after;c&&
c.id<a;){if(c.receiveArguments)var d=c.advice.apply(this,b),e=d===g?e:d;else e=c.advice.call(this,e,b);c=c.next}return e};if(q)m.around={advice:function(a,b){return q.apply(a,b)}};m.target=c}c=h(m||q,b,d,f);d=null;return c}}var g,i=0,f=j("after"),d=j("before"),b=j("around");return{before:d,around:b,after:f}})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(h,j,g){function i(a){return b[a]=new Function("item","index","array",a)}function f(a){var c=!a;return function(e,
d,f){var g=0,l=e&&e.length||0,n;l&&"string"==typeof e&&(e=e.split(""));"string"==typeof d&&(d=b[d]||i(d));if(f)for(;g<l;++g){if(n=!d.call(f,e[g],g,e),a^n)return!n}else for(;g<l;++g)if(n=!d(e[g],g,e),a^n)return!n;return c}}function d(a){var b=1,d=0,f=0;a||(b=d=f=-1);return function(g,i,l,n){if(n&&0<b)return c.lastIndexOf(g,i,l);var n=g&&g.length||0,s=a?n+f:d;l===e?l=a?d:n+f:0>l?(l=n+l,0>l&&(l=d)):l=l>=n?n+f:l;for(n&&"string"==typeof g&&(g=g.split(""));l!=s;l+=b)if(g[l]==i)return l;return-1}}var b=
{},e,c={every:f(!1),some:f(!0),indexOf:d(!0),lastIndexOf:d(!1),forEach:function(a,c,e){var d=0,f=a&&a.length||0;f&&"string"==typeof a&&(a=a.split(""));"string"==typeof c&&(c=b[c]||i(c));if(e)for(;d<f;++d)c.call(e,a[d],d,a);else for(;d<f;++d)c(a[d],d,a)},map:function(a,c,e,d){var f=0,g=a&&a.length||0,d=new (d||Array)(g);g&&"string"==typeof a&&(a=a.split(""));"string"==typeof c&&(c=b[c]||i(c));if(e)for(;f<g;++f)d[f]=c.call(e,a[f],f,a);else for(;f<g;++f)d[f]=c(a[f],f,a);return d},filter:function(a,c,
e){var d=0,f=a&&a.length||0,g=[],l;f&&"string"==typeof a&&(a=a.split(""));"string"==typeof c&&(c=b[c]||i(c));if(e)for(;d<f;++d)l=a[d],c.call(e,l,d,a)&&g.push(l);else for(;d<f;++d)l=a[d],c(l,d,a)&&g.push(l);return g},clearCache:function(){b={}}};g.mixin(h,c);return c})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(h,j,g){h.DeferredList=function(i,f,d,b){var e=[];j.call(this);var c=this;0===i.length&&!f&&this.resolve([0,[]]);var a=0;g.forEach(i,
function(g,p){function q(b,d){e[p]=[b,d];a++;a===i.length&&c.resolve(e)}g.then(function(a){f?c.resolve([p,a]):q(!0,a)},function(a){d?c.reject(a):q(!1,a);if(b)return null;throw a;})})};h.DeferredList.prototype=new j;h.DeferredList.prototype.gatherResults=function(i){i=new h.DeferredList(i,!1,!0,!1);i.addCallback(function(f){var d=[];g.forEach(f,function(b){d.push(b[1])});return d});return i};return h.DeferredList})},"dojo/_base/Deferred":function(){define("./kernel,../Deferred,../promise/Promise,../errors/CancelError,../has,./lang,../when".split(","),
function(h,j,g,i,f,d,b){var e=function(){},c=Object.freeze||function(){},a=h.Deferred=function(b){function p(a){if(o)throw Error("This deferred has already been resolved");m=a;o=!0;q()}function q(){for(var a;!a&&s;){var b=s;s=s.next;if(a=b.progress==e)o=!1;var c=l?b.error:b.resolved;f("config-useDeferredInstrumentation")&&l&&j.instrumentRejected&&j.instrumentRejected(m,!!c);if(c)try{var g=c(m);g&&"function"===typeof g.then?g.then(d.hitch(b.deferred,"resolve"),d.hitch(b.deferred,"reject"),d.hitch(b.deferred,
"progress")):(c=a&&void 0===g,a&&!c&&(l=g instanceof Error),b.deferred[c&&l?"reject":"resolve"](c?m:g))}catch(k){b.deferred.reject(k)}else l?b.deferred.reject(m):b.deferred.resolve(m)}}var m,o,l,n,s,u=this.promise=new g;this.resolve=this.callback=function(a){this.fired=0;this.results=[a,null];p(a)};this.reject=this.errback=function(a){l=!0;this.fired=1;f("config-useDeferredInstrumentation")&&j.instrumentRejected&&j.instrumentRejected(a,!!s);p(a);this.results=[null,a]};this.progress=function(a){for(var b=
s;b;){var c=b.progress;c&&c(a);b=b.next}};this.addCallbacks=function(a,b){this.then(a,b,e);return this};u.then=this.then=function(b,c,d){var f=d==e?this:new a(u.cancel),b={resolved:b,error:c,progress:d,deferred:f};s?n=n.next=b:s=n=b;o&&q();return f.promise};var h=this;u.cancel=this.cancel=function(){if(!o){var a=b&&b(h);if(!o)a instanceof Error||(a=new i(a)),a.log=!1,h.reject(a)}};c(u)};d.extend(a,{addCallback:function(a){return this.addCallbacks(d.hitch.apply(h,arguments))},addErrback:function(a){return this.addCallbacks(null,
d.hitch.apply(h,arguments))},addBoth:function(a){var b=d.hitch.apply(h,arguments);return this.addCallbacks(b,b)},fired:-1});a.when=h.when=b;return a})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(h,j){return function(g,i,f,d){var b=g&&"function"===typeof g.then,e=b&&g instanceof j;if(b){if(!e)b=new h(g.cancel),g.then(b.resolve,b.reject,b.progress),g=b.promise}else return i?i(g):(new h).resolve(g);return i||f||d?g.then(i,f,d):g}})},"dojo/topic":function(){define(["./Evented"],
function(h){var j=new h;return{publish:function(g,i){return j.emit.apply(j,arguments)},subscribe:function(g,i){return j.on.apply(j,arguments)}}})},"JBrowse/has":function(){define(["dojo/has"],function(h){h.add("typed-arrays",function(){try{return!!new Uint8Array(1)}catch(h){}return!1});h.add("canvas",function(){try{return!!document.createElement("canvas")}catch(h){}return!1});h.add("inaccurate-html-layout",function(){return h("safari")||9>h("ie")},!0);return h})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel,dojo/_base/lang,../_Widget,../_Container,./_ContentPaneResizeMixin,dojo/string,dojo/html,dojo/i18n!../nls/loading,dojo/_base/array,dojo/_base/declare,dojo/_base/Deferred,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/_base/xhr,dojo/i18n,dojo/when".split(","),
function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l,n){return a("dijit.layout.ContentPane",[g,i,f],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:h._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},
onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,create:function(a,b){if((!a||!a.template)&&b&&!("href"in a)&&!("content"in a)){for(var b=p.byId(b),c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);a=j.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=l.getLocalization("dijit","loading",this.lang);this.loadingMessage=d.substitute(this.loadingMessage,a);this.errorMessage=d.substitute(this.errorMessage,
a)},buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode;this.domNode.title="";q.get(this.domNode,"role")||this.domNode.setAttribute("role","group")},startup:function(){this.inherited(arguments);this._contentSetter&&c.forEach(this._contentSetter.parseResults,function(a){if(!a._started&&!a._destroyed&&j.isFunction(a.startup))a.startup(),a._started=!0},this)},_startChildren:function(){c.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&
j.isFunction(a.startup))a.startup(),a._started=!0});this._contentSetter&&c.forEach(this._contentSetter.parseResults,function(a){if(!a._started&&!a._destroyed&&j.isFunction(a.startup))a.startup(),a._started=!0},this)},setHref:function(a){h.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new k(j.hitch(this,"cancel"));this.onLoadDeferred.then(j.hitch(this,"onLoad"));
this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){h.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href","");this.cancel();this.onLoadDeferred=new k(j.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(j.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new k(j.hitch(this,"cancel"));this.onLoadDeferred.then(j.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};j.isObject(this.ioArgs)&&j.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||o.get)(b),e;c.then(function(b){e=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(c){a._onError("Content",
c)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return e});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+
a.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;c.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(c.forEach(b.parseResults,function(b){if(!b._destroyed)b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0}),delete b.parseResults);a||m.empty(this.containerNode);delete this._singleChild},_setContent:function(a,c){this.destroyDescendants();
var e=this._contentSetter;if(!(e&&e instanceof b._ContentSetter))e=this._contentSetter=new b._ContentSetter({node:this.containerNode,_onError:j.hitch(this,this._onError),onContentError:j.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+this.id+" could not change content due to "+b.message,b)}})});var d=j.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,
startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),d=e.set(j.isObject(a)&&a.domNode?a.domNode:a,d),f=this;return n(d&&d.then?d:e.parseDeferred,function(){delete f._contentSetterParams;c||(f._started&&(f._startChildren(),f._scheduleLayout()),f._onLoadHandler(a))})},_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},
onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Widget":function(){define("dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/query,dojo/ready,./registry,./_WidgetBase,./_OnDijitClickMixin,./_FocusMixin,dojo/uacss,./hccss".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p,q){function m(){}function o(a){return function(c,e,d,f){return c&&"string"==typeof e&&c[e]==m?c.on(e.substring(2).toLowerCase(),
b.hitch(d,f)):a.apply(g,arguments)}}h.around(g,"connect",o);d.connect&&h.around(d,"connect",o);h=i("dijit._Widget",[k,p,q],{onClick:m,onDblClick:m,onKeyDown:m,onKeyPress:m,onKeyUp:m,onMouseDown:m,onMouseMove:m,onMouseOut:m,onMouseOver:m,onMouseLeave:m,onMouseEnter:m,onMouseUp:m,constructor:function(a){this._toConnect={};for(var b in a)this[b]===m&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,
this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===m?g.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){d.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,b)},attr:function(a,b){if(j.isDebug){var c=arguments.callee._ach||(arguments.callee._ach={}),e=(arguments.callee.caller||"unknown caller").toString();
c[e]||(d.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+e,"","2.0"),c[e]=!0)}return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){d.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?e("[widgetId]",this.containerNode).map(a.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},
onClose:function(){return!0}});f("dijit-legacy-requires")&&c(0,function(){require(["dijit/_base"])});return h})},"dojo/_base/connect":function(){define("./kernel,../on,../topic,../aspect,./event,../mouse,./sniff,./lang,../keys".split(","),function(h,j,g,i,f,d,b,e){function c(a,b,c,f,g){f=e.hitch(c,f);if(!a||!a.addEventListener&&!a.attachEvent)return i.after(a||h.global,b,f,!0);"string"==typeof b&&"on"==b.substring(0,2)&&(b=b.substring(2));if(!a)a=h.global;if(!g)switch(b){case "keypress":b=m;break;
case "mouseenter":b=d.enter;break;case "mouseleave":b=d.leave}return j(a,b,f,g)}function a(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}b.add("events-keypress-typed",function(){var a={charCode:0};try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(c){}return 0==a.charCode&&!b("opera")});var k={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,
221:93,222:39,229:113},p=b("mac")?"metaKey":"ctrlKey",q=function(b,c){var d=e.mixin({},b,c);a(d);d.preventDefault=function(){b.preventDefault()};d.stopPropagation=function(){b.stopPropagation()};return d},m;m=b("events-keypress-typed")?function(a,c){var e=j(a,"keydown",function(a){var e=a.keyCode,d=13!=e&&32!=e&&(27!=e||!b("ie"))&&(48>e||90<e)&&(96>e||111<e)&&(186>e||192<e)&&(219>e||222<e)&&229!=e;if(d||a.ctrlKey){d=d?0:e;if(a.ctrlKey){if(3==e||13==e)return c.call(a.currentTarget,a);d=95<d&&106>d?
d-48:!a.shiftKey&&65<=d&&90>=d?d+32:k[d]||d}e=q(a,{type:"keypress",faux:!0,charCode:d});c.call(a.currentTarget,e);if(b("ie"))try{a.keyCode=e.keyCode}catch(f){}}}),d=j(a,"keypress",function(a){var b=a.charCode,a=q(a,{charCode:32<=b?b:0,faux:!0});return c.call(this,a)});return{remove:function(){e.remove();d.remove()}}}:b("opera")?function(a,b){return j(a,"keypress",function(a){var c=a.which;3==c&&(c=99);c=32>c&&!a.shiftKey?0:c;a.ctrlKey&&!a.shiftKey&&65<=c&&90>=c&&(c+=32);return b.call(this,q(a,{charCode:c}))})}:
function(b,c){return j(b,"keypress",function(b){a(b);return c.call(this,b)})};var o={_keypress:m,connect:function(a,b,e,d,f){var g=arguments,k=[],i=0;k.push("string"==typeof g[0]?null:g[i++],g[i++]);var p=g[i+1];k.push("string"==typeof p||"function"==typeof p?g[i++]:null,g[i++]);for(p=g.length;i<p;i++)k.push(g[i]);return c.apply(this,k)},disconnect:function(a){a&&a.remove()},subscribe:function(a,b,c){return g.subscribe(a,e.hitch(b,c))},publish:function(a,b){return g.publish.apply(g,[a].concat(b))},
connectPublisher:function(a,b,c){var e=function(){o.publish(a,arguments)};return c?o.connect(b,c,e):o.connect(b,e)},isCopyKey:function(a){return a[p]}};o.unsubscribe=o.disconnect;e.mixin(h,o);return o})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(h,j,g,i){if(j._fixEvent){var f=j._fixEvent;j._fixEvent=function(b,e){(b=f(b,e))&&i.normalizeEvent(b);return b}}var d={fix:function(b,e){return j._fixEvent?j._fixEvent(b,e):b},stop:function(b){g("dom-addeventlistener")||
b&&b.preventDefault?(b.preventDefault(),b.stopPropagation()):(b=b||window.event,b.cancelBubble=!0,j._preventDefault.call(b))}};h.fixEvent=d.fix;h.stopEvent=d.stop;return d})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(h,j,g,i){function f(a,b,c,e,d,f){f=f||"px";a=a.style;if(!isNaN(b))a.left=b+f;if(!isNaN(c))a.top=c+f;if(0<=e)a.width=e+f;if(0<=d)a.height=d+f}function d(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&
"button"==(a.getAttribute("type")||"").toLowerCase()}function b(a){return"border-box"==e.boxModel||"table"==a.tagName.toLowerCase()||d(a)}var e={boxModel:"content-box"};if(h("ie"))e.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";e.getPadExtents=function(a,b){var a=g.byId(a),c=b||i.getComputedStyle(a),e=i.toPixelValue,d=e(a,c.paddingLeft),f=e(a,c.paddingTop),l=e(a,c.paddingRight),c=e(a,c.paddingBottom);return{l:d,t:f,r:l,b:c,w:d+l,h:f+c}};e.getBorderExtents=function(a,b){var a=
g.byId(a),c=i.toPixelValue,e=b||i.getComputedStyle(a),d="none"!=e.borderLeftStyle?c(a,e.borderLeftWidth):0,f="none"!=e.borderTopStyle?c(a,e.borderTopWidth):0,l="none"!=e.borderRightStyle?c(a,e.borderRightWidth):0,c="none"!=e.borderBottomStyle?c(a,e.borderBottomWidth):0;return{l:d,t:f,r:l,b:c,w:d+l,h:f+c}};e.getPadBorderExtents=function(a,b){var a=g.byId(a),c=b||i.getComputedStyle(a),d=e.getPadExtents(a,c),c=e.getBorderExtents(a,c);return{l:d.l+c.l,t:d.t+c.t,r:d.r+c.r,b:d.b+c.b,w:d.w+c.w,h:d.h+c.h}};
e.getMarginExtents=function(a,b){var a=g.byId(a),c=b||i.getComputedStyle(a),e=i.toPixelValue,d=e(a,c.marginLeft),f=e(a,c.marginTop),l=e(a,c.marginRight),c=e(a,c.marginBottom);return{l:d,t:f,r:l,b:c,w:d+l,h:f+c}};e.getMarginBox=function(a,b){var a=g.byId(a),c=b||i.getComputedStyle(a),d=e.getMarginExtents(a,c),f=a.offsetLeft-d.l,o=a.offsetTop-d.t,l=a.parentNode,n=i.toPixelValue;if(h("mozilla")){var s=parseFloat(c.left),c=parseFloat(c.top);!isNaN(s)&&!isNaN(c)?(f=s,o=c):l&&l.style&&(l=i.getComputedStyle(l),
"visible"!=l.overflow&&(f+="none"!=l.borderLeftStyle?n(a,l.borderLeftWidth):0,o+="none"!=l.borderTopStyle?n(a,l.borderTopWidth):0))}else if((h("opera")||8==h("ie")&&!h("quirks"))&&l)l=i.getComputedStyle(l),f-="none"!=l.borderLeftStyle?n(a,l.borderLeftWidth):0,o-="none"!=l.borderTopStyle?n(a,l.borderTopWidth):0;return{l:f,t:o,w:a.offsetWidth+d.w,h:a.offsetHeight+d.h}};e.getContentBox=function(a,b){var a=g.byId(a),c=b||i.getComputedStyle(a),d=a.clientWidth,f=e.getPadExtents(a,c),o=e.getBorderExtents(a,
c);d?(c=a.clientHeight,o.w=o.h=0):(d=a.offsetWidth,c=a.offsetHeight);h("opera")&&(f.l+=o.l,f.t+=o.t);return{l:f.l,t:f.t,w:d-f.w-o.w,h:c-f.h-o.h}};e.setContentSize=function(a,c,d){var a=g.byId(a),i=c.w,c=c.h;b(a)&&(d=e.getPadBorderExtents(a,d),0<=i&&(i+=d.w),0<=c&&(c+=d.h));f(a,NaN,NaN,i,c)};var c={l:0,t:0,w:0,h:0};e.setMarginBox=function(a,k,p){var a=g.byId(a),q=p||i.getComputedStyle(a),p=k.w,m=k.h,o=b(a)?c:e.getPadBorderExtents(a,q),q=e.getMarginExtents(a,q);if(h("webkit")&&d(a)){var l=a.style;if(0<=
p&&!l.width)l.width="4px";if(0<=m&&!l.height)l.height="4px"}0<=p&&(p=Math.max(p-o.w-q.w,0));0<=m&&(m=Math.max(m-o.h-q.h,0));f(a,k.l,k.t,p,m)};e.isBodyLtr=function(a){a=a||j.doc;return"ltr"==(j.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};e.docScroll=function(a){var a=a||j.doc,b=j.doc.parentWindow||j.doc.defaultView;return"pageXOffset"in b?{x:b.pageXOffset,y:b.pageYOffset}:(b=h("quirks")?j.body(a):a.documentElement)&&{x:e.fixIeBiDiScrollLeft(b.scrollLeft||0,a),y:b.scrollTop||0}};if(h("ie"))e.getIeDocumentElementOffset=
function(a){a=a||j.doc;a=a.documentElement;if(8>h("ie")){var b=a.getBoundingClientRect(),c=b.left,b=b.top;7>h("ie")&&(c+=a.clientLeft,b+=a.clientTop);return{x:0>c?0:c,y:0>b?0:b}}return{x:0,y:0}};e.fixIeBiDiScrollLeft=function(a,b){var b=b||j.doc,c=h("ie");if(c&&!e.isBodyLtr(b)){var d=h("quirks"),f=d?j.body(b):b.documentElement,g=j.global;6==c&&!d&&g.frameElement&&f.scrollHeight>f.clientHeight&&(a+=f.clientLeft);return 8>c||d?a+f.clientWidth-f.scrollWidth:-a}return a};e.position=function(a,b){var a=
g.byId(a),c=j.body(a.ownerDocument),d=a.getBoundingClientRect(),d={x:d.left,y:d.top,w:d.right-d.left,h:d.bottom-d.top};if(9>h("ie")){var f=e.getIeDocumentElementOffset(a.ownerDocument);d.x-=f.x+(h("quirks")?c.clientLeft+c.offsetLeft:0);d.y-=f.y+(h("quirks")?c.clientTop+c.offsetTop:0)}b&&(c=e.docScroll(a.ownerDocument),d.x+=c.x,d.y+=c.y);return d};e.getMarginSize=function(a,b){var a=g.byId(a),c=e.getMarginExtents(a,b||i.getComputedStyle(a)),d=a.getBoundingClientRect();return{w:d.right-d.left+c.w,h:d.bottom-
d.top+c.h}};e.normalizeEvent=function(a){if(!("layerX"in a))a.layerX=a.offsetX,a.layerY=a.offsetY;if(!h("dom-addeventlistener")){var b=a.target,b=b&&b.ownerDocument||document,c=h("quirks")?b.body:b.documentElement,d=e.getIeDocumentElementOffset(b);a.pageX=a.clientX+e.fixIeBiDiScrollLeft(c.scrollLeft||0,b)-d.x;a.pageY=a.clientY+(c.scrollTop||0)-d.y}};return e})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(h,j,g){var i={global:h.global,doc:this.document||null,body:function(f){f=
f||h.doc;return f.body||f.getElementsByTagName("body")[0]},setContext:function(f,d){h.global=i.global=f;h.doc=i.doc=d},withGlobal:function(f,d,b,e){var c=h.global;try{return h.global=i.global=f,i.withDoc.call(null,f.document,d,b,e)}finally{h.global=i.global=c}},withDoc:function(f,d,b,e){var c=i.doc,a=g("quirks"),k=g("ie"),p,q,m;try{h.doc=i.doc=f;h.isQuirks=g.add("quirks","BackCompat"==h.doc.compatMode,!0,!0);if(g("ie")&&(m=f.parentWindow)&&m.navigator)p=parseFloat(m.navigator.appVersion.split("MSIE ")[1])||
void 0,(q=f.documentMode)&&5!=q&&Math.floor(p)!=q&&(p=q),h.isIE=g.add("ie",p,!0,!0);b&&"string"==typeof d&&(d=b[d]);return d.apply(b,e||[])}finally{h.doc=i.doc=c,h.isQuirks=g.add("quirks",a,!0,!0),h.isIE=g.add("ie",k,!0,!0)}}};j.mixin(h,i);return i})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(h,j){if(7>=h("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(g){}var i={};i.byId=h("ie")?function(d,b){if("string"!=typeof d)return d;var e=b||j.doc,c=d&&e.getElementById(d);
if(c&&(c.attributes.id.value==d||c.id==d))return c;e=e.all[d];if(!e||e.nodeName)e=[e];for(var a=0;c=e[a++];)if(c.attributes&&c.attributes.id&&c.attributes.id.value==d||c.id==d)return c}:function(d,b){return("string"==typeof d?(b||j.doc).getElementById(d):d)||null};i.isDescendant=function(d,b){try{d=i.byId(d);for(b=i.byId(b);d;){if(d==b)return!0;d=d.parentNode}}catch(e){}return!1};h.add("css-user-select",function(d,b,e){if(!e)return!1;var d=e.style,b=["Khtml","O","ms","Moz","Webkit"],e=b.length,c=
"userSelect";do if("undefined"!==typeof d[c])return c;while(e--&&(c=b[e]+"UserSelect"));return!1});var f=h("css-user-select");i.setSelectable=f?function(d,b){i.byId(d).style[f]=b?"":"none"}:function(d,b){var d=i.byId(d),e=d.getElementsByTagName("*"),c=e.length;if(b)for(d.removeAttribute("unselectable");c--;)e[c].removeAttribute("unselectable");else for(d.setAttribute("unselectable","on");c--;)e[c].setAttribute("unselectable","on")};return i})},"dojo/dom-style":function(){define(["./sniff","./dom"],
function(h,j){function g(b,c,e){c=c.toLowerCase();if(h("ie")){if("auto"==e){if("height"==c)return b.offsetHeight;if("width"==c)return b.offsetWidth}if("fontweight"==c)switch(e){case 700:return"bold";default:return"normal"}}c in a||(a[c]=k.test(c));return a[c]?d(b,e):e}var i,f={};i=h("webkit")?function(a){var b;if(1==a.nodeType){var c=a.ownerDocument.defaultView;b=c.getComputedStyle(a,null);if(!b&&a.style)a.style.display="",b=c.getComputedStyle(a,null)}return b||{}}:h("ie")&&(9>h("ie")||h("quirks"))?
function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};f.getComputedStyle=i;var d;d=h("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var c=a.style,e=a.runtimeStyle,d=c.left,f=e.left;e.left=a.currentStyle.left;try{c.left=b,b=c.pixelLeft}catch(g){b=0}c.left=d;e.left=f;return b}:function(a,b){return parseFloat(b)||0};f.toPixelValue=d;var b=
function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return b?{}:null}},e=9>h("ie")||10>h("ie")&&h("quirks")?function(a){try{return b(a).Opacity/100}catch(c){return 1}}:function(a){return i(a).opacity},c=9>h("ie")||10>h("ie")&&h("quirks")?function(a,e){var d=100*e,f=1==e;a.style.zoom=f?"":1;if(b(a))b(a,1).Opacity=d;else{if(f)return e;a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+d+")"}b(a,1).Enabled=!f;if("tr"==a.tagName.toLowerCase())for(d=a.firstChild;d;d=
d.nextSibling)"td"==d.tagName.toLowerCase()&&c(d,e);return e}:function(a,b){return a.style.opacity=b},a={left:!0,top:!0},k=/margin|padding|width|height|max|min|offset/,p=h("ie")?"styleFloat":"cssFloat",q={cssFloat:p,styleFloat:p,"float":p};f.get=function(a,b){var c=j.byId(a),d=arguments.length;if(2==d&&"opacity"==b)return e(c);var b=q[b]||b,k=f.getComputedStyle(c);return 1==d?k:g(c,b,k[b]||c.style[b])};f.set=function(a,b,e){var d=j.byId(a),g=arguments.length,k="opacity"==b,b=q[b]||b;if(3==g)return k?
c(d,e):d.style[b]=e;for(var i in b)f.set(a,i,b[i]);return f.getComputedStyle(d)};return f})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(h,j,g,i,f){function d(b,e){var c=function(a,c){return j(a,b,function(b){if(e)return e(b,c);if(!i.isDescendant(b.relatedTarget,a))return c.call(this,b)})};c.bubble=function(a){return d(b,function(b,c){var e=a(b.target),d=b.relatedTarget;if(e&&e!=(d&&1==d.nodeType&&a(d)))return c.call(e,b)})};return c}g.add("dom-quirks",
f.doc&&"BackCompat"==f.doc.compatMode);g.add("events-mouseenter",f.doc&&"onmouseenter"in f.doc.createElement("div"));g.add("events-mousewheel",f.doc&&"onmousewheel"in f.doc);f=g("dom-quirks")&&g("ie")||!g("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(b,e){return b.button&e},isLeft:function(b){return b.button&1},isMiddle:function(b){return b.button&4},isRight:function(b){return b.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(b,e){return b.button==e},isLeft:function(b){return 0==
b.button},isMiddle:function(b){return 1==b.button},isRight:function(b){return 2==b.button}};h.mouseButtons=f;h=g("events-mousewheel")?"mousewheel":function(b,e){return j(b,"DOMMouseScroll",function(b){b.wheelDelta=-b.detail;e.call(this,b)})};return{_eventHandler:d,enter:d("mouseover"),leave:d("mouseout"),wheel:h,isLeft:f.isLeft,isMiddle:f.isMiddle,isRight:f.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(h,j,g){h._name="browser";j.mixin(h,{isBrowser:!0,isFF:g("ff"),
isIE:g("ie"),isKhtml:g("khtml"),isWebKit:g("webkit"),isMozilla:g("mozilla"),isMoz:g("mozilla"),isOpera:g("opera"),isSafari:g("safari"),isChrome:g("chrome"),isMac:g("mac"),isIos:g("ios"),isAndroid:g("android"),isWii:g("wii"),isQuirks:g("quirks"),isAir:g("air")});h.locale=h.locale||(g("ie")?navigator.userLanguage:navigator.language).toLowerCase();return g})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(h,j){return h.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,
META:j("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,
F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:j("mac")&&!j("air")?j("safari")?91:224:17}})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(h,j,g){function i(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function f(a,b,c){var e,d,f,g,k,l,n,p=this._inherited=this._inherited||{};"string"==typeof a&&(e=a,a=b,b=c);c=0;g=a.callee;(e=e||g.nom)||i("can't deduce a name to call inherited()",
this.declaredClass);k=this.constructor._meta;f=k.bases;n=p.p;if(e!=x){if(p.c!==g&&(n=0,l=f[0],k=l._meta,k.hidden[e]!==g)){(d=k.chains)&&"string"==typeof d[e]&&i("calling chained method with inherited: "+e,this.declaredClass);do if(k=l._meta,d=l.prototype,k&&(d[e]===g&&d.hasOwnProperty(e)||k.hidden[e]===g))break;while(l=f[++n]);n=l?n:-1}if(l=f[++n])if(d=l.prototype,l._meta&&d.hasOwnProperty(e))c=d[e];else{g=r[e];do if(d=l.prototype,(c=d[e])&&(l._meta?d.hasOwnProperty(e):c!==g))break;while(l=f[++n])}c=
l&&c||r[e]}else{if(p.c!==g&&(n=0,(k=f[0]._meta)&&k.ctor!==g)){d=k.chains;for((!d||"manual"!==d.constructor)&&i("calling chained constructor with inherited",this.declaredClass);(l=f[++n])&&!((k=l._meta)&&k.ctor===g););n=l?n:-1}for(;(l=f[++n])&&!(c=(k=l._meta)?k.ctor:l););c=l&&c}p.c=c;p.p=n;if(c)return!0===b?c:c.apply(this,b||a)}function d(a,b){return"string"==typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function b(a,b,c){var e=this.getInherited(a,b);if(e)return e.apply(this,c||b||a)}function e(a){for(var b=
this.constructor._meta.bases,c=0,e=b.length;c<e;++c)if(b[c]===a)return!0;return this instanceof a}function c(a,b){for(var c in b)c!=x&&b.hasOwnProperty(c)&&(a[c]=b[c]);if(j("bug-for-in-skips-shadowed"))for(var e=g._extraNames,d=e.length;d;)c=e[--d],c!=x&&b.hasOwnProperty(c)&&(a[c]=b[c])}function a(a){s.safeMixin(this.prototype,a);return this}function k(a){return s([this].concat(a))}function p(a,b){return function(){var y;var c=arguments,e=c,d=c[0],f,g;g=a.length;var k;if(!(this instanceof c.callee))return n(c);
if(b&&(d&&d.preamble||this.preamble)){k=Array(a.length);k[0]=c;for(f=0;;){if(d=c[0])(d=d.preamble)&&(c=d.apply(this,c)||c);d=a[f].prototype;(d=d.hasOwnProperty("preamble")&&d.preamble)&&(c=d.apply(this,c)||c);if(++f==g)break;k[f]=c}}for(f=g-1;0<=f;--f)d=a[f],(y=(g=d._meta)?g.ctor:d,d=y)&&d.apply(this,k?k[f]:c);(d=this.postscript)&&d.apply(this,e)}}function q(a,b){return function(){var c=arguments,e=c,d=c[0];if(!(this instanceof c.callee))return n(c);if(b){if(d)(d=d.preamble)&&(e=d.apply(this,e)||
e);(d=this.preamble)&&d.apply(this,e)}a&&a.apply(this,c);(d=this.postscript)&&d.apply(this,c)}}function m(a){return function(){var y;var b=arguments,c=0,e,d;if(!(this instanceof b.callee))return n(b);for(;e=a[c];++c)if(y=(d=e._meta)?d.ctor:e,e=y){e.apply(this,b);break}(e=this.postscript)&&e.apply(this,b)}}function o(a,b,c){return function(){var e,d,f=0,g=1;c&&(f=b.length-1,g=-1);for(;e=b[f];f+=g)d=e._meta,(e=(d?d.hidden:e.prototype)[a])&&e.apply(this,arguments)}}function l(a){t.prototype=a.prototype;
a=new t;t.prototype=null;return a}function n(a){var b=a.callee,c=l(b);b.apply(c,a);return c}function s(b,n,t){"string"!=typeof b&&(t=n,n=b,b="");var t=t||{},h,j,G,z,y,C,F,L=1,J=n;if("[object Array]"==v.call(n)){L=b;G=[];z=[{cls:0,refs:[]}];C={};for(var N=1,T=n.length,I=0,D,V,M,P;I<T;++I){(D=n[I])?"[object Function]"!=v.call(D)&&i("mixin #"+I+" is not a callable constructor.",L):i("mixin #"+I+" is unknown. Did you use dojo.require to pull it in?",L);V=D._meta?D._meta.bases:[D];M=0;for(D=V.length-1;0<=
D;--D){P=V[D].prototype;if(!P.hasOwnProperty("declaredClass"))P.declaredClass="uniqName_"+w++;P=P.declaredClass;C.hasOwnProperty(P)||(C[P]={count:0,refs:[],cls:V[D]},++N);P=C[P];M&&M!==P&&(P.refs.push(M),++M.count);M=P}++M.count;z[0].refs.push(M)}for(;z.length;){M=z.pop();G.push(M.cls);for(--N;j=M.refs,1==j.length;){M=j[0];if(!M||--M.count){M=0;break}G.push(M.cls);--N}if(M)for(I=0,T=j.length;I<T;++I)M=j[I],--M.count||z.push(M)}N&&i("can't build consistent linearization",L);D=n[0];G[0]=D?D._meta&&
D===G[G.length-D._meta.bases.length]?D._meta.bases.length:1:0;C=G;G=C[0];L=C.length-G;n=C[L]}else C=[0],n?"[object Function]"==v.call(n)?(G=n._meta,C=C.concat(G?G.bases:n)):i("base class is not a callable constructor.",b):null!==n&&i("unknown base class. Did you use dojo.require to pull it in?",b);if(n)for(j=L-1;;--j){h=l(n);if(!j)break;G=C[j];(G._meta?c:u)(h,G.prototype);z=new Function;z.superclass=n;z.prototype=h;n=h.constructor=z}else h={};s.safeMixin(h,t);G=t.constructor;if(G!==r.constructor)G.nom=
x,h.constructor=G;for(j=L-1;j;--j)(G=C[j]._meta)&&G.chains&&(F=u(F||{},G.chains));h["-chains-"]&&(F=u(F||{},h["-chains-"]));G=!F||!F.hasOwnProperty(x);C[0]=z=F&&"manual"===F.constructor?m(C):1==C.length?q(t.constructor,G):p(C,G);z._meta={bases:C,hidden:t,chains:F,parents:J,ctor:t.constructor};z.superclass=n&&n.prototype;z.extend=a;z.createSubclass=k;z.prototype=h;h.constructor=z;h.getInherited=d;h.isInstanceOf=e;h.inherited=B;h.__inherited=f;if(b)h.declaredClass=b,g.setObject(b,z);if(F)for(y in F)if(h[y]&&
"string"==typeof F[y]&&y!=x)G=h[y]=o(y,C,"after"===F[y]),G.nom=y;return z}var u=g.mixin,r=Object.prototype,v=r.toString,t=new Function,w=0,x="constructor",B=h.config.isDebug?b:f;h.safeMixin=s.safeMixin=function(a,b){var c,e;for(c in b)if(e=b[c],(e!==r[c]||!(c in r))&&c!=x){if("[object Function]"==v.call(e))e.nom=c;a[c]=e}if(j("bug-for-in-skips-shadowed"))for(var d=g._extraNames,f=d.length;f;)if(c=d[--f],e=b[c],(e!==r[c]||!(c in r))&&c!=x){if("[object Function]"==v.call(e))e.nom=c;a[c]=e}return a};
return h.declare=s})},"dojo/query":function(){define("./_base/kernel,./has,./dom,./on,./_base/array,./_base/lang,./selector/_loader,./selector/_loader!default".split(","),function(h,j,g,i,f,d,b,e){function c(a,b){var c=function(c,e){if("string"==typeof e&&(e=g.byId(e),!e))return new b([]);var d="string"==typeof c?a(c,e):c?c.orphan?c:[c]:[];return d.orphan?d:new b(d)};c.matches=a.match||function(a,b,e){return 0<c.filter([a],b,e).length};c.filter=a.filter||function(a,b,e){return c(b,e).filter(function(b){return-1<
f.indexOf(a,b)})};if("function"!=typeof a)var e=a.search,a=function(a,b){return e(b||document,a)};return c}j.add("array-extensible",function(){return 1==d.delegate([],{length:1}).length&&!j("bug-for-in-skips-shadowed")});var a=Array.prototype,k=a.slice,p=a.concat,q=f.forEach,m=function(a,b,c){b=[0].concat(k.call(b,0));c=c||h.global;return function(e){b[0]=e;return a.apply(c,b)}},o=function(a){var b=this instanceof l&&j("array-extensible");"number"==typeof a&&(a=Array(a));var c=a&&"length"in a?a:arguments;
if(b||!c.sort){for(var e=b?this:[],f=e.length=c.length,g=0;g<f;g++)e[g]=c[g];if(b)return e;c=e}d._mixin(c,n);c._NodeListCtor=function(a){return l(a)};return c},l=o,n=l.prototype=j("array-extensible")?[]:{};l._wrap=n._wrap=function(a,b,c){a=new (c||this._NodeListCtor||l)(a);return b?a._stash(b):a};l._adaptAsMap=function(a,b){return function(){return this.map(m(a,arguments,b))}};l._adaptAsForEach=function(a,b){return function(){this.forEach(m(a,arguments,b));return this}};l._adaptAsFilter=function(a,
b){return function(){return this.filter(m(a,arguments,b))}};l._adaptWithCondition=function(a,b,c){return function(){var e=arguments,d=m(a,e,c);if(b.call(c||h.global,e))return this.map(d);this.forEach(d);return this}};q(["slice","splice"],function(b){var c=a[b];n[b]=function(){return this._wrap(c.apply(this,arguments),"slice"==b?this:null)}});q(["indexOf","lastIndexOf","every","some"],function(a){var b=f[a];n[a]=function(){return b.apply(h,[this].concat(k.call(arguments,0)))}});d.extend(o,{constructor:l,
_NodeListCtor:l,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return i(c,a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=k.call(this,0),c=f.map(arguments,function(a){return k.call(a,0)});return this._wrap(p.apply(b,c),this)},map:function(a,b){return this._wrap(f.map(this,a,b),this)},
forEach:function(a,b){q(this,a,b);return this},filter:function(a){var b=arguments,c=this,e=0;if("string"==typeof a){c=s._filterResult(this,b[0]);if(1==b.length)return c._stash(this);e=1}return this._wrap(f.filter(c,b[e],b[e+1]),this)},instantiate:function(a,b){var c=d.isFunction(a)?a:d.getObject(a),b=b||{};return this.forEach(function(a){new c(b,a)})},at:function(){var a=new this._NodeListCtor(0);q(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});
var s=c(e,o);h.query=c(e,function(a){return o(a)});s.load=function(a,e,d){b.load(a,e,function(a){d(c(a,o))})};h._filterQueryResult=s._filterResult=function(a,b,c){return new o(s.filter(a,b,c))};h.NodeList=s.NodeList=o;return s})},"dojo/selector/_loader":function(){define(["../has","require"],function(h,j){var g=document.createElement("div");h.add("dom-qsa2.1",!!g.querySelectorAll);h.add("dom-qsa3",function(){try{return g.innerHTML="<p class='TEST'></p>",1==g.querySelectorAll(".TEST:empty").length}catch(f){}});
var i;return{load:function(f,d,b){var e=j,f="default"==f?h("config-selectorEngine")||"css3":f,f="css2"==f||"lite"==f?"./lite":"css2.1"==f?h("dom-qsa2.1")?"./lite":"./acme":"css3"==f?h("dom-qsa3")?"./lite":"./acme":"acme"==f?"./acme":(e=d)&&f;if("?"==f.charAt(f.length-1))var f=f.substring(0,f.length-1),c=!0;if(c&&(h("dom-compliant-qsa")||i))return b(i);e([f],function(a){"./lite"!=f&&(i=a);b(a)})}}})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],
function(h,j,g,i,f){var d=i.trim,b=g.forEach,e="BackCompat"==f.doc.compatMode,c=!1,a=function(){return!0},k=function(a){for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",b=function(b,c){return d(a.slice(b,c))},e=[],f=-1,g=-1,k=-1,l=-1,i=-1,n=-1,p=-1,m,o="",t="",s,h=0,q=a.length,j=null,u=null,w=function(){if(0<=n)j.id=b(n,h).replace(/\\/g,""),n=-1;if(0<=p){var a=p==h?null:b(p,h);j[0>">~+".indexOf(a)?"tag":"oper"]=a;p=-1}0<=i&&(j.classes.push(b(i+1,h).replace(/\\/g,"")),i=-1)};o=t,t=a.charAt(h),
h<q;h++)if("\\"!=o)if(j||(s=h,j={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return c?this.otag:this.tag}},p=h),m)t==m&&(m=null);else if("'"==t||'"'==t)m=t;else if(0<=f)if("]"==t){u.attr?u.matchFor=b(k||f+1,h):u.attr=b(f+1,h);if((f=u.matchFor)&&('"'==f.charAt(0)||"'"==f.charAt(0)))u.matchFor=f.slice(1,-1);if(u.matchFor)u.matchFor=u.matchFor.replace(/\\/g,"");j.attrs.push(u);u=null;f=k=-1}else{if("="==t)k=0<="|~^$*".indexOf(o)?o:"",u.type=k+t,u.attr=b(f+1,
h-k.length),k=h+1}else if(0<=g){if(")"==t){if(0<=l)u.value=b(g+1,h);l=g=-1}}else if("#"==t)w(),n=h+1;else if("."==t)w(),i=h;else if(":"==t)w(),l=h;else if("["==t)w(),f=h,u={};else if("("==t)0<=l&&(u={name:b(l+1,h),value:null},j.pseudos.push(u)),g=h;else if(" "==t&&o!=t){w();0<=l&&j.pseudos.push({name:b(l+1,h)});j.loops=j.pseudos.length||j.attrs.length||j.classes.length;j.oquery=j.query=b(s,h);j.otag=j.tag=j.oper?null:j.tag||"*";if(j.tag)j.tag=j.tag.toUpperCase();if(e.length&&e[e.length-1].oper)j.infixOper=
e.pop(),j.query=j.infixOper.query+" "+j.query;e.push(j);j=null}return e},p=function(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}},q=function(a,b){var c=b||[];a&&c.push(a);return c},m=function(a){return 1==a.nodeType},o=function(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(c?a.getAttribute(b):a.getAttribute(b,2))||""},l={"*=":function(a,b){return function(c){return 0<=o(c,a).indexOf(b)}},"^=":function(a,
b){return function(c){return 0==o(c,a).indexOf(b)}},"$=":function(a,b){return function(c){var c=" "+o(c,a),e=c.lastIndexOf(b);return-1<e&&e==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+o(b,a)+" ").indexOf(c)}},"|=":function(a,b){var c=b+"-";return function(e){e=o(e,a);return e==b||0==e.indexOf(c)}},"=":function(a,b){return function(c){return o(c,a)==b}}},n="undefined"==typeof f.doc.firstChild.nextElementSibling,s=!n?"nextElementSibling":"nextSibling",u=
!n?"previousElementSibling":"previousSibling",r=n?m:a,v=function(a){for(;a=a[u];)if(r(a))return!1;return!0},t=function(a){for(;a=a[s];)if(r(a))return!1;return!0},w=function(a){var b=a.parentNode,b=7!=b.nodeType?b:b.nextSibling,c=0,e=b.children||b.childNodes,d=a._i||a.getAttribute("_i")||-1,f=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!e)return-1;e=e.length;if(f==e&&0<=d&&0<=f)return d;j("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",e):b._l=e;d=-1;for(b=
b.firstElementChild||b.firstChild;b;b=b[s])if(r(b))j("ie")?b.setAttribute("_i",++c):b._i=++c,a===b&&(d=c);return d},x=function(a){return!(w(a)%2)},B=function(a){return w(a)%2},A={checked:function(){return function(a){return!!("checked"in a?a.checked:a.selected)}},disabled:function(){return function(a){return a.disabled}},enabled:function(){return function(a){return!a.disabled}},"first-child":function(){return v},"last-child":function(){return t},"only-child":function(){return function(a){return v(a)&&
t(a)}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return!1}return!0}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=k(b)[0],e={el:1};if("*"!=c.tag)e.tag=1;if(!c.classes.length)e.classes=1;var d=H(c,e);return function(a){return!d(a)}},"nth-child":function(a,b){var c=parseInt;if("odd"==b)return B;if("even"==b)return x;
if(-1!=b.indexOf("n")){var e=b.split("n",2),d=e[0]?"-"==e[0]?-1:c(e[0]):1,f=e[1]?c(e[1]):0,g=0,k=-1;0<d?0>f?f=f%d&&d+f%d:0<f&&(f>=d&&(g=f-f%d),f%=d):0>d&&(d*=-1,0<f&&(k=f,f%=d));if(0<d)return function(a){a=w(a);return a>=g&&(0>k||a<=k)&&a%d==f};b=f}var l=c(b);return function(a){return w(a)==l}}},E=9>j("ie")||9==j("ie")&&j("quirks")?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(e){return c?e.getAttribute(a):e[a]||e[b]}}:function(a){return function(b){return b&&b.getAttribute&&
b.hasAttribute(a)}},H=function(e,d){if(!e)return a;var d=d||{},f=null;"el"in d||(f=p(f,m));"tag"in d||"*"!=e.tag&&(f=p(f,function(a){return a&&(c?a.tagName:a.tagName.toUpperCase())==e.getTag()}));"classes"in d||b(e.classes,function(a,b){var c=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");f=p(f,function(a){return c.test(a.className)});f.count=b});"pseudos"in d||b(e.pseudos,function(a){var b=a.name;A[b]&&(f=p(f,A[b](b,a.value)))});"attrs"in d||b(e.attrs,function(a){var b,c=a.attr;a.type&&l[a.type]?b=l[a.type](c,
a.matchFor):c.length&&(b=E(c));b&&(f=p(f,b))});"id"in d||e.id&&(f=p(f,function(a){return!!a&&a.id==e.id}));f||"default"in d||(f=a);return f},Q=function(a){return function(b,c,e){for(;b=b[s];)if(!n||m(b)){(!e||R(b,e))&&a(b)&&c.push(b);break}return c}},K=function(a){return function(b,c,e){for(b=b[s];b;){if(r(b)){if(e&&!R(b,e))break;a(b)&&c.push(b)}b=b[s]}return c}},G=function(b){b=b||a;return function(a,c,e){for(var d=0,f=a.children||a.childNodes;a=f[d++];)r(a)&&(!e||R(a,e))&&b(a,d)&&c.push(a);return c}},
z={},y=function(b){var c=z[b.query];if(c)return c;var d=b.infixOper,d=d?d.oper:"",g=H(b,{el:1}),k="*"==b.tag,l=f.doc.getElementsByClassName;if(d){l={el:1};if(k)l.tag=1;g=H(b,l);"+"==d?c=Q(g):"~"==d?c=K(g):">"==d&&(c=G(g))}else if(b.id)g=!b.loops&&k?a:H(b,{el:1,id:1}),c=function(a,c){var e=h.byId(b.id,a.ownerDocument||a);if(e&&g(e)){if(9==a.nodeType)return q(e,c);for(var d=e.parentNode;d&&!(d==a);)d=d.parentNode;if(d)return q(e,c)}};else if(l&&/\{\s*\[native code\]\s*\}/.test(""+l)&&b.classes.length&&
!e)var g=H(b,{el:1,classes:1,id:1}),i=b.classes.join(" "),c=function(a,b,c){for(var b=q(0,b),e,d=0,f=a.getElementsByClassName(i);e=f[d++];)g(e,a)&&R(e,c)&&b.push(e);return b};else!k&&!b.loops?c=function(a,c,e){for(var c=q(0,c),d=0,f=b.getTag(),f=f?a.getElementsByTagName(f):[];a=f[d++];)R(a,e)&&c.push(a);return c}:(g=H(b,{el:1,tag:1,id:1}),c=function(a,c,e){for(var c=q(0,c),d,f=0,k=(d=b.getTag())?a.getElementsByTagName(d):[];d=k[f++];)g(d,a)&&R(d,e)&&c.push(d);return c});return z[b.query]=c},C={},
F={},L=function(a){var b=k(d(a));if(1==b.length){var c=y(b[0]);return function(a){if(a=c(a,[]))a.nozip=!0;return a}}return function(a){for(var a=q(a),c,e,d=b.length,f,g,k=0;k<d;k++){g=[];c=b[k];e=a.length-1;if(0<e)f={},g.nozip=!0;e=y(c);for(var l=0;c=a[l];l++)e(c,g,f);if(!g.length)break;a=g}return g}},J=j("ie")?"commentStrip":"nozip",N=!!f.doc.querySelectorAll,T=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,I=function(a,b,c,e){return c?(b?b+" ":"")+c+(e?" "+e:""):a},D=/([^[]*)([^\]]*])?/g,V=function(a,
b,c){return b.replace(T,I)+(c||"")},M=function(a,b){a=a.replace(D,V);if(N){var c=F[a];if(c&&!b)return c}if(c=C[a])return c;var c=a.charAt(0),d=-1==a.indexOf(" ");0<=a.indexOf("#")&&d&&(b=!0);if(N&&!b&&-1==">~+".indexOf(c)&&(!j("ie")||-1==a.indexOf(":"))&&!(e&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf(":checked")&&-1==a.indexOf("|=")){var f=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return F[a]=function(b){try{if(!(9==b.nodeType||d))throw"";var c=b.querySelectorAll(f);c[J]=
!0;return c}catch(e){return M(a,!0)(b)}}}var g=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return C[a]=2>g.length?L(a):function(a){for(var b=0,c=[],e;e=g[b++];)c=c.concat(L(e)(a));return c}},P=0,O=j("ie")?function(a){return c?a.getAttribute("_uid")||a.setAttribute("_uid",++P)||P:a.uniqueID}:function(a){return a._uid||(a._uid=++P)},R=function(a,b){if(!b)return 1;var c=O(a);return!b[c]?b[c]=1:0},Z=function(a){if(a&&a.nozip)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);
if(2>a.length)return b;P++;var e,d;if(j("ie")&&c){var f=P+"";a[0].setAttribute("_zipIdx",f);for(e=1;d=a[e];e++)a[e].getAttribute("_zipIdx")!=f&&b.push(d),d.setAttribute("_zipIdx",f)}else if(j("ie")&&a.commentStrip)try{for(e=1;d=a[e];e++)m(d)&&b.push(d)}catch(g){}else{a[0]&&(a[0]._zipIdx=P);for(e=1;d=a[e];e++)a[e]._zipIdx!=P&&b.push(d),d._zipIdx=P}return b},U=function(a,b){b=b||f.doc;c="div"===(b.ownerDocument||b).createElement("div").tagName;var e=M(a)(b);return e&&e.nozip?e:Z(e)};U.filter=function(a,
b,c){for(var e=[],d=k(b),d=1==d.length&&!/[^\w#\.]/.test(b)?H(d[0]):function(a){return-1!=g.indexOf(U(b,h.byId(c)),a)},f=0,l;l=a[f];f++)d(l)&&e.push(l);return e};return U})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(h,j,g,i,f){var d=0,b,e=[],c=0,a=function(){if(d&&!c&&e.length){c=1;var f=e.shift();try{f()}finally{c=0}c=0;e.length&&b(a)}};g.on("idle",a);b=function(){g.idle()&&a()};var j=h.ready=h.addOnLoad=function(a,c,d){var g=f._toArray(arguments);
"number"!=typeof a?(d=c,c=a,a=1E3):g.shift();d=d?f.hitch.apply(h,g):function(){c()};d.priority=a;for(g=0;g<e.length&&a>=e[g].priority;g++);e.splice(g,0,d);b()},k=h.config.addOnLoad;if(k)j[f.isArray(k)?"apply":"call"](h,k);i(function(){d=1;h._postLoad=h.config.afterOnLoad=!0;e.length&&b(a)});return j})},"dojo/domReady":function(){define(["./has"],function(h){function j(a){b?a(i):e.push(a)}var g=this,i=document,f={loaded:1,complete:1},d="string"!=typeof i.readyState,b=!!f[i.readyState];if(d)i.readyState=
"loading";if(!b){var e=[],c=[],a=function(a){a=a||g.event;if(!(b||"readystatechange"==a.type&&!f[i.readyState])){b=1;if(d)i.readyState="complete";for(;e.length;)e.shift()(i)}},k=function(b,c){b.addEventListener(c,a,!1);e.push(function(){b.removeEventListener(c,a,!1)})};if(!h("dom-addeventlistener")){var k=function(b,c){c="on"+c;b.attachEvent(c,a);e.push(function(){b.detachEvent(c,a)})},p=i.createElement("div");try{p.doScroll&&null===g.frameElement&&c.push(function(){try{return p.doScroll("left"),
1}catch(a){}})}catch(q){}}k(i,"DOMContentLoaded");k(g,"load");"onreadystatechange"in i?k(i,"readystatechange"):d||c.push(function(){return f[i.readyState]});if(c.length){var m=function(){if(!b){for(var e=c.length;e--;)if(c[e]()){a("poller");return}setTimeout(m,30)}};m()}}j.load=function(a,b,c){j(c)};return j})},"dijit/registry":function(){define(["dojo/_base/array","dojo/sniff","dojo/_base/unload","dojo/_base/window","./main"],function(h,j,g,i,f){var d={},b={},e={length:0,add:function(c){if(b[c.id])throw Error("Tried to register widget with id=="+
c.id+" but that id is already registered");b[c.id]=c;this.length++},remove:function(c){b[c]&&(delete b[c],this.length--)},byId:function(c){return"string"==typeof c?b[c]:c},byNode:function(c){return b[c.getAttribute("widgetId")]},toArray:function(){var c=[],a;for(a in b)c.push(b[a]);return c},getUniqueId:function(c){var a;do a=c+"_"+(c in d?++d[c]:d[c]=0);while(b[a]);return"dijit"==f._scopeName?a:f._scopeName+"_"+a},findWidgets:function(c,a){function e(c){for(c=c.firstChild;c;c=c.nextSibling)if(1==
c.nodeType){var f=c.getAttribute("widgetId");f?(f=b[f])&&d.push(f):c!==a&&e(c)}}var d=[];e(c);return d},_destroyAll:function(){f._curFocus=null;f._prevFocus=null;f._activeStack=[];h.forEach(e.findWidgets(i.body()),function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive():b.destroy&&b.destroy())})},getEnclosingWidget:function(c){for(;c;){var a=1==c.nodeType&&c.getAttribute("widgetId");if(a)return b[a];c=c.parentNode}return null},_hash:b};return f.registry=e})},"dojo/_base/unload":function(){define(["./kernel",
"./lang","../on"],function(h,j,g){var i=window,f={addOnWindowUnload:function(d,b){if(!h.windowUnloaded)g(i,"unload",h.windowUnloaded=function(){});g(i,"unload",j.hitch(d,b))},addOnUnload:function(d,b){g(i,"beforeunload",j.hitch(d,b))}};h.addOnWindowUnload=f.addOnWindowUnload;h.addOnUnload=f.addOnUnload;return f})},"dijit/main":function(){define(["dojo/_base/kernel"],function(h){return h.dijit})},"dijit/_WidgetBase":function(){define("require,dojo/_base/array,dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/ready,dojo/Stateful,dojo/topic,dojo/_base/window,./Destroyable,./registry".split(","),
function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l,n,s,u,r,v,t){function w(a){return function(b){e[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}q.add("dijit-legacy-requires",!m.isAsync);q("dijit-legacy-requires")&&n(0,function(){h(["dijit/_base/manager"])});var x={};return d("dijit._WidgetBase",[s,v],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:w("lang"),dir:"",_setDirAttr:w("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,
domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:i.blankGif||h.toUrl("dojo/resources/blank.gif"),postscript:function(a,b){this.create(a,b)},create:function(a,c){this.srcNodeRef=b.byId(c);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&"string"==typeof this.srcNodeRef.id)this.id=this.srcNodeRef.id;if(a)this.params=a,o.mixin(this,a);this.postMixInProperties();if(!this.id)this.id=t.getUniqueId(this.declaredClass.replace(/\./g,
"_")),this.params&&delete this.params.id;this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:r.doc);this.ownerDocumentBody=r.body(this.ownerDocument);t.add(this);this.buildRendering();var e;if(this.domNode){this._applyAttributes();var d=this.srcNodeRef;d&&d.parentNode&&this.domNode!==d&&(d.parentNode.replaceChild(this.domNode,d),e=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();e&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a=
this.constructor,b=a._setterAttrs;if(!b){var b=a._setterAttrs=[],c;for(c in this.attributeMap)b.push(c);var a=a.prototype,e;for(e in a)e in this.attributeMap||"_set"+e.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()})+"Attr"in a&&b.push(e)}var d={},f;for(f in this.params||{})d[f]=this[f];j.forEach(b,function(a){a in d||this[a]&&this.set(a,this[a])},this);for(f in d)this.set(f,d[f])},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode)this.domNode=
this.srcNodeRef||this.ownerDocument.createElement("div");if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(j.map(a,function(a){return a+"Rtl"})));c.add(this.domNode,a)}},postCreate:function(){},startup:function(){if(!this._started)this._started=!0,j.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&o.isFunction(a.startup))a.startup(),a._started=!0})},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},
destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();j.forEach(this._connects,o.hitch(this,"disconnect"));j.forEach(this._supportingWidgets,b);this.domNode&&j.forEach(t.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);t.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?e.remove(this.domNode,
"widgetId"):a.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||a.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){j.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;o.isObject(a)?p.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,d){d=3<=arguments.length?d:this.attributeMap[a];
j.forEach(o.isArray(d)?d:[d],function(d){var f=this[d.node||d||"domNode"];switch(d.type||"attribute"){case "attribute":o.isFunction(b)&&(b=o.hitch(this,b));d=d.attribute?d.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;f.tagName?e.set(f,d,b):f.set(d,b);break;case "innerText":f.innerHTML="";f.appendChild(this.ownerDocument.createTextNode(b));break;case "innerHTML":f.innerHTML=b;break;case "class":c.replace(f,b,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?
this[b.g]():this[a]},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var e=this[c.s];if(o.isFunction(e))var d=e.apply(this,Array.prototype.slice.call(arguments,1));else{var e=this.focusNode&&!o.isFunction(this.focusNode)?"focusNode":"domNode",f=this[e].tagName,g;if(!(g=x[f])){g=this[e];var k={},l;for(l in g)k[l.toLowerCase()]=!0;g=x[f]=k}l=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:c.l in g&&"function"!=typeof b||
/^aria-|^data-|^role$/.test(a)?e:null;null!=l&&this._attrToDom(a,b,l);this._set(a,b)}return d||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;this._created&&b!==c&&(this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+
a,{detail:{prevValue:c,newValue:b}}))},emit:function(a,b,c){b=b||{};if(void 0===b.bubbles)b.bubbles=!0;if(void 0===b.cancelable)b.cancelable=!0;if(!b.detail)b.detail={};b.detail.widget=this;var e,d=this["on"+a];d&&(e=d.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&l.emit(this.domNode,a.toLowerCase(),b);return e},on:function(a,b){var c=this._onMap(a);return c?g.after(this,c,b,!0):this.own(l(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap=
{},e;for(e in b.prototype)/^on/.test(e)&&(c[e.replace(/^on/,"").toLowerCase()]=e)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?t.findWidgets(this.containerNode):[]},getParent:function(){return t.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(f.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(u.subscribe(a,
o.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:k.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=p.get(this.domNode,"display")},placeAt:function(c,e){var d=!c.tagName&&t.byId(c);d&&d.addChild&&(!e||"number"===typeof e)?d.addChild(this,e):(d=d?d.containerNode&&!/after|before|replace/.test(e||"")?d.containerNode:d.domNode:b.byId(c,this.ownerDocument),a.place(this.domNode,d,e),!this._started&&(this.getParent()||
{})._started&&this.startup());return this},getTextDir:function(a,b){return b},applyTextDir:function(){},defer:function(a,b){var c=setTimeout(o.hitch(this,function(){c=null;this._destroyed||o.hitch(this,a)()}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}})})},"dojo/dom-attr":function(){define("exports,./sniff,./_base/lang,./dom,./dom-style,./dom-prop".split(","),function(h,j,g,i,f,d){function b(a,b){var c=a.getAttributeNode&&a.getAttributeNode(b);return c&&c.specified}
var e={innerHTML:1,className:1,htmlFor:j("ie"),value:1},c={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};h.has=function(a,f){var g=f.toLowerCase();return e[d.names[g]||f]||b(i.byId(a),c[g]||f)};h.get=function(a,f){var a=i.byId(a),p=f.toLowerCase(),h=d.names[p]||f,m=a[h];if(e[h]&&"undefined"!=typeof m||"href"!=h&&("boolean"==typeof m||g.isFunction(m)))return m;p=c[p]||f;return b(a,p)?a.getAttribute(p):null};h.set=function(a,b,p){a=i.byId(a);if(2==arguments.length){for(var j in b)h.set(a,
j,b[j]);return a}j=b.toLowerCase();var m=d.names[j]||b,o=e[m];if("style"==m&&"string"!=typeof p)return f.set(a,p),a;if(o||"boolean"==typeof p||g.isFunction(p))return d.set(a,b,p);a.setAttribute(c[j]||b,p);return a};h.remove=function(a,b){i.byId(a).removeAttribute(c[b.toLowerCase()]||b)};h.getNodeProp=function(a,e){var a=i.byId(a),f=e.toLowerCase(),g=d.names[f]||e;if(g in a&&"href"!=g)return a[g];f=c[f]||e;return b(a,f)?a.getAttribute(f):null}})},"dojo/dom-prop":function(){define("exports,./_base/kernel,./sniff,./_base/lang,./dom,./dom-style,./dom-construct,./_base/connect".split(","),
function(h,j,g,i,f,d,b,e){var c={},a=0,k=j._scopeName+"attrid";h.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"};h.get=function(a,b){var a=f.byId(a),c=b.toLowerCase();return a[h.names[c]||b]};h.set=function(p,j,m){p=f.byId(p);if(2==arguments.length&&"string"!=typeof j){for(var o in j)h.set(p,o,j[o]);return p}o=j.toLowerCase();o=h.names[o]||j;if("style"==o&&"string"!=typeof m)return d.set(p,
m),p;if("innerHTML"==o)return g("ie")&&p.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(b.empty(p),p.appendChild(b.toDom(m,p.ownerDocument))):p[o]=m,p;if(i.isFunction(m)){var l=p[k];l||(l=a++,p[k]=l);c[l]||(c[l]={});var n=c[l][o];if(n)e.disconnect(n);else try{delete p[o]}catch(s){}m?c[l][o]=e.connect(p,o,m):p[o]=null;return p}p[o]=m;return p}})},"dojo/dom-construct":function(){define("exports,./_base/kernel,./sniff,./_base/window,./dom,./dom-attr,./on".split(","),
function(h,j,g,i,f,d){function b(a,b){var c=b.parentNode;c&&c.insertBefore(a,b)}var e={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},c=/<\s*([\w\:]+)/,a={},k=0,p="__"+j._scopeName+"ToDomId",q;for(q in e)if(e.hasOwnProperty(q))j=e[q],j.pre="option"==q?'<select multiple="multiple">':"<"+j.join("><")+">",j.post="</"+
j.reverse().join("></")+">";h.toDom=function(b,d){var d=d||i.doc,f=d[p];f||(d[p]=f=++k+"",a[f]=d.createElement("div"));var b=b+"",g=b.match(c),m=g?g[1].toLowerCase():"",f=a[f];if(g&&e[m]){g=e[m];f.innerHTML=g.pre+b+g.post;for(g=g.length;g;--g)f=f.firstChild}else f.innerHTML=b;if(1==f.childNodes.length)return f.removeChild(f.firstChild);for(m=d.createDocumentFragment();g=f.firstChild;)m.appendChild(g);return m};h.place=function(a,c,e){c=f.byId(c);"string"==typeof a&&(a=/^\s*</.test(a)?h.toDom(a,c.ownerDocument):
f.byId(a));if("number"==typeof e){var d=c.childNodes;!d.length||d.length<=e?c.appendChild(a):b(a,d[0>e?0:e])}else switch(e){case "before":b(a,c);break;case "after":e=a;(d=c.parentNode)&&(d.lastChild==c?d.appendChild(e):d.insertBefore(e,c.nextSibling));break;case "replace":c.parentNode.replaceChild(a,c);break;case "only":h.empty(c);c.appendChild(a);break;case "first":if(c.firstChild){b(a,c.firstChild);break}default:c.appendChild(a)}return a};h.create=function(a,b,c,e){var g=i.doc;if(c)c=f.byId(c),
g=c.ownerDocument;"string"==typeof a&&(a=g.createElement(a));b&&d.set(a,b);c&&h.place(a,c,e);return a};var m=g("ie")?function(a){try{a.innerHTML=""}catch(b){for(var c;c=a.lastChild;){var e=a;c.firstChild&&m(c);e&&e.removeChild(c)}}}:function(a){a.innerHTML=""};h.empty=function(a){m(f.byId(a))};h.destroy=function(a){if(a=f.byId(a)){var b=a,a=a.parentNode;b.firstChild&&m(b);a&&a.removeChild(b)}}})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(h,j,g){function i(c){if("string"==
typeof c||c instanceof String){if(c&&!d.test(c))return b[0]=c,b;c=c.split(d);c.length&&!c[0]&&c.shift();c.length&&!c[c.length-1]&&c.pop();return c}return!c?[]:j.filter(c,function(a){return a})}var f,d=/\s+/,b=[""],e={};return f={contains:function(b,a){return 0<=(" "+g.byId(b).className+" ").indexOf(" "+a+" ")},add:function(b,a){var b=g.byId(b),a=i(a),e=b.className,d,e=e?" "+e+" ":" ";d=e.length;for(var f=0,m=a.length,o;f<m;++f)(o=a[f])&&0>e.indexOf(" "+o+" ")&&(e+=o+" ");d<e.length&&(b.className=
e.substr(1,e.length-2))},remove:function(b,a){var b=g.byId(b),e;if(void 0!==a){a=i(a);e=" "+b.className+" ";for(var d=0,f=a.length;d<f;++d)e=e.replace(" "+a[d]+" "," ");e=h.trim(e)}else e="";b.className!=e&&(b.className=e)},replace:function(b,a,d){b=g.byId(b);e.className=b.className;f.remove(e,d);f.add(e,a);b.className!==e.className&&(b.className=e.className)},toggle:function(b,a,e){b=g.byId(b);if(void 0===e)for(var a=i(a),d=0,h=a.length,m;d<h;++d)m=a[d],f[f.contains(b,m)?"remove":"add"](b,m);else f[e?
"add":"remove"](b,a);return e}}})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","dojo/when"],function(h,j,g,i){return h("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(f){var d=this._attrPairNames;return d[f]?d[f]:d[f]={s:"_"+f+"Setter",g:"_"+f+"Getter"}},postscript:function(f){f&&this.set(f)},_get:function(f,d){return"function"===typeof this[d.g]?this[d.g]():this[f]},get:function(f){return this._get(f,this._getAttrNames(f))},set:function(f,d){if("object"===
typeof f){for(var b in f)f.hasOwnProperty(b)&&"_watchCallbacks"!=b&&this.set(b,f[b]);return this}b=this._getAttrNames(f);var e=this._get(f,b);b=this[b.s];var c;"function"===typeof b?c=b.apply(this,Array.prototype.slice.call(arguments,1)):this[f]=d;if(this._watchCallbacks){var a=this;i(c,function(){a._watchCallbacks(f,e,d)})}return this},_changeAttrValue:function(f,d){var b=this.get(f);this[f]=d;this._watchCallbacks&&this._watchCallbacks(f,b,d);return this},watch:function(f,d){var b=this._watchCallbacks;
if(!b)var e=this,b=this._watchCallbacks=function(a,c,d,f){var g=function(b){if(b)for(var b=b.slice(),f=0,g=b.length;f<g;f++)b[f].call(e,a,c,d)};g(b["_"+a]);f||g(b["*"])};!d&&"function"===typeof f?(d=f,f="*"):f="_"+f;var c=b[f];"object"!==typeof c&&(c=b[f]=[]);c.push(d);var a={};a.unwatch=a.remove=function(){var a=g.indexOf(c,d);-1<a&&c.splice(a,1)};return a}})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(h,j,g){return g("dijit.Destroyable",
null,{destroy:function(){this._destroyed=!0},own:function(){h.forEach(arguments,function(g){var f="destroyRecursive"in g?"destroyRecursive":"destroy"in g?"destroy":"remove",d=j.before(this,"destroy",function(b){g[f](b)}),b=j.after(g,f,function(){d.remove();b.remove()},!0)},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window,./a11yclick".split(","),function(h,j,g,i,f,d,b,e){h=i("dijit._OnDijitClickMixin",
null,{connect:function(b,a,d){return this.inherited(arguments,[b,"ondijitclick"==a?e:a,d])}});h.a11yclick=e;return h})},"dijit/a11yclick":function(){define("dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window".split(","),function(h,j,g,i,f,d,b){function e(a){return(a.keyCode===g.ENTER||a.keyCode===g.SPACE)&&!a.ctrlKey&&!a.shiftKey&&!a.altKey&&!a.metaKey}var c=null;f("dom-addeventlistener")?b.doc.addEventListener("keydown",function(a){c=a.target},!0):
function(){var a=function(a){c=a.srcElement};b.doc.attachEvent("onkeydown",a);d.addOnWindowUnload(function(){b.doc.detachEvent("onkeydown",a)})}();return function(a,b){if(/input|button/i.test(a.nodeName))return h(a,"click",b);var d=[h(a,"keydown",function(a){if(e(a))c=a.target,a.preventDefault()}),h(a,"keyup",function(a){e(a)&&a.target==c&&(c=null,h.emit(a.target,"click",{cancelable:!0,bubbles:!0}))}),h(a,"click",function(a){b.call(this,a)})];if(f("touch")){var g;d.push(h(a,"touchend",function(a){var b=
a.target;g=setTimeout(function(){g=null;h.emit(b,"click",{cancelable:!0,bubbles:!0})},600)}),h(a,"click",function(){g&&clearTimeout(g)}))}return{remove:function(){j.forEach(d,function(a){a.remove()});g&&(clearTimeout(g),g=null)}}}})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(h,j,g,i){i.extend(j,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return g("dijit._FocusMixin",
null,{_focusManager:h})})},"dijit/focus":function(){define("dojo/aspect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/Evented,dojo/_base/lang,dojo/on,dojo/ready,dojo/sniff,dojo/Stateful,dojo/_base/unload,dojo/_base/window,dojo/window,./a11y,./registry,./main".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l,n){var s=new (j([k,d],{curNode:null,activeStack:[],constructor:function(){var a=b.hitch(this,function(a){g.isDescendant(this.curNode,a)&&this.set("curNode",null);g.isDescendant(this.prevNode,
a)&&this.set("prevNode",null)});h.before(f,"empty",a);h.before(f,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(b,c){var e=this,d=function(b){e._justMouseDowned=!0;setTimeout(function(){e._justMouseDowned=!1},0);if(!a("ie")||!b||!(b.srcElement&&null==b.srcElement.parentNode))e._onTouchNode(c||b.target||b.srcElement,"mouse")},f=a("ie")?b.document.documentElement:b.document;if(f){if(a("ie")){b.document.body.attachEvent("onmousedown",d);var g=
function(a){var b=a.srcElement.tagName.toLowerCase();"#document"==b||"body"==b||(o.isTabNavigable(a.srcElement)?e._onFocusNode(c||a.srcElement):e._onTouchNode(c||a.srcElement))};f.attachEvent("onfocusin",g);var k=function(a){e._onBlurNode(c||a.srcElement)};f.attachEvent("onfocusout",k);return{remove:function(){b.document.detachEvent("onmousedown",d);f.detachEvent("onfocusin",g);f.detachEvent("onfocusout",k);f=null}}}f.body.addEventListener("mousedown",d,!0);f.body.addEventListener("touchstart",d,
!0);var i=function(a){e._onFocusNode(c||a.target)};f.addEventListener("focus",i,!0);var l=function(a){e._onBlurNode(c||a.target)};f.addEventListener("blur",l,!0);return{remove:function(){f.body.removeEventListener("mousedown",d,!0);f.body.removeEventListener("touchstart",d,!0);f.removeEventListener("focus",i,!0);f.removeEventListener("blur",l,!0);f=null}}}},_onBlurNode:function(){this._clearFocusTimer&&clearTimeout(this._clearFocusTimer);this._clearFocusTimer=setTimeout(b.hitch(this,function(){this.set("prevNode",
this.curNode);this.set("curNode",null)}),0);if(!this._justMouseDowned)this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(b.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)},_onTouchNode:function(a,b){this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);var c=[];try{for(;a;){var e=i.get(a,"dijitPopupParent");if(e)a=l.byId(e).domNode;else if(a.tagName&&
"body"==a.tagName.toLowerCase()){if(a===q.body())break;a=m.get(a.ownerDocument).frameElement}else{var d=a.getAttribute&&a.getAttribute("widgetId"),f=d&&l.byId(d);f&&!("mouse"==b&&f.get("disabled"))&&c.unshift(d);a=a.parentNode}}}catch(g){}this._setStack(c,b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,
b){var c=this.activeStack;this.set("activeStack",a);for(var e=0;e<Math.min(c.length,a.length)&&!(c[e]!=a[e]);e++);for(var d,f=c.length-1;f>=e;f--)if(d=l.byId(c[f]))d._hasBeenBlurred=!0,d.set("focused",!1),d._focusManager==this&&d._onBlur(b),this.emit("widget-blur",d,b);for(f=e;f<a.length;f++)if(d=l.byId(a[f]))d.set("focused",!0),d._focusManager==this&&d._onFocus(b),this.emit("widget-focus",d,b)},focus:function(a){if(a)try{a.focus()}catch(b){}}}));c(function(){var b=s.registerWin(m.get(q.doc));a("ie")&&
p.addOnWindowUnload(function(){b&&(b.remove(),b=null)})});n.focus=function(a){s.focus(a)};for(var u in s)/^_/.test(u)||(n.focus[u]="function"==typeof s[u]?b.hitch(s,u):s[u]);s.watch(function(a,b,c){n.focus[a]=c});return s})},"dojo/window":function(){define("./_base/lang,./sniff,./_base/window,./dom,./dom-geometry,./dom-style".split(","),function(h,j,g,i,f,d){var b={getBox:function(e){var e=e||g.doc,c="BackCompat"==e.compatMode?g.body(e):e.documentElement,a=f.docScroll(e);if(j("touch"))var d=b.get(e),
e=d.innerWidth||c.clientWidth,c=d.innerHeight||c.clientHeight;else e=c.clientWidth,c=c.clientHeight;return{l:a.x,t:a.y,w:e,h:c}},get:function(e){if(j("ie")&&b!==document.parentWindow){e.parentWindow.execScript("document._parentWindow = window;","Javascript");var c=e._parentWindow;e._parentWindow=null;return c}return e.parentWindow||e.defaultView},scrollIntoView:function(b,c){try{var b=i.byId(b),a=b.ownerDocument||g.doc,k=g.body(a),p=a.documentElement||k.parentNode,h=j("ie"),m=j("webkit");if((!j("mozilla")&&
!h&&!m&&!j("opera")||b==k||b==p)&&"undefined"!=typeof b.scrollIntoView)b.scrollIntoView(!1);else{var o="BackCompat"==a.compatMode,l=9<=h&&"frameElement"in b.ownerDocument.parentWindow?0<p.clientHeight&&0<p.clientWidth&&(0==k.clientHeight||0==k.clientWidth||k.clientHeight>p.clientHeight||k.clientWidth>p.clientWidth)?p:k:o?k:p,m=m?k:l,n=l.clientWidth,s=l.clientHeight,u=!f.isBodyLtr(a),r=c||f.position(b),v=b.parentNode,a=function(a){return 6>=h||h&&o?!1:"fixed"==d.get(a,"position").toLowerCase()};if(!a(b))for(;v;){v==
k&&(v=m);var t=f.position(v),w=a(v);if(v==m){t.w=n;t.h=s;m==p&&h&&u&&(t.x+=m.offsetWidth-t.w);if(0>t.x||!h)t.x=0;if(0>t.y||!h)t.y=0}else{var x=f.getPadBorderExtents(v);t.w-=x.w;t.h-=x.h;t.x+=x.l;t.y+=x.t;var B=v.clientWidth,A=t.w-B;if(0<B&&0<A)t.w=B,t.x+=u&&(h||v.clientLeft>x.l)?A:0;B=v.clientHeight;A=t.h-B;if(0<B&&0<A)t.h=B}if(w){if(0>t.y)t.h+=t.y,t.y=0;if(0>t.x)t.w+=t.x,t.x=0;if(t.y+t.h>s)t.h=s-t.y;if(t.x+t.w>n)t.w=n-t.x}var E=r.x-t.x,H=r.y-Math.max(t.y,0),Q=E+r.w-t.w,K=H+r.h-t.h;if(0<Q*E){var G=
Math[0>E?"max":"min"](E,Q);if(u&&(8==h&&!o||9<=h))G=-G;r.x+=v.scrollLeft;v.scrollLeft+=G;r.x-=v.scrollLeft}0<K*H&&(r.y+=v.scrollTop,v.scrollTop+=Math[0>H?"max":"min"](H,K),r.y-=v.scrollTop);v=v!=m&&!w&&v.parentNode}}}catch(z){console.error("scrollIntoView: "+z),b.scrollIntoView(!1)}}};h.setObject("dojo.window",b);return b})},"dijit/a11y":function(){define("dojo/_base/array,dojo/_base/config,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-style,dojo/sniff,./main".split(","),function(h,j,g,i,f,d,
b,e){var c=e._isElementShown=function(a){var b=d.get(a);return"hidden"!=b.visibility&&"collapsed"!=b.visibility&&"none"!=b.display&&"hidden"!=f.get(a,"type")};e.hasDefaultTabStop=function(a){switch(a.nodeName.toLowerCase()){case "a":return f.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;try{var c=a.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;b=c.body}catch(e){try{b=a.contentWindow.document.body}catch(d){return!1}}return b&&
("true"==b.contentEditable||b.firstChild&&"true"==b.firstChild.contentEditable);default:return"true"==a.contentEditable}};var a=e.isTabNavigable=function(a){return f.get(a,"disabled")?!1:f.has(a,"tabIndex")?0<=f.get(a,"tabIndex"):e.hasDefaultTabStop(a)};e._getTabNavigable=function(e){function d(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}var g,i,o,l,n,h,j={},r=function(e){for(e=e.firstChild;e;e=e.nextSibling)if(!(1!=e.nodeType||
9>=b("ie")&&"HTML"!==e.scopeName||!c(e))){if(a(e)){var k=+f.get(e,"tabIndex");if(!f.has(e,"tabIndex")||0==k)g||(g=e),i=e;else if(0<k){if(!o||k<l)l=k,o=e;if(!n||k>=h)h=k,n=e}k=d(e);f.get(e,"checked")&&k&&(j[k]=e)}"SELECT"!=e.nodeName.toUpperCase()&&r(e)}};c(e)&&r(e);return{first:j[d(g)]||g,last:j[d(i)]||i,lowest:j[d(o)]||o,highest:j[d(n)]||n}};e.getFirstInTabbingOrder=function(a,b){var c=e._getTabNavigable(i.byId(a,b));return c.lowest?c.lowest:c.first};e.getLastInTabbingOrder=function(a,b){var c=e._getTabNavigable(i.byId(a,
b));return c.last?c.last:c.highest};return{hasDefaultTabStop:e.hasDefaultTabStop,isTabNavigable:e.isTabNavigable,_getTabNavigable:e._getTabNavigable,getFirstInTabbingOrder:e.getFirstInTabbingOrder,getLastInTabbingOrder:e.getLastInTabbingOrder}})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./ready","./sniff","./_base/window"],function(h,j,g,i,f){var d=f.doc.documentElement,f=i("ie"),b=i("opera"),e=Math.floor,c=i("ff"),a=h.boxModel.replace(/-/,""),b={dj_quirks:i("quirks"),dj_opera:b,
dj_khtml:i("khtml"),dj_webkit:i("webkit"),dj_safari:i("safari"),dj_chrome:i("chrome"),dj_gecko:i("mozilla")};if(f)b.dj_ie=!0,b["dj_ie"+e(f)]=!0,b.dj_iequirks=i("quirks");c&&(b["dj_ff"+e(c)]=!0);b["dj_"+a]=!0;var k="",p;for(p in b)b[p]&&(k+=p+" ");d.className=j.trim(d.className+" "+k);g(90,function(){if(!h.isBodyLtr()){var a="dj_rtl dijitRtl "+k.replace(/ /g,"-rtl ");d.className=j.trim(d.className+" "+a+"dj_rtl dijitRtl "+k.replace(/ /g,"-rtl "))}});return i})},"dijit/hccss":function(){define(["dojo/dom-class",
"dojo/hccss","dojo/ready","dojo/_base/window"],function(h,j,g,i){g(90,function(){j("highcontrast")&&h.add(i.body(),"dijit_a11y")});return j})},"dojo/hccss":function(){define("require,./_base/config,./dom-class,./dom-style,./has,./ready,./_base/window".split(","),function(h,j,g,i,f,d,b){f.add("highcontrast",function(){var e=b.doc.createElement("div");e.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+(j.blankGif||h.toUrl("./resources/blank.gif"))+
");";b.body().appendChild(e);var c=i.getComputedStyle(e),a=c.backgroundImage,c=c.borderTopColor==c.borderRightColor||a&&("none"==a||"url(invalid-url:)"==a);8>=f("ie")?e.outerHTML="":b.body().removeChild(e);return c});d(90,function(){f("highcontrast")&&g.add(b.body(),"dj_a11y")});return f})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(h,j,g){return j("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=
this.domNode},addChild:function(i,f){var d=this.containerNode;if(f&&"number"==typeof f){var b=this.getChildren();if(b&&b.length>=f)d=b[f-1].domNode,f="after"}g.place(i.domNode,d,f);this._started&&!i._started&&i.startup()},removeChild:function(g){"number"==typeof g&&(g=this.getChildren()[g]);if(g)(g=g.domNode)&&g.parentNode&&g.parentNode.removeChild(g)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(g,f){var d=this.getChildren(),b=h.indexOf(this.getChildren(),
g);return d[b+f]},getIndexOfChild:function(g){return h.indexOf(this.getChildren(),g)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,dojo/query,dojo/sniff,../registry,../Viewport,./utils".split(","),function(h,j,g,i,f,d,b,e,c,a,k){return j("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var b=this.getParent();this._childOfLayoutWidget=
b&&b.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(a.on("resize",d.hitch(this,"resize")))}},_checkIfSingleChild:function(){var a=[],e=!1;b("> *",this.containerNode).some(function(b){var d=c.byNode(b);d&&d.resize?a.push(d):b.offsetHeight&&(e=!0)});this._singleChild=1==a.length&&!e?a[0]:null;g.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)},resize:function(a,b){this._resizeCalled=
!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,b){delete this._needLayout;!this._wasShown&&!1!==this.open&&this._onShow();a&&i.setMarginBox(this.domNode,a);var c=this.containerNode;if(c===this.domNode){var e=b||{};d.mixin(e,a||{});if(!("h"in e)||!("w"in e))e=d.mixin(i.getMarginBox(c),e);this._contentBox=k.marginBox2contentBox(c,e)}else this._contentBox=i.getContentBox(c);
this._layoutChildren()},_layoutChildren:function(){this.doLayout&&this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||i.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else h.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;
return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!g.contains(a,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/Viewport":function(){define("dojo/Evented,dojo/on,dojo/ready,dojo/sniff,dojo/_base/window,dojo/window".split(","),function(h,j,g,i,f,d){var b=new h;g(200,function(){var e=d.getBox();b._rlh=j(f.global,"resize",function(){var a=d.getBox();
e.h==a.h&&e.w==a.w||(e=a,b.emit("resize"))});if(8==i("ie")){var c=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=c)c=screen.deviceXDPI,b.emit("resize")},500)}});return b})},"dijit/layout/utils":function(){define("dojo/_base/array,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,../main".split(","),function(h,j,g,i,f,d){function b(b,c){var a=b.resize?b.resize(c):g.setMarginBox(b.domNode,c);a?f.mixin(b,a):(f.mixin(b,g.getMarginBox(b.domNode)),f.mixin(b,c))}d=f.getObject("layout",
!0,d);d.marginBox2contentBox=function(b,c){var a=i.getComputedStyle(b),d=g.getMarginExtents(b,a),f=g.getPadBorderExtents(b,a);return{l:i.toPixelValue(b,a.paddingLeft),t:i.toPixelValue(b,a.paddingTop),w:c.w-(d.w+f.w),h:c.h-(d.h+f.h)}};d.layoutChildren=function(e,c,a,d,g){c=f.mixin({},c);j.add(e,"dijitLayoutContainer");a=h.filter(a,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(h.filter(a,function(a){return"center"==a.region||"client"==a.layoutAlign}));h.forEach(a,function(a){var e=
a.domNode,f=a.region||a.layoutAlign;if(!f)throw Error("No region setting for "+a.id);var i=e.style;i.left=c.l+"px";i.top=c.t+"px";i.position="absolute";j.add(e,"dijitAlign"+(f.substring(0,1).toUpperCase()+f.substring(1)));e={};d&&d==a.id&&(e["top"==a.region||"bottom"==a.region?"h":"w"]=g);"top"==f||"bottom"==f?(e.w=c.w,b(a,e),c.h-=a.h,"top"==f?c.t+=a.h:i.top=c.t+c.h+"px"):"left"==f||"right"==f?(e.h=c.h,b(a,e),c.w-=a.w,"left"==f?c.l+=a.w:i.left=c.l+c.w+"px"):("client"==f||"center"==f)&&b(a,c)})};return{marginBox2contentBox:d.marginBox2contentBox,
layoutChildren:d.layoutChildren}})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(h,j){var g={};j.setObject("dojo.string",g);g.rep=function(g,f){if(0>=f||!g)return"";for(var d=[];;){f&1&&d.push(g);if(!(f>>=1))break;g+=g}return d.join("")};g.pad=function(i,f,d,b){d||(d="0");i=""+i;f=g.rep(d,Math.ceil((f-i.length)/d.length));return b?i+f:f+i};g.substitute=function(g,f,d,b){b=b||h.global;d=d?j.hitch(b,d):function(b){return b};return g.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,
function(e,c,a){e=j.getObject(c,!1,f);a&&(e=j.getObject(a,!1,b).call(b,e,c));return d(e,c).toString()})};g.trim=String.prototype.trim?j.trim:function(g){for(var g=g.replace(/^\s+/,""),f=g.length-1;0<=f;f--)if(/\S/.test(g.charAt(f))){g=g.substring(0,f+1);break}return g};return g})},"dojo/html":function(){define("./_base/kernel,./_base/lang,./_base/array,./_base/declare,./dom,./dom-construct,./parser".split(","),function(h,j,g,i,f,d,b){var e={};j.setObject("dojo.html",e);var c=0;e._secureForInnerHtml=
function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")};e._emptyNode=d.empty;e._setNodeContent=function(a,b){d.empty(a);if(b)if("string"==typeof b&&(b=d.toDom(b,a.ownerDocument)),!b.nodeType&&j.isArrayLike(b))for(var c=b.length,e=0;e<b.length;e=c==b.length?e+1:0)d.place(b[e],a,"last");else d.place(b,a,"last");return a};e._ContentSetter=i("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:h._scopeName,
startup:!0,constructor:function(a,b){j.mixin(this,a||{});b=this.node=f.byId(this.node||b);if(!this.id)this.id=["Setter",b?b.id||b.tagName:"",c++].join("_")},set:function(a,b){if(void 0!==a)this.content=a;b&&this._mixin(b);this.onBegin();this.setContent();var c=this.onEnd();return c&&c.then?c:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=e._setNodeContent(a,this.content)}catch(b){var c=this.onContentError(b);try{a.innerHTML=
c}catch(d){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+d.message,d)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(g.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);d.empty(this.node)},onBegin:function(){var a=this.content;if(j.isString(a)&&(this.cleanContent&&(a=e._secureForInnerHtml(a)),
this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},c;for(c in a)c in b||
(this[c]=a[c])},_parse:function(){var a=this.node;try{var c={};g.forEach(["dir","lang","textDir"],function(a){this[a]&&(c[a]=this[a])},this);var e=this;this.parseDeferred=b.parse({rootNode:a,noStart:!this.startup,inherited:c,scope:this.parserScope}).then(function(a){return e.parseResults=a})}catch(d){this._onError("Content",d,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,b,c){a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&e._setNodeContent(this.node,a,!0)}});e.set=
function(a,b,c){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),b="");return c?(new e._ContentSetter(j.mixin(c,{content:b,node:a}))).set():e._setNodeContent(a,b,!0)};return e})},"dojo/parser":function(){define("require,./_base/kernel,./_base/lang,./_base/array,./_base/config,./_base/html,./_base/window,./_base/url,./_base/json,./aspect,./date/stamp,./Deferred,./has,./query,./on,./ready".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l){function n(a){var b=
a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<u){var b=a._nameCaseMap={},e;for(e in c)"_"!==e.charAt(0)&&(b[e.toLowerCase()]=e);b._extendCnt=u}return b}function s(a){var b=a.join();if(!r[b]){for(var c=[],e=0,d=a.length;e<d;e++){var f=a[e];c[c.length]=r[f]=r[f]||g.getObject(f)||~f.indexOf("/")&&h(f)}a=c.shift();r[b]=c.length?a.createSubclass?a.createSubclass(c):a.extend.apply(a,c):a}return r[b]}var u=0;a.after(g,"extend",function(){u++},!0);var r={},v={_clearCache:function(){u++;r={}},_functionFromScript:function(a,
b){var c="",e="",d=a.getAttribute(b+"args")||a.getAttribute("args"),f=a.getAttribute("with"),d=(d||"").split(/\s*,\s*/);f&&f.length&&i.forEach(f.split(/\s*,\s*/),function(a){c+="with("+a+"){";e+="}"});return new Function(d,c+a.innerHTML+e)},instantiate:function(a,b,c){var b=b||{},c=c||{},e=(c.scope||j._scopeName)+"Type",d="data-"+(c.scope||j._scopeName)+"-",f=d+"type",g=d+"mixins",k=[];i.forEach(a,function(a){var c=e in b?b[e]:a.getAttribute(f)||a.getAttribute(e);if(c){var d=a.getAttribute(g),c=d?
[c].concat(d.split(/\s*,\s*/)):[c];k.push({node:a,types:c})}});return this._instantiate(k,b,c)},_instantiate:function(a,b,c){a=i.map(a,function(a){var e=a.ctor||s(a.types);if(!e)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(e,a.node,b,c,a.scripts,a.inherited)},this);!b._started&&!c.noStart&&i.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a},construct:function(b,d,f,l,p,h){var t;var s=b&&b.prototype,l=l||{},u={};
l.defaults&&g.mixin(u,l.defaults);h&&g.mixin(u,h);var v;q("dom-attributes-explicit")?v=d.attributes:q("dom-attributes-specified-flag")?v=i.filter(d.attributes,function(a){return a.specified}):(h=(/^input$|^img$/i.test(d.nodeName)?d:d.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),v=i.map(h.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==d.nodeName&&"value"==a||"enctype"==b?d.getAttribute(b):d.getAttributeNode(b).value}}));
var r=l.scope||j._scopeName,h="data-"+r+"-",z={};"dojo"!==r&&(z[h+"props"]="data-dojo-props",z[h+"type"]="data-dojo-type",z[h+"mixins"]="data-dojo-mixins",z[r+"type"]="dojoType",z[h+"id"]="data-dojo-id");for(var r=0,y,C=[],F,L;y=v[r++];){var J=y.name,N=J.toLowerCase();y=y.value;switch(z[N]||N){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":L=y;break;case "data-dojo-id":case "jsid":F=y;break;case "data-dojo-attach-point":case "dojoattachpoint":u.dojoAttachPoint=
y;break;case "data-dojo-attach-event":case "dojoattachevent":u.dojoAttachEvent=y;break;case "class":u["class"]=d.className;break;case "style":u.style=d.style&&d.style.cssText;break;default:if(J in s||(J=n(b)[N]||J),J in s)switch(typeof s[J]){case "string":u[J]=y;break;case "number":u[J]=y.length?Number(y):NaN;break;case "boolean":u[J]="false"!=y.toLowerCase();break;case "function":u[J]=""===y||-1!=y.search(/[^\w\.]+/i)?new Function(y):g.getObject(y,!1)||new Function(y);C.push(J);break;default:N=s[J],
u[J]=N&&"length"in N?y?y.split(/\s*,\s*/):[]:N instanceof Date?""==y?new Date(""):"now"==y?new Date:k.fromISOString(y):N instanceof e?j.baseUrl+y:c.fromJson(y)}else u[J]=y}}for(r=0;r<C.length;r++)v=C[r].toLowerCase(),d.removeAttribute(v),d[v]=null;if(L)try{L=c.fromJson.call(l.propsThis,"{"+L+"}"),g.mixin(u,L)}catch(T){throw Error(T.toString()+" in data-dojo-props='"+L+"'");}g.mixin(u,f);p||(p=b&&(b._noScript||s._noScript)?[]:m("> script[type^='dojo/']",d));f=[];l=[];L=[];C=[];if(p)for(r=0;r<p.length;r++){var I=
p[r];d.removeChild(I);v=I.getAttribute(h+"event")||I.getAttribute("event");z=I.getAttribute(h+"prop");J=I.getAttribute(h+"method");N=I.getAttribute(h+"advice");y=I.getAttribute("type");I=this._functionFromScript(I,h);v?"dojo/connect"==y?f.push({method:v,func:I}):"dojo/on"==y?C.push({event:v,func:I}):u[v]=I:"dojo/aspect"==y?f.push({method:J,advice:N,func:I}):"dojo/watch"==y?L.push({prop:z,func:I}):l.push(I)}t=(p=b.markupFactory||s.markupFactory)?p(u,d,b):new b(u,d),b=t;F&&g.setObject(F,b);for(r=0;r<
f.length;r++)a[f[r].advice||"after"](b,f[r].method,g.hitch(b,f[r].func),!0);for(r=0;r<l.length;r++)l[r].call(b);for(r=0;r<L.length;r++)b.watch(L[r].prop,L[r].func);for(r=0;r<C.length;r++)o(b,C[r].event,C[r].func);return b},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,e=c(a.parent),b={dir:b.getAttribute("dir")||e.dir,lang:b.getAttribute("lang")||e.lang,textDir:b.getAttribute(n)||e.textDir},d;for(d in b)b[d]&&(a.inherited[d]=b[d])}return a.inherited}var e=[],d=[],f=
{},g=(b.scope||j._scopeName)+"Type",k="data-"+(b.scope||j._scopeName)+"-",l=k+"type",n=k+"textdir",k=k+"mixins",m=a.firstChild,o=b.inherited;if(!o){var u=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&u(a.parentNode,b)},o={dir:u(a,"dir"),lang:u(a,"lang"),textDir:u(a,n)},v;for(v in o)o[v]||delete o[v]}for(var o={inherited:o},r,J;;)if(m)if(1!=m.nodeType)m=m.nextSibling;else if(r&&"script"==m.nodeName.toLowerCase())(N=m.getAttribute("type"))&&/^dojo\/\w/i.test(N)&&r.push(m),m=
m.nextSibling;else if(J)m=m.nextSibling;else{var N=m.getAttribute(l)||m.getAttribute(g);v=m.firstChild;if(!N&&(!v||3==v.nodeType&&!v.nextSibling))m=m.nextSibling;else{J=null;if(N){var T=m.getAttribute(k);r=T?[N].concat(T.split(/\s*,\s*/)):[N];try{J=s(r)}catch(I){}J||i.forEach(r,function(a){~a.indexOf("/")&&!f[a]&&(f[a]=!0,d[d.length]=a)});T=J&&!J.prototype._noScript?[]:null;o={types:r,ctor:J,parent:o,node:m,scripts:T};o.inherited=c(o);e.push(o)}else o={node:m,scripts:r,parent:o};m=v;r=T;J=J&&J.prototype.stopParser&&
!b.template}}else{if(!o||!o.node)break;m=o.node.nextSibling;J=!1;o=o.parent;r=o.scripts}var D=new p;d.length?(q("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+d.join(", ")),h(d,function(){D.resolve(i.filter(e,function(a){if(!a.ctor)try{a.ctor=s(a.types)}catch(c){}for(var e=a.parent;e&&!e.types;)e=e.parent;var d=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(d&&d.stopParser&&!b.template);a.instantiate=!e||e.instantiate&&e.instantiateChildren;return a.instantiate}))})):
D.resolve(e);return D.promise},_require:function(a){var a=c.fromJson("{"+a.innerHTML+"}"),b=[],e=[],d=new p,f;for(f in a)b.push(f),e.push(a[f]);h(e,function(){for(var a=0;a<b.length;a++)g.setObject(b[a],arguments[a]);d.resolve(arguments)});return d.promise},_scanAmd:function(a){var b=new p,c=b.promise;b.resolve(!0);var e=this;m("script[type='dojo/require']",a).forEach(function(a){c=c.then(function(){return e._require(a)});a.parentNode.removeChild(a)});return c},parse:function(a,c){var e;!c&&a&&a.rootNode?
(c=a,e=c.rootNode):a&&g.isObject(a)&&!("nodeType"in a)?c=a:e=a;e=e?d.byId(e):b.body();var c=c||{},f=c.template?{template:!0}:{},k=[],l=this,i=this._scanAmd(e,c).then(function(){return l.scan(e,c)}).then(function(a){return k=k.concat(l._instantiate(a,f,c))}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});g.mixin(k,i);return k}};j.parser=v;f.parseOnLoad&&l(100,v,"parse");return v})},"dojo/_base/html":function(){define("./kernel,../dom,../dom-style,../dom-attr,../dom-prop,../dom-class,../dom-construct,../dom-geometry".split(","),
function(h,j,g,i,f,d,b,e){h.byId=j.byId;h.isDescendant=j.isDescendant;h.setSelectable=j.setSelectable;h.getAttr=i.get;h.setAttr=i.set;h.hasAttr=i.has;h.removeAttr=i.remove;h.getNodeProp=i.getNodeProp;h.attr=function(b,a,e){return 2==arguments.length?i["string"==typeof a?"get":"set"](b,a):i.set(b,a,e)};h.hasClass=d.contains;h.addClass=d.add;h.removeClass=d.remove;h.toggleClass=d.toggle;h.replaceClass=d.replace;h._toDom=h.toDom=b.toDom;h.place=b.place;h.create=b.create;h.empty=function(c){b.empty(c)};
h._destroyElement=h.destroy=function(c){b.destroy(c)};h._getPadExtents=h.getPadExtents=e.getPadExtents;h._getBorderExtents=h.getBorderExtents=e.getBorderExtents;h._getPadBorderExtents=h.getPadBorderExtents=e.getPadBorderExtents;h._getMarginExtents=h.getMarginExtents=e.getMarginExtents;h._getMarginSize=h.getMarginSize=e.getMarginSize;h._getMarginBox=h.getMarginBox=e.getMarginBox;h.setMarginBox=e.setMarginBox;h._getContentBox=h.getContentBox=e.getContentBox;h.setContentSize=e.setContentSize;h._isBodyLtr=
h.isBodyLtr=e.isBodyLtr;h._docScroll=h.docScroll=e.docScroll;h._getIeDocumentElementOffset=h.getIeDocumentElementOffset=e.getIeDocumentElementOffset;h._fixIeBiDiScrollLeft=h.fixIeBiDiScrollLeft=e.fixIeBiDiScrollLeft;h.position=e.position;h.marginBox=function(b,a){return a?e.setMarginBox(b,a):e.getMarginBox(b)};h.contentBox=function(b,a){return a?e.setContentSize(b,a):e.getContentBox(b)};h.coords=function(b,a){h.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");var b=j.byId(b),
d=g.getComputedStyle(b),d=e.getMarginBox(b,d),f=e.position(b,a);d.x=f.x;d.y=f.y;return d};h.getProp=f.get;h.setProp=f.set;h.prop=function(b,a,e){return 2==arguments.length?f["string"==typeof a?"get":"set"](b,a):f.set(b,a,e)};h.getStyle=g.get;h.setStyle=g.set;h.getComputedStyle=g.getComputedStyle;h.__toPixelValue=h.toPixelValue=g.toPixelValue;h.style=function(b,a,e){switch(arguments.length){case 1:return g.get(b);case 2:return g["string"==typeof a?"get":"set"](b,a)}return g.set(b,a,e)};return h})},
"dojo/_base/url":function(){define(["./kernel"],function(h){var j=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,g=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,i=function(){for(var f=arguments,d=[f[0]],b=1;b<f.length;b++)if(f[b]){var e=new i(f[b]+""),d=new i(d[0]+"");if(""==e.path&&!e.scheme&&!e.authority&&!e.query){if(null!=e.fragment)d.fragment=e.fragment;e=d}else if(!e.scheme&&(e.scheme=d.scheme,!e.authority&&(e.authority=d.authority,"/"!=e.path.charAt(0)))){for(var d=
(d.path.substring(0,d.path.lastIndexOf("/")+1)+e.path).split("/"),c=0;c<d.length;c++)"."==d[c]?c==d.length-1?d[c]="":(d.splice(c,1),c--):0<c&&!(1==c&&""==d[0])&&".."==d[c]&&".."!=d[c-1]&&(c==d.length-1?(d.splice(c,1),d[c-1]=""):(d.splice(c-1,2),c-=2));e.path=d.join("/")}d=[];e.scheme&&d.push(e.scheme,":");e.authority&&d.push("//",e.authority);d.push(e.path);e.query&&d.push("?",e.query);e.fragment&&d.push("#",e.fragment)}this.uri=d.join("");f=this.uri.match(j);this.scheme=f[2]||(f[1]?"":null);this.authority=
f[4]||(f[3]?"":null);this.path=f[5];this.query=f[7]||(f[6]?"":null);this.fragment=f[9]||(f[8]?"":null);if(null!=this.authority)f=this.authority.match(g),this.user=f[3]||null,this.password=f[4]||null,this.host=f[6]||f[7],this.port=f[9]||null};i.prototype.toString=function(){return this.uri};return h._Url=i})},"dojo/_base/json":function(){define(["./kernel","../json"],function(h,j){h.fromJson=function(g){return eval("("+g+")")};h._escapeString=j.stringify;h.toJsonIndentStr="\t";h.toJson=function(g,
i){return j.stringify(g,function(f,d){if(d){var b=d.__json__||d.json;if("function"==typeof b)return b.call(d)}return d},i&&h.toJsonIndentStr)};return h})},"dojo/json":function(){define(["./has"],function(h){var j="undefined"!=typeof JSON;h.add("json-parse",j);h.add("json-stringify",j&&'{"a":1}'==JSON.stringify({a:0},function(g,f){return f||1}));if(h("json-stringify"))return JSON;var g=function(g){return('"'+g.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,
"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:h("json-parse")?JSON.parse:function(g,f){if(f&&!/^([\s\[\{]*(?:"(?:\\.|[^"])+"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(g))throw new SyntaxError("Invalid characters in JSON");return eval("("+g+")")},stringify:function(i,f,d){function b(c,a,k){f&&(c=f(k,c));var i;i=typeof c;if("number"==i)return isFinite(c)?c+"":"null";if("boolean"==i)return c+"";if(null===c)return"null";if("string"==typeof c)return g(c);
if("function"==i||"undefined"==i)return e;if("function"==typeof c.toJSON)return b(c.toJSON(k),a,k);if(c instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,b,e){a=c["getUTC"+b]()+(e?1:0);return 10>a?"0"+a:a});if(c.valueOf()!==c)return b(c.valueOf(),a,k);var h=d?a+d:"",m=d?" ":"",o=d?"\n":"";if(c instanceof Array){for(var m=c.length,l=[],k=0;k<m;k++)i=b(c[k],h,k),"string"!=typeof i&&(i="null"),l.push(o+h+i);return"["+l.join(",")+o+
a+"]"}l=[];for(k in c){var n;if(c.hasOwnProperty(k)){if("number"==typeof k)n='"'+k+'"';else if("string"==typeof k)n=g(k);else continue;i=b(c[k],h,k);"string"==typeof i&&l.push(o+h+n+":"+m+i)}}return"{"+l.join(",")+o+a+"}"}var e;"string"==typeof f&&(d=f,f=null);return b(i,"","")}}})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(h,j){var g={};h.setObject("dojo.date.stamp",g);g.fromISOString=function(i,f){if(!g._isoRegExp)g._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;
var d=g._isoRegExp.exec(i),b=null;if(d){d.shift();d[1]&&d[1]--;d[6]&&(d[6]*=1E3);f&&(f=new Date(f),j.forEach(j.map("FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds".split(","),function(a){return f["get"+a]()}),function(a,b){d[b]=d[b]||a}));b=new Date(d[0]||1970,d[1]||0,d[2]||1,d[3]||0,d[4]||0,d[5]||0,d[6]||0);100>d[0]&&b.setFullYear(d[0]||1970);var e=0,c=d[7]&&d[7].charAt(0);"Z"!=c&&(e=60*(d[8]||0)+(Number(d[9])||0),"-"!=c&&(e*=-1));c&&(e-=b.getTimezoneOffset());e&&b.setTime(b.getTime()+6E4*
e)}return b};g.toISOString=function(g,f){var d=function(a){return 10>a?"0"+a:a},f=f||{},b=[],e=f.zulu?"getUTC":"get",c="";"time"!=f.selector&&(c=g[e+"FullYear"](),c=["0000".substr((c+"").length)+c,d(g[e+"Month"]()+1),d(g[e+"Date"]())].join("-"));b.push(c);if("date"!=f.selector){c=[d(g[e+"Hours"]()),d(g[e+"Minutes"]()),d(g[e+"Seconds"]())].join(":");e=g[e+"Milliseconds"]();f.milliseconds&&(c+="."+(100>e?"0":"")+d(e));if(f.zulu)c+="Z";else if("time"!=f.selector)var e=g.getTimezoneOffset(),a=Math.abs(e),
c=c+((0<e?"-":"+")+d(Math.floor(a/60))+":"+d(a%60));b.push(c)}return b.join("T")};return g})},"dojo/i18n":function(){define("./_base/kernel,require,./has,./_base/array,./_base/config,./_base/lang,./_base/xhr,./json,module".split(","),function(h,j,g,i,f,d,b,e,c){g.add("dojo-preload-i18n-Api",1);var b=h.i18n={},a=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,k=function(a,b,c,e){for(var d=[c+e],b=b.split("-"),f="",g=0;g<b.length;g++)f+=(f?"-":"")+b[g],(!a||a[f])&&d.push(c+f+"/"+e);return d},p={},q=function(a,
b,c){c=c?c.toLowerCase():h.locale;a=a.replace(/\./g,"/");b=b.replace(/\./g,"/");return/root/i.test(c)?a+"/nls/"+b:a+"/nls/"+c+"/"+b};h.getL10nName=function(a,b,e){return c.id+"!"+q(a,b,e)};var m=function(a,b,c,e,f,g){a([b],function(l){var i=d.clone(l.root),n=k(!l._v1x&&l,f,c,e);a(n,function(){for(var a=1;a<n.length;a++)i=d.mixin(d.clone(i),arguments[a]);p[b+"/"+f]=i;g()})})},o=function(a){var b=f.extraLocale||[],b=d.isArray(b)?b:[b];b.push(a);return b},l=function(b,c,f){if(g("dojo-preload-i18n-Api")){var k=
b.split("*"),l="preload"==k[1];l&&(p[b]||(p[b]=1,v(k[2],e.parse(k[3]),1,c)),f(1));if(!(k=l))u&&r.push([b,c,f]),k=u;if(k)return}var b=a.exec(b),n=b[1]+"/",s=b[5]||b[4],j=n+s,k=(b=b[5]&&b[4])||h.locale,q=j+"/"+k,b=b?[k]:o(k),w=b.length,x=function(){--w||f(d.delegate(p[q]))};i.forEach(b,function(a){var b=j+"/"+a;g("dojo-preload-i18n-Api")&&t(b);p[b]?x():m(c,j,n,s,a,x)})};if(g("dojo-unit-tests"))var n=b.unitTests=[];g("dojo-preload-i18n-Api");var s=b.normalizeLocale=function(a){a=a?a.toLowerCase():h.locale;
return"root"==a?"ROOT":a},u=0,r=[],v=b._preloadLocalizations=function(a,b,c,e){function d(a,b){e([a],b)}function f(a,b){for(var c=a.split("-");c.length;){if(b(c.join("-")))return;c.pop()}b("ROOT")}function g(c){c=s(c);f(c,function(c){if(0<=i.indexOf(b,c)){var e=a.replace(/\./g,"/")+"_"+c;u++;d(e,function(a){for(var b in a)p[j.toAbsMid(b)+"/"+c]=a[b];for(--u;!u&&r.length;)l.apply(null,r.shift())});return!0}return!1})}e=e||j;g();i.forEach(h.config.extraLocale,g)},t=function(){},w={},x=new Function("__bundle",
"__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},\t   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),t=function(a){for(var b,c=a.split("/"),e=h.global[c[0]],d=1;e&&d<c.length-1;e=e[c[d++]]);
e&&((b=e[c[d]])||(b=e[c[d].replace(/-/g,"_")]),b&&(p[a]=b));return b};b.getLocalization=function(a,b,c){var e,a=q(a,b,c);l(a,j,function(a){e=a});return e};g("dojo-unit-tests")&&n.push(function(a){a.register("tests.i18n.unit",function(a){var b;b=x("{prop:1}",t,"nonsense",w);a.is({prop:1},b);a.is(void 0,b[1]);b=x("({prop:1})",t,"nonsense",w);a.is({prop:1},b);a.is(void 0,b[1]);b=x("{'prop-x':1}",t,"nonsense",w);a.is({"prop-x":1},b);a.is(void 0,b[1]);b=x("({'prop-x':1})",t,"nonsense",w);a.is({"prop-x":1},
b);a.is(void 0,b[1]);b=x("define({'prop-x':1})",t,"nonsense",w);a.is(w,b);a.is({"prop-x":1},w.result);b=x("define('some/module', {'prop-x':1})",t,"nonsense",w);a.is(w,b);a.is({"prop-x":1},w.result);b=x("this is total nonsense and should throw an error",t,"nonsense",w);a.is(b instanceof Error,!0)})});return d.mixin(b,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:l,cache:p})})},"dojo/_base/xhr":function(){define("./kernel,./sniff,require,../io-query,../dom,../dom-form,./Deferred,./config,./json,./lang,./array,../on,../aspect,../request/watch,../request/xhr,../request/util".split(","),
function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l){h._xhrObj=o._create;var n=h.config;h.objectToQuery=i.objectToQuery;h.queryToObject=i.queryToObject;h.fieldToObject=d.fieldToObject;h.formToObject=d.toObject;h.formToQuery=d.toQuery;h.formToJson=d.toJson;h._blockAsync=!1;var s=h._contentHandlers=h.contentHandlers={text:function(a){return a.responseText},json:function(a){return c.fromJson(a.responseText||null)},"json-comment-filtered":function(a){e.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}&&\nUse djConfig.useCommentedJson=true to turn off this message.");
var a=a.responseText,b=a.indexOf("/*"),d=a.lastIndexOf("*/");if(-1==b||-1==d)throw Error("JSON was not comment filtered");return c.fromJson(a.substring(b+2,d))},javascript:function(a){return h.eval(a.responseText)},xml:function(a){var b=a.responseXML;if(j("ie")&&(!b||!b.documentElement)){var c=function(a){return"MSXML"+a+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];k.some(c,function(c){try{var e=new ActiveXObject(c);e.async=!1;e.loadXML(a.responseText);b=e}catch(d){return!1}return!0})}return b},
"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?s["json-comment-filtered"](a):s.json(a)}};h._ioSetArgs=function(c,e,g,k){var l={args:c,url:c.url},m=null;if(c.form){var m=f.byId(c.form),o=m.getAttributeNode("action");l.url=l.url||(o?o.value:null);m=d.toObject(m)}o=[{}];m&&o.push(m);c.content&&o.push(c.content);c.preventCache&&o.push({"dojo.preventCache":(new Date).valueOf()});l.query=i.objectToQuery(a.mixin.apply(null,o));l.handleAs=c.handleAs||"text";
var p=new b(function(a){a.canceled=!0;e&&e(a);var b=a.ioArgs.error;if(!b)b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b;return b});p.addCallback(g);var s=c.load;s&&a.isFunction(s)&&p.addCallback(function(a){return s.call(c,a,l)});var t=c.error;t&&a.isFunction(t)&&p.addErrback(function(a){return t.call(c,a,l)});var j=c.handle;j&&a.isFunction(j)&&p.addBoth(function(a){return j.call(c,a,l)});p.addErrback(function(a){return k(a,p)});n.ioPublish&&h.publish&&!1!==l.args.ioPublish&&(p.addCallbacks(function(a){h.publish("/dojo/io/load",
[p,a]);return a},function(a){h.publish("/dojo/io/error",[p,a]);return a}),p.addBoth(function(a){h.publish("/dojo/io/done",[p,a]);return a}));p.ioArgs=l;return p};var u=function(a){a=s[a.ioArgs.handleAs](a.ioArgs.xhr);return void 0===a?null:a},r=function(a,b){b.ioArgs.args.failOk||console.error(a);return a},v=function(a){0>=t&&(t=0,n.ioPublish&&h.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish)&&h.publish("/dojo/io/stop"))},t=0;q.after(m,"_onAction",function(){t-=1});q.after(m,"_onInFlight",v);h._ioCancelAll=
m.cancelAll;h._ioNotifyStart=function(a){n.ioPublish&&h.publish&&!1!==a.ioArgs.args.ioPublish&&(t||h.publish("/dojo/io/start"),t+=1,h.publish("/dojo/io/send",[a]))};h._ioWatch=function(b,c,e,d){b.ioArgs.options=b.ioArgs.args;a.mixin(b,{response:b.ioArgs,isValid:function(){return c(b)},isReady:function(){return e(b)},handleResponse:function(){return d(b)}});m(b);v(b)};h._ioAddQueryToUrl=function(a){if(a.query.length)a.url+=(-1==a.url.indexOf("?")?"?":"&")+a.query,a.query=null};h.xhr=function(a,b,c){var e,
d=h._ioSetArgs(b,function(){e&&e.cancel()},u,r),f=d.ioArgs;"postData"in b?f.query=b.postData:"putData"in b?f.query=b.putData:"rawBody"in b?f.query=b.rawBody:(2<arguments.length&&!c||-1==="POST|PUT".indexOf(a.toUpperCase()))&&h._ioAddQueryToUrl(f);var g={method:a,handleAs:"text",timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:f};if("undefined"!==typeof b.headers)g.headers=b.headers;if("undefined"!==typeof b.contentType){if(!g.headers)g.headers={};g.headers["Content-Type"]=b.contentType}if("undefined"!==
typeof f.query)g.data=f.query;if("undefined"!==typeof b.sync)g.sync=b.sync;h._ioNotifyStart(d);try{e=o(f.url,g,!0)}catch(k){return d.cancel(),d}d.ioArgs.xhr=e.response.xhr;e.then(function(){d.resolve(d)}).otherwise(function(a){f.error=a;if(a.response)a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr;d.reject(a)});return d};h.xhrGet=function(a){return h.xhr("GET",a)};h.rawXhrPost=h.xhrPost=function(a){return h.xhr("POST",a,!0)};h.rawXhrPut=h.xhrPut=function(a){return h.xhr("PUT",
a,!0)};h.xhrDelete=function(a){return h.xhr("DELETE",a)};h._isDocumentOk=function(a){return l.checkStatus(a.status)};h._getText=function(a){var b;h.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};a.mixin(h.xhr,{_xhrObj:h._xhrObj,fieldToObject:d.fieldToObject,formToObject:d.toObject,objectToQuery:i.objectToQuery,formToQuery:d.toQuery,formToJson:d.toJson,queryToObject:i.queryToObject,contentHandlers:s,_ioSetArgs:h._ioSetArgs,_ioCancelAll:h._ioCancelAll,_ioNotifyStart:h._ioNotifyStart,_ioWatch:h._ioWatch,
_ioAddQueryToUrl:h._ioAddQueryToUrl,_isDocumentOk:h._isDocumentOk,_getText:h._getText,get:h.xhrGet,post:h.xhrPost,put:h.xhrPut,del:h.xhrDelete});return h.xhr})},"dojo/io-query":function(){define(["./_base/lang"],function(h){var j={};return{objectToQuery:function(g){var i=encodeURIComponent,f=[],d;for(d in g){var b=g[d];if(b!=j[d]){var e=i(d)+"=";if(h.isArray(b))for(var c=0,a=b.length;c<a;++c)f.push(e+i(b[c]));else f.push(e+i(b))}}return f.join("&")},queryToObject:function(g){for(var i=decodeURIComponent,
g=g.split("&"),f={},d,b,e=0,c=g.length;e<c;++e)if(b=g[e],b.length){var a=b.indexOf("=");0>a?(d=i(b),b=""):(d=i(b.slice(0,a)),b=i(b.slice(a+1)));"string"==typeof f[d]&&(f[d]=[f[d]]);h.isArray(f[d])?f[d].push(b):f[d]=b}return f}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(h,j,g,i){var f={fieldToObject:function(d){var b=null;if(d=j.byId(d)){var e=d.name,c=(d.type||"").toLowerCase();if(e&&c&&!d.disabled)if("radio"==c||"checkbox"==c){if(d.checked)b=d.value}else if(d.multiple){b=
[];for(d=[d.firstChild];d.length;)for(e=d.pop();e;e=e.nextSibling)if(1==e.nodeType&&"option"==e.tagName.toLowerCase())e.selected&&b.push(e.value);else{e.nextSibling&&d.push(e.nextSibling);e.firstChild&&d.push(e.firstChild);break}}else b=d.value}return b},toObject:function(d){for(var b={},d=j.byId(d).elements,e=0,c=d.length;e<c;++e){var a=d[e],g=a.name,i=(a.type||"").toLowerCase();if(g&&i&&0>"file|submit|image|reset|button".indexOf(i)&&!a.disabled){var q=b,m=g,a=f.fieldToObject(a);if(null!==a){var o=
q[m];"string"==typeof o?q[m]=[o,a]:h.isArray(o)?o.push(a):q[m]=a}if("image"==i)b[g+".x"]=b[g+".y"]=b[g].x=b[g].y=0}}return b},toQuery:function(d){return g.objectToQuery(f.toObject(d))},toJson:function(d,b){return i.stringify(f.toObject(d),null,b?4:0)}};return f})},"dojo/request/watch":function(){define("./util,../errors/RequestTimeoutError,../errors/CancelError,../_base/array,../_base/window,../has!host-browser?dom-addeventlistener?:../on:".split(","),function(h,j,g,i,f,d){function b(){for(var b=
+new Date,d=0,f;d<a.length&&(f=a[d]);d++){var g=f.response,i=g.options;if(f.isCanceled&&f.isCanceled()||f.isValid&&!f.isValid(g))a.splice(d--,1),e._onAction&&e._onAction();else if(f.isReady&&f.isReady(g))a.splice(d--,1),f.handleResponse(g),e._onAction&&e._onAction();else if(f.startTime&&f.startTime+(i.timeout||0)<b)a.splice(d--,1),f.cancel(new j("Timeout exceeded",g)),e._onAction&&e._onAction()}e._onInFlight&&e._onInFlight(f);a.length||(clearInterval(c),c=null)}function e(e){if(e.response.options.timeout)e.startTime=
+new Date;e.isFulfilled()||(a.push(e),c||(c=setInterval(b,50)),e.response.options.sync&&b())}var c=null,a=[];e.cancelAll=function(){try{i.forEach(a,function(a){try{a.cancel(new g("All requests canceled."))}catch(b){}})}catch(b){}};f&&d&&f.doc.attachEvent&&d(f.global,"unload",function(){e.cancelAll()});return e})},"dojo/request/util":function(){define("exports,../errors/RequestError,../errors/CancelError,../Deferred,../io-query,../_base/array,../_base/lang".split(","),function(h,j,g,i,f,d,b){function e(a){return c(a)}
h.deepCopy=function(a,b){for(var c in b){var e=a[c],d=b[c];e!==d&&(e&&"object"===typeof e&&d&&"object"===typeof d?h.deepCopy(e,d):a[c]=d)}return a};h.deepCreate=function(a,c){var c=c||{},e=b.delegate(a),d,f;for(d in a)(f=a[d])&&"object"===typeof f&&(e[d]=h.deepCreate(f,c[d]));return h.deepCopy(e,c)};var c=Object.freeze||function(a){return a};h.deferred=function(a,d,f,q,m,o){var l=new i(function(b){d&&d(l,a);return!b||!(b instanceof j)&&!(b instanceof g)?new g("Request canceled",a):b});l.response=
a;l.isValid=f;l.isReady=q;l.handleResponse=m;f=l.then(e).otherwise(function(b){b.response=a;throw b;});h.notify&&f.then(b.hitch(h.notify,"emit","load"),b.hitch(h.notify,"emit","error"));q=f.then(function(a){return a.data||a.text});f=c(b.delegate(q,{response:f}));o&&l.then(function(a){o.call(l,a)},function(b){o.call(l,a,b)});l.promise=f;l.then=f.then;return l};h.addCommonMethods=function(a,c){d.forEach(c||["GET","POST","PUT","DELETE"],function(c){a[("DELETE"===c?"DEL":c).toLowerCase()]=function(e,
d){d=b.delegate(d||{});d.method=c;return a(e,d)}})};h.parseArgs=function(a,b,c){var e=b.data,d=b.query;if(e&&!c&&"object"===typeof e)b.data=f.objectToQuery(e);d?("object"===typeof d&&(d=f.objectToQuery(d)),b.preventCache&&(d+=(d?"&":"")+"request.preventCache="+ +new Date)):b.preventCache&&(d="request.preventCache="+ +new Date);a&&d&&(a+=(~a.indexOf("?")?"&":"?")+d);return{url:a,options:b,getHeader:function(){return null}}};h.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||
!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(h){return h("RequestError",function(h,g){this.response=g})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(h,j){return h("RequestTimeoutError",null,j,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(h,j,g,i,f){function d(a,b){var c=a.xhr;a.status=a.xhr.status;a.text=c.responseText;if("xml"===
a.options.handleAs)a.data=c.responseXML;if(!b)try{g(a)}catch(e){b=e}b?this.reject(b):i.checkStatus(c.status)?this.resolve(a):(b=new h("Unable to load "+a.url+" status: "+c.status,a),this.reject(b))}function b(g,n,m){var o=i.parseArgs(g,i.deepCreate(q,n),f("native-formdata")&&n&&n.data&&n.data instanceof FormData),g=o.url,n=o.options,r,v=i.deferred(o,k,e,c,d,function(){r&&r()}),t=o.xhr=b._create();if(!t)return v.cancel(new h("XHR was not created")),m?v:v.promise;o.getHeader=function(a){return this.xhr.getResponseHeader(a)};
a&&(r=a(t,v,o));var w=n.data,x=!n.sync,B=n.method;try{t.open(B,g,x,n.user||p,n.password||p);if(n.withCredentials)t.withCredentials=n.withCredentials;var A=n.headers,E;if(A)for(var H in A)"content-type"===H.toLowerCase()?E=A[H]:A[H]&&t.setRequestHeader(H,A[H]);E&&!1!==E&&t.setRequestHeader("Content-Type",E);(!A||!("X-Requested-With"in A))&&t.setRequestHeader("X-Requested-With","XMLHttpRequest");i.notify&&i.notify.emit("send",o,v.promise.cancel);t.send(w)}catch(Q){v.reject(Q)}j(v);t=null;return m?v:
v.promise}f.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});f.add("dojo-force-activex-xhr",function(){return f("activex")&&!document.addEventListener&&"file:"===window.location.protocol});f.add("native-xhr2",function(){if(f("native-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});f.add("native-formdata",function(){return"function"===typeof FormData});var e,c,a,k;f("native-xhr2")?(e=
function(){return!this.isFulfilled()},k=function(a,b){b.xhr.abort()},a=function(a,b,c){function e(){b.handleResponse(c)}function d(a){a=new h("Unable to load "+c.url+" status: "+a.target.status,c);b.handleResponse(c,a)}function f(a){if(a.lengthComputable)c.loaded=a.loaded,c.total=a.total,b.progress(c)}a.addEventListener("load",e,!1);a.addEventListener("error",d,!1);a.addEventListener("progress",f,!1);return function(){a.removeEventListener("load",e,!1);a.removeEventListener("error",d,!1);a.removeEventListener("progress",
f,!1)}}):(e=function(a){return a.xhr.readyState},c=function(a){return 4===a.xhr.readyState},k=function(a,b){var c=b.xhr,e=typeof c.abort;("function"===e||"object"===e||"unknown"===e)&&c.abort()});var p,q={data:null,query:null,sync:!1,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}};b._create=function(){throw Error("XMLHTTP not available");};if(f("native-xhr")&&!f("dojo-force-activex-xhr"))b._create=function(){return new XMLHttpRequest};else if(f("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),
b._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(m){try{new ActiveXObject("Microsoft.XMLHTTP"),b._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(o){}}i.addCommonMethods(b);return b})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has"],function(h,j,g,i){function f(b){var a=e[b.options.handleAs];b.data=a?a(b):b.data||b.text;return b}i.add("activex","undefined"!==typeof ActiveXObject);var d;if(i("activex")){var b=
["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];d=function(c){var a=c.data;if(!a||!a.documentElement){var e=c.text;g.some(b,function(b){try{var c=new ActiveXObject(b);c.async=!1;c.loadXML(e);a=c}catch(d){return!1}return!0})}return a}}var e={javascript:function(b){return j.eval(b.text||"")},json:function(b){return h.parse(b.text||null)},xml:d};f.register=function(b,a){e[b]=a};return f})},"dijit/layout/BorderContainer":function(){define("dojo/_base/array,dojo/cookie,dojo/_base/declare,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/on,dojo/touch,../_WidgetBase,../_Widget,../_TemplatedMixin,./_LayoutWidget,./utils".split(","),
function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l,n){var s=g("dijit.layout._Splitter",[m,o],{live:!0,templateString:'<div class="dijitSplitter" data-dojo-attach-event="onkeypress:_onKeyPress,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" role="separator"><div class="dijitSplitterThumb"></div></div>',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?
1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);i.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var a=j(this._cookieName);a&&(this.child.domNode.style[this.horizontal?"height":"width"]=a)}},_computeMaxSize:function(){var a=this.horizontal?"h":"w",b=d.getMarginBox(this.child.domNode)[a],c=h.filter(this.container.getChildren(),function(a){return"center"==a.region})[0],a=d.getMarginBox(c.domNode)[a];
return Math.min(this.child.maxSize,b+a)},_startDrag:function(b){if(!this.cover)this.cover=f.place("<div class=dijitSplitterCover></div>",this.child.domNode,"after");i.add(this.cover,"dijitSplitterCoverActive");this.fake&&f.destroy(this.fake);if(!(this._resize=this.live))(this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),i.add(this.domNode,"dijitSplitterShadow"),f.place(this.fake,this.domNode,"after");i.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");
this.fake&&i.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var c=this._factor,g=this.horizontal,l=g?"pageY":"pageX",n=b[l],m=this.domNode.style,h=d.getMarginBox(this.child.domNode)[g?"h":"w"],o=this._computeMaxSize(),s=this.child.minSize||20,g=this.region,j="top"==g||"bottom"==g?"top":"left",u=parseInt(m[j],10),q=this._resize,z=a.hitch(this.container,"_layoutChildren",this.child.id),g=this.ownerDocument;this._handlers=this._handlers.concat([k(g,p.move,this._drag=
function(a,b){var e=a[l]-n,d=c*e+h,f=Math.max(Math.min(d,o),s);(q||b)&&z(f);m[j]=e+u+c*(f-d)+"px"}),k(g,"dragstart",e.stop),k(this.ownerDocumentBody,"selectstart",e.stop),k(g,p.release,a.hitch(this,"_stopDrag"))]);e.stop(b)},_onMouse:function(a){a="mouseover"==a.type||"mouseenter"==a.type;i.toggle(this.domNode,"dijitSplitterHover",a);i.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",a)},_stopDrag:function(a){try{this.cover&&i.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&
f.destroy(this.fake),i.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(a),this._drag(a,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&j(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var a;a=this._handlers.pop();)a.remove()},_onKeyPress:function(a){this._resize=!0;var b=this.horizontal,f=1;switch(a.charOrCode){case b?
c.UP_ARROW:c.LEFT_ARROW:f*=-1;case b?c.DOWN_ARROW:c.RIGHT_ARROW:break;default:return}b=d.getMarginSize(this.child.domNode)[b?"h":"w"]+this._factor*f;this.container._layoutChildren(this.child.id,Math.max(Math.min(b,this._computeMaxSize()),this.child.minSize));e.stop(a)},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),u=g("dijit.layout._Gutter",[m,o],{templateString:'<div class="dijitGutter" role="presentation"></div>',
postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments);i.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}}),g=g("dijit.layout.BorderContainer",l,{design:"headline",gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:s,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},startup:function(){this._started||(h.forEach(this.getChildren(),
this._setupChild,this),this.inherited(arguments))},_setupChild:function(b){var c=b.region;if(c){this.inherited(arguments);i.add(b.domNode,this.baseClass+"Pane");var e=this.isLeftToRight();"leading"==c&&(c=e?"left":"right");"trailing"==c&&(c=e?"right":"left");if("center"!=c&&(b.splitter||this.gutters)&&!b._splitterWidget)e=b.splitter?this._splitterClass:u,a.isString(e)&&(e=a.getObject(e)),e=new e({id:b.id+"_splitter",container:this,child:b,region:c,live:this.liveSplitters}),e.isSplitter=!0,b._splitterWidget=
e,f.place(e.domNode,b.domNode,"after"),e.startup();b.region=c}},layout:function(){this._layoutChildren()},addChild:function(a,b){this.inherited(arguments);this._started&&this.layout()},removeChild:function(a){var c=a.region,e=a._splitterWidget;e&&(e.destroy(),delete a._splitterWidget);this.inherited(arguments);this._started&&this._layoutChildren();i.remove(a.domNode,this.baseClass+"Pane");b.set(a.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});b.set(a.domNode,"top"==
c||"bottom"==c?"width":"height","auto")},getChildren:function(){return h.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return h.filter(this.getChildren(),function(b){return b.region==a})[0]._splitterWidget},resize:function(a,c){if(!this.cs||!this.pe){var e=this.domNode;this.cs=b.getComputedStyle(e);this.pe=d.getPadExtents(e,this.cs);this.pe.r=b.toPixelValue(e,this.cs.paddingRight);this.pe.b=b.toPixelValue(e,this.cs.paddingBottom);b.set(e,"padding","0px")}this.inherited(arguments)},
_layoutChildren:function(a,b){if(this._borderBox&&this._borderBox.h){var c=h.map(this.getChildren(),function(a,b){return{pane:a,weight:["center"==a.region?Infinity:0,a.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(a.region)?1:-1),b]}},this);c.sort(function(a,b){for(var c=a.weight,e=b.weight,d=0;d<c.length;d++)if(c[d]!=e[d])return c[d]-e[d];return 0});var e=[];h.forEach(c,function(a){a=a.pane;e.push(a);a._splitterWidget&&e.push(a._splitterWidget)});n.layoutChildren(this.domNode,{l:this.pe.l,
t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},e,a,b)}},destroyRecursive:function(){h.forEach(this.getChildren(),function(a){var b=a._splitterWidget;b&&b.destroy();delete a._splitterWidget});this.inherited(arguments)}});g.ChildWidgetProperties={region:"",layoutPriority:0,splitter:!1,minSize:0,maxSize:Infinity};a.extend(q,g.ChildWidgetProperties);g._Splitter=s;g._Gutter=u;return g})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(h,j){h.cookie=function(g,
i,f){var d=document.cookie,b;if(1==arguments.length)b=(b=d.match(RegExp("(?:^|; )"+j.escapeString(g)+"=([^;]*)")))?decodeURIComponent(b[1]):void 0;else{f=f||{};d=f.expires;if("number"==typeof d){var e=new Date;e.setTime(e.getTime()+864E5*d);d=f.expires=e}if(d&&d.toUTCString)f.expires=d.toUTCString();var i=encodeURIComponent(i),d=g+"="+i,c;for(c in f)d+="; "+c,e=f[c],!0!==e&&(d+="="+e);document.cookie=d}return b};h.cookie.isSupported=function(){if(!("cookieEnabled"in navigator))this("__djCookieTest__",
"CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1});return navigator.cookieEnabled};return h.cookie})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(h,j){var g={};j.setObject("dojo.regexp",g);g.escapeString=function(g,f){return g.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(d){return f&&-1!=f.indexOf(d)?d:"\\"+d})};g.buildGroupRE=function(i,f,d){if(!(i instanceof Array))return f(i);
for(var b=[],e=0;e<i.length;e++)b.push(f(i[e]));return g.group(b.join("|"),d)};g.group=function(g,f){return"("+(f?"?:":"")+g+")"};return g})},"dojo/touch":function(){define("./_base/kernel,./aspect,./dom,./on,./has,./mouse,./ready,./_base/window".split(","),function(h,j,g,i,f,d,b,e){function c(a){return function(b,c){return i(b,a,c)}}var j=f("touch"),a=!1;f("ios")&&(f=navigator.userAgent.match(/OS ([\d_]+)/)?RegExp.$1:"1",a=5>parseFloat(f.replace(/_/,".").replace(/_/g,"")));var k,p;j&&(b(function(){p=
e.body();e.doc.addEventListener("touchstart",function(a){var b=p;p=a.target;i.emit(b,"dojotouchout",{target:b,relatedTarget:p,bubbles:!0});i.emit(p,"dojotouchover",{target:p,relatedTarget:b,bubbles:!0})},!0);i(e.doc,"touchmove",function(b){if((b=e.doc.elementFromPoint(b.pageX-(a?0:e.global.pageXOffset),b.pageY-(a?0:e.global.pageYOffset)))&&p!==b)i.emit(p,"dojotouchout",{target:p,relatedTarget:b,bubbles:!0}),i.emit(b,"dojotouchover",{target:b,relatedTarget:p,bubbles:!0}),p=b})}),k=function(a,b){return i(e.doc,
"touchmove",function(c){if(a===e.doc||g.isDescendant(p,a))c.target=p,b.call(this,c)})});d={press:c(j?"touchstart":"mousedown"),move:j?k:c("mousemove"),release:c(j?"touchend":"mouseup"),cancel:j?c("touchcancel"):d.leave,over:c(j?"dojotouchover":"mouseover"),out:c(j?"dojotouchout":"mouseout"),enter:d._eventHandler(j?"dojotouchover":"mouseover"),leave:d._eventHandler(j?"dojotouchout":"mouseout")};return h.touch=d})},"dijit/_TemplatedMixin":function(){define("dojo/_base/lang,dojo/touch,./_WidgetBase,dojo/string,dojo/cache,dojo/_base/array,dojo/_base/declare,dojo/dom-construct,dojo/sniff,dojo/_base/unload".split(","),
function(h,j,g,i,f,d,b,e,c,a){var k=b("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:!1,_earlyTemplatedStartup:!1,constructor:function(){this._attachPoints=[];this._attachEvents=[]},_stringRepl:function(a){var b=this.declaredClass,c=this;return i.substitute(a,this,function(a,e){"!"==e.charAt(0)&&(a=h.getObject(e.substr(1),!1,c));if("undefined"==typeof a)throw Error(b+" template:"+e);return null==a?"":"!"==e.charAt(0)?a:a.toString().replace(/"/g,"&quot;")},this)},
buildRendering:function(){if(!this.templateString)this.templateString=f(this.templatePath,{sanitize:!0});var a=k.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),b;if(h.isString(a)){if(b=e.toDom(this._stringRepl(a),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+a);}else b=a.cloneNode(!0);this.domNode=b;this.inherited(arguments);this._attachTemplateNodes(b,function(a,b){return a.getAttribute(b)});this._beforeFillContent();this._fillContent(this.srcNodeRef)},
_beforeFillContent:function(){},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)},_attachTemplateNodes:function(a,b){for(var c=h.isArray(a)?a:a.all||a.getElementsByTagName("*"),e=h.isArray(a)?0:-1;0>e||c[e];e++){var d=-1==e?a:c[e];if(!this.widgetsInTemplate||!b(d,"dojoType")&&!b(d,"data-dojo-type")){var f=b(d,"dojoAttachPoint")||b(d,"data-dojo-attach-point");if(f)for(var g=f.split(/\s*,\s*/);f=g.shift();)h.isArray(this[f])?this[f].push(d):
this[f]=d,this._attachPoints.push(f);if(f=b(d,"dojoAttachEvent")||b(d,"data-dojo-attach-event"))for(var g=f.split(/\s*,\s*/),k=h.trim;f=g.shift();)if(f){var i=null;-1!=f.indexOf(":")?(i=f.split(":"),f=k(i[0]),i=k(i[1])):f=k(f);i||(i=f);this._attachEvents.push(this.connect(d,j[f]||f,i))}}}},destroyRendering:function(){d.forEach(this._attachPoints,function(a){delete this[a]},this);this._attachPoints=[];d.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments)}});
k._templateCache={};k.getCachedTemplate=function(a,b,c){var d=k._templateCache,f=a,g=d[f];if(g){try{if(!g.ownerDocument||g.ownerDocument==(c||document))return g}catch(h){}e.destroy(g)}a=i.trim(a);if(b||a.match(/\$\{([^\}]+)\}/g))return d[f]=a;b=e.toDom(a,c);if(1!=b.nodeType)throw Error("Invalid template: "+a);return d[f]=b};c("ie")&&a.addOnWindowUnload(function(){var a=k._templateCache,b;for(b in a){var c=a[b];"object"==typeof c&&e.destroy(c);delete a[b]}});h.extend(g,{dojoAttachEvent:"",dojoAttachPoint:""});
return k})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(h){return h.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./_base/xhr"],function(h,j,g,i){var f;f=function(a,b,c){i("GET",{url:a,sync:!!b,load:c,headers:h.config.textPluginHeaders||{}})};var d={},b=function(a){if(a){var a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,""),b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},e={},c={};h.cache=
function(a,c,e){var g;"string"==typeof a?/\//.test(a)?(g=a,e=c):g=j.toUrl(a.replace(/\./g,"/")+(c?"/"+c:"")):(g=a+"",e=c);a=void 0!=e&&"string"!=typeof e?e.value:e;e=e&&e.sanitize;if("string"==typeof a)return d[g]=a,e?b(a):a;if(null===a)return delete d[g],null;g in d||f(g,!0,function(a){d[g]=a});return e?b(d[g]):d[g]};return{dynamic:!0,normalize:function(a,b){var c=a.split("!"),e=c[0];return(/^\./.test(e)?b(e):e)+(c[1]?"!"+c[1]:"")},load:function(a,g,i){var a=a.split("!"),h=1<a.length,m=a[0],o=g.toUrl(a[0]),
a="url:"+o,l=e,n=function(a){i(h?b(a):a)};m in d?l=d[m]:a in g.cache?l=g.cache[a]:o in d&&(l=d[o]);if(l===e)if(c[o])c[o].push(n);else{var s=c[o]=[n];f(o,!g.async,function(a){d[m]=d[o]=a;for(var b=0;b<s.length;)s[b++](a);delete c[o]})}else n(l)}}})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang,../_Widget,../_Container,../_Contained,../Viewport,dojo/_base/declare,dojo/dom-class,dojo/dom-geometry,dojo/dom-style".split(","),function(h,j,g,i,f,d,b,e,c){return d("dijit.layout._LayoutWidget",
[j,g,i],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,buildRendering:function(){this.inherited(arguments);b.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var a=this.getParent&&this.getParent();if(!a||!a.isLayoutContainer)this.resize(),this.own(f.on("resize",h.hitch(this,"resize")))}},resize:function(a,b){var d=this.domNode;a&&e.setMarginBox(d,a);var f=b||{};h.mixin(f,a||{});if(!("h"in f)||!("w"in f))f=h.mixin(e.getMarginBox(d),f);var g=
c.getComputedStyle(d),i=e.getMarginExtents(d,g),l=e.getBorderExtents(d,g),f=this._borderBox={w:f.w-(i.w+l.w),h:f.h-(i.h+l.h)},i=e.getPadExtents(d,g);this._contentBox={l:c.toPixelValue(d,g.paddingLeft),t:c.toPixelValue(d,g.paddingTop),w:f.w-i.w,h:f.h-i.h};this.layout()},layout:function(){},_setupChild:function(a){b.add(a.domNode,this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:""))},addChild:function(a,b){this.inherited(arguments);this._started&&this._setupChild(a)},removeChild:function(a){b.remove(a.domNode,
this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:""));this.inherited(arguments)}})})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(h,j){return h("dijit._Contained",null,{_getSibling:function(g){var i=this.domNode;do i=i[g+"Sibling"];while(i&&1!=i.nodeType);return i&&j.byNode(i)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var g=this.getParent();
return!g||!g.getIndexOfChild?-1:g.getIndexOfChild(this)}})})},"dijit/Dialog":function(){define("require,dojo/_base/array,dojo/_base/connect,dojo/_base/declare,dojo/_base/Deferred,dojo/dom,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/_base/fx,dojo/i18n,dojo/keys,dojo/_base/lang,dojo/on,dojo/ready,dojo/sniff,dojo/window,dojo/dnd/Moveable,dojo/dnd/TimedMoveable,./focus,./_base/manager,./_Widget,./_TemplatedMixin,./_CssStateMixin,./form/_FormMixin,./_DialogMixin,./DialogUnderlay,./layout/ContentPane,dojo/text!./templates/Dialog.html,./main,dojo/i18n!./nls/common".split(","),
function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l,n,s,u,r,v,t,w,x,B,A,E,H,Q,K,G){var t=i("dijit._DialogBase",[x,A,E,B],{templateString:K,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],open:!1,duration:t.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,doLayout:!1,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},"aria-describedby":"",maxRatio:0.9,
postMixInProperties:function(){var a=p.getLocalization("dijit","common");m.mixin(this,a);this.inherited(arguments)},postCreate:function(){c.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[]},onLoad:function(){this._position();this.autofocus&&y.isTop(this)&&(this._getFocusItems(this.domNode),v.focus(this._firstFocusItem));
this.inherited(arguments)},_onBlur:function(a){this.inherited(arguments);var b=m.hitch(this,function(){this.open&&!this._destroyed&&y.isTop(this)&&(this._getFocusItems(this.domNode),v.focus(this._firstFocusItem))});if("mouse"==a)o.once(this.ownerDocument,"mouseup",b);else b()},_endDrag:function(){var a=e.position(this.domNode),b=s.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==n("ie")?r:u)(a,{handle:this.titleBar}),this.connect(this._moveable,"onMoveStop","_endDrag")):b.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":j.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),ownerDocument:this.ownerDocument}},_size:function(){this._checkIfSingleChild();if(this._singleChild){if("undefined"!=typeof this._singleChildOriginalStyle)this._singleChild.domNode.style.cssText=
this._singleChildOriginalStyle,delete this._singleChildOriginalStyle}else c.set(this.containerNode,{width:"auto",height:"auto"});var a=e.position(this.domNode),b=s.getBox(this.ownerDocument);b.w*=this.maxRatio;b.h*=this.maxRatio;if(a.w>=b.w||a.h>=b.h){var d=e.position(this.containerNode),f=Math.min(a.w,b.w)-(a.w-d.w),a=Math.min(a.h,b.h)-(a.h-d.h);if(this._singleChild&&this._singleChild.resize){if("undefined"==typeof this._singleChildOriginalStyle)this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;
this._singleChild.resize({w:f,h:a})}else c.set(this.containerNode,{width:f+"px",height:a+"px",overflow:"auto",position:"relative"})}else this._singleChild&&this._singleChild.resize&&this._singleChild.resize()},_position:function(){if(!b.contains(this.ownerDocumentBody,"dojoMove")){var a=this.domNode,d=s.getBox(this.ownerDocument),f=this._relativePosition,g=f?null:e.position(a);c.set(a,{left:Math.floor(d.l+(f?f.x:(d.w-g.w)/2))+"px",top:Math.floor(d.t+(f?f.y:(d.h-g.h)/2))+"px"})}},_onKey:function(c){if(c.charOrCode){var e=
c.target;c.charOrCode===q.TAB&&this._getFocusItems(this.domNode);var d=this._firstFocusItem==this._lastFocusItem;if(e==this._firstFocusItem&&c.shiftKey&&c.charOrCode===q.TAB)d||v.focus(this._lastFocusItem),a.stop(c);else if(e==this._lastFocusItem&&c.charOrCode===q.TAB&&!c.shiftKey)d||v.focus(this._firstFocusItem),a.stop(c);else{for(;e;){if(e==this.domNode||b.contains(e,"dijitPopup"))if(c.charOrCode==q.ESCAPE)this.onCancel();else return;e=e.parentNode}if(c.charOrCode!==q.TAB)a.stop(c);else if(!n("opera"))try{this._firstFocusItem.focus()}catch(f){}}}},
show:function(){if(!this.open){this._started||this.startup();if(!this._alreadyInitialized)this._setup(),this._alreadyInitialized=!0;this._fadeOutDeferred&&this._fadeOutDeferred.cancel();var a=s.get(this.ownerDocument);this._modalconnects.push(o(a,"scroll",m.hitch(this,"resize")));this._modalconnects.push(o(this.domNode,g._keypress,m.hitch(this,"_onKey")));c.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this._size();this._position();var b;this._fadeInDeferred=new f(m.hitch(this,
function(){b.stop();delete this._fadeInDeferred}));b=k.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:m.hitch(this,function(){y.show(this,this.underlayAttrs)}),onEnd:m.hitch(this,function(){this.autofocus&&y.isTop(this)&&(this._getFocusItems(this.domNode),v.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return this._fadeInDeferred}},hide:function(){if(this._alreadyInitialized&&this.open){this._fadeInDeferred&&this._fadeInDeferred.cancel();
var a;this._fadeOutDeferred=new f(m.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(m.hitch(this,"onHide"));a=k.fadeOut({node:this.domNode,duration:this.duration,onEnd:m.hitch(this,function(){this.domNode.style.display="none";y.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();if(this._scrollConnected)this._scrollConnected=!1;for(var b;b=this._modalconnects.pop();)b.remove();this._relativePosition&&delete this._relativePosition;
this._set("open",!1);return this._fadeOutDeferred}},resize:function(){"none"!=this.domNode.style.display&&(H._singleton&&H._singleton.layout(),this._position(),this._size())},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();y.hide(this);this.inherited(arguments)}}),z=i("dijit.Dialog",[Q,t],{});z._DialogBase=t;var y=z._DialogLevelManager=
{_beginZIndex:950,show:function(a,b){C[C.length-1].focus=v.curNode;var e=H._singleton;!e||e._destroyed?e=G._underlay=H._singleton=new H(b):e.set(a.underlayAttrs);var d=C[C.length-1].dialog?C[C.length-1].zIndex+2:z._DialogLevelManager._beginZIndex;1==C.length&&e.show();c.set(H._singleton.domNode,"zIndex",d-1);c.set(a.domNode,"zIndex",d);C.push({dialog:a,underlayAttrs:b,zIndex:d})},hide:function(a){if(C[C.length-1].dialog==a){C.pop();var b=C[C.length-1];H._singleton._destroyed||(1==C.length?H._singleton.hide():
(c.set(H._singleton.domNode,"zIndex",b.zIndex-1),H._singleton.set(b.underlayAttrs)));if(a.refocus){a=b.focus;if(b.dialog&&(!a||!d.isDescendant(a,b.dialog.domNode)))b.dialog._getFocusItems(b.dialog.domNode),a=b.dialog._firstFocusItem;if(a)try{a.focus()}catch(e){}}}else b=j.indexOf(j.map(C,function(a){return a.dialog}),a),-1!=b&&C.splice(b,1)},isTop:function(a){return C[C.length-1].dialog==a}},C=z._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];n("dijit-legacy-requires")&&l(0,function(){h(["dijit/TooltipDialog"])});
return z})},"dojo/_base/fx":function(){define("./kernel,./config,./lang,../Evented,./Color,./connect,./sniff,../dom,../dom-style".split(","),function(h,j,g,i,f,d,b,e,c){var a=g.mixin,k={},p=k._Line=function(a,b){this.start=a;this.end=b};p.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var q=k.Animation=function(b){a(this,b);if(g.isArray(this.curve))this.curve=new p(this.curve[0],this.curve[1])};q.prototype=new i;g.extend(q,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,
_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var c=b||[];if(this[a])if(j.debugAtAllCosts)this[a].apply(this,c);else try{this[a].apply(this,c)}catch(e){console.error("exception in animation handler for:",a),console.error(e)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var c=a||
this.delay,e=g.hitch(this,"_play",b);if(0<c)return this._delayTimer=setTimeout(e,c),this;e();return this},_play:function(){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;var a=this.curve.getValue(this._getStep());if(!this._percent){if(!this._startRepeatCount)this._startRepeatCount=this.repeat;this._fire("onBegin",[a])}this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&
this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();if(a)this._percent=1;this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},status:function(){return this._active?
this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);if(1>this._percent)this._startTimer();else{this._active=!1;if(0<this.repeat)this.repeat--,this.play(null,!0);else if(-1==this.repeat)this.play(null,!0);else if(this._startRepeatCount)this.repeat=this._startRepeatCount,this._startRepeatCount=
0;this._percent=0;this._fire("onEnd",[this.node]);!this.repeat&&this._stopTimer()}}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var m=0,o=null,l={run:function(){}};g.extend(q,{_startTimer:function(){if(!this._timer)this._timer=d.connect(l,"run",this,"_cycle"),m++;o||(o=setInterval(g.hitch(l,"run"),this.rate))},_stopTimer:function(){if(this._timer)d.disconnect(this._timer),this._timer=null,m--;0>=m&&(clearInterval(o),o=null,m=0)}});var n=b("ie")?function(a){var b=
a.style;if(!b.width.length&&"auto"==c.get(a,"width"))b.width="auto"}:function(){};k._fade=function(b){b.node=e.byId(b.node);var f=a({properties:{}},b),b=f.properties.opacity={};b.start=!("start"in f)?function(){return+c.get(f.node,"opacity")||0}:f.start;b.end=f.end;b=k.animateProperty(f);d.connect(b,"beforeBegin",g.partial(n,f.node));return b};k.fadeIn=function(b){return k._fade(a({end:1},b))};k.fadeOut=function(b){return k._fade(a({end:0},b))};k._defaultEasing=function(a){return 0.5+Math.sin((a+
1.5)*Math.PI)/2};var s=function(a){this._properties=a;for(var b in a){var c=a[b];if(c.start instanceof f)c.tempColor=new f}};s.prototype.getValue=function(a){var b={},c;for(c in this._properties){var e=this._properties[c],d=e.start;d instanceof f?b[c]=f.blendColors(d,e.end,a,e.tempColor).toCss():g.isArray(d)||(b[c]=(e.end-d)*a+d+("opacity"!=c?e.units||"px":0))}return b};k.animateProperty=function(b){var i=b.node=e.byId(b.node);if(!b.easing)b.easing=h._defaultEasing;b=new q(b);d.connect(b,"beforeBegin",
b,function(){var b={},e;for(e in this.properties){if("width"==e||"height"==e)this.node.display="block";var d=this.properties[e];g.isFunction(d)&&(d=d(i));d=b[e]=a({},g.isObject(d)?d:{end:d});if(g.isFunction(d.start))d.start=d.start(i);if(g.isFunction(d.end))d.end=d.end(i);var k=0<=e.toLowerCase().indexOf("color"),l=function(a,b){var e={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==e)return e;e=c.get(a,b);return"opacity"==b?+e:k?e:parseFloat(e)};if("end"in d){if(!("start"in d))d.start=
l(i,e)}else d.end=l(i,e);k?(d.start=new f(d.start),d.end=new f(d.end)):d.start="opacity"==e?+d.start:parseFloat(d.start)}this.curve=new s(b)});d.connect(b,"onAnimate",g.hitch(c,"set",b.node));return b};k.anim=function(a,b,c,e,d,f){return k.animateProperty({node:a,duration:c||q.prototype.duration,properties:b,easing:e,onEnd:d}).play(f||0)};a(h,k);h._Animation=q;return k})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(h,j,g,i){var f=h.Color=function(d){d&&
this.setColor(d)};f.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:i.transparentColor||[0,0,0,0]};j.extend(f,{r:255,g:255,b:255,a:1,_set:function(d,b,e,c){this.r=d;this.g=b;this.b=e;this.a=c},setColor:function(d){j.isString(d)?f.fromString(d,this):j.isArray(d)?
f.fromArray(d,this):(this._set(d.r,d.g,d.b,d.a),d instanceof f||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+g.map(["r","g","b"],function(d){d=this[d].toString(16);return 2>d.length?"0"+d:d},this).join("")},toCss:function(d){var b=this.r+", "+this.g+", "+this.b;return(d?"rgba("+b+", "+this.a:"rgb("+b)+")"},toString:function(){return this.toCss(!0)}});f.blendColors=
h.blendColors=function(d,b,e,c){var a=c||new f;g.forEach(["r","g","b","a"],function(c){a[c]=d[c]+(b[c]-d[c])*e;"a"!=c&&(a[c]=Math.round(a[c]))});return a.sanitize()};f.fromRgb=h.colorFromRgb=function(d,b){var e=d.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return e&&f.fromArray(e[1].split(/\s*,\s*/),b)};f.fromHex=h.colorFromHex=function(d,b){var e=b||new f,c=4==d.length?4:8,a=(1<<c)-1,d=Number("0x"+d.substr(1));if(isNaN(d))return null;g.forEach(["b","g","r"],function(b){var f=d&a;d>>=c;e[b]=4==
c?17*f:f});e.a=1;return e};f.fromArray=h.colorFromArray=function(d,b){var e=b||new f;e._set(Number(d[0]),Number(d[1]),Number(d[2]),Number(d[3]));if(isNaN(e.a))e.a=1;return e.sanitize()};f.fromString=h.colorFromString=function(d,b){var e=f.named[d];return e&&f.fromArray(e,b)||f.fromRgb(d,b)||f.fromHex(d,b)};return f})},"dojo/dnd/Moveable":function(){define("../_base/array,../_base/declare,../_base/event,../_base/lang,../dom,../dom-class,../Evented,../on,../topic,../touch,./common,./Mover,../_base/window".split(","),
function(h,j,g,i,f,d,b,e,c,a,k,p,q){return j("dojo.dnd.Moveable",[b],{handle:"",delay:0,skip:!1,constructor:function(b,c){this.node=f.byId(b);c||(c={});this.handle=c.handle?f.byId(c.handle):null;if(!this.handle)this.handle=this.node;this.delay=0<c.delay?c.delay:0;this.skip=c.skip;this.mover=c.mover?c.mover:p;this.events=[e(this.handle,a.press,i.hitch(this,"onMouseDown")),e(this.handle,"dragstart",i.hitch(this,"onSelectStart")),e(this.handle,"selectstart",i.hitch(this,"onSelectStart"))]},markupFactory:function(a,
b,c){return new c(b,a)},destroy:function(){h.forEach(this.events,function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(b){if(!this.skip||!k.isFormElement(b)){if(this.delay)this.events.push(e(this.handle,a.move,i.hitch(this,"onMouseMove")),e(this.handle,a.release,i.hitch(this,"onMouseUp"))),this._lastX=b.pageX,this._lastY=b.pageY;else this.onDragDetected(b);g.stop(b)}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>
this.delay)this.onMouseUp(a),this.onDragDetected(a);g.stop(a)},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();g.stop(a)},onSelectStart:function(a){(!this.skip||!k.isFormElement(a))&&g.stop(a)},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){c.publish("/dnd/move/start",a);d.add(q.body(),"dojoMove");d.add(this.node,"dojoMoveItem")},onMoveStop:function(a){c.publish("/dnd/move/stop",a);d.remove(q.body(),"dojoMove");d.remove(this.node,"dojoMoveItem")},
onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../dom"],function(h,j,g,i){var f=g.getObject("dojo.dnd",!0);f.getCopyKeyState=h.isCopyKey;f._uniqueId=0;f.getUniqueId=function(){var d;do d=j._scopeName+"Unique"+ ++f._uniqueId;while(i.byId(d));return d};f._empty={};f.isFormElement=
function(d){d=d.target;if(3==d.nodeType)d=d.parentNode;return 0<=" button textarea input select option ".indexOf(" "+d.tagName.toLowerCase()+" ")};return f})},"dojo/dnd/Mover":function(){define("../_base/array,../_base/declare,../_base/event,../_base/lang,../sniff,../_base/window,../dom,../dom-geometry,../dom-style,../Evented,../on,../touch,./common,./autoscroll".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p,q,m){return j("dojo.dnd.Mover",[a],{constructor:function(a,c,e){this.node=b.byId(a);this.marginBox=
{l:c.pageX,t:c.pageY};this.mouseButton=c.button;c=this.host=e;a=a.ownerDocument;this.events=[k(a,p.move,i.hitch(this,"onFirstMove")),k(a,p.move,i.hitch(this,"onMouseMove")),k(a,p.release,i.hitch(this,"onMouseUp")),k(a,"dragstart",g.stop),k(a.body,"selectstart",g.stop)];m.autoScrollStart(a);if(c&&c.onMoveStart)c.onMoveStart(this)},onMouseMove:function(a){m.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);g.stop(a)},onMouseUp:function(a){(f("webkit")&&f("mac")&&
2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();g.stop(a)},onFirstMove:function(a){var b=this.node.style,f,g=this.host;switch(b.position){case "relative":case "absolute":f=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=e.getMarginBox(this.node);f=d.doc.body;var i=c.getComputedStyle(f),k=e.getMarginBox(f,i),i=e.getContentBox(f,i);f=b.l-(i.l-k.l);b=b.t-(i.t-k.t)}this.marginBox.l=f-this.marginBox.l;this.marginBox.t=
b-this.marginBox.t;if(g&&g.onFirstMove)g.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){h.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang,../sniff,../_base/window,../dom-geometry,../dom-style,../window".split(","),function(h,j,g,i,f,d){var b={};h.setObject("dojo.dnd.autoscroll",b);b.getViewport=d.getBox;b.V_TRIGGER_AUTOSCROLL=32;
b.H_TRIGGER_AUTOSCROLL=32;b.V_AUTOSCROLL_VALUE=16;b.H_AUTOSCROLL_VALUE=16;var e,c=g.doc,a=Infinity,k=Infinity;b.autoScrollStart=function(b){c=b;e=d.getBox(c);b=g.body(c).parentNode;a=Math.max(b.scrollHeight-e.h,0);k=Math.max(b.scrollWidth-e.w,0)};b.autoScroll=function(f){var i=e||d.getBox(c),h=g.body(c).parentNode,o=0,l=0;f.clientX<b.H_TRIGGER_AUTOSCROLL?o=-b.H_AUTOSCROLL_VALUE:f.clientX>i.w-b.H_TRIGGER_AUTOSCROLL&&(o=Math.min(b.H_AUTOSCROLL_VALUE,k-h.scrollLeft));f.clientY<b.V_TRIGGER_AUTOSCROLL?
l=-b.V_AUTOSCROLL_VALUE:f.clientY>i.h-b.V_TRIGGER_AUTOSCROLL&&(l=Math.min(b.V_AUTOSCROLL_VALUE,a-h.scrollTop));window.scrollBy(o,l)};b._validNodes={div:1,p:1,td:1};b._validOverflow={auto:1,scroll:1};b.autoScrollNodes=function(a){for(var c,e,d,k,n,h,u=0,r=0,v=a.target;v;){if(1==v.nodeType&&v.tagName.toLowerCase()in b._validNodes){d=f.getComputedStyle(v);k=d.overflow.toLowerCase()in b._validOverflow;n=d.overflowX.toLowerCase()in b._validOverflow;h=d.overflowY.toLowerCase()in b._validOverflow;if(k||
n||h)c=i.getContentBox(v,d),e=i.position(v,!0);if(k||n){d=Math.min(b.H_TRIGGER_AUTOSCROLL,c.w/2);n=a.pageX-e.x;if(j("webkit")||j("opera"))n+=g.body().scrollLeft;u=0;0<n&&n<c.w&&(n<d?u=-d:n>c.w-d&&(u=d),v.scrollLeft+=u)}if(k||h){k=Math.min(b.V_TRIGGER_AUTOSCROLL,c.h/2);h=a.pageY-e.y;if(j("webkit")||j("opera"))h+=g.body().scrollTop;r=0;0<h&&h<c.h&&(h<k?r=-k:h>c.h-k&&(r=k),v.scrollTop+=r)}if(u||r)return}try{v=v.parentNode}catch(t){v=null}}b.autoScroll(a)};return b})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare",
"./Moveable"],function(h,j){var g=j.prototype.onMove;return h("dojo.dnd.TimedMoveable",j,{timeout:40,constructor:function(g,f){f||(f={});if(f.timeout&&"number"==typeof f.timeout&&0<=f.timeout)this.timeout=f.timeout},onMoveStop:function(i){i._timer&&(clearTimeout(i._timer),g.call(this,i,i._leftTop));j.prototype.onMoveStop.apply(this,arguments)},onMove:function(i,f){i._leftTop=f;if(!i._timer){var d=this;i._timer=setTimeout(function(){i._timer=null;g.call(d,i,i._leftTop)},this.timeout)}}})})},"dijit/_base/manager":function(){define(["dojo/_base/array",
"dojo/_base/config","dojo/_base/lang","../registry","../main"],function(h,j,g,i,f){var d={};h.forEach("byId,getUniqueId,findWidgets,_destroyAll,byNode,getEnclosingWidget".split(","),function(b){d[b]=i[b]});g.mixin(d,{defaultDuration:j.defaultDuration||200});g.mixin(f,d);return f})},"dijit/_CssStateMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-class,dojo/has,dojo/_base/lang,dojo/on,dojo/ready,dojo/_base/window,./registry".split(","),function(h,j,g,i,f,d,b,e,c,a){j=
j("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);h.forEach("disabled,readOnly,checked,selected,focused,state,hovering,active,_opened".split(","),function(a){this.watch(a,d.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes)this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":this._set("active",!0);break;case "mouseup":case "touchend":this._set("active",!1)}},_setStateClass:function(){function a(c){b=b.concat(h.map(b,function(a){return a+c}),"dijit"+c)}var b=this.baseClass.split(" ");this.isLeftToRight()||a("Rtl");var c="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(c);this.state&&a(this.state);
this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var c=this.stateNode||this.domNode,e={};h.forEach(c.className.split(" "),function(a){e[a]=!0});"_stateClasses"in this&&h.forEach(this._stateClasses,function(a){delete e[a]});h.forEach(b,function(a){e[a]=!0});var d=[],f;for(f in e)d.push(f);c.className=d.join(" ");this._stateClasses=b},_subnodeCssMouseEvent:function(a,
b,c){function e(c){i.toggle(a,b+"Active",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":i.toggle(a,b+"Hover",!0);break;case "mouseout":i.toggle(a,b+"Hover",!1);e(!1);break;case "mousedown":case "touchstart":e(!0);break;case "mouseup":case "touchend":e(!1);break;case "focus":case "focusin":i.toggle(a,b+"Focused",!0);break;case "blur":case "focusout":i.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});e(function(){function e(b){if(!g.isDescendant(b.relatedTarget,
b.target))for(var c=b.target;c&&c!=b.relatedTarget;c=c.parentNode)if(c._cssState){var d=a.getEnclosingWidget(c);d&&(c==d.domNode?d._cssMouseEvent(b):d._subnodeCssMouseEvent(c,c._cssState,b))}}function d(a){a.target=a.srcElement;e(a)}var i=c.body(),m=(f("touch")?[]:["mouseover","mouseout"]).concat(["mousedown","touchstart","mouseup","touchend"]);h.forEach(m,function(a){i.addEventListener?i.addEventListener(a,e,!0):i.attachEvent("on"+a,d)});b(i,"focusin, focusout",function(b){var c=b.target;c._cssState&&
!c.getAttribute("widgetId")&&a.getEnclosingWidget(c)._subnodeCssMouseEvent(c,c._cssState,b)})});return j})},"dijit/form/_FormMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/window".split(","),function(h,j,g,i,f,d){return j("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(b){var e=[];h.forEach(b||this.getChildren(),function(b){"value"in b?e.push(b):e=e.concat(this._getDescendantFormWidgets(b.getChildren()))},this);
return e},reset:function(){h.forEach(this._getDescendantFormWidgets(),function(b){b.reset&&b.reset()})},validate:function(){var b=!1;return h.every(h.map(this._getDescendantFormWidgets(),function(e){e._hasBeenBlurred=!0;var c=e.disabled||!e.validate||e.validate();!c&&!b&&(d.scrollIntoView(e.containerNode||e.domNode),e.focus(),b=!0);return c}),function(b){return b})},setValues:function(b){g.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",
b)},_setValueAttr:function(b){var e={};h.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(e[a.name]||(e[a.name]=[])).push(a)});for(var c in e)if(e.hasOwnProperty(c)){var a=e[c],d=i.getObject(c,!1,b);void 0!==d&&(i.isArray(d)||(d=[d]),"boolean"==typeof a[0].checked?h.forEach(a,function(a){a.set("value",-1!=h.indexOf(d,a.value))}):a[0].multiple?a[0].set("value",d):h.forEach(a,function(a,b){a.set("value",d[b])}))}},getValues:function(){g.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.",
"","2.0");return this.get("value")},_getValueAttr:function(){var b={};h.forEach(this._getDescendantFormWidgets(),function(e){var c=e.name;if(c&&!e.disabled){var a=e.get("value");"boolean"==typeof e.checked?/Radio/.test(e.declaredClass)?!1!==a?i.setObject(c,a,b):(a=i.getObject(c,!1,b),void 0===a&&i.setObject(c,null,b)):(e=i.getObject(c,!1,b),e||(e=[],i.setObject(c,e,b)),!1!==a&&e.push(a)):(e=i.getObject(c,!1,b),"undefined"!=typeof e?i.isArray(e)?e.push(a):i.setObject(c,[e,a],b):i.setObject(c,a,b))}});
return b},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var b=h.map(this._descendants,function(b){return b.get("state")||""});return 0<=h.indexOf(b,"Error")?"Error":0<=h.indexOf(b,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(b){this._descendants=this._getDescendantFormWidgets();h.forEach(this._descendants,function(b){b._started||b.startup()});b||this._onChildChange()},_onChildChange:function(b){(!b||"state"==
b||"disabled"==b)&&this._set("state",this._getState());if(!b||"value"==b||"disabled"==b||"checked"==b)this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10)},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var b=this;this.own(f(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",
function(e){e.target!=b.domNode&&b._onChildChange(e.type.replace("attrmodified-",""))}));this.watch("state",function(b,c,a){this.onValidStateChange(""==a)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(h,j){return h("dijit._DialogMixin",null,{execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var g=j._getTabNavigable(this.containerNode);
this._firstFocusItem=g.lowest||g.first||this.closeButtonNode||this.domNode;this._lastFocusItem=g.last||g.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare,dojo/dom-attr,dojo/window,./_Widget,./_TemplatedMixin,./BackgroundIframe".split(","),function(h,j,g,i,f,d){return h("dijit.DialogUnderlay",[i,f],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",
_setDialogIdAttr:function(b){j.set(this.node,"id",b+"_underlay");this._set("dialogId",b)},_setClassAttr:function(b){this.node.className="dijitDialogUnderlay "+b;this._set("class",b)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode)},layout:function(){var b=this.node.style,e=this.domNode.style;e.display="none";var c=g.getBox(this.ownerDocument);e.top=c.t+"px";e.left=c.l+"px";b.width=c.w+"px";b.height=c.h+"px";e.display="block"},show:function(){this.domNode.style.display="block";
this.layout();this.bgIframe=new d(this.domNode)},hide:function(){this.bgIframe.destroy();delete this.bgIframe;this.domNode.style.display="none"}})})},"dijit/BackgroundIframe":function(){define("require,./main,dojo/_base/config,dojo/dom-construct,dojo/dom-style,dojo/_base/lang,dojo/on,dojo/sniff,dojo/_base/window".split(","),function(h,j,g,i,f,d,b,e,c){var a=new function(){var a=[];this.pop=function(){var b;a.length?(b=a.pop(),b.style.display=""):(9>e("ie")?(b="<iframe src='"+(g.dojoBlankHtmlUrl||
h.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>",b=c.doc.createElement(b)):(b=i.create("iframe"),b.src='javascript:""',b.className="dijitBackgroundIframe",b.setAttribute("role","presentation"),f.set(b,"opacity",0.1)),b.tabIndex=-1);return b};this.push=function(b){b.style.display="none";a.push(b)}};j.BackgroundIframe=function(c){if(!c.id)throw Error("no id");if(e("ie")||e("mozilla")){var g=
this.iframe=a.pop();c.appendChild(g);7>e("ie")||e("quirks")?(this.resize(c),this._conn=b(c,"resize",d.hitch(this,function(){this.resize(c)}))):f.set(g,{width:"100%",height:"100%"})}};d.extend(j.BackgroundIframe,{resize:function(a){this.iframe&&f.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){if(this._conn)this._conn.remove(),this._conn=null;this.iframe&&(a.push(this.iframe),delete this.iframe)}});return j.BackgroundIframe})},"url:dijit/templates/Dialog.html":'<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">\n\t<div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">\n\t\t<span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"\n\t\t\t\trole="heading" level="1"></span>\n\t\t<span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabIndex="-1">\n\t\t\t<span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent"></div>\n</div>\n',
"dijit/form/ComboBox":function(){define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(h,j,g){return h("dijit.form.ComboBox",[j,g],{})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare,dojo/_base/kernel,dojo/i18n,./TextBox,../Tooltip,dojo/text!./templates/ValidationTextBox.html,dojo/i18n!./nls/validate".split(","),function(h,j,g,i,f,d){var b;return b=h("dijit.form.ValidationTextBox",i,{templateString:d,required:!1,promptMessage:"",invalidMessage:"$_unset_$",
missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(e,c){c!=b.prototype[e]&&(j.deprecated("ValidationTextBox id="+this.id+", set('"+e+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",c))},_setRegExpGenAttr:function(b){this._deprecateRegExp("regExpGen",b);this.regExpGen=this._getPatternAttr},_setRegExpAttr:function(b){this._deprecateRegExp("regExp",b)},_setValueAttr:function(){this.inherited(arguments);
this.validate(this.focused)},validator:function(b,c){return RegExp("^(?:"+this._getPatternAttr(c)+")"+(this.required?"":"?")+"$").test(b)&&(!this.required||!this._isEmpty(b))&&(this._isEmpty(b)||void 0!==this.parse(b,c))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.constraints)},_isEmpty:function(b){return(this.trim?/^\s*$/:/^$/).test(b)},getErrorMessage:function(){var b="$_unset_$"==this.invalidMessage?
this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage,c="$_unset_$"==this.missingMessage?this.messages.missingMessage:!this.missingMessage?b:this.missingMessage;return this.required&&this._isEmpty(this.textbox.value)?c:b},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(b){var c="",a=this.disabled||this.isValid(b);if(a)this._maskValidSubsetError=!0;var d=this._isEmpty(this.textbox.value),f=!a&&b&&this._isValidSubset();
this._set("state",a?"":((!this._hasBeenBlurred||b)&&d||f)&&(this._maskValidSubsetError||f&&!this._hasBeenBlurred&&b)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid",a?"false":"true");"Error"==this.state?(this._maskValidSubsetError=b&&f,c=this.getErrorMessage(b)):"Incomplete"==this.state?(c=this.getPromptMessage(b),this._maskValidSubsetError=!this._hasBeenBlurred||b):d&&(c=this.getPromptMessage(b));this.set("message",c);return a},displayMessage:function(b){b&&this.focused?f.show(b,
this.domNode,this.tooltipPosition,!this.isLeftToRight()):f.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(){this.constraints={};this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(b){if(!b.locale&&this.lang)b.locale=this.lang;this._set("constraints",b);this._refreshState()},_setPatternAttr:function(b){this._set("pattern",b)},
_getPatternAttr:function(b){var c=this.pattern;"function"==(typeof c).toLowerCase()&&(c=this.pattern(b||this.constraints));if(c!=this._lastRegExp){var a="";this._lastRegExp=c;".*"!=c&&c.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(b){switch(b.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":a+=b;break;case ")":a+="|$)";break;default:a+="(?:"+b+"|$)"}});try{"".search(a)}catch(d){a=this.pattern,console.warn("RegExp error in "+this.declaredClass+
": "+this.pattern)}this._partialre="^(?:"+a+")$"}return c},postMixInProperties:function(){this.inherited(arguments);this.messages=g.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(b){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(b){this._set("required",b);this.focusNode.setAttribute("aria-required",b);this._refreshState()},_setMessageAttr:function(b){this._set("message",b);this.displayMessage(b)},
reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)}})})},"dijit/form/TextBox":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/dom-style,dojo/_base/kernel,dojo/_base/lang,dojo/sniff,./_FormValueWidget,./_TextBoxMixin,dojo/text!./templates/TextBox.html,../main".split(","),function(h,j,g,i,f,d,b,e,c,a){h=h("dijit.form.TextBox",[b,e],{templateString:c,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',
_buttonInputDisabled:d("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>d("ie")&&this.defer(function(){try{var a=g.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;
if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(e){}})},_onInput:function(a){this.inherited(arguments);this.intermediateChanges&&this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);if(!this._phspan)this._attachPoints.push("_phspan"),this._phspan=j.create("span",{onmousedown:function(a){a.preventDefault()},className:"dijitPlaceHolder dijitInputField"},this.textbox,
"after");this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_updatePlaceHolder:function(){if(this._phspan)this._phspan.style.display=this.placeHolder&&!this.focused&&!this.textbox.value?"":"none"},_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){i.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},
setDisplayedValue:function(a){i.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",a)},_onBlur:function(a){if(!this.disabled&&(this.inherited(arguments),this._updatePlaceHolder(),d("mozilla")&&this.selectOnClick))this.textbox.selectionStart=this.textbox.selectionEnd=void 0},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.inherited(arguments),this._updatePlaceHolder())}});if(d("ie"))h.prototype._isTextSelected=
function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},a._setSelectionRange=e._setSelectionRange=function(a,b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())};return h})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(h,j,g,i){return h("dijit.form._FormValueWidget",
[g,i],{_layoutHackIE7:function(){if(7==j("ie"))for(var f=this.domNode,d=f.parentNode,b=f.firstChild||f,e=b.style.filter,c=this;d&&0==d.clientHeight;)(function(){var a=c.connect(d,"onscroll",function(){c.disconnect(a);b.style.filter=(new Date).getMilliseconds();c.defer(function(){b.style.filter=e})})})(),d=d.parentNode}})})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare,dojo/has,dojo/_base/kernel,dojo/ready,../_Widget,../_CssStateMixin,../_TemplatedMixin,./_FormWidgetMixin".split(","),
function(h,j,g,i,f,d,b,e){j("dijit-legacy-requires")&&i(0,function(){require(["dijit/form/_FormValueWidget"])});return h("dijit.form._FormWidget",[f,b,d,e],{setDisabled:function(b){g.deprecated("setDisabled("+b+") is deprecated. Use set('disabled',"+b+") instead.","","2.0");this.set("disabled",b)},setValue:function(b){g.deprecated("dijit.form._FormWidget:setValue("+b+") is deprecated.  Use set('value',"+b+") instead.","","2.0");this.set("value",b)},getValue:function(){g.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name?'name="'+this.name.replace(/"/g,"&quot;")+'"':"";this.inherited(arguments)},_setTypeAttr:null})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/dom-style,dojo/_base/lang,dojo/mouse,dojo/sniff,dojo/window,../a11y".split(","),function(h,j,g,i,f,d,b,e,c){return j("dijit.form._FormWidgetMixin",
null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(a){this._set("disabled",a);g.set(this.focusNode,"disabled",a);this.valueNode&&g.set(this.valueNode,"disabled",a);this.focusNode.setAttribute("aria-disabled",a?"true":"false");a?(this._set("hovering",!1),this._set("active",!1),a="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in
this?this._setTabIndexAttr:"focusNode",h.forEach(f.isArray(a)?a:[a],function(a){a=this[a];b("webkit")||c.hasDefaultTabStop(a)?a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var b=this.connect(this.focusNode,"onfocus",function(){this.disconnect(c);this.disconnect(b)}),c=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(c);this.disconnect(b);this.focused&&
this.focus()});this.scrollOnFocus&&this.defer(function(){e.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=i.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){if(void 0==
this._lastValueReported&&(null===b||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);if((this.intermediateChanges||b||void 0===b)&&this._pendingOnChange)if(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive)this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)})},
create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_FormValueMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/sniff","./_FormWidgetMixin"],function(h,j,g,i,f){return h("dijit.form._FormValueMixin",f,{readOnly:!1,_setReadOnlyAttr:function(d){j.set(this.focusNode,"readOnly",d);this._set("readOnly",
d)},postCreate:function(){this.inherited(arguments);i("ie")&&this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);if(void 0===this._resetValue)this._lastValueReported=this._resetValue=this.value},_setValueAttr:function(d,b){this._handleOnChange(d,b)},_handleOnChange:function(d,b){this._set("value",d);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)},_onKeyDown:function(d){if(d.keyCode==
g.ESCAPE&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&(9>i("ie")||i("ie")&&i("quirks"))){d.preventDefault();var b=d.srcElement,e=b.ownerDocument.createEventObject();e.keyCode=g.ESCAPE;e.shiftKey=d.shiftKey;b.fireEvent("onkeypress",e)}}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/on,../main".split(","),function(h,j,g,i,f,d,b,e){var c=j("dijit.form._TextBoxMixin",null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,
maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var e;void 0!==a&&(e=this.filter(a),"string"!=typeof c&&(c=null!==e&&("number"!=typeof e||!isNaN(e))?this.filter(this.format(e,this.constraints)):""));if(null!=c&&("number"!=typeof c||!isNaN(c))&&this.textbox.value!=c)this.textbox.value=c,this._set("displayedValue",this.get("displayedValue"));"auto"==this.textDir&&this.applyTextDir(this.focusNode,
c);this.inherited(arguments,[e,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=typeof a&&(a=""+a);this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"));"auto"==this.textDir&&this.applyTextDir(this.focusNode,a)},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},
onInput:function(){},__skipInputEvent:!1,_onInput:function(a){"auto"==this.textDir&&this.applyTextDir(this.focusNode,this.focusNode.value);this._processInput(a)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(b(this.textbox,"keydown, keypress, paste, cut, input, compositionend",d.hitch(this,function(a){var b;if("keydown"==a.type){b=a.keyCode;
switch(b){case f.SHIFT:case f.ALT:case f.CTRL:case f.META:case f.CAPS_LOCK:case f.NUM_LOCK:case f.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&!a.altKey){switch(b){case f.NUMPAD_0:case f.NUMPAD_1:case f.NUMPAD_2:case f.NUMPAD_3:case f.NUMPAD_4:case f.NUMPAD_5:case f.NUMPAD_6:case f.NUMPAD_7:case f.NUMPAD_8:case f.NUMPAD_9:case f.NUMPAD_MULTIPLY:case f.NUMPAD_PLUS:case f.NUMPAD_ENTER:case f.NUMPAD_MINUS:case f.NUMPAD_PERIOD:case f.NUMPAD_DIVIDE:return}if(65<=b&&90>=b||48<=b&&57>=b||b==f.SPACE)return;
b=!1;for(var c in f)if(f[c]===a.keyCode){b=!0;break}if(!b)return}}(b=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(b=65<=a.keyCode&&90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==f.SPACE?String.fromCharCode(a.keyCode):a.keyCode);b||(b=229);if("keypress"==a.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(a.ctrlKey||a.metaKey||a.altKey)return}if("input"==a.type){if(this.__skipInputEvent){this.__skipInputEvent=!1;return}}else this.__skipInputEvent=
!0;var e={faux:!0},g;for(g in a)"layerX"!=g&&"layerY"!=g&&(c=a[g],"function"!=typeof c&&"undefined"!=typeof c&&(e[g]=c));d.mixin(e,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){e._wasConsumed=!0;a.preventDefault()},stopPropagation:function(){a.stopPropagation()}});!1===this.onInput(e)&&(e.preventDefault(),e.stopPropagation());e._wasConsumed||this.defer(function(){this._onInput(e)})})))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;
this.trim&&(a=d.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){if(!this.disabled&&!this.readOnly){if(this.selectOnClick&&
"mouse"==a)this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;this._isTextSelected()||c.selectInputText(this.textbox)}),this.defer(function(){if(this._selectOnClickHandle)this.disconnect(this._selectOnClickHandle),this._selectOnClickHandle=null},500);this.inherited(arguments);this._refreshState()}},reset:function(){this.textbox.value="";this.inherited(arguments)},_setTextDirAttr:function(a){if(!this._created||
this.textDir!=a)this._set("textDir",a),this.applyTextDir(this.focusNode,this.focusNode.value)}});c._setSelectionRange=e._setSelectionRange=function(a,b,c){a.setSelectionRange&&a.setSelectionRange(b,c)};c.selectInputText=e.selectInputText=function(a,b,e){a=g.byId(a);isNaN(b)&&(b=0);isNaN(e)&&(e=a.value?a.value.length:0);try{a.focus(),c._setSelectionRange(a,b,e)}catch(d){}};return c})},"url:dijit/form/templates/TextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',
"dijit/Tooltip":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/fx,dojo/dom,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,dojo/mouse,dojo/on,dojo/sniff,./_base/manager,./place,./_Widget,./_TemplatedMixin,./BackgroundIframe,dojo/text!./templates/Tooltip.html,./main".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l,n,s){var u=j("dijit._MasterTooltip",[m,o],{duration:p.defaultDuration,templateString:n,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.bgIframe=new l(this.domNode);this.fadeIn=g.fadeIn({node:this.domNode,duration:this.duration,onEnd:e.hitch(this,"_onShow")});this.fadeOut=g.fadeOut({node:this.domNode,duration:this.duration,onEnd:e.hitch(this,"_onHide")})},show:function(a,c,d,f,g){if(!this.aroundNode||!(this.aroundNode===c&&this.containerNode.innerHTML==a))if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;g&&this.set("textDir",g);this.containerNode.align=f?"right":"left";var i=q.around(this.domNode,
c,d&&d.length?d:r.defaultPosition,!f,e.hitch(this,"orient")),l=i.aroundNodePos;"M"==i.corner.charAt(0)&&"M"==i.aroundCorner.charAt(0)?(this.connectorNode.style.top=l.y+(l.h-this.connectorNode.offsetHeight>>1)-i.y+"px",this.connectorNode.style.left=""):"M"==i.corner.charAt(1)&&"M"==i.aroundCorner.charAt(1)?this.connectorNode.style.left=l.x+(l.w-this.connectorNode.offsetWidth>>1)-i.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");b.set(this.domNode,"opacity",0);this.fadeIn.play();
this.isShowingNow=!0;this.aroundNode=c}},orient:function(a,b,c,e,f){this.connectorNode.style.top="";var g=e.h,e=e.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+
"-"+c];this.domNode.style.width="auto";var i=d.position(this.domNode);9==k("ie")&&(i.w+=2);var l=Math.min(Math.max(e,1),i.w);d.setMarginBox(this.domNode,{w:l});"B"==c.charAt(0)&&"B"==b.charAt(0)?(a=d.position(a),b=this.connectorNode.offsetHeight,a.h>g?(this.connectorNode.style.top=g-(f.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(f.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom=
"");return Math.max(0,i.w-e)},_onShow:function(){if(k("ie"))this.domNode.style.filter=""},hide:function(a){if(this._onDeck&&this._onDeck[1]==a)this._onDeck=null;else if(this.aroundNode===a)this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play()},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck)this.show.apply(this,this._onDeck),this._onDeck=null},_setAutoTextDir:function(a){this.applyTextDir(a,k("ie")?a.outerText:a.textContent);
h.forEach(a.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});s.showTooltip=function(a,b,c,e,d){c&&(c=h.map(c,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));if(!r._masterTT)s._masterTT=r._masterTT=new u;return r._masterTT.show(a,b,c,e,d)};s.hideTooltip=function(a){return r._masterTT&&r._masterTT.hide(a)};var r=j("dijit.Tooltip",
m,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(b){h.forEach(this._connections||[],function(a){h.forEach(a,function(a){a.remove()})},this);this._connectIds=h.filter(e.isArrayLike(b)?b:b?[b]:[],function(a){return i.byId(a,this.ownerDocument)},this);this._connections=h.map(this._connectIds,function(b){var b=i.byId(b,this.ownerDocument),d=this.selector,f=d?function(b){return a.selector(d,b)}:function(a){return a},g=this;return[a(b,f(c.enter),function(){g._onHover(this)}),
a(b,f("focusin"),function(){g._onHover(this)}),a(b,f(c.leave),e.hitch(g,"_onUnHover")),a(b,f("focusout"),e.hitch(g,"_onUnHover"))]},this);this._set("connectId",b)},addTarget:function(a){a=a.id||a;-1==h.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=h.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);f.add(this.domNode,"dijitTooltipData")},
startup:function(){this.inherited(arguments);var a=this.connectId;h.forEach(e.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(){return this.label||this.domNode.innerHTML},_onHover:function(a){if(!this._showTimer)this._showTimer=this.defer(function(){this.open(a)},this.showDelay)},_onUnHover:function(){this._showTimer&&(this._showTimer.remove(),delete this._showTimer);this.close()},open:function(a){this._showTimer&&(this._showTimer.remove(),delete this._showTimer);var b=this.getContent(a);
if(b)r.show(b,a,this.position,!this.isLeftToRight(),this.textDir),this._connectNode=a,this.onShow(a,this.position)},close:function(){this._connectNode&&(r.hide(this._connectNode),delete this._connectNode,this.onHide());this._showTimer&&(this._showTimer.remove(),delete this._showTimer)},onShow:function(){},onHide:function(){},destroy:function(){this.close();h.forEach(this._connections||[],function(a){h.forEach(a,function(a){a.remove()})},this);this.inherited(arguments)}});r._MasterTooltip=u;r.show=
s.showTooltip;r.hide=s.hideTooltip;r.defaultPosition=["after-centered","before-centered"];return r})},"dijit/place":function(){define("dojo/_base/array,dojo/dom-geometry,dojo/dom-style,dojo/_base/kernel,dojo/_base/window,dojo/window,./main".split(","),function(h,j,g,i,f,d,b){function e(b,a,e,g){var i=d.getBox(b.ownerDocument);(!b.parentNode||"body"!=(""+b.parentNode.tagName).toLowerCase())&&f.body(b.ownerDocument).appendChild(b);var m=null;h.some(a,function(a){var d=a.corner,f=a.pos,h=0,o={w:{L:i.l+
i.w-f.x,R:f.x-i.l,M:i.w}[d.charAt(1)],h:{T:i.t+i.h-f.y,B:f.y-i.t,M:i.h}[d.charAt(0)]},v=b.style;v.left=v.right="auto";e&&(h=e(b,a.aroundCorner,d,o,g),h="undefined"==typeof h?0:h);var t=b.style,w=t.display,x=t.visibility;if("none"==t.display)t.visibility="hidden",t.display="";v=j.position(b);t.display=w;t.visibility=x;w={L:f.x,R:f.x-v.w,M:Math.max(i.l,Math.min(i.l+i.w,f.x+(v.w>>1))-v.w)}[d.charAt(1)];x={T:f.y,B:f.y-v.h,M:Math.max(i.t,Math.min(i.t+i.h,f.y+(v.h>>1))-v.h)}[d.charAt(0)];f=Math.max(i.l,
w);t=Math.max(i.t,x);w=Math.min(i.l+i.w,w+v.w);x=Math.min(i.t+i.h,x+v.h);w-=f;x-=t;h+=v.w-w+(v.h-x);if(null==m||h<m.overflow)m={corner:d,aroundCorner:a.aroundCorner,x:f,y:t,w:w,h:x,overflow:h,spaceAvailable:o};return!h});m.overflow&&e&&e(b,m.aroundCorner,m.corner,m.spaceAvailable,g);var a=j.isBodyLtr(b.ownerDocument),o=b.style;o.top=m.y+"px";o[a?"left":"right"]=(a?m.x:i.w-m.x-m.w)+"px";o[a?"right":"left"]="auto";return m}return b.place={at:function(b,a,d,f){d=h.map(d,function(b){var c={corner:b,pos:{x:a.x,
y:a.y}};f&&(c.pos.x+="L"==b.charAt(1)?f.x:-f.x,c.pos.y+="T"==b.charAt(0)?f.y:-f.y);return c});return e(b,d)},around:function(b,a,d,f,q){function m(a,b){B.push({aroundCorner:a,corner:b,pos:{x:{L:v,R:v+w,M:v+(w>>1)}[a.charAt(1)],y:{T:t,B:t+x,M:t+(x>>1)}[a.charAt(0)]}})}var o="string"==typeof a||"offsetWidth"in a?j.position(a,!0):a;if(a.parentNode)for(var l="absolute"==g.getComputedStyle(a).position,a=a.parentNode;a&&1==a.nodeType&&"BODY"!=a.nodeName;){var n=j.position(a,!0),s=g.getComputedStyle(a);
/relative|absolute/.test(s.position)&&(l=!1);if(!l&&/hidden|auto|scroll/.test(s.overflow)){var u=Math.min(o.y+o.h,n.y+n.h),r=Math.min(o.x+o.w,n.x+n.w);o.x=Math.max(o.x,n.x);o.y=Math.max(o.y,n.y);o.h=u-o.y;o.w=r-o.x}"absolute"==s.position&&(l=!0);a=a.parentNode}var v=o.x,t=o.y,w="w"in o?o.w:o.w=o.width,x="h"in o?o.h:(i.deprecated("place.around: dijit/place.__Rectangle: { x:"+v+", y:"+t+", height:"+o.height+", width:"+w+" } has been deprecated.  Please use { x:"+v+", y:"+t+", h:"+o.height+", w:"+w+
" }","","2.0"),o.h=o.height),B=[];h.forEach(d,function(a){var b=f;switch(a){case "above-centered":m("TM","BM");break;case "below-centered":m("BM","TM");break;case "after-centered":b=!b;case "before-centered":m(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":m(b?"TL":"TR",b?"TR":"TL");m(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":m(b?"BL":"BR",b?"TL":"TR");m(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":m(b?"TL":"TR",b?"BL":"BR");m(b?"TR":"TL",
b?"BR":"BL");break;default:m(a.aroundCorner,a.corner)}});b=e(b,B,q,{w:w,h:x});b.aroundNodePos=o;return b}}})},"url:dijit/templates/Tooltip.html":'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip"\n\t><div class="dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point="containerNode" role=\'alert\'></div\n\t><div class="dijitTooltipConnector" data-dojo-attach-point="connectorNode"></div\n></div>\n',"url:dijit/form/templates/ValidationTextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',
"dijit/form/ComboBoxMixin":function(){define("dojo/_base/declare,dojo/_base/Deferred,dojo/_base/kernel,dojo/_base/lang,dojo/store/util/QueryResults,./_AutoCompleterMixin,./_ComboBoxMenu,../_HasDropDown,dojo/text!./templates/DropDownBox.html".split(","),function(h,j,g,i,f,d,b,e,c){return h("dijit.form.ComboBoxMixin",[e,d],{dropDownClass:b,hasDownArrow:!0,templateString:c,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(a){this._set("hasDownArrow",
a);this._buttonNode.style.display=a?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(a){a.get||i.mixin(a,{_oldAPI:!0,get:function(a){var b=new j;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var c=new j(function(){e.abort&&e.abort()});c.total=new j;var e=this.fetch(i.mixin({query:a,onBegin:function(a){c.total.resolve(a)},onComplete:function(a){c.resolve(a)},
onError:function(a){c.reject(a)}},b));return f(c)}});this._set("store",a)},postMixInProperties:function(){var a=this.params.store||this.store;a&&this._setStoreAttr(a);this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var b=this.declaredClass;i.mixin(this.store,{getValue:function(a,c){g.deprecated(b+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return a[c]},getLabel:function(a){g.deprecated(b+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly",
"","2.0");return a.name},fetch:function(a){g.deprecated(b+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],i.hitch(this,function(b){(new b({objectStore:this})).fetch(a)}))}})}}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../_base/Deferred"],function(h,j,g){var i=function(f){function d(b){f[b]||(f[b]=function(){var e=arguments;return g.when(f,function(c){Array.prototype.unshift.call(e,
c);return i(h[b].apply(h,e))})})}if(!f)return f;f.then&&(f=j.delegate(f));d("forEach");d("filter");d("map");if(!f.total)f.total=g.when(f,function(b){return b.length});return f};j.setObject("dojo.store.util.QueryResults",i);return i})},"dijit/form/_AutoCompleterMixin":function(){define("dojo/data/util/filter,dojo/_base/declare,dojo/dom-attr,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/query,dojo/regexp,dojo/sniff,dojo/string,./DataList,../registry,./_TextBoxMixin,./_SearchMixin".split(","),function(h,
j,g,i,f,d,b,e,c,a,k,p,q,m){return j("dijit.form._AutoCompleterMixin",m,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(a){var b=0;if("number"==typeof a.selectionStart)b=a.selectionStart;else if(c("ie")){var e=a.ownerDocument.selection.createRange().duplicate(),a=a.createTextRange();e.move("character",0);a.move("character",0);try{a.setEndPoint("EndToEnd",e),b=(""+a.text).replace(/\r/g,"").length}catch(d){}}return b},
_setCaretPos:function(a,b){b=parseInt(b);q.selectInputText(a,b,b)},_setDisabledAttr:function(a){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",a?"true":"false")},_onKey:function(a){if(!(32<=a.charCode)){var b=a.charCode||a.keyCode;if(!(b==f.ALT||b==f.CTRL||b==f.META||b==f.SHIFT)){var c=this.dropDown,e=null;this._abortQuery();this.inherited(arguments);if(!a.altKey&&!a.ctrlKey&&!a.metaKey)switch(this._opened&&(e=c.getHighlightedOption()),b){case f.PAGE_DOWN:case f.DOWN_ARROW:case f.PAGE_UP:case f.UP_ARROW:this._opened&&
this._announceOption(e);i.stop(a);break;case f.ENTER:if(e){if(e==c.nextButton){this._nextSearch(1);i.stop(a);break}else if(e==c.previousButton){this._nextSearch(-1);i.stop(a);break}i.stop(a)}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case f.TAB:b=this.get("displayedValue");if(c&&(b==c._messages.previousMessage||b==c._messages.nextMessage))break;e&&this._selectOption(e);case f.ESCAPE:if(this._opened)this._lastQuery=null,this.closeDropDown()}}}},_autoCompleteText:function(a){var b=
this.focusNode;q.selectInputText(b,b.value.length);var c=this.ignoreCase?"toLowerCase":"substr";if(0==a[c](0).indexOf(this.focusNode.value[c](0))){if(c=this.autoComplete?this._getCaretPos(b):b.value.length,c+1>b.value.length)b.value=a,q.selectInputText(b,c)}else b.value=a,q.selectInputText(b)},_openResultList:function(a,b,c){var e=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();!a.length&&0==c.start?this.closeDropDown():(this._nextSearch=this.dropDown.onPage=d.hitch(this,function(b){a.nextPage(-1!==
b);this.focus()}),this.dropDown.createOptions(a,c,d.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in c?(c.direction?this.dropDown.highlightFirstOption():c.direction||this.dropDown.highlightLastOption(),e&&this._announceOption(this.dropDown.getHighlightedOption())):this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(b[this.searchAttr].toString())&&this._announceOption(this.dropDown.containerNode.firstChild.nextSibling))},_showResultList:function(){this.closeDropDown(!0);
this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"),this.focusNode.removeAttribute("aria-activedescendant"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;b&&(a==b._messages.previousMessage||a==b._messages.nextMessage)?this._setValueAttr(this._lastValueReported,
!0):"undefined"==typeof this.item?(this.item=null,this.set("displayedValue",a)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState())},_setItemAttr:function(a,b,c){var e="";a&&(c||(c=this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]),e=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):c);this.set("value",e,b,c,a)},_announceOption:function(a){if(a){var b;if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)b=
a.innerHTML,this.item=void 0,this.value="";else{var c=this.dropDown.items[a.getAttribute("item")];b=(this.store._oldAPI?this.store.getValue(c,this.searchAttr):c[this.searchAttr]).toString();this.set("item",c,!1,b)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",g.get(a,"id"));this._autoCompleteText(b)}},_selectOption:function(a){this.closeDropDown();a&&this._announceOption(a);this._setCaretPos(this.focusNode,this.focusNode.value.length);
this._handleOnChange(this.value,!0)},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(a){if(!this.dropDown){var b=this.id+"_popup";this.dropDown=new (d.isString(this.dropDownClass)?d.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:d.hitch(this,this._selectOption),id:b,dir:this.dir,textDir:this.textDir});this.focusNode.removeAttribute("aria-activedescendant");this.textbox.setAttribute("aria-owns",
b)}this._lastInput=a;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!this.store&&(this.store=new k({},this.srcNodeRef),!("value"in this.params))){var a=this.item=this.store.fetchSelectedItem();if(a){var b=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(a,b):a[b]}}},postCreate:function(){var a=b('label[for="'+this.id+'"]');if(a.length){if(!a[0].id)a[0].id=this.id+"_label";this.domNode.setAttribute("aria-labelledby",
a[0].id)}this.inherited(arguments);this.connect(this,"onSearch","_openResultList")},_getMenuLabelFromItem:function(a){var a=this.labelFunc(a,this.store),b=this.labelType;"none"!=this.highlightMatch&&"text"==this.labelType&&this._lastInput&&(a=this.doHighlight(a,this._lastInput),b="html");return{html:"html"==b,label:a}},doHighlight:function(a,b){var c=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),d=this.queryExpr.indexOf("${0}"),b=e.escapeString(b);return this._escapeHtml(a.replace(RegExp((0==
d?"^":"")+"("+b+")"+(d==this.queryExpr.length-4?"$":""),c),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'<span class="dijitComboBoxHighlightMatch">$1</span>')},_escapeHtml:function(a){return a=(""+a).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(a,b){return(b._oldAPI?b.getValue(a,this.labelAttr||this.searchAttr):a[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(a,
b,c,e){this._set("item",e||null);null==a&&(a="");this.inherited(arguments)},_setTextDirAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",a)}})})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(h){var j={};h.setObject("dojo.data.util.filter",j);j.patternToRegExp=function(g,i){for(var f="^",d=null,b=0;b<g.length;b++)switch(d=g.charAt(b),d){case "\\":f+=d;b++;f+=g.charAt(b);break;case "*":f+=".*";break;case "?":f+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":f+=
"\\";default:f+=d}f+="$";return i?RegExp(f,"mi"):RegExp(f,"m")};return j})},"dijit/form/DataList":function(){define("dojo/_base/declare,dojo/dom,dojo/_base/lang,dojo/query,dojo/store/Memory,../registry".split(","),function(h,j,g,i,f,d){function b(b){return{id:b.value,value:b.value,name:g.trim(b.innerText||b.textContent||"")}}return h("dijit.form.DataList",f,{constructor:function(e,c){this.domNode=j.byId(c);g.mixin(this,e);this.id&&d.add(this);this.domNode.style.display="none";this.inherited(arguments,
[{data:i("option",this.domNode).map(b)}])},destroy:function(){d.remove(this.id)},fetchSelectedItem:function(){var e=i("> option[selected]",this.domNode)[0]||i("> option",this.domNode)[0];return e&&b(e)}})})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(h,j,g){return h("dojo.store.Memory",null,{constructor:function(g){for(var f in g)this[f]=g[f];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:g,get:function(g){return this.data[this.index[g]]},
getIdentity:function(g){return g[this.idProperty]},put:function(g,f){var d=this.data,b=this.index,e=this.idProperty,e=g[e]=f&&"id"in f?f.id:e in g?g[e]:Math.random();if(e in b){if(f&&!1===f.overwrite)throw Error("Object already exists");d[b[e]]=g}else b[e]=d.push(g)-1;return e},add:function(g,f){(f=f||{}).overwrite=!1;return this.put(g,f)},remove:function(g){var f=this.index,d=this.data;if(g in f)return d.splice(f[g],1),this.setData(d),!0},query:function(g,f){return j(this.queryEngine(g,f)(this.data))},
setData:function(g){var a;g.items?(this.idProperty=g.identifier,a=this.data=g.items,g=a):this.data=g;this.index={};for(var f=0,d=g.length;f<d;f++)this.index[g[f][this.idProperty]]=f}})})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(h){return function(j,g){function i(d){var d=h.filter(d,j),b=g&&g.sort;b&&d.sort("function"==typeof b?b:function(c,a){for(var e,d=0;e=b[d];d++){var f=c[e.attribute],g=a[e.attribute];if(f!=g)return!!e.descending==(null==f||f>g)?-1:
1}return 0});if(g&&(g.start||g.count)){var e=d.length,d=d.slice(g.start||0,(g.start||0)+(g.count||Infinity));d.total=e}return d}switch(typeof j){default:throw Error("Can not query with a "+typeof j);case "object":case "undefined":var f=j,j=function(d){for(var b in f){var e=f[b];if(e&&e.test){if(!e.test(d[b],d))return!1}else if(e!=d[b])return!1}return!0};break;case "string":if(!this[j])throw Error("No filter function "+j+" was found in store");j=this[j];case "function":}i.matches=j;return i}})},"dijit/form/_SearchMixin":function(){define("dojo/data/util/filter,dojo/_base/declare,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/query,dojo/sniff,dojo/string,dojo/when,../registry".split(","),
function(h,j,g,i,f,d,b,e,c,a){return j("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_abortQuery:function(){if(this.searchTimer)this.searchTimer=this.searchTimer.remove();if(this._queryDeferHandle)this._queryDeferHandle=this._queryDeferHandle.remove();if(this._fetchHandle){if(this._fetchHandle.abort)this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1;if(this._fetchHandle.cancel)this._cancelingQuery=
!0,this._fetchHandle.cancel(),this._cancelingQuery=!1;this._fetchHandle=null}},_processInput:function(a){if(!this.disabled&&!this.readOnly){var b=a.charOrCode;if(!a.altKey&&!((a.ctrlKey||a.metaKey)&&"x"!=b&&"v"!=b||b==i.SHIFT)){this._prev_key_backspace=a=!1;switch(b){case i.DELETE:case i.BACKSPACE:a=this._maskValidSubsetError=this._prev_key_backspace=!0;break;default:a="string"==typeof b||229==b}if(a)if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}}},onSearch:function(){},
_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"))},_startSearch:function(a){this._abortQuery();var b=this,d=f.clone(this.query),g={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},i=e.substitute(this.queryExpr,[a]),l,n=function(){var a=b._fetchHandle=b.store.query(d,g);!b.disabled&&!(b.readOnly||l!==b._lastQuery)&&c(a,function(e){b._fetchHandle=null;!b.disabled&&!b.readOnly&&l===b._lastQuery&&c(a.total,function(a){e.total=
a;var c=b.pageSize;if(isNaN(c)||c>e.total)c=e.total;e.nextPage=function(a){g.direction=a=!1!==a;g.count=c;if(a){if(g.start+=e.length,g.start>=e.total)g.count=0}else if(g.start-=c,0>g.start)g.count=Math.max(c+g.start,0),g.start=0;0>=g.count?(e.length=0,b.onSearch(e,d,g)):n()};b.onSearch(e,d,g)})},function(a){b._fetchHandle=null;b._cancelingQuery||console.error(b.declaredClass+" "+a.toString())})};f.mixin(g,this.fetchProperties);this.store._oldAPI?l=i:(l=h.patternToRegExp(i,this.ignoreCase),l.toString=
function(){return i});this._lastQuery=d[this.searchAttr]=l;this._queryDeferHandle=this.defer(n,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var b=this.list;if(b)this.store=a.byId(b)}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare,dojo/dom-class,dojo/dom-style,dojo/keys,../_WidgetBase,../_TemplatedMixin,./_ComboBoxMenuMixin,./_ListMouseMixin".split(","),function(h,j,g,
i,f,d,b,e){return h("dijit.form._ComboBoxMenu",[f,d,e,b],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'><div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div><div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div></div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);
this.isLeftToRight()||(j.add(this.previousButton,"dijitMenuItemRtl"),j.add(this.nextButton,"dijitMenuItemRtl"))},_createMenuItem:function(){var b=this.ownerDocument.createElement("div");b.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");b.setAttribute("role","option");return b},onHover:function(b){j.add(b,"dijitMenuItemHover")},onUnhover:function(b){j.remove(b,"dijitMenuItemHover")},onSelect:function(b){j.add(b,"dijitMenuItemSelected")},onDeselect:function(b){j.remove(b,
"dijitMenuItemSelected")},_page:function(b){var a=0,e=this.domNode.scrollTop,d=g.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();a<d;){var f=this.getHighlightedOption();if(b){if(!f.previousSibling||"none"==f.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!f.nextSibling||"none"==f.nextSibling.style.display)break;this.selectNextNode()}f=this.domNode.scrollTop;a+=(f-e)*(b?-1:1);e=f}},handleKey:function(b){switch(b.keyCode){case i.DOWN_ARROW:return this.selectNextNode(),
!1;case i.PAGE_DOWN:return this._page(!1),!1;case i.UP_ARROW:return this.selectPreviousNode(),!1;case i.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(h,j,g,i){return j("dijit.form._ComboBoxMenuMixin",null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=i.getLocalization("dijit.form","ComboBox",
this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(f){this.value=f;this.onChange(f)},onClick:function(f){if(f==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(f==this.nextButton)this._setSelectedAttr(null),this.onPage(1);else this.onChange(f)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},
_createOption:function(f,d){var b=this._createMenuItem(),e=d(f);e.html?b.innerHTML=e.label:b.appendChild(b.ownerDocument.createTextNode(e.label));if(""==b.innerHTML)b.innerHTML="&#160;";this.applyTextDir(b,b.innerText||b.textContent||"");return b},createOptions:function(f,d,b){this.items=f;this.previousButton.style.display=0==d.start?"none":"";g.set(this.previousButton,"id",this.id+"_prev");h.forEach(f,function(c,a){var e=this._createOption(c,b);e.setAttribute("item",a);g.set(e,"id",this.id+a);this.nextButton.parentNode.insertBefore(e,
this.nextButton)},this);var e=!1;f.total&&!f.total.then&&-1!=f.total?d.start+d.count<f.total?e=!0:d.start+d.count>f.total&&d.count==f.length&&(e=!0):d.count==f.length&&(e=!0);this.nextButton.style.display=e?"":"none";g.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var f=this.containerNode;2<f.childNodes.length;)f.removeChild(f.childNodes[f.childNodes.length-2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},
selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}})})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare","dojo/mouse","dojo/on","dojo/touch","./_ListBase"],function(h,j,g,i,f){return h("dijit.form._ListMouseMixin",f,{postCreate:function(){this.inherited(arguments);
this.own(g(this.domNode,i.press,function(d){d.preventDefault()}));this._listConnect(i.press,"_onMouseDown");this._listConnect(i.release,"_onMouseUp");this._listConnect(j.enter,"_onMouseOver");this._listConnect(j.leave,"_onMouseOut")},_onMouseDown:function(d,b){if(this._hoveredNode)this.onUnhover(this._hoveredNode),this._hoveredNode=null;this._isDragging=!0;this._setSelectedAttr(b)},_onMouseUp:function(d,b){this._isDragging=!1;var e=this.selected,c=this._hoveredNode;if(e&&b==e)this.onClick(e);else c&&
b==c&&(this._setSelectedAttr(c),this.onClick(c))},_onMouseOut:function(){if(this._hoveredNode)this.onUnhover(this._hoveredNode),this._hoveredNode=null;if(this._isDragging)this._cancelDrag=(new Date).getTime()+1E3},_onMouseOver:function(d,b){if(this._cancelDrag){if((new Date).getTime()>this._cancelDrag)this._isDragging=!1;this._cancelDrag=null}this._hoveredNode=b;this.onHover(b);this._isDragging&&this._setSelectedAttr(b)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on",
"dojo/window"],function(h,j,g){return h("dijit.form._ListBase",null,{selected:null,_listConnect:function(g,f){var d=this;return d.own(j(d.containerNode,j.selector(function(b,e,c){return b.parentNode==c},g),function(b){b.preventDefault();d[f](b,this)}))},selectFirstNode:function(){for(var g=this.containerNode.firstChild;g&&"none"==g.style.display;)g=g.nextSibling;this._setSelectedAttr(g)},selectLastNode:function(){for(var g=this.containerNode.lastChild;g&&"none"==g.style.display;)g=g.previousSibling;
this._setSelectedAttr(g)},selectNextNode:function(){var g=this.selected;if(g){for(g=g.nextSibling;g&&"none"==g.style.display;)g=g.nextSibling;g?this._setSelectedAttr(g):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var g=this.selected;if(g){for(g=g.previousSibling;g&&"none"==g.style.display;)g=g.previousSibling;g?this._setSelectedAttr(g):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(i){if(this.selected!=i){var f=this.selected;if(f)this.onDeselect(f),
this.selected=null;if(i)this.selected=i,g.scrollIntoView(i),this.onSelect(i)}else if(i)this.onSelect(i)}})})},"dijit/_HasDropDown":function(){define("dojo/_base/declare,dojo/_base/Deferred,dojo/_base/event,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/has,dojo/keys,dojo/_base/lang,dojo/on,dojo/window,./registry,./focus,./popup,./_FocusMixin".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l,n){return h("dijit._HasDropDown",n,{_buttonNode:null,_arrowWrapperNode:null,
_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){if(!this.disabled&&!this.readOnly)a.preventDefault(),this._docHandler=this.connect(this.ownerDocument,"mouseup","_onDropDownMouseUp"),this.toggleDropDown()},_onDropDownMouseUp:function(a){a&&this._docHandler&&this.disconnect(this._docHandler);var e=this.dropDown,f=!1;if(a&&this._opened){var g=b.position(this._buttonNode,
!0);if(!(a.pageX>=g.x&&a.pageX<=g.x+g.w)||!(a.pageY>=g.y&&a.pageY<=g.y+g.h)){for(g=a.target;g&&!f;)d.contains(g,"dijitPopup")?f=!0:g=g.parentNode;if(f){g=a.target;if(e.onItemClick){for(var i;g&&!(i=m.byNode(g));)g=g.parentNode;if(i&&i.onClick&&i.getParent)i.getParent().onItemClick(i,a)}return}}}if(this._opened){if(e.focus&&!1!==e.autoFocus)this._focusDropDownTimer=this.defer(function(){e.focus();delete this._focusDropDownTimer})}else this.defer("focus");if(c("touch"))this._justGotMouseUp=!0,this.defer(function(){this._justGotMouseUp=
!1})},_onDropDownClick:function(a){c("touch")&&!this._justGotMouseUp&&(this._onDropDownMouseDown(a),this._onDropDownMouseUp(a));this._stopClickEvents&&g.stop(a)},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||
this.dropDownPosition[0]||"Down";d.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(p(this._buttonNode,"mousedown",k.hitch(this,"_onDropDownMouseDown")),p(this._buttonNode,"click",k.hitch(this,"_onDropDownClick")),p(a,"keydown",k.hitch(this,"_onKey")),p(a,"keyup",k.hitch(this,"_onKeyUp")))},destroy:function(){this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);
this.inherited(arguments)},_onKey:function(b){if(!this.disabled&&!this.readOnly){var c=this.dropDown,e=b.target;if(c&&this._opened&&c.handleKey&&!1===c.handleKey(b))g.stop(b);else if(c&&this._opened&&b.keyCode==a.ESCAPE)this.closeDropDown(),g.stop(b);else if(!this._opened&&(b.keyCode==a.DOWN_ARROW||(b.keyCode==a.ENTER||b.keyCode==a.SPACE)&&("input"!==(e.tagName||"").toLowerCase()||e.type&&"text"!==e.type.toLowerCase())))this._toggleOnKeyUp=!0,g.stop(b)}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;
this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(k.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(o.curNode&&this.dropDown&&i.isDescendant(o.curNode,this.dropDown.domNode));this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new j,b=k.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?b():this.loadDropDown(b);return a},toggleDropDown:function(){!this.disabled&&!this.readOnly&&
(this._opened?this.closeDropDown():this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,c=a.domNode,g=this._aroundNode||this.domNode,i=this;if(!this._preparedNode){this._preparedNode=!0;if(c.style.width)this._explicitDDWidth=!0;if(c.style.height)this._explicitDDHeight=!0}if(this.maxHeight||this.forceWidth||this.autoWidth){var h={display:"",visibility:"hidden"};if(!this._explicitDDWidth)h.width="";if(!this._explicitDDHeight)h.height="";e.set(c,h);h=this.maxHeight;if(-1==h)var h=
q.getBox(this.ownerDocument),n=b.position(g,!1),h=Math.floor(Math.max(n.y,h.h-(n.y+n.h)));l.moveOffScreen(a);a.startup&&!a._started&&a.startup();var n=b.getMarginSize(c),m=h&&n.h>h;e.set(c,{overflowX:"visible",overflowY:m?"auto":"visible"});m?(n.h=h,"w"in n&&(n.w+=16)):delete n.h;this.forceWidth?n.w=g.offsetWidth:this.autoWidth?n.w=Math.max(n.w,g.offsetWidth):delete n.w;k.isFunction(a.resize)?a.resize(n):b.setMarginBox(c,n)}a=l.open({parent:this,popup:a,around:g,orient:this.dropDownPosition,onExecute:function(){i.closeDropDown(!0)},
onCancel:function(){i.closeDropDown(!0)},onClose:function(){f.set(i._popupStateNode,"popupActive",!1);d.remove(i._popupStateNode,"dijitHasDropDownOpen");i._set("_opened",!1)}});f.set(this._popupStateNode,"popupActive","true");d.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this.domNode.setAttribute("aria-expanded","true");return a},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);if(this._opened)this.domNode.setAttribute("aria-expanded",
"false"),a&&this.focus(),l.close(this.dropDown),this._opened=!1}})})},"dijit/popup":function(){define("dojo/_base/array,dojo/aspect,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/on,dojo/sniff,./place,./BackgroundIframe,./main".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l,n){function s(){this._popupWrapper&&(b.destroy(this._popupWrapper),delete this._popupWrapper)}i=i(null,{_stack:[],
_beginZIndex:1E3,_idGen:1,_createWrapper:function(a){var c=a._popupWrapper,e=a.domNode;if(!c)c=b.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},a.ownerDocumentBody),c.appendChild(e),e=e.style,e.display="",e.visibility="",e.position="",e.top="0px",a._popupWrapper=c,j.after(a,"destroy",s,!0);return c},moveOffScreen:function(a){a=this._createWrapper(a);c.set(a,{visibility:"hidden",top:"-9999px",display:""})},hide:function(a){a=this._createWrapper(a);c.set(a,"display",
"none")},getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(b){for(var c=this._stack,i=b.popup,h=b.orient||["below","below-alt","above","above-alt"],n=b.parent?b.parent.isLeftToRight():e.isBodyLtr(i.ownerDocument),j=b.around,s=b.around&&b.around.id?b.around.id+"_dropdown":"popup_"+this._idGen++;c.length&&(!b.parent||!f.isDescendant(b.parent.domNode,c[c.length-1].widget.domNode));)this.close(c[c.length-1].widget);var A=this._createWrapper(i);
d.set(A,{id:s,style:{zIndex:this._beginZIndex+c.length},"class":"dijitPopup "+(i.baseClass||i["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:b.parent?b.parent.id:""});if((m("ie")||m("mozilla"))&&!i.bgIframe)i.bgIframe=new l(A);h=j?o.around(A,j,h,n,i.orient?p.hitch(i,"orient"):null):o.at(A,b,"R"==h?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],b.padding);A.style.display="";A.style.visibility="visible";i.domNode.style.visibility="visible";n=[];n.push(q(A,g._keypress,p.hitch(this,function(c){if(c.charOrCode==
k.ESCAPE&&b.onCancel)a.stop(c),b.onCancel();else if(c.charOrCode===k.TAB&&(a.stop(c),(c=this.getTopPopup())&&c.onCancel))c.onCancel()})));i.onCancel&&b.onCancel&&n.push(i.on("cancel",b.onCancel));n.push(i.on(i.onExecute?"execute":"change",p.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));c.push({widget:i,parent:b.parent,onExecute:b.onExecute,onCancel:b.onCancel,onClose:b.onClose,handlers:n});if(i.onOpen)i.onOpen(h);return h},close:function(a){for(var b=this._stack;a&&
h.some(b,function(b){return b.widget==a})||!a&&b.length;){var c=b.pop(),e=c.widget,d=c.onClose;if(e.onClose)e.onClose();for(var f;f=c.handlers.pop();)f.remove();e&&e.domNode&&this.hide(e);d&&d()}}});return n.popup=new i})},"url:dijit/form/templates/DropDownBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}"\n\trole="combobox"\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point="_buttonNode, _popupStateNode" role="presentation"\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n\t\t\tdata-dojo-attach-point="textbox,focusNode" role="textbox" aria-haspopup="true"\n\t/></div\n></div>\n',
"dijit/form/Button":function(){define("require,dojo/_base/declare,dojo/dom-class,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/ready,./_FormWidget,./_ButtonMixin,dojo/text!./templates/Button.html".split(","),function(h,j,g,i,f,d,b,e,c,a){i("dijit-legacy-requires")&&b(0,function(){h(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});return j("dijit.form.Button",[e,c],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",
templateString:a,_setValueAttr:"valueNode",_onClick:function(a){var b=this.inherited(arguments);b&&this.valueNode&&(this.valueNode.click(),a.preventDefault(),a.stopPropagation());return b},_fillContent:function(a){if(a&&(!this.params||!("label"in this.params)))if(a=d.trim(a.innerHTML))this.label=a},_setShowLabelAttr:function(a){this.containerNode&&g.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){f.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",a)},_setLabelAttr:function(a){this.inherited(arguments);if(!this.showLabel&&!("title"in this.params))this.titleNode.title=d.trim(this.containerNode.innerText||this.containerNode.textContent||"")}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(h,j,g,i){return h("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(f){if(this.disabled)return g.stop(f),!1;var d=!1===this.onClick(f);
if(!d&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var b=this.domNode;b.parentNode;b=b.parentNode){var e=i.byNode(b);if(e&&"function"==typeof e._onSubmit){e._onSubmit(f);d=!0;break}}d&&f.preventDefault();return!d},postCreate:function(){this.inherited(arguments);j.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(f){this._set("label",f);(this.containerNode||this.focusNode).innerHTML=f}})})},"url:dijit/form/templates/Button.html":'<span class="dijit dijitReset dijitInline" role="presentation"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event="ondijitclick:_onClick" role="presentation"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n\t\ttabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\n/></span>\n',
"dijit/form/Select":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/dom-class,dojo/dom-geometry,dojo/_base/event,dojo/i18n,dojo/_base/lang,dojo/sniff,./_FormSelectWidget,../_HasDropDown,../Menu,../MenuItem,../MenuSeparator,../Tooltip,dojo/text!./templates/Select.html,dojo/i18n!./nls/validate".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l){var n=j("dijit.form._SelectMenu",p,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);var a=this.menuTableNode=this.domNode,
b=this.domNode=this.ownerDocument.createElement("div");b.style.cssText="overflow-x: hidden; overflow-y: scroll";a.parentNode&&a.parentNode.replaceChild(b,a);i.remove(a,"dijitMenuTable");b.className=a.className+" dijitSelectMenu";a.className="dijitReset dijitMenuTable";a.setAttribute("role","listbox");b.setAttribute("role","presentation");b.appendChild(a)},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onselectstart",d.stop)},focus:function(){var a=!1,b=this.parentWidget.value;
e.isArray(b)&&(b=b[b.length-1]);b&&h.forEach(this.parentWidget._getChildren(),function(c){c.option&&b===c.option.value&&(a=!0,this.focusChild(c,!1))},this);a||this.inherited(arguments)},resize:function(a){if(a&&(f.setMarginBox(this.domNode,a),"w"in a))this.menuTableNode.style.width="100%"}}),j=j("dijit.form.Select",[a,k],{baseClass:"dijitSelect dijitValidationTextBox",templateString:l,_buttonInputDisabled:c("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",
_isLoaded:!1,_childrenLoaded:!1,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this.value=this.options[0<=a?a:0].value}this.dropDown=new n({id:this.id+"_menu",parentWidget:this});i.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(a){if(!a.value&&!a.label)return new m({ownerDocument:this.ownerDocument});var b=e.hitch(this,"_setValueAttr",a),a=new q({option:a,
label:a.label||this.emptyLabel,onClick:b,ownerDocument:this.ownerDocument,dir:this.dir,disabled:a.disabled||!1});a.focusNode.setAttribute("role","option");return a},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return!this.dropDown?[]:this.dropDown.getChildren()},_loadChildren:function(a){!0===a?(this.dropDown&&delete this.dropDown.focusedChild,this.options.length?this.inherited(arguments):(h.forEach(this._getChildren(),function(a){a.destroyRecursive()}),
this.dropDown.addChild(new q({ownerDocument:this.ownerDocument,label:this.emptyLabel})))):this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);g.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setDisabledAttr:function(a){this.inherited(arguments);
this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=a||this.emptyLabel;this.containerNode.innerHTML='<span role="option" class="dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'">'+a+"</span>"},validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":
"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var b=a?"":this._missingMsg;b&&this.focused&&this._hasBeenBlurred?o.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):o.hide(this.domNode);this._set("message",b);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments);o.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=
b.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onselectstart",d.stop);this.domNode.setAttribute("aria-expanded","false");9>c("ie")&&this.defer(function(){try{var a=domStyle.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(e){}})},_setStyleAttr:function(a){this.inherited(arguments);
i.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},closeDropDown:function(){this.inherited(arguments);if(this.dropDown&&this.dropDown.menuTableNode)this.dropDown.menuTableNode.style.width=""},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);this.inherited(arguments)},_onFocus:function(){this.validate(!0);
this.inherited(arguments)},_onBlur:function(){o.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});j._Menu=n;return j})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array,dojo/_base/Deferred,dojo/aspect,dojo/data/util/sorter,dojo/_base/declare,dojo/dom,dojo/dom-class,dojo/_base/kernel,dojo/_base/lang,dojo/query,dojo/when,dojo/store/util/QueryResults,./_FormValueWidget".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p,q){return f("dijit.form._FormSelectWidget",q,{multiple:!1,
options:null,store:null,query:null,queryOptions:null,labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,onLoadDeferred:null,getOptions:function(a){var b=a,e=this.options||[],d=e.length;if(void 0===b)return e;if(c.isArray(b))return h.map(b,"return this.getOptions(item);",this);c.isObject(a)&&(h.some(this.options,function(a,c){return a===b||a.value&&a.value===b.value?(b=c,!0):!1})||(b=-1));if("string"==typeof b)for(a=0;a<d;a++)if(e[a].value===b){b=a;break}return"number"==typeof b&&0<=b&&
b<d?this.options[b]:null},addOption:function(a){c.isArray(a)||(a=[a]);h.forEach(a,function(a){a&&c.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){c.isArray(a)||(a=[a]);a=this.getOptions(a);h.forEach(a,function(a){if(a)this.options=h.filter(this.options,function(b){return b.value!==a.value||b.label!==a.label}),this._removeOptionItem(a)},this);this._loadChildren()},updateOption:function(a){c.isArray(a)||(a=[a]);h.forEach(a,function(a){var b=this.getOptions(a),
c;if(b)for(c in a)b[c]=a[c]},this);this._loadChildren()},setStore:function(a,b,e){var d=this.store,e=e||{};if(d!==a){for(var f;f=this._notifyConnections.pop();)f.remove();if(!a.get&&(c.mixin(a,{_oldAPI:!0,get:function(a){var b=new j;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var e=new j(function(){d.abort&&d.abort()});e.total=new j;var d=this.fetch(c.mixin({query:a,onBegin:function(a){e.total.resolve(a)},
onComplete:function(a){e.resolve(a)},onError:function(a){e.reject(a)}},b));return new p(e)}}),a.getFeatures()["dojo.data.api.Notification"]))this._notifyConnections=[g.after(a,"onNew",c.hitch(this,"_onNewItem"),!0),g.after(a,"onDelete",c.hitch(this,"_onDeleteItem"),!0),g.after(a,"onSet",c.hitch(this,"_onSetItem"),!0)];this._set("store",a)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();e.query&&(this._set("query",e.query),
this._set("queryOptions",e.queryOptions));if(a)this._loadingStore=!0,this.onLoadDeferred=new j,this._queryRes=a.query(this.query,this.queryOptions),k(this._queryRes,c.hitch(this,function(d){if(this.sortByLabel&&!e.sort&&d.length)if(d[0].getValue)d.sort(i.createSortFunction([{attribute:a.getLabelAttributes(d[0])[0]}],a));else{var f=this.labelAttr;d.sort(function(a,b){return a[f]>b[f]?1:b[f]>a[f]?-1:0})}e.onFetch&&(d=e.onFetch.call(this,d,e));h.forEach(d,function(a){this._addOptionForItem(a)},this);
this._queryRes.observe&&this._queryRes.observe(c.hitch(this,function(a,b,c){b==c?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=c&&this._onNewItem(a))}),!0);this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:b);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(d):this._loadChildren();this.onLoadDeferred.resolve(!0);this.onSetStore()}),function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)});return d},
_setValueAttr:function(a,b){this._onChangeActive||(b=null);if(this._loadingStore)this._pendingValue=a;else{var e=this.getOptions()||[];c.isArray(a)||(a=[a]);h.forEach(a,function(b,d){c.isObject(b)||(b+="");"string"===typeof b&&(a[d]=h.filter(e,function(a){return a.value===b})[0]||{value:"",label:""})},this);a=h.filter(a,function(a){return a&&a.value});if(!this.multiple&&(!a[0]||!a[0].value)&&e.length)a[0]=e[0];h.forEach(e,function(b){b.selected=h.some(a,function(a){return a.value===b.value})});var d=
h.map(a,function(a){return a.value}),f=h.map(a,function(a){return a.label});"undefined"==typeof d||"undefined"==typeof d[0]||(this._setDisplay(this.multiple?f:f[0]),this.inherited(arguments,[this.multiple?d:d[0],b]),this._updateSelection())}},_getDisplayedValueAttr:function(){var a=this.get("value");c.isArray(a)||(a=[a]);a=h.map(this.getOptions(a),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?a:a[0]},_loadChildren:function(){this._loadingStore||(h.forEach(this._getChildren(),
function(a){a.destroyRecursive()}),h.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this._set("value",this._getValueFromOpts());var a=this.value;c.isArray(a)||(a=[a]);a&&a[0]&&h.forEach(this._getChildren(),function(c){var e=h.some(a,function(a){return c.option&&a===c.option.value});b.toggle(c.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),e);c.domNode.setAttribute("aria-selected",e?"true":"false")},this)},_getValueFromOpts:function(){var a=
this.getOptions()||[];if(!this.multiple&&a.length){var b=h.filter(a,function(a){return a.selected})[0];if(b&&b.value)return b.value;a[0].selected=!0;return a[0].value}return this.multiple?h.map(h.filter(a,function(a){return a.selected}),function(a){return a.value})||[]:""},_onNewItem:function(a,b){(!b||!b.parent)&&this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption(this.store.getIdentity(a))},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},_getOptionObjForItem:function(a){var b=
this.store,c=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:b.getLabel(a);return{value:c?b.getIdentity(a):null,label:c,item:a}},_addOptionForItem:function(a){var b=this.store;b.isItemLoaded&&!b.isItemLoaded(a)?b.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},scope:this}):this.addOption(this._getOptionObjForItem(a))},constructor:function(a){this._oValue=(a||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);d.setSelectable(this.focusNode,
!1)},_fillContent:function(){if(!this.options)this.options=this.srcNodeRef?a("> *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+e._scopeName+"-value")||a.getAttribute("value"),label:""+a.innerHTML,selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[];this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",
this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);this.connect(this,"onChange","_updateSelection");var a=this.store;if(a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"]))this.store=null,this.setStore(a,this._oValue)},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this.inherited(arguments)},_addOptionItem:function(){},
_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions(this.get("value"))},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(h){var j={};h.setObject("dojo.data.util.sorter",j);j.basicComparator=function(g,i){var f=-1;null===g&&(g=void 0);null===i&&(i=void 0);if(g==i)f=0;else if(g>i||null==g)f=1;return f};j.createSortFunction=
function(g,i){function f(a,b,c,e){return function(d,f){var g=e.getValue(d,a),i=e.getValue(f,a);return b*c(g,i)}}for(var d=[],b,e=i.comparatorMap,c=j.basicComparator,a=0;a<g.length;a++){b=g[a];var k=b.attribute;if(k){b=b.descending?-1:1;var h=c;e&&("string"!==typeof k&&"toString"in k&&(k=k.toString()),h=e[k]||c);d.push(f(k,b,h,i))}}return function(a,b){for(var c=0;c<d.length;){var e=d[c++](a,b);if(0!==e)return e}return 0}};return j})},"dijit/Menu":function(){define("require,dojo/_base/array,dojo/_base/declare,dojo/_base/event,dojo/dom,dojo/dom-attr,dojo/dom-geometry,dojo/dom-style,dojo/keys,dojo/_base/lang,dojo/on,dojo/sniff,dojo/_base/window,dojo/window,./popup,./DropDownMenu,dojo/ready".split(","),
function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l,n){p("dijit-legacy-requires")&&n(0,function(){h(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return g("dijit.Menu",l,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):j.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return m.get(this._iframeContentDocument(a))||
this._iframeContentDocument(a).__parent__||a.name&&q.doc.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&q.doc.frames[a.name]&&q.doc.frames[a.name].document||null},bindDomNode:function(b){var b=f.byId(b,this.ownerDocument),e;if("iframe"==b.tagName.toLowerCase()){var g=b,l=this._iframeContentWindow(g);e=q.body(l.document)}else e=b==q.body(this.ownerDocument)?this.ownerDocument.documentElement:b;var h={node:b,iframe:g};
d.set(b,"_dijitMenu"+this.id,this._bindings.push(h));var n=a.hitch(this,function(a){var b=this.selector,e=b?function(a){return k.selector(b,a)}:function(a){return a},d=this;return[k(a,e(this.leftClickToOpen?"click":"contextmenu"),function(a){i.stop(a);d._scheduleOpen(this,g,{x:a.pageX,y:a.pageY})}),k(a,e("keydown"),function(a){a.shiftKey&&a.keyCode==c.F10&&(i.stop(a),d._scheduleOpen(this,g))})]});h.connects=e?n(e):[];if(g)h.onloadHandler=a.hitch(this,function(){var a=this._iframeContentWindow(g);
e=q.body(a.document);h.connects=n(e)}),g.addEventListener?g.addEventListener("load",h.onloadHandler,!1):g.attachEvent("onload",h.onloadHandler)},unBindDomNode:function(a){var b;try{b=f.byId(a,this.ownerDocument)}catch(c){return}a="_dijitMenu"+this.id;if(b&&d.has(b,a)){for(var e=d.get(b,a)-1,g=this._bindings[e],i;i=g.connects.pop();)i.remove();(i=g.iframe)&&(i.removeEventListener?i.removeEventListener("load",g.onloadHandler,!1):i.detachEvent("onload",g.onloadHandler));d.remove(b,a);delete this._bindings[e]}},
_scheduleOpen:function(a,b,c){if(!this._openTimer)this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:a,iframe:b,coords:c})},1)},_openMyself:function(a){function c(){n.refocus&&j&&j.focus();o.close(n)}var d=a.target,g=a.iframe,a=a.coords;this.currentTarget=d;if(a){if(g){var d=b.position(g,!0),i=this._iframeContentWindow(g),i=b.docScroll(i.document),k=e.getComputedStyle(g),l=e.toPixelValue,h=(p("ie")&&p("quirks")?0:l(g,k.paddingLeft))+(p("ie")&&p("quirks")?l(g,k.borderLeftWidth):
0),g=(p("ie")&&p("quirks")?0:l(g,k.paddingTop))+(p("ie")&&p("quirks")?l(g,k.borderTopWidth):0);a.x+=d.x+h-i.x;a.y+=d.y+g-i.y}}else a=b.position(d,!0),a.x+=10,a.y+=10;var n=this,g=this._focusManager.get("prevNode"),d=this._focusManager.get("curNode"),j=!d||f.isDescendant(d,this.domNode)?g:d;o.open({popup:this,x:a.x,y:a.y,onExecute:c,onCancel:c,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);o.close(this)}},destroy:function(){j.forEach(this._bindings,
function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/DropDownMenu":function(){define("dojo/_base/declare,dojo/_base/event,dojo/keys,dojo/text!./templates/Menu.html,./_OnDijitClickMixin,./_MenuBase".split(","),function(h,j,g,i,f,d){return h("dijit.DropDownMenu",[d,f],{templateString:i,baseClass:"dijitMenu",postCreate:function(){this.inherited(arguments);var b=this.isLeftToRight();this._openSubMenuKey=b?g.RIGHT_ARROW:g.LEFT_ARROW;this._closeSubMenuKey=b?g.LEFT_ARROW:
g.RIGHT_ARROW;this.connectKeyNavHandlers([g.UP_ARROW],[g.DOWN_ARROW])},_onKeyPress:function(b){if(!b.ctrlKey&&!b.altKey)switch(b.charOrCode){case this._openSubMenuKey:this._moveToPopup(b);j.stop(b);break;case this._closeSubMenuKey:if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else j.stop(b)}}})})},"url:dijit/templates/Menu.html":'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\n\t   data-dojo-attach-event="onkeypress:_onKeyPress" cellspacing="0">\n\t<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n',
"dijit/_MenuBase":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/_base/lang,dojo/mouse,dojo/on,dojo/window,./a11yclick,./popup,./registry,./_Widget,./_KeyNavContainer,./_TemplatedMixin".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o){return j("dijit._MenuBase",[q,o,m],{parentMenu:null,popupDelay:500,autoFocus:!1,childSelector:function(a){var b=p.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var c=this,f="string"==
typeof this.childSelector?this.childSelector:d.hitch(this,"childSelector");this.own(e(this.containerNode,e.selector(f,b.enter),function(){c.onItemHover(p.byNode(this))}),e(this.containerNode,e.selector(f,b.leave),function(){c.onItemUnhover(p.byNode(this))}),e(this.containerNode,e.selector(f,a),function(a){c.onItemClick(p.byNode(this),a);a.stopPropagation();a.preventDefault()}));this.inherited(arguments)},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&
!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var a=this.currentPopup.parentMenu;a.focusedChild&&a.focusedChild._setSelected(!1);a.focusedChild=this.currentPopup.from_item;a.focusedChild._setSelected(!0);this._stopPendingCloseTimer(this.currentPopup)}},onItemHover:function(a){if(this.isActive&&(this.focusChild(a),this.focusedChild.popup&&
!this.focusedChild.disabled&&!this.hover_timer))this.hover_timer=this.defer("_openPopup",this.popupDelay);this.focusedChild&&this.focusChild(a);this._hoveredChild=a;a._set("hovering",!0)},_onChildBlur:function(a){this._stopPopupTimer();a._setSelected(!1);var b=a.popup;if(b)this._stopPendingCloseTimer(b),b._pendingClose_timer=this.defer(function(){b._pendingClose_timer=null;if(b.parentMenu)b.parentMenu.currentPopup=null;k.close(b)},this.popupDelay)},onItemUnhover:function(a){this.isActive&&this._stopPopupTimer();
if(this._hoveredChild==a)this._hoveredChild=null;a._set("hovering",!1)},_stopPopupTimer:function(){if(this.hover_timer)this.hover_timer=this.hover_timer.remove()},_stopPendingCloseTimer:function(a){if(a._pendingClose_timer)a._pendingClose_timer=a._pendingClose_timer.remove()},_stopFocusTimer:function(){if(this._focus_timer)this._focus_timer=this._focus_timer.remove()},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){"undefined"==typeof this.isShowingNow&&
this._markActive();this.focusChild(a);if(a.disabled)return!1;a.popup?this._openPopup("keypress"==b.type):(this.onExecute(),a._onClick?a._onClick(b):a.onClick(b))},_openPopup:function(a){this._stopPopupTimer();var b=this.focusedChild;if(b){var c=b.popup;if(!c.isShowingNow){this.currentPopup&&(this._stopPendingCloseTimer(this.currentPopup),k.close(this.currentPopup));c.parentMenu=this;c.from_item=b;var e=this;k.open({parent:this,popup:c,around:b.domNode,orient:this._orient||["after","before"],onCancel:function(){e.focusChild(b);
e._cleanUp();b._setSelected(!0);e.focusedChild=b},onExecute:d.hitch(this,"_cleanUp")});this.currentPopup=c;c.connect(c.domNode,"onmouseenter",d.hitch(e,"_onPopupHover"))}if(a&&c.focus)c._focus_timer=this.defer(d.hitch(c,function(){this._focus_timer=null;this.focus()}))}},_markActive:function(){this.isActive=!0;f.replace(this.domNode,"dijitMenuActive","dijitMenuPassive")},onOpen:function(){this.isShowingNow=!0;this._markActive()},_markInactive:function(){this.isActive=!1;f.replace(this.domNode,"dijitMenuPassive",
"dijitMenuActive")},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();if(this.currentPopup)0<=h.indexOf(this._focusManager.activeStack,this.id)&&(i.set(this.focusedChild.focusNode,"tabIndex",this.tabIndex),this.focusedChild.focusNode.focus()),k.close(this.currentPopup),this.currentPopup=null;if(this.focusedChild)this.focusedChild._setSelected(!1),this.onItemUnhover(this.focusedChild),this.focusedChild=
null},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild)},_onBlur:function(){this._cleanUp();this.inherited(arguments)},_cleanUp:function(){this._closeChild();"undefined"==typeof this.isShowingNow&&this._markInactive()}})})},"dijit/_KeyNavContainer":function(){define("dojo/_base/kernel,./_Container,./_FocusMixin,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/_base/event,dojo/dom-attr,dojo/_base/lang".split(","),function(h,j,g,i,f,d,b,e,
c){return d("dijit._KeyNavContainer",[g,j],{tabIndex:"0",connectKeyNavHandlers:function(a,b){var e=this._keyNavCodes={},d=c.hitch(this,"focusPrev"),g=c.hitch(this,"focusNext");i.forEach(a,function(a){e[a]=d});i.forEach(b,function(a){e[a]=g});e[f.HOME]=c.hitch(this,"focusFirstChild");e[f.END]=c.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus")},startupKeyNavChildren:function(){h.deprecated("startupKeyNavChildren() call no longer needed",
"","2.0")},startup:function(){this.inherited(arguments);i.forEach(this.getChildren(),c.hitch(this,"_startupChild"))},addChild:function(a,b){this.inherited(arguments);this._startupChild(a)},focus:function(){this.focusFirstChild()},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,
-1),!0)},focusChild:function(a,b){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),a.set("tabIndex",this.tabIndex),a.focus(b?"end":"start"),this._set("focusedChild",a))},_startupChild:function(a){a.set("tabIndex","-1");this.connect(a,"_onFocus",function(){a.set("tabIndex",this.tabIndex)});this.connect(a,"_onBlur",function(){a.set("tabIndex","-1")})},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||(this.focusFirstChild(),e.set(this.domNode,
"tabIndex","-1"))},_onBlur:function(a){this.tabIndex&&e.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild=null;this.inherited(arguments)},_onContainerKeypress:function(a){if(!a.ctrlKey&&!a.altKey){var c=this._keyNavCodes[a.charOrCode];c&&(c(),b.stop(a))}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},_getNextFocusableChild:function(a,b){a&&(a=this._getSiblingOfChild(a,
b));for(var c=this.getChildren(),e=0;e<c.length;e++){a||(a=c[0<b?0:c.length-1]);if(a.isFocusable())return a;a=this._getSiblingOfChild(a,b)}return null}})})},"dijit/MenuItem":function(){define("dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/_base/kernel,dojo/sniff,./_Widget,./_TemplatedMixin,./_Contained,./_CssStateMixin,dojo/text!./templates/MenuItem.html".split(","),function(h,j,g,i,f,d,b,e,c,a,k){return h("dijit.MenuItem",[b,e,c,a],{templateString:k,baseClass:"dijitMenuItem",label:"",
_setLabelAttr:function(a){this.containerNode.innerHTML=a;this._set("label",a);"auto"===this.textDir&&this.applyTextDir(this.focusNode,this.label)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){a&&!("label"in this.params)&&this.set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);var a=this.id+"_text";g.set(this.containerNode,"id",a);this.accelKeyNode&&(g.set(this.accelKeyNode,"id",this.id+"_accel"),
a+=" "+this.id+"_accel");this.domNode.setAttribute("aria-labelledby",a);j.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==d("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(a){}},_onFocus:function(){this._setSelected(!0);this.getParent()._onItemFocus(this);this.inherited(arguments)},_setSelected:function(a){i.toggle(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){f.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",a)},setDisabled:function(a){f.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode.style.display=a?"":"none";this.accelKeyNode.innerHTML=a;g.set(this.containerNode,"colSpan",a?"1":"2");this._set("accelKey",a)},_setTextDirAttr:function(a){if(!this._created||
this.textDir!=a)this._set("textDir",a),this.applyTextDir(this.focusNode,this.label)}})})},"url:dijit/templates/MenuItem.html":'<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"/>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\n\t\t<div data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n\t\t\t<img src="${_blankGif}" alt="" class="dijitMenuExpand"/>\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\n\t\t</div>\n\t</td>\n</tr>\n',
"dijit/MenuSeparator":function(){define("dojo/_base/declare,dojo/dom,./_WidgetBase,./_TemplatedMixin,./_Contained,dojo/text!./templates/MenuSeparator.html".split(","),function(h,j,g,i,f,d){return h("dijit.MenuSeparator",[g,i,f],{templateString:d,buildRendering:function(){this.inherited(arguments);j.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"url:dijit/templates/MenuSeparator.html":'<tr class="dijitMenuSeparator">\n\t<td class="dijitMenuSeparatorIconCell">\n\t\t<div class="dijitMenuSeparatorTop"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n\t<td colspan="3" class="dijitMenuSeparatorLabelCell">\n\t\t<div class="dijitMenuSeparatorTop dijitMenuSeparatorLabel"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n</tr>',
"url:dijit/form/templates/Select.html":'<table class="dijit dijitReset dijitInline dijitLeft"\n\tdata-dojo-attach-point="_buttonNode,tableNode,focusNode" cellspacing=\'0\' cellpadding=\'0\'\n\trole="listbox" aria-haspopup="true"\n\t><tbody role="presentation"><tr role="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonContents" role="presentation"\n\t\t\t><div class="dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point="containerNode,_popupStateNode" role="presentation"></div\n\t\t\t><div class="dijitReset dijitValidationContainer"\n\t\t\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t/></div\n\t\t\t><input type="hidden" ${!nameAttrSetting} data-dojo-attach-point="valueNode" value="${value}" aria-hidden="true"\n\t\t/></td\n\t\t><td class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\n\t\t\tdata-dojo-attach-point="titleNode" role="presentation"\n\t\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n',
"dijit/form/DropDownButton":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/query,../registry,../popup,./Button,../_Container,../_HasDropDown,dojo/text!./templates/DropDownButton.html".split(","),function(h,j,g,i,f,d,b,e,c){return h("dijit.form.DropDownButton",[d,b,e],{baseClass:"dijitDropDownButton",templateString:c,_fillContent:function(){if(this.srcNodeRef){var a=g("*",this.srcNodeRef);this.inherited(arguments,[a[0]]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&
this.dropDownContainer){var a=g("[widgetId]",this.dropDownContainer)[0];this.dropDown=i.byNode(a);delete this.dropDownContainer}this.dropDown&&f.hide(this.dropDown);this.inherited(arguments)}},isLoaded:function(){var a=this.dropDown;return!!a&&(!a.href||a.isLoaded)},loadDropDown:function(a){var b=this.dropDown,c=b.on("load",j.hitch(this,function(){c.remove();a()}));b.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"url:dijit/form/templates/DropDownButton.html":'<span class="dijit dijitReset dijitInline"\n\t><span class=\'dijitReset dijitInline dijitButtonNode\'\n\t\tdata-dojo-attach-event="ondijitclick:_onClick" data-dojo-attach-point="_buttonNode"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode"\n\t\t\trole="button" aria-haspopup="true" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon"\n\t\t\t\tdata-dojo-attach-point="iconNode"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tdata-dojo-attach-point="containerNode,_popupStateNode"\n\t\t\t\tid="${id}_label"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner"></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n\t\tdata-dojo-attach-point="valueNode" role="presentation"\n/></span>\n',
"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(h,j,g,i){return h("dijit.CheckedMenuItem",g,{templateString:i,checked:!1,_setCheckedAttr:function(f){j.toggle(this.domNode,"dijitCheckedMenuItemChecked",f);this.domNode.setAttribute("aria-checked",f?"true":"false");this._set("checked",f)},iconClass:"",onChange:function(){},_onClick:function(f){this.disabled||(this.set("checked",!this.checked),
this.onChange(this.checked));this.onClick(f)}})})},"url:dijit/templates/CheckedMenuItem.html":'<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="menuitemcheckbox" tabIndex="-1">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point="iconNode"/>\n\t\t<span class="dijitCheckedMenuItemIconChar">&#10003;</span>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,labelNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">&#160;</td>\n</tr>\n',
"JBrowse/Util":function(){define(["dojo/_base/array","dojox/lang/functional/object","dojox/lang/functional/fold"],function(h){var j;return j={dojof:dojox.lang.functional,is_ie:0<=navigator.appVersion.indexOf("MSIE"),is_ie6:0<=navigator.appVersion.indexOf("MSIE 6"),addCommas:function(g){for(var i=(g+"").split("."),g=i[0],i=1<i.length?"."+i[1]:"",f=/(\d+)(\d{3})/;f.test(g);)g=g.replace(f,"$1,$2");return g+i},commifyNumber:function(){return this.addCommas.apply(this,arguments)},fastDeclare:function(g){var i=
g.constructor,f=function(){i.apply(this,arguments)};dojo.mixin(f.prototype,g);return f},wheel:function(g){var i=0;if(!g)g=window.event;g.wheelDelta?(i=g.wheelDelta/120,window.opera&&(i=-i)):g.detail&&(i=-g.detail/3);return Math.round(i)},isRightButton:function(g){if(!g)g=window.event;return g.which?3==g.which:g.button?2==g.button:!1},getViewportWidth:function(){var g=0;document.documentElement&&document.documentElement.clientWidth?g=document.documentElement.clientWidth:document.body&&document.body.clientWidth?
g=document.body.clientWidth:window.innerWidth&&(g=window.innerWidth-18);return g},getViewportHeight:function(){var g=0;document.documentElement&&document.documentElement.clientHeight?g=document.documentElement.clientHeight:document.body&&document.body.clientHeight?g=document.body.clientHeight:window.innerHeight&&(g=window.innerHeight-18);return g},findNearest:function(g,i){for(var f=0,d=Math.abs(i-g[0]),b=1;b<g.length;b++)Math.abs(i-g[b])<d&&(f=b,d=Math.abs(i-g[b]));return f},fillTemplate:function(g,
i){return g.replace(/\{([^}]+)\}/g,function(f,d){var b=i[d];return void 0!==b?"function"==typeof b?b():b:"{"+d+"}"})},maybeLoad:function(g,i,f,d){i.state?"loaded"==i.state?f(i.data):"error"==i.state?d():"loading"==i.state&&(i.successCallbacks.push(f),d&&i.errorCallbacks.push(d)):(i.state="loading",i.successCallbacks=[f],i.errorCallbacks=[d],g=dojo.clone(g),g.load=function(b){i.state="loaded";i.data=b;for(var e=i.successCallbacks,c=0;c<e.length;c++)e[c](b)},g.error=function(b){console.error(""+b);
i.state="error";for(var b=i.errorCallbacks,e=0;e<b.length;e++)b[e]()},dojo.xhrGet(g))},deepUpdate:function(g,i){for(var f in i)if(f in g&&"object"==typeof i[f]&&"object"==typeof g[f])j.deepUpdate(g[f],i[f]);else if("undefined"==typeof g[f]||"undefined"!=typeof i[f])g[f]=i[f];return g},humanReadableNumber:function(g){var g=parseInt(g),i="";1E12<=g?(g/=1E12,i="T"):1E9<=g?(g/=1E9,i="G"):1E6<=g?(g/=1E6,i="M"):1E3<=g&&(g/=1E3,i="K");return(g.toFixed(2)+" "+i).replace(/0+ /," ").replace(/\. /," ")},resolveUrl:function(g,
i){if(i.match(/\w+:\/\//))return i;if("/"==i.charAt(0))return g=g.match(/.*\/\/[^\/]*/),(g?g[0]:"")+i;g=g.replace(/\?.*$/,"");g=g.substring(0,g.length-g.match(/[^\/]*$/)[0].length);if("."==i)return g;for(;g&&"../"==i.substring(0,3);)g=g.substring(0,g.length-g.match(/[^\/]*\/$/)[0].length),i=i.substring(3);return g+i},parseLocString:function(g){if("string"!=typeof g)return null;var g=dojo.trim(g),i=(g.match(/\(([^\)]+)\)$/)||[])[1],f=function(b){b=(b+"").replace(/\D/g,"");b=parseInt(b,10);return"number"==
typeof b&&!isNaN(b)?b:null},d={},b;if(-1!=g.indexOf(":"))b=g.split(":",2),d.ref=dojo.trim(b[0]),g=b[1];if(b=g.match(/^\s*([\d,]+)\s*\.\.+\s*([\d,]+)/)){if(d.start=f(b[1])-1,d.end=f(b[2]),d.start>d.end)g=d.start+1,d.start=d.end-1,d.end=g}else if(b=g.match(/^\s*([\d,]+)/))d.end=d.start=f(b[1])-1;else return null;if(i)d.extra=i;return d},basename:function(g,i){if(g&&g.match){var f=g.match(/[\/\\]([^\/\\]+)[\/\/\/]*$/);if((f=f?f[1]||void 0:g)&&i)i instanceof Array||(i=[i]),i=h.map(i,function(d){return d.replace(/([\.\?\+])/g,
"\\$1")}),f=f.replace(RegExp(i.join("|")+"$","i"),"");return f}},assembleLocString:function(g){var i="",f={start:"number",end:"number",ref:"string",strand:"number"},d={},b;for(b in f)if(f[b]==typeof g[b]&&("number"!=f[b]||!isNaN(g[b])))d[b]=g[b];if("ref"in d&&(i+=d.ref,d.start||d.end))i+=":";"start"in d&&(i+=(Math.round(d.start)+1).toFixed(0).toLocaleString(),"end"in d&&(i+=".."));"end"in d&&(i+=Math.round(d.end).toFixed(0).toLocaleString());"strand"in d&&(i+={1:" (+ strand)","-1":" (- strand)","0":" (no strand)"}[d.strand||
""]||"");"extra"in g&&(i+=g.extra);return i},complement:function(){var g=/[ACGT]/gi,i={S:"S",w:"w",T:"A",r:"y",a:"t",N:"N",K:"M",x:"x",d:"h",Y:"R",V:"B",y:"r",M:"K",h:"d",k:"m",C:"G",g:"c",t:"a",A:"T",n:"n",W:"W",X:"X",m:"k",v:"b",B:"V",s:"s",H:"D",c:"g",D:"H",b:"v",R:"Y",G:"C"},f=String.fromCharCode(160),d=function(b){return i[b]||f};return function(b){return b.replace(g,d)}}(),revcom:function(g){return j.complement(g).split("").reverse().join("")},assembleLocStringWithLength:function(g){return j.assembleLocString(g)+
" ("+j.humanReadableNumber(g.length||g.end-g.start+1)+"b)"},matchRefSeqName:function(g,i){for(var f in i)if(i.hasOwnProperty(f)){var d=g.toUpperCase(),b=f.toUpperCase();if(d==b||"CHR"+d==b||d=="CHR"+b)return i[f]}return null},debugHandler:function(g,i){return function(){var f=arguments;window.setTimeout(function(){var d=i;"string"==typeof d&&(d=g[d]);d.apply(g,f)},1)}},ucFirst:function(g){return"string"!=typeof g?void 0:g.charAt(0).toUpperCase()+g.slice(1)},uniq:function(g,i){var i=i||function(b){return""+
b},f=[],d={};dojo.forEach(g,function(b){var e=i(b);d[i(b)]||f.push(b);d[e]=!0});return f},removeAttribute:function(g,i){try{delete g[i]}catch(f){g.removeAttribute&&g.removeAttribute(i)}}}});if(!Array.prototype.map)Array.prototype.map=function(h,j){if(void 0===this||null===this)throw new TypeError;var g=Object(this),i=g.length>>>0;if("function"!==typeof h)throw new TypeError;for(var f=Array(i),d=0;d<i;d++)d in g&&(f[d]=h.call(j,g[d],d,g));return f};if(!Array.prototype.indexOf)Array.prototype.indexOf=
function(h){if(void 0===this||null===this)throw new TypeError;var j=Object(this),g=j.length>>>0;if(0===g)return-1;var i=0;0<arguments.length&&(i=Number(arguments[1]),i!==i?i=0:0!==i&&i!==1/0&&i!==-(1/0)&&(i=(0<i||-1)*Math.floor(Math.abs(i))));if(i>=g)return-1;for(i=0<=i?i:Math.max(g-Math.abs(i),0);i<g;i++)if(i in j&&j[i]===h)return i;return-1}},"dojox/lang/functional/object":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(h,j,g){var i={};j.mixin(g,{keys:function(f){var d=
[],b;for(b in f)b in i||d.push(b);return d},values:function(f){var d=[],b;for(b in f)b in i||d.push(f[b]);return d},filterIn:function(f,d,b){var b=b||h.global,d=g.lambda(d),e={},c,a;for(a in f)a in i||(c=f[a],d.call(b,c,a,f)&&(e[a]=c));return e},forIn:function(f,d,b){var b=b||h.global,d=g.lambda(d),e;for(e in f)e in i||d.call(b,f[e],e,f);return b},mapIn:function(f,d,b){var b=b||h.global,d=g.lambda(d),e={},c;for(c in f)c in i||(e[c]=d.call(b,f[c],c,f));return e}});return g})},"dojox/lang/functional/lambda":function(){define(["../..",
"dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(h,j,g,i){var f=g.getObject("lang.functional",!0,h),d={},b=1<"ab".split(/a*/).length?String.prototype.split:function(a){var b=this.split.call(this,a);(a=a.exec(this))&&0==a.index&&b.unshift("");return b},e=function(a){var c=[],e=b.call(a,/\s*->\s*/m);if(1<e.length)for(;e.length;)a=e.pop(),c=e.pop().split(/\s*,\s*|\s+/m),e.length&&e.push("(function("+c+"){return ("+a+")})");else if(a.match(/\b_\b/))c=["_"];else{var e=a.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),
d=a.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(e||d)e&&(c.push("$1"),a="$1"+a),d&&(c.push("$2"),a+="$2");else{var e=a.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],f={};i.forEach(e,
function(a){a in f||(c.push(a),f[a]=1)})}}return{args:c,body:a}},c=function(a){return a.length?function(){var b=a.length-1,c=f.lambda(a[b]).apply(this,arguments);for(--b;0<=b;--b)c=f.lambda(a[b]).call(this,c);return c}:function(a){return a}};g.mixin(f,{rawLambda:function(a){return e(a)},buildLambda:function(a){a=e(a);return"function("+a.args.join(",")+"){return ("+a.body+");}"},lambda:function(a){if("function"==typeof a)return a;if(a instanceof Array)return c(a);if(a in d)return d[a];a=e(a);return d[a]=
new Function(a.args,"return ("+a.body+");")},clearLambdaCache:function(){d={}}});return f})},"dojox/main":function(){define(["dojo/_base/kernel"],function(h){return h.dojox})},"dojox/lang/functional/fold":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(h,j,g,i){var f={};h.mixin(i,{foldl:function(d,b,e,c){"string"==typeof d&&(d=d.split(""));var c=c||g.global,b=i.lambda(b),a,k;if(h.isArray(d))for(a=0,k=d.length;a<k;e=b.call(c,e,d[a],a,d),++a);else if("function"==
typeof d.hasNext&&"function"==typeof d.next)for(a=0;d.hasNext();e=b.call(c,e,d.next(),a++,d));else for(a in d)a in f||(e=b.call(c,e,d[a],a,d));return e},foldl1:function(d,b,e){"string"==typeof d&&(d=d.split(""));var e=e||g.global,b=i.lambda(b),c,a,k;if(h.isArray(d)){c=d[0];for(a=1,k=d.length;a<k;c=b.call(e,c,d[a],a,d),++a);}else if("function"==typeof d.hasNext&&"function"==typeof d.next){if(d.hasNext()){c=d.next();for(a=1;d.hasNext();c=b.call(e,c,d.next(),a++,d));}}else for(a in k=!0,d)a in f||(k?
(c=d[a],k=!1):c=b.call(e,c,d[a],a,d));return c},foldr:function(d,b,e,c){"string"==typeof d&&(d=d.split(""));for(var c=c||g.global,b=i.lambda(b),a=d.length;0<a;--a,e=b.call(c,e,d[a],a,d));return e},foldr1:function(d,b,e){"string"==typeof d&&(d=d.split(""));for(var e=e||g.global,b=i.lambda(b),c=d.length,a=d[c-1],c=c-1;0<c;--c,a=b.call(e,a,d[c],c,d));return a},reduce:function(d,b,e){return 3>arguments.length?i.foldl1(d,b):i.foldl(d,b,e)},reduceRight:function(d,b,e){return 3>arguments.length?i.foldr1(d,
b):i.foldr(d,b,e)},unfold:function(d,b,e,c,a){for(var a=a||g.global,b=i.lambda(b),e=i.lambda(e),d=i.lambda(d),f=[];!d.call(a,c);f.push(b.call(a,c)),c=e.call(a,c));return f}})})},"JBrowse/Store/LazyTrie":function(){define(["dojo/_base/declare","JBrowse/Util"],function(h,j){return h("JBrowse.Store.LazyTrie",null,{constructor:function(g,i){this.rootURL=g;this.chunkTempl=i;var f=this;dojo.xhrGet({url:g,handleAs:"json",load:function(d){if(d)f.root=d,f.extra=d[0],f.deferred&&(f.deferred.callee.apply(f,
f.deferred),delete f.deferred)}})},chunkUrl:function(g){g=this.chunkTempl.replace("{Chunk}",g);return j.resolveUrl(this.rootURL,g)},pathToPrefix:function(g){var i=this.root,f="",d=0;a:for(;d<g.length;d++){switch(typeof i[g[d]][0]){case "string":f+=i[g[d]][0];break;case "number":f+=i[g[d]][1];break a}i=i[g[d]]}return f},valuesFromPrefix:function(g,i){var f=this;this.findNode(g,function(d,b){i(f.valuesFromNode(b))})},mappingsFromPrefix:function(g,i){var f=this;this.findNode(g,function(d,b){i(f.mappingsFromNode(d,
b))})},mappingsFromNode:function(g,i){var f=[];null!==i[1]&&f.push([g,i[1]]);for(var d=2;d<i.length;d++)"string"==typeof i[d][0]&&(f=f.concat(this.mappingsFromNode(g+i[d][0],i[d])));return f},valuesFromNode:function(g){var i=[];null!==g[1]&&i.push(g[1]);for(var f=2;f<g.length;f++)i=i.concat(this.valuesFromNode(g[f]));return i},exactMatch:function(g,i,f){this.findNode(g,function(d,b){d.toLowerCase()==g.toLowerCase()&&b[1]&&i(b[1])},f||function(){})},findNode:function(g,i,f){var d=this;this.findPath(g,
function(b){for(var e=d.root,c=0;c<b.length;c++)e=e[b[c]];b=d.pathToPrefix(b);i(b,e)},f||function(){})},findPath:function(g,i,f){f=f||function(){};if(this.root)for(var g=g.toLowerCase(),d=this.root,b=0,e,c=[];;){e=this.binarySearch(d,g.charAt(b));if(0>e){f();break}c.push(e);if("number"==typeof d[e][0]){var a=this;dojo.xhrGet({url:this.chunkUrl(this.pathToPrefix(c)),handleAs:"json",load:function(b){d[e]=b;a.findPath(g,i)}});break}d=d[e];if(g.substr(b,d[0].length)!=d[0].substr(0,Math.min(d[0].length,
g.length-b))){f();break}b+=d[0].length;if(b>=g.length){i(c);break}}else this.deferred=arguments},binarySearch:function(g,i){for(var f=2,d=g.length-1,b,e;f<=d;){b=f+d>>>1;switch(typeof g[b][0]){case "string":e=g[b][0].charAt(0);break;case "number":e=g[b][1].charAt(0)}if(e<i)f=b+1;else if(e>i)d=b-1;else return b}return-(f+1)}})})},"JBrowse/Store/Names/LazyTrieDojoData":function(){define(["dojo/_base/declare","dojo/_base/array","JBrowse/Util","JBrowse/Model/Location"],function(h,j,g,i){return h(null,
{constructor:function(f){if(!f.namesTrie)throw"must provide a namesTrie argument";this.namesTrie=f.namesTrie;this.resultLimit=f.resultLimit||15;this.tooManyMatchesMessage=f.tooManyMatchesMessage||"(too many matches to display)";var d=this.stopPrefixes={};f.stopPrefixes&&dojo.forEach("string"==typeof f.stopPrefixes?[f.stopPrefixes]:f.stopPrefixes,function(b){for(;b.length;)d[b]=!0,b=b.substr(0,b.length-1)});this.nodeText=function(b){this.nodeText="number"==typeof b[1][0][0]?function(b){return b[0]}:
function(b){return b[1][0][0]};return this.nodeText(b)}},getFeatures:function(){return{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0}},getIdentity:function(){},fetch:function(f){var d=Math.min(this.resultLimit,Math.max(0,f.count||Infinity)),b=f.scope||dojo.global,e=!1;f.abort=function(){var a=f.abort||function(){};return function(){e=!0;a.call(b,f)}}.call(this);if(!f.store)f.store=this;f.onBegin&&f.onBegin.call(b,0,f);var c=(f.query.name||"").toString().replace(/\*$/,"");this.stopPrefixes[c]?
f.onComplete&&f.onComplete.call(b,[],f):this.namesTrie.mappingsFromPrefix(c,dojo.hitch(this,function(a){var c=[];if(!e){var g=a[0]&&a[0][1]&&a[0][1][0]&&"string"==typeof a[0][1][0][0];dojo.some(a,function(a){if(d--){var b=this.nodeText(a);j.forEach(a[1],function(a){a=new i({ref:a[g?3:2],start:parseInt(a[g?4:3]),end:parseInt(a[g?5:4]),tracks:[this.namesTrie.extra[a[g?1:0]]],objectName:b});c.push({name:b,location:a})},this)}return 0>d},this);0>d&&c.push({name:this.tooManyMatchesMessage,hitLimit:!0});
f.sort&&c.sort(dojo.data.util.sorter.createSortFunction(f.sort,this));!e&&f.onItem&&dojo.forEach(c,function(a){e||f.onItem.call(b,a,f)});!e&&f.onComplete&&f.onComplete.call(b,c,f)}}));return f},getValue:function(f,d,b){f=f[d];return"undefined"==typeof f?b:f},getValues:function(f,d){var b=[f[d]];return"undefined"==typeof b[0]?[]:b},getAttributes:function(f){return g.dojof.keys(f)},hasAttribute:function(f,d){return f.hasOwnProperty(d)},containsValue:function(f,d,b){return f[d]==b},isItem:function(f){return"object"==
typeof f&&"string"==typeof f.label},isItemLoaded:function(){return!0},loadItem:function(){},close:function(){},getLabel:function(f){return this.getValue(f,"name",void 0)},getLabelAttributes:function(){return["name"]},getIdentity:function(f){return this.getLabel(f)}})})},"JBrowse/Model/Location":function(){define(["dojo/_base/array","JBrowse/Util"],function(h,j){return j.fastDeclare({constructor:function(g){if(g){"string"==typeof g&&(g=j.parseLocString(g));g.location&&this._populate(g.location);if(g.feature){var i=
g.feature;this._populate({start:i.get("start"),end:i.get("end"),ref:i.get("seq_id")||(g.tracks?g.tracks[0].browser.refSeq.name:void 0),strand:i.get("strand"),objectName:i.get("name")||i.get("id")})}this._populate(g)}},_populate:function(g){h.forEach("ref,start,end,strand,tracks,objectName".split(","),function(i){i in g&&(this[i]=g[i])},this)},toString:function(){var g=j.assembleLocString(this);return this.objectName?g+" ("+this.objectName+")":g},fromString:function(g){g=j.parseLocString(g);g.objectName=
g.extra;delete g.extra;this._populate(g)},localeCompare:function(g){return this.toString().localeCompare(g.toString())}})})},"dojo/store/DataStore":function(){define("../_base/lang,../_base/declare,../_base/Deferred,../_base/array,./util/QueryResults,./util/SimpleQueryEngine".split(","),function(h,j,g,i,f,d){return j("dojo.store.DataStore",null,{target:"",constructor:function(b){h.mixin(this,b);if(!1 in b){var e;try{e=this.store.getIdentityAttributes()}catch(c){}this.idProperty=!e||!idAttributes[0]||
this.idProperty}b=this.store.getFeatures();if(!b["dojo.data.api.Read"])this.get=null;if(!b["dojo.data.api.Identity"])this.getIdentity=null;if(!b["dojo.data.api.Write"])this.put=this.add=null},idProperty:"id",store:null,queryEngine:d,_objectConverter:function(b){function e(b){for(var d={},f=c.getAttributes(b),g=0;g<f.length;g++){var i=f[g],h=c.getValues(b,i);if(1<h.length){for(i=0;i<h.length;i++){var n=h[i];"object"==typeof n&&c.isItem(n)&&(h[i]=e(n))}n=h}else n=c.getValue(b,i),"object"==typeof n&&
c.isItem(n)&&(n=e(n));d[f[g]]=n}!(a in d)&&c.getIdentity&&(d[a]=c.getIdentity(b));return d}var c=this.store,a=this.idProperty;return function(a){return b(e(a))}},get:function(b){var e,c,a=new g;this.store.fetchItemByIdentity({identity:b,onItem:this._objectConverter(function(b){a.resolve(e=b)}),onError:function(b){a.reject(c=b)}});if(e)return e;if(c)throw c;return a.promise},put:function(b,e){var c=e&&"undefined"!=typeof e.id||this.getIdentity(b),a=this.store,d=this.idProperty;"undefined"==typeof c?
(a.newItem(b),a.save()):a.fetchItemByIdentity({identity:c,onItem:function(c){if(c)for(var e in b)e!=d&&a.getValue(c,e)!=b[e]&&a.setValue(c,e,b[e]);else a.newItem(b);a.save()}})},remove:function(b){var e=this.store;this.store.fetchItemByIdentity({identity:b,onItem:function(b){e.deleteItem(b);e.save()}})},query:function(b,e){var c,a=new g(function(){c.abort&&c.abort()});a.total=new g;var d=this._objectConverter(function(a){return a});c=this.store.fetch(h.mixin({query:b,onBegin:function(b){a.total.resolve(b)},
onComplete:function(b){a.resolve(i.map(b,d))},onError:function(b){a.reject(b)}},e));return f(a)},getIdentity:function(b){return b[this.idProperty]}})})},"JBrowse/Store/Names/Hash":function(){define("dojo/_base/declare,dojo/_base/array,dojo/store/util/QueryResults,JBrowse/Util,JBrowse/Store/Hash,JBrowse/Model/Location".split(","),function(h,j,g,i,f,d){return h(f,{constructor:function(b){this.tooManyMatchesMessage=b.tooManyMatchesMessage||"(too many matches to display)";var e=this.stopPrefixes={};b.stopPrefixes&&
dojo.forEach("string"==typeof b.stopPrefixes?[b.stopPrefixes]:b.stopPrefixes,function(b){for(;b.length;)e[b]=!0,b=b.substr(0,b.length-1)})},_nameRecordToItem:function(b){if(b.hitLimit)return{name:this.tooManyMatchesMessage,hitLimit:!0};var e={};if("object"==typeof b){e.name=b[0];var c=this._findTrackConfig(((this.meta||{}).track_names||{})[b[1]]);e.location=new d({ref:b[3],start:parseInt(b[4]),end:parseInt(b[5]),tracks:[c],objectName:b[0]})}else e.name=b;return e},_findTrackConfig:function(b){if(!b)return null;
var e=null;j.some(this.browser.config.tracks,function(c){return c.label==b?(e=c,!0):!1});return e},_makeResults:function(b){var b=j.map(b,dojo.hitch(this,"_nameRecordToItem")).sort(function(a,b){return a.name.localeCompare(b.name)||a.location.localeCompare(b.location)}),e,c,b=j.filter(b,function(a){if(a.hitLimit){c=a;if(!c.label)c.label=c.name||"too many matches";return!1}if(e&&e.name==a.name)return e.label=e.name+' <span class="multipleLocations">multiple locations</span>',e.multipleLocations?e.multipleLocations.push(a.location):
(e.multipleLocations=[e.location,a.location],delete e.location),!1;e=a;e.label=e.name+(e.location?' <span class="locString">'+e.location+"</span>":"");return!0});c&&b.push(c);return g(b)},query:function(b){var e=this,b=(b.name||"").toString();this.meta.lowercase_keys&&(b=b.toLowerCase());var c=/\*$/;return c.test(b)?(b=b.replace(c,""),this._getEntry(b).then(function(a){a=a||{};return e._makeResults((a.exact||[]).concat(a.prefix||[]))})):this._getEntry(b).then(function(a){return e._makeResults((a||
{}).exact||[])})},get:function(b){this.meta.lowercase_keys&&(b=b.toLowerCase());return this._getEntry(b).then(function(b){return(b=(b.exact||[])[0])?this._nameRecordToItem(b):null})},_getEntry:function(b){return this._getBucket(b).then(function(e){return e[b]})}})})},"JBrowse/Store/Hash":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/Deferred,dojo/store/JsonRest,dojo/store/util/QueryResults,JBrowse/Digest/Crc32".split(","),function(h,j,g,i,f,d){return h(null,{constructor:function(b){var e=
/\/$/.test(b.url)?b.url:b.url+"/";this.bucketStore=new i({target:e});this.meta={};this.browser=b.browser;this.ready=this._readMeta()},_readMeta:function(){var b=this;return this.bucketStore.get("meta.json").then(function(e){dojo.mixin(b.meta,e||{});b.meta.hash_hex_characters=Math.ceil(b.meta.hash_bits/4)})},query:function(b){return this.get((b.name||"").toString()).then(function(b){return f((b||{}).exact||[])})},get:function(b){return this._getBucket(b).then(function(e){return e[b]})},_getBucket:function(b){var e=
this,c=new g;this.ready.then(function(){var a=e._hash(b);e.bucketStore.get(e._hexToDirPath(a)).then(function(a){c.resolve(a)})});return c},_hexToDirPath:function(b){for(;8>b.length;)b="0"+b;for(var b=b.substr(8-this.meta.hash_hex_characters),e=[],c=0;c<b.length;c+=3)e.push(b.substring(c,c+3));return e.join("/")+".json"},_hash:function(b){return d.objectFingerprint(b).toString(16).toLowerCase().replace("-","n")},getIdentity:function(b){return b.id}})})},"dojo/store/JsonRest":function(){define(["../_base/xhr",
"../_base/lang","../json","../_base/declare","./util/QueryResults"],function(h,j,g,i,f){return i("dojo.store.JsonRest",null,{constructor:function(d){this.headers={};i.safeMixin(this,d)},headers:{},target:"",idProperty:"id",get:function(d,b){var b=b||{},e=j.mixin({Accept:this.accepts},this.headers,b.headers||b);return h("GET",{url:this.target+d,handleAs:"json",headers:e})},accepts:"application/javascript, application/json",getIdentity:function(d){return d[this.idProperty]},put:function(d,b){var b=
b||{},e="id"in b?b.id:this.getIdentity(d),c="undefined"!=typeof e;return h(c&&!b.incremental?"PUT":"POST",{url:c?this.target+e:this.target,postData:g.stringify(d),handleAs:"json",headers:j.mixin({"Content-Type":"application/json",Accept:this.accepts,"If-Match":!0===b.overwrite?"*":null,"If-None-Match":!1===b.overwrite?"*":null},this.headers,b.headers)})},add:function(d,b){b=b||{};b.overwrite=!1;return this.put(d,b)},remove:function(d,b){b=b||{};return h("DELETE",{url:this.target+d,headers:j.mixin({},
this.headers,b.headers)})},query:function(d,b){var b=b||{},e=j.mixin({Accept:this.accepts},this.headers,b.headers);if(0<=b.start||0<=b.count)e.Range=e["X-Range"]="items="+(b.start||"0")+"-"+("count"in b&&Infinity!=b.count?b.count+(b.start||0)-1:"");var c=-1<this.target.indexOf("?");d&&"object"==typeof d&&(d=(d=h.objectToQuery(d))?(c?"&":"?")+d:"");if(b&&b.sort){for(var a=this.sortParam,d=d+((d||c?"&":"?")+(a?a+"=":"sort(")),c=0;c<b.sort.length;c++)var g=b.sort[c],d=d+((0<c?",":"")+(g.descending?"-":
"+")+encodeURIComponent(g.attribute));a||(d+=")")}var i=h("GET",{url:this.target+(d||""),handleAs:"json",headers:e});i.total=i.then(function(){var a=i.ioArgs.xhr.getResponseHeader("Content-Range");return a&&(a=a.match(/\/(.*)/))&&+a[1]});return f(i)}})})},"JBrowse/Digest/Crc32":function(){define([],function(){var h={crc32Table:"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",
stringToBytes:function(h){for(var g,i,f=[],d=0;d<h.length;d++){g=h.charCodeAt(d);i=[];do i.push(g&255),g>>=8;while(g);f=f.concat(i.reverse())}return f},crc32:function(j,g){var i=h.stringToBytes(j);g==window.undefined&&(g=0);for(var f=0,f=0,d=h.crc32Table,g=g^-1,b=0,e=i.length;b<e;b++)f=(g^i[b])&255,f="0x"+d.substr(9*f,8),g=g>>>8^f;g^=-1;0>g&&(g+=4294967296);return g},objectFingerprint:function(j){var g=0;if("object"==typeof j)for(var i in j)g=h.crc32(""+h.objectFingerprint(i),g),g=h.crc32(""+h.objectFingerprint(j[i]),
g);else g=h.crc32(""+j,g);return g}};return h})},"JBrowse/GenomeView":function(){define("dojo/_base/declare,dojo/_base/array,JBrowse/Util,JBrowse/has,dojo/dnd/move,dojo/dnd/Source,dijit/focus,JBrowse/View/Track/LocationScale,JBrowse/View/Track/GridLines,JBrowse/BehaviorManager,JBrowse/View/Animation/Zoomer,JBrowse/View/Animation/Slider,JBrowse/View/InfoDialog".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p,q){var m=g.dojof,o=h(f.constrainedMoveable,{constructor:function(){this.constraints=function(){var a=
dojo.marginBox(this.node.parentNode);a.t=0;return a}}}),h=function(b,f,g,i,h){this.browser=b;this.elem=f;this.posHeight=this.calculatePositionLabelHeight(f);this.topSpace=1.5*this.posHeight;this.maxPxPerBp=20;this.ref=i;this.pxPerBp=h;this.stripeWidth=g;this.scrollContainer=dojo.create("div",{id:"container",style:{position:"absolute",left:"0px",top:"0px"}},f);this._renderVerticalScrollBar();this.zoomContainer=document.createElement("div");this.zoomContainer.id="zoomContainer";this.zoomContainer.style.cssText=
"position: absolute; left: 0px; top: 0px; height: 100%;";this.scrollContainer.appendChild(this.zoomContainer);this.outerTrackContainer=document.createElement("div");this.outerTrackContainer.className="trackContainer outerTrackContainer";this.outerTrackContainer.style.cssText="height: 100%;";this.zoomContainer.appendChild(this.outerTrackContainer);this.trackContainer=document.createElement("div");this.trackContainer.className="trackContainer innerTrackContainer draggable";this.trackContainer.style.cssText=
"height: 100%;";this.outerTrackContainer.appendChild(this.trackContainer);this.regularStripe=g;this.fullZoomStripe=g/10*this.maxPxPerBp;this.overview=this.browser.overviewDiv;this.overviewBox=dojo.marginBox(this.overview);this.tracks=[];this.uiTracks=[];this.trackIndices={};this.sizeInit();this.offset=0;this.maxLeft=this.bpToPx(this.ref.end+1)-this.getWidth();this.minLeft=this.bpToPx(this.ref.start);this.trackPadding=20;this.drawMargin=0.2;this.slideTimeMultiple=0.8;this.trackHeights=[];this.trackTops=
[];this.waitElems=dojo.filter([dojo.byId("moveLeft"),dojo.byId("moveRight"),dojo.byId("zoomIn"),dojo.byId("zoomOut"),dojo.byId("bigZoomIn"),dojo.byId("bigZoomOut"),document.body,f],function(a){return a});this.prevCursors=[];this.locationThumb=document.createElement("div");this.locationThumb.className="locationThumb";this.overview.appendChild(this.locationThumb);this.locationThumbMover=new o(this.locationThumb,{area:"content",within:!0});dojo.isIE?(this.x=-parseInt(this.scrollContainer.style.left),
this.y=-parseInt(this.scrollContainer.style.top),this.rawSetX=function(a){this.scrollContainer.style.left=-a+"px";this.x=a},this.rawSetY=function(a){this.scrollContainer.style.top=-a+"px";this.y=a}):(this.x=this.elem.scrollLeft,this.y=this.elem.scrollTop,this.rawSetX=function(a){this.x=this.elem.scrollLeft=a},this.rawSetY=function(a){this.y=this.elem.scrollTop=a});b=document.createElement("div");b.className="track static_track rubberBandAvailable";b.style.height=this.posHeight+"px";b.id="static_track";
this.scaleTrackDiv=b;this.staticTrack=new e({label:"static_track",labelClass:"pos-label",posHeight:this.posHeight,browser:this.browser,refSeq:this.ref});this.staticTrack.setViewInfo(this,function(){},this.stripeCount,this.scaleTrackDiv,this.stripePercent,this.stripeWidth,this.pxPerBp,this.trackPadding);this.zoomContainer.appendChild(this.scaleTrackDiv);this.waitElems.push(this.scaleTrackDiv);b=document.createElement("div");b.className="track";b.style.cssText="top: 0px; height: 100%;";b.id="gridtrack";
f=new c({browser:this.browser,refSeq:this.ref});f.setViewInfo(this,function(){},this.stripeCount,b,this.stripePercent,this.stripeWidth,this.pxPerBp,this.trackPadding);this.trackContainer.appendChild(b);this.uiTracks=[this.staticTrack,f];this.trackDndWidget=new d(this.trackContainer,{accept:["track"],withHandles:!0,creator:dojo.hitch(this,function(a,b){return{data:a,type:["track"],node:"avatar"==b?dojo.create("div",{innerHTML:a.key||a.label,className:"track-label dragging"}):this.renderTrack(a)}})});
this.browser.subscribe("/dnd/drop",dojo.hitch(this,function(a,b,c,e){this.updateTrackList();e.node===this.trackContainer&&this.browser.publish("/jbrowse/v1/v/tracks/show",dojo.filter(dojo.map(b,function(a){return a.track&&a.track.config}),function(a){return a}))}));this.browser.subscribe("/jbrowse/v1/c/tracks/show",dojo.hitch(this,"showTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/hide",dojo.hitch(this,"hideTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/replace",dojo.hitch(this,"replaceTracks"));
this.browser.subscribe("/jbrowse/v1/c/tracks/delete",dojo.hitch(this,"hideTracks"));dojo.forEach(this.uiTracks,function(a){a.showRange(0,this.stripeCount-1,Math.round(this.pxToBp(this.offset)),Math.round(this.stripeWidth/this.pxPerBp),this.pxPerBp)},this);this.zoomContainer.style.paddingTop=this.topSpace+"px";this.addOverviewTrack(new e({label:"overview_loc_track",labelClass:"overview-pos",posHeight:this.overviewPosHeight,browser:this.browser,refSeq:this.ref}));this.showFine();this.showCoarse();this.behaviorManager=
new a({context:this,behaviors:this._behaviors()});this.behaviorManager.initialize()};h.prototype.visibleRegion=function(){return{ref:this.ref.name,start:this.minVisible(),end:this.maxVisible()}};h.prototype.visibleRegionLocString=function(){return g.assembleLocString(this.visibleRegion())};h.prototype._renderVerticalScrollBar=function(){var a=dojo.create("div",{className:"vertical_scrollbar",style:{position:"fixed",right:"0px",bottom:"0px",height:"100%",width:"10px",zIndex:1E3}},this.elem),b=dojo.create("div",
{className:"vertical_position_marker",style:{position:"absolute",height:"100%"}},a);this.verticalScrollBar={container:a,positionMarker:b}};h.prototype._updateVerticalScrollBar=function(a){if("number"==typeof a.height){this.verticalScrollBar.container.style.height=a.height+(this.staticTrack?-this.staticTrack.div.offsetHeight:0)+"px";var b=100*(a.height/(this.containerHeight||1));this.verticalScrollBar.positionMarker.style.height=0.5<b?b+"%":"1px";this.verticalScrollBar.container.style.display=0.98<
a.height/(this.containerHeight||1)?"none":"block"}if("number"==typeof a.y||"number"==typeof a.height)this.verticalScrollBar.positionMarker.style.top=(100*((a.y||this.getY()||0)/(this.containerHeight||1))||0)+"%"};h.prototype.visibleTracks=function(){return this.tracks};h.prototype.visibleTrackNames=function(){return dojo.map(this.visibleTracks(),function(a){return a.name})};h.prototype._behaviors=function(){return{always:{apply_on_init:!0,apply:function(){var a=[];a.push(dojo.connect(this.overview,
"mousedown",dojo.hitch(this,"startRubberZoom",dojo.hitch(this,"overview_absXtoBp"),this.overview,this.overview)));a.push(dojo.connect(this.scrollContainer,"mousewheel",this,"wheelScroll",!1),dojo.connect(this.scrollContainer,"DOMMouseScroll",this,"wheelScroll",!1),dojo.connect(this.scaleTrackDiv,"mousedown",dojo.hitch(this,"startRubberZoom",dojo.hitch(this,"absXtoBp"),this.scrollContainer,this.scaleTrackDiv)),dojo.connect(this.outerTrackContainer,"dblclick",this,"doubleClickZoom"),dojo.connect(this.locationThumbMover,
"onMoveStop",this,"thumbMoved"),dojo.connect(this.overview,"onclick",this,"overviewClicked"),dojo.connect(this.scaleTrackDiv,"onclick",this,"scaleClicked"),dojo.connect(this.scaleTrackDiv,"mouseover",this,"scaleMouseOver"),dojo.connect(this.scaleTrackDiv,"mouseout",this,"scaleMouseOut"),dojo.connect(this.scaleTrackDiv,"mousemove",this,"scaleMouseMove"),dojo.connect(document.body,"onmouseleave",this,function(){this.behaviorManager.swapBehaviors("shiftMouse","normalMouse")}),dojo.connect(document.body,
"onmouseenter",this,function(a){a.shiftKey&&this.behaviorManager.swapBehaviors("normalMouse","shiftMouse")}),dojo.connect(document.body,"onkeyup",this,function(a){a.keyCode==dojo.keys.SHIFT&&this.behaviorManager.swapBehaviors("shiftMouse","normalMouse")}),dojo.connect(document.body,"onkeydown",this,function(a){a.keyCode==dojo.keys.SHIFT&&this.behaviorManager.swapBehaviors("normalMouse","shiftMouse")}),dojo.connect(document.body,"onkeypress",this,function(a){if(!b.curNode){var c=this;if(a.keyCode==
dojo.keys.LEFT_ARROW||a.keyCode==dojo.keys.RIGHT_ARROW){var e=a.keyCode==dojo.keys.LEFT_ARROW?-40:40;a.shiftKey&&(e*=5);this.setX(this.getX()+e);if(!this._keySlideTimeout)this._keySlideTimeout=window.setTimeout(function(){c.afterSlide();delete c._keySlideTimeout},300)}else if(a.keyCode==dojo.keys.DOWN_ARROW||a.keyCode==dojo.keys.UP_ARROW)if(a.shiftKey)this[a.keyCode==dojo.keys.UP_ARROW?"zoomIn":"zoomOut"](a,0.5,a.altKey?2:1);else e=a.keyCode==dojo.keys.UP_ARROW?-40:40,this.setY(this.getY()+e)}}),
dojo.connect(this.scrollContainer,"onclick",this,function(){b.curNode&&b.curNode.blur()}));return a}},normalMouse:{apply_on_init:!0,apply:function(){return[dojo.connect(this.outerTrackContainer,"mousedown",this,"startMouseDragScroll"),dojo.connect(this.verticalScrollBar.container,"mousedown",this,"startVerticalMouseDragScroll")]}},shiftMouse:{apply:function(){var a=dojo.hitch(this,function(a){this.rubberbanding||this.drawVerticalPositionLine(this.outerTrackContainer,a)});dojo.removeClass(this.trackContainer,
"draggable");dojo.addClass(this.trackContainer,"rubberBandAvailable");return[dojo.connect(this.outerTrackContainer,"mousedown",dojo.hitch(this,"startRubberZoom",dojo.hitch(this,"absXtoBp"),this.scrollContainer,this.scaleTrackDiv)),dojo.connect(this.outerTrackContainer,"onclick",this,"scaleClicked"),dojo.connect(this.outerTrackContainer,"mouseover",a),dojo.connect(this.outerTrackContainer,"mousemove",a)]},remove:function(a,b){this.clearBasePairLabels();this.clearVerticalPositionLine();dojo.forEach(b,
dojo.disconnect,dojo);dojo.removeClass(this.trackContainer,"rubberBandAvailable");dojo.addClass(this.trackContainer,"draggable")}},mouseDragScrolling:{apply:function(){return[dojo.connect(document.body,"mouseup",this,"dragEnd"),dojo.connect(document.body,"mousemove",this,"dragMove"),dojo.connect(document.body,"mouseout",this,"checkDragOut")]}},verticalMouseDragScrolling:{apply:function(){return[dojo.connect(document.body,"mouseup",this,"dragEnd"),dojo.connect(document.body,"mousemove",this,"verticalDragMove"),
dojo.connect(document.body,"mouseout",this,"checkDragOut")]}},mouseRubberBandZooming:{apply:function(){return[dojo.connect(document.body,"mouseup",this,"rubberExecute"),dojo.connect(document.body,"mousemove",this,"rubberMove"),dojo.connect(document.body,"mouseout",this,"rubberCancel"),dojo.connect(window,"onkeydown",this,function(a){a.keyCode!==dojo.keys.SHIFT&&this.rubberCancel(a)})]}}}};h.prototype.calculatePositionLabelHeight=function(a){var b=document.createElement("div");b.className="pos-label";
b.style.visibility="hidden";b.appendChild(document.createTextNode("42"));a.appendChild(b);var c=b.clientHeight;a.removeChild(b);return c};h.prototype.wheelScroll=function(a){this.setY(this.getY()-60*g.wheel(a));this.wheelScrollTimeout&&window.clearTimeout(this.wheelScrollTimeout);this.wheelScrollTimeout=window.setTimeout(dojo.hitch(this,function(){this.showVisibleBlocks(!0);this.wheelScrollTimeout=null},100));dojo.stopEvent(a)};h.prototype.getX=function(){return this.x||0};h.prototype.getY=function(){return this.y||
0};h.prototype.getHeight=function(){return this.elem.offsetHeight};h.prototype.getWidth=function(){return this.elem.offsetWidth};h.prototype.clampX=function(a){return Math.round(Math.max(Math.min(this.maxLeft-this.offset,a||0),this.minLeft-this.offset))};h.prototype.clampY=function(a){return Math.round(Math.min(Math.max(0,a||0),this.containerHeight-this.getHeight()))};h.prototype.setX=function(a){a=this.clampX(a);this.rawSetX(a);this.updateStaticElements({x:a});this.showFine();return a};h.prototype.setY=
function(a){a=this.clampY(a);this.rawSetY(a);this.updateStaticElements({y:a});return a};h.prototype.rawSetPosition=function(a){this.rawSetX(a.x);this.rawSetY(a.y);return a};h.prototype.setPosition=function(a){var b=this.clampX(a.x),a=this.clampY(a.y);this.updateStaticElements({x:b,y:a});this.rawSetX(b);this.rawSetY(a);this.showFine()};h.prototype.getPosition=function(){return{x:this.x,y:this.y}};h.prototype.zoomCallback=function(){this.zoomUpdate()};h.prototype.afterSlide=function(){this.showCoarse();
this.scrollUpdate();this.showVisibleBlocks(!0)};h.prototype.suppressDoubleClick=function(a){this._noDoubleClick&&window.clearTimeout(this._noDoubleClick);var b=this;this._noDoubleClick=window.setTimeout(function(){delete b._noDoubleClick},a||100)};h.prototype.doubleClickZoom=function(a){if(!this._noDoubleClick&&!this.dragging&&!("animation"in this)){this.scaleClickedTimeout&&window.clearTimeout(this.scaleClickedTimeout);var b=(a.pageX-dojo.position(this.elem,!0).x)/this.getWidth();a.shiftKey?this.zoomOut(a,
b,2):this.zoomIn(a,b,2);dojo.stopEvent(a)}};h.prototype._beforeMouseDrag=function(a){if(this.animation){if(this.animation instanceof k)return dojo.stopEvent(a),0;this.animation.stop()}if(g.isRightButton(a))return 0;dojo.stopEvent(a);return 1};h.prototype.startMouseDragScroll=function(a){if(this._beforeMouseDrag(a))this.behaviorManager.applyBehaviors("mouseDragScrolling"),this.dragStartPos={x:a.clientX,y:a.clientY},this.winStartPos=this.getPosition()};h.prototype.startVerticalMouseDragScroll=function(a){if(this._beforeMouseDrag(a))this.behaviorManager.applyBehaviors("verticalMouseDragScrolling"),
this.dragStartPos={x:a.clientX,y:a.clientY},this.winStartPos=this.getPosition()};h.prototype.startRubberZoom=function(a,b,c,e){if(this._beforeMouseDrag(e))this.behaviorManager.applyBehaviors("mouseRubberBandZooming"),this.rubberbanding={absFunc:a,container:b,scaleDiv:c},this.rubberbandStartPos={x:e.clientX,y:e.clientY},this.winStartPos=this.getPosition(),this.clearVerticalPositionLine(),this.clearBasePairLabels()};h.prototype._rubberStop=function(a){this.behaviorManager.removeBehaviors("mouseRubberBandZooming");
this.hideRubberHighlight();this.clearBasePairLabels();dojo.stopEvent(a);delete this.rubberbanding};h.prototype.rubberCancel=function(a){var b=document.body.parentNode,c=document.body;(!a||!a.relatedTarget&&!a.toElement||b===(a.relatedTarget||a.toElement)||c===(a.relatedTarget||a.toElement))&&this._rubberStop(a)};h.prototype.rubberMove=function(a){this.setRubberHighlight(this.rubberbandStartPos,{x:a.clientX,y:a.clientY})};h.prototype.rubberExecute=function(a){var b=this.rubberbandStartPos,c=a.clientX,
e=this.rubberbanding.absFunc(Math.min(b.x,c)),d=this.rubberbanding.absFunc(Math.max(b.x,c));this._rubberStop(a);if(3>Math.abs(b.x-c))return this._rubberStop(a);this.setLocation(this.ref,e,d)};h.prototype.setRubberHighlight=function(a,b){var c=this.rubberbanding.container,e=dojo.position(c,!0),d;if(!(d=this.rubberHighlight)){d=this.rubberHighlight=document.createElement("div");d.className="rubber-highlight";d.style.position="absolute";d.style.zIndex=20;var f=document.createElement("div");f.appendChild(document.createTextNode("Zoom to region"));
d.appendChild(f);f.style.position="relative";f.style.top=50-e.y+"px";c.appendChild(d)}d.style.visibility="visible";d.style.left=Math.min(a.x,b.x)-e.x+"px";d.style.width=Math.abs(b.x-a.x)+"px";this.drawBasePairLabel({name:"rubberLeft",xToBp:this.rubberbanding.absFunc,scaleDiv:this.rubberbanding.scaleDiv,offset:0,x:Math.min(a.x,b.x),parent:c,className:"rubber"});this.drawBasePairLabel({name:"rubberRight",xToBp:this.rubberbanding.absFunc,scaleDiv:this.rubberbanding.scaleDiv,offset:0,x:Math.max(a.x,b.x)+
1,parent:c,className:"rubber"});this.clearVerticalPositionLine()};h.prototype.dragEnd=function(a){this.behaviorManager.removeBehaviors("mouseDragScrolling","verticalMouseDragScrolling");dojo.stopEvent(a);this.showCoarse();this.scrollUpdate();this.showVisibleBlocks(!0);window.setTimeout(dojo.hitch(this,function(){this.dragging=!1}),100)};h.prototype.checkDragOut=function(a){var b=document.body.parentNode,c=document.body;(!a.relatedTarget&&!a.toElement||b===(a.relatedTarget||a.toElement)||c===(a.relatedTarget||
a.toElement))&&this.dragEnd(a)};h.prototype.dragMove=function(a){this.dragging=!0;this.setPosition({x:this.winStartPos.x-(a.clientX-this.dragStartPos.x),y:this.winStartPos.y-(a.clientY-this.dragStartPos.y)});dojo.stopEvent(a)};h.prototype.verticalDragMove=function(a){this.dragging=!0;var b=parseInt(this.verticalScrollBar.container.style.height,10);this.setPosition({x:this.winStartPos.x,y:this.winStartPos.y+(a.clientY-this.dragStartPos.y)*(this.trackContainer.clientHeight/b)});dojo.stopEvent(a)};h.prototype.hideRubberHighlight=
function(){this.rubberHighlight&&(this.rubberHighlight.parentNode.removeChild(this.rubberHighlight),delete this.rubberHighlight)};h.prototype.slide=function(a){this.animation&&this.animation.stop();this.trimVertical();new p(this,this.afterSlide,Math.abs(a)*this.getWidth()*this.slideTimeMultiple+200,a*this.getWidth())};h.prototype.setLocation=function(a,b,c){void 0===b&&(b=this.minVisible());void 0===c&&(c=this.maxVisible());if(b<a.start||b>a.end)b=a.start;if(c<a.start||c>a.end)c=a.end;if(this.ref!=
a)this.ref=a,a=function(a){a.div&&a.div.parentNode&&a.div.parentNode.removeChild(a.div)},dojo.forEach(this.tracks,a),this.tracks=[],this.trackIndices={},this.trackHeights=[],this.trackTops=[],dojo.forEach(this.uiTracks,function(a){a.clear()}),this.overviewTrackIterate(a),this.addOverviewTrack(new e({label:"overview_loc_track",labelClass:"overview-pos",posHeight:this.overviewPosHeight,browser:this.browser,refSeq:this.ref})),this.sizeInit(),this.setY(0),this.behaviorManager.initialize();this.pxPerBp=
Math.min(this.getWidth()/(c-b),this.maxPxPerBp);this.curZoom=g.findNearest(this.zoomLevels,this.pxPerBp);if(i("inaccurate-html-layout"))this.pxPerBp=this.zoomLevels[this.curZoom];if(0.2>Math.abs(this.pxPerBp-this.zoomLevels[this.zoomLevels.length-1]))this.pxPerBp=this.zoomLevels[this.zoomLevels.length-1];this.stripeWidth=this.stripeWidthForZoom(this.curZoom)/this.zoomLevels[this.curZoom]*this.pxPerBp;this.instantZoomUpdate();this.centerAtBase((b+c)/2,!0)};h.prototype.stripeWidthForZoom=function(a){return this.zoomLevels.length-
1==a?this.fullZoomStripe:0==a?this.minZoomStripe:this.regularStripe};h.prototype.instantZoomUpdate=function(){this.scrollContainer.style.width=this.stripeCount*this.stripeWidth+"px";this.zoomContainer.style.width=this.stripeCount*this.stripeWidth+"px";this.maxOffset=this.bpToPx(this.ref.end)-this.stripeCount*this.stripeWidth;this.maxLeft=this.bpToPx(this.ref.end+1)-this.getWidth();this.minLeft=this.bpToPx(this.ref.start)};h.prototype.centerAtBase=function(a,b){a=Math.min(Math.max(a,this.ref.start),
this.ref.end);if(b){var c=this.bpToPx(a);this.offset=Math.floor((c-this.stripeCount*this.stripeWidth/2)/this.stripeWidth)*this.stripeWidth;this.setX(c-this.offset-this.getWidth()/2);this.trackIterate(function(a){a.clear()});this.showVisibleBlocks(!0);this.showCoarse()}else{var c=this.pxToBp(this.x+this.offset),e=this.getWidth()/this.pxPerBp/2,d=c+e;a>=c-e&&a<=c+e+e+e?(this.animation&&this.animation.stop(),c=(d-a)*this.pxPerBp,this.trimVertical(),new p(this,this.afterSlide,Math.abs(c)*this.slideTimeMultiple+
200,c)):this.centerAtBase(a,!0)}};h.prototype.minVisible=function(){var a=this.pxToBp(this.x+this.offset);return a<this.pxToBp(1)?0:Math.round(a)};h.prototype.maxVisible=function(){var a=this.pxToBp(this.x+this.offset+this.getWidth());return a>this.ref.end-this.pxToBp(1)?this.ref.end:Math.round(a)};h.prototype.showFine=function(){this.onFineMove(this.minVisible(),this.maxVisible())};h.prototype.showCoarse=function(){this.onCoarseMove(this.minVisible(),this.maxVisible())};h.prototype.onFineMove=function(){this.updateLocationThumb()};
h.prototype.onCoarseMove=function(){this.updateLocationThumb()};h.prototype.onResize=function(){this.sizeInit();this.showVisibleBlocks();this.showFine();this.showCoarse()};h.prototype.overviewClicked=function(a){this.centerAtBase(this.overview_absXtoBp(a.clientX))};h.prototype.scaleMouseOver=function(a){this.rubberbanding||this.drawVerticalPositionLine(this.scaleTrackDiv,a)};h.prototype.scaleMouseMove=function(a){this.rubberbanding||this.drawVerticalPositionLine(this.scaleTrackDiv,a)};h.prototype.scaleMouseOut=
function(){this.clearVerticalPositionLine();this.clearBasePairLabels()};h.prototype.drawVerticalPositionLine=function(a,b){var c=b.pageX+2;if(!this.verticalPositionLine)this.verticalPositionLine=dojo.create("div",{className:"trackVerticalPositionIndicatorMain"},this.staticTrack.div);var e=this.verticalPositionLine;e.style.display="block";e.style.left=c+"px";var d=dojo.position(this.scaleTrackDiv);e.style.top=d.y+"px";this.drawBasePairLabel({name:"single",offset:0,x:c,parent:a})};h.prototype.drawBasePairLabel=
function(a){var b=a.name||0,c=a.offset||0,e=a.x;this.basePairLabels=this.basePairLabels||{};if(!this.basePairLabels[b]){var d=dojo.position(a.scaleDiv||this.scaleTrackDiv);this.basePairLabels[b]=dojo.create("div",{className:"basePairLabel"+(a.className?" "+a.className:""),style:{top:d.y+d.h-3+"px"}},document.body)}b=this.basePairLabels[b];if("object"==typeof e)e=e.clientX;b.style.display="block";a=a.xToBp||dojo.hitch(this,"absXtoBp");b.innerHTML=g.addCommas(Math.floor(a(e)));b.style.left=window.innerWidth-
e>8+b.offsetWidth?e+c+"px":e+1-c-b.offsetWidth+"px"};h.prototype.clearVerticalPositionLine=function(){if(this.verticalPositionLine)this.verticalPositionLine.style.display="none"};h.prototype.clearBasePairLabels=function(){for(var a in this.basePairLabels){var b=this.basePairLabels[a];b.parentNode&&b.parentNode.removeChild(b)}this.basePairLabels={}};h.prototype.overview_absXtoBp=function(a){var b=dojo.position(this.overview);return(a-b.x)/b.w*(this.ref.end-this.ref.start)+this.ref.start};h.prototype.scaleClicked=
function(a){var b=this.absXtoBp(a.clientX);this.scaleClickedTimeout=window.setTimeout(dojo.hitch(this,function(){this.centerAtBase(b)},100))};h.prototype.thumbMoved=function(){var a=parseInt(this.locationThumb.style.left),b=parseInt(this.locationThumb.style.width);this.centerAtBase((a+b/2)/this.overviewBox.w*(this.ref.end-this.ref.start)+this.ref.start)};h.prototype.updateLocationThumb=function(){var a=this.minVisible(),b=this.maxVisible(),c=this.ref.end-this.ref.start,a=Math.round((a-this.ref.start)/
c*this.overviewBox.w+this.overviewBox.l),b=Math.round((b-this.ref.start)/c*this.overviewBox.w+this.overviewBox.l);this.locationThumb.style.cssText="height: "+(this.overviewBox.h-4)+"px; left: "+a+"px; width: "+(b-a)+"px;z-index: 20"};h.prototype.checkY=function(a){return Math.min(0>a?0:a,this.containerHeight-this.getHeight())};h.prototype.updateStaticElements=function(a){this.trackIterate(function(b){b.updateStaticElements(a)},this);this._updateVerticalScrollBar(a);if("number"==typeof a.y)this.staticTrack.div.style.top=
a.y+"px"};h.prototype.showWait=function(){for(var a=[],b=0;b<this.waitElems.length;b++)a[b]=this.waitElems[b].style.cursor,this.waitElems[b].style.cursor="wait";this.prevCursors.push(a)};h.prototype.showDone=function(){for(var a=this.prevCursors.pop(),b=0;b<this.waitElems.length;b++)this.waitElems[b].style.cursor=a[b]};h.prototype.pxToBp=function(a){return a/this.pxPerBp};h.prototype.absXtoBp=function(a){return this.pxToBp(this.getPosition().x+this.offset-dojo.position(this.elem,!0).x+a)};h.prototype.bpToPx=
function(a){return a*this.pxPerBp};h.prototype.sizeInit=function(){this.overviewBox=dojo.marginBox(this.overview);var a=[2.0E-6,5.0E-6,1.0E-5,2.0E-5,5.0E-5,1.0E-4,2.0E-4,5.0E-4,0.001,0.002,0.005,0.01,0.02,0.05,0.1,0.2,0.5,1,2,5,10,20];this.zoomLevels=[];for(var b=0;b<a.length;b++){var c=a[b];if(c<this.maxPxPerBp)this.zoomLevels.push(c);else break}for(this.zoomLevels.push(this.maxPxPerBp);(this.ref.end-this.ref.start)*this.zoomLevels[0]<this.getWidth();)this.zoomLevels.shift();this.zoomLevels.unshift(this.getWidth()/
(this.ref.end-this.ref.start));this.minZoomStripe=this.regularStripe*(this.zoomLevels[0]/this.zoomLevels[1]);for(this.curZoom=0;this.pxPerBp>this.zoomLevels[this.curZoom];)this.curZoom++;this.maxLeft=this.bpToPx(this.ref.end+1)-this.getWidth();delete this.stripePercent;a=[20,10,5,4,2,1];for(b=0;b<a.length;b++)if(100/a[b]*0.7*this.regularStripe>3*this.getWidth()+this.regularStripe){this.stripePercent=a[b];break}if(!this.stripePercent)console.warn("stripeWidth too small: "+this.stripeWidth+", "+this.getWidth()),
this.stripePercent=1;(b=this.stripeCount)&&this.getX();this.stripeCount=Math.round(100/this.stripePercent);this.scrollContainer.style.width=this.stripeCount*this.stripeWidth+"px";this.zoomContainer.style.width=this.stripeCount*this.stripeWidth+"px";var e=void 0;b&&b!=this.stripeCount&&(e=Math.floor((b-this.stripeCount)/2),b=e*this.stripeWidth,a=this.getX()-b,this.offset+=b,this.updateStaticElements({x:a}),this.rawSetX(a));this.trackIterate(function(a,b){a.sizeInit(b.stripeCount,b.stripePercent,e)});
b=this.trackHeights&&this.trackHeights.length?Math.max(m.reduce(this.trackHeights,"+")+this.trackPadding*this.trackHeights.length,this.getHeight()):this.getHeight();this.scrollContainer.style.height=b+"px";this.containerHeight=b;b=this.ref.end-this.ref.start;c=document.createElement("div");c.className="overview-pos";c.appendChild(document.createTextNode(g.addCommas(this.ref.end)));c.style.visibility="hidden";this.overview.appendChild(c);a=1.2*c.clientWidth;this.overviewPosHeight=1.2*c.clientHeight;
this.overview.removeChild(c);for(c=1;30>c;c++){this.overviewStripeBases=(Math.pow(c%3,2)+1)*Math.pow(10,Math.floor(c/3));this.overviewStripes=Math.ceil(b/this.overviewStripeBases);if(this.overviewBox.w/this.overviewStripes>a)break;if(2>this.overviewStripes)break}var d=100/(b/this.overviewStripeBases);this.overviewTrackIterate(function(a,b){a.clear();a.sizeInit(b.overviewStripes,d);a.showRange(0,b.overviewStripes-1,-1,b.overviewStripeBases,b.overviewBox.w/(b.ref.end-b.ref.start))});this.updateOverviewHeight();
this.updateScroll()};h.prototype.updateScroll=function(){var a={height:this.getHeight()};if(0<this.getY()&&this.containerHeight-this.getY()<a.height)a.y=this.setY(Math.max(0,this.containerHeight-a.height));this.updateStaticElements(a)};h.prototype.overviewTrackIterate=function(a){var b=this.overview.firstChild;do b&&b.track&&a.call(this,b.track,this);while(b&&(b=b.nextSibling))};h.prototype.updateOverviewHeight=function(){var a=0;this.overviewTrackIterate(function(b){a+=b.height;b.div.style.height=
b.height+"px"});this.overview.style.height=a+"px";this.overviewBox=dojo.marginBox(this.overview)};h.prototype.addOverviewTrack=function(a){var b=this.ref.end-this.ref.start,c=100/(b/this.overviewStripeBases),e=document.createElement("div");e.className="track";e.style.height=this.overviewBox.h+"px";e.style.left=-this.ref.start/b*this.overviewBox.w+"px";e.id="overviewtrack_"+a.name;e.track=a;var d=this;a.setViewInfo(this,function(){d.updateOverviewHeight()},this.overviewStripes,e,c,this.overviewStripeBases,
this.pxPerBp,this.trackPadding);this.overview.appendChild(e);this.updateOverviewHeight();return e};h.prototype.trimVertical=function(a){void 0===a&&(a=this.getY());for(var b,c=this.topSpace,e=a+this.getHeight(),d=0;d<this.tracks.length;d++)this.tracks[d].shown&&(b=c+this.trackHeights[d],b>a&&c<e||this.tracks[d].hideAll(),c=b+this.trackPadding)};h.prototype.redrawTracks=function(){this.trackIterate(function(a){a.hideAll()});this.showVisibleBlocks(!1)};h.prototype.hideRegion=function(a){this.overviewTrackIterate(function(b){b.hideRegion(a)});
this.trackIterate(function(b){b.hideRegion(a)})};h.prototype.redrawRegion=function(a){this.hideRegion(a);this.showVisibleBlocks(!1)};h.prototype.zoomIn=function(a,b,c){if(!this.animation&&(this._unsetPosBeforeZoom(),void 0===b&&(b=0.5),void 0===c&&(c=1),c=Math.min(c,this.zoomLevels.length-1-this.curZoom),!(0==c&&this.pxPerBp==this.zoomLevels[this.curZoom]))){this.showWait();var e=this.getPosition();this.trimVertical(e.y);var a=this.zoomLevels[this.curZoom+c]/this.pxPerBp,d=this.pxToBp(e.x+this.offset+
b*this.getWidth());this.curZoom+=c;this.pxPerBp=this.zoomLevels[this.curZoom];this.maxLeft=this.bpToPx(this.ref.end+1)-this.getWidth();for(c=0;c<this.tracks.length;c++)this.tracks[c].startZoom(this.pxPerBp,d-b*this.getWidth()/this.pxPerBp,d+(1-b)*this.getWidth()/this.pxPerBp);new k(a,this,function(){this.zoomUpdate(b,d)},700,b)}};h.prototype.zoomToBaseLevel=function(a,b){if(!this.animation){var c=this.zoomLevels.length-1;if(this.curZoom!==c){this._setPosBeforeZoom(this.minVisible(),this.maxVisible(),
this.curZoom);this.showWait();this.trimVertical();var e=this.zoomLevels[c]/this.pxPerBp;this.curZoom=c;this.pxPerBp=this.zoomLevels[c];this.maxLeft=this.pxPerBp*this.ref.end-this.getWidth();for(c=0;c<this.tracks.length;c++)this.tracks[c].startZoom(this.pxPerBp,b-0.5*this.getWidth()/this.pxPerBp,b+0.5*this.getWidth()/this.pxPerBp);new k(e,this,function(){this.zoomUpdate(0.5,b)},700,0.5)}}};h.prototype.zoomOut=function(a,b,c){if(!this.animation&&(this._unsetPosBeforeZoom(),void 0===c&&(c=1),c=Math.min(c,
this.curZoom),0!=c)){this.showWait();var e=this.getPosition();this.trimVertical(e.y);void 0===b&&(b=0.5);var a=this.zoomLevels[this.curZoom-c]/this.pxPerBp,d=this.bpToPx(this.ref.end)-(this.offset+e.x+this.getWidth()),b=Math.max(b,1-d*a/(1-a)/this.getWidth()),d=e.x+this.offset-this.bpToPx(this.ref.start),b=Math.min(b,d*a/(1-a)/this.getWidth()),f=this.pxToBp(e.x+this.offset+b*this.getWidth());this.curZoom-=c;this.pxPerBp=this.zoomLevels[this.curZoom];for(c=0;c<this.tracks.length;c++)this.tracks[c].startZoom(this.pxPerBp,
f-b*this.getWidth()/this.pxPerBp,f+(1-b)*this.getWidth()/this.pxPerBp);this.minLeft=this.pxPerBp*this.ref.start;new k(a,this,function(){this.zoomUpdate(b,f)},700,b)}};h.prototype.zoomBackOut=function(){if(!this.animation&&this.isZoomedToBase()){var a=this.posBeforeZoom.min,b=this.posBeforeZoom.max,c=this.posBeforeZoom.zoomIndex;this.posBeforeZoom=void 0;this.showWait();var e=this.zoomLevels[c]/this.pxPerBp,d=(a+b)/2;this.curZoom=c;this.pxPerBp=this.zoomLevels[c];for(c=0;c<this.tracks.length;c++)this.tracks[c].startZoom(this.pxPerBp,
d-0.5*this.getWidth()/this.pxPerBp,d+0.5*this.getWidth()/this.pxPerBp);this.minLeft=this.pxPerBp*this.ref.start;var f=this;new k(e,this,function(){f.setLocation(f.ref,a,b);f.zoomUpdate(0.5,d)},700,0.5)}};h.prototype.isZoomedToBase=function(){return void 0!==this.posBeforeZoom};h.prototype._setPosBeforeZoom=function(a,b,c){this.posBeforeZoom={min:a,max:b,zoomIndex:c}};h.prototype._unsetPosBeforeZoom=function(){this.posBeforeZoom=void 0};h.prototype.zoomUpdate=function(a,b){var c=this.elem.clientWidth,
e=this.bpToPx(b)-a*c+c/2;this.stripeWidth=this.stripeWidthForZoom(this.curZoom);this.scrollContainer.style.width=this.stripeCount*this.stripeWidth+"px";this.zoomContainer.style.width=this.stripeCount*this.stripeWidth+"px";this.offset=(Math.round(e/this.stripeWidth)-this.stripeCount/2|0)*this.stripeWidth;this.maxOffset=this.bpToPx(this.ref.end+1)-this.stripeCount*this.stripeWidth;this.maxLeft=this.bpToPx(this.ref.end+1)-this.getWidth();this.minLeft=this.bpToPx(this.ref.start);this.zoomContainer.style.left=
"0px";this.setX(e-this.offset-c/2);dojo.forEach(this.uiTracks,function(a){a.clear()});this.trackIterate(function(a){a.endZoom(this.pxPerBp,Math.round(this.stripeWidth/this.pxPerBp))});this.showVisibleBlocks(!0);this.showDone();this.showCoarse()};h.prototype.scrollUpdate=function(){var a=this.getX(),b=this.stripeCount*this.stripeWidth,c=this.getWidth(),e=(b/2-(c/2+a))/this.stripeWidth|0;if(0!=e&&(Math.abs(e),b=this.offset-e*this.stripeWidth,this.offset!=b))this.offset=b,this.trackIterate(function(a){a.moveBlocks(e)}),
a+=e*this.stripeWidth,this.updateStaticElements({x:a}),this.rawSetX(a)};h.prototype.trackHeightUpdate=function(a,b){var c=this.getY();if(a in this.trackIndices){var e=this.trackIndices[a];if(!(1>Math.abs(b-this.trackHeights[e]))){this.trackTops[e]+this.trackHeights[e]-c<this.getHeight()/2&&0<c&&this.setY(c+(b-this.trackHeights[e]));this.trackHeights[e]=b;this.tracks[e].div.style.height=b+this.trackPadding+"px";var c=this.trackTops[e],d=0;this.tracks[e].shown&&(c+=b+this.trackPadding);for(e+=1;e<this.tracks.length;e++)this.trackTops[e]=
c,this.tracks[e].div.style.top=c+"px",d=c,this.tracks[e].shown&&(c+=this.trackHeights[e]+this.trackPadding);this.containerHeight=Math.max(c||0,Math.min(this.getY(),d)+this.getHeight());this.scrollContainer.style.height=this.containerHeight+"px";this.setY(this.getY());this.updateStaticElements({height:this.getHeight()})}}};h.prototype.showVisibleBlocks=function(a,b,c,e){void 0===b&&(b=this.getPosition());void 0===c&&(c=b.x-this.drawMargin*this.getWidth());void 0===e&&(e=b.x+(1+this.drawMargin)*this.getWidth());
var d=Math.max(0,c/this.stripeWidth|0),f=Math.min(this.stripeCount-1,e/this.stripeWidth|0),g=Math.round(this.stripeWidth/this.pxPerBp),i=Math.round(this.pxToBp(d*this.stripeWidth+this.offset)),i=i-1,h=Math.round(this.pxToBp(this.offset)),k=Math.round(this.pxToBp(this.offset+this.stripeCount*this.stripeWidth));this.overviewTrackIterate(function(a,b){a.showRange(0,b.overviewStripes-1,-1,b.overviewStripeBases,b.overviewBox.w/(b.ref.end-b.ref.start))});this.trackIterate(function(a,b){a.showRange(d,f,
i,g,b.pxPerBp,h,k)});this.updateStaticElements({height:this.getHeight(),width:this.getWidth(),x:this.getX(),y:this.getY()});this.browser.publish("/jbrowse/v1/n/tracks/redraw")};h.prototype.showTracks=function(a){a=dojo.filter(a,function(a){return 0==this._getTracks([a.label]).length},this);a.length&&(this.trackDndWidget.insertNodes(!1,a),this.updateTrackList())};h.prototype.replaceTracks=function(a){j.forEach(a,function(a){var b,c;j.forEach(this.trackDndWidget.parent.children,function(e){if(!c){var d=
e.track;d&&d.config.label==a.label?(c=1,this.trackDndWidget.delItem(e.id),e&&e.parentNode&&e.parentNode.removeChild(e)):b=e}},this);this.updateTrackList();this.trackDndWidget.insertNodes(!1,[a],!1,b)},this);a.length&&this.updateTrackList()};h.prototype.hideTracks=function(a){a=dojo.filter(a,function(a){return 0!=this._getTracks([a.label]).length},this);a.length&&(dojo.forEach(a,function(a){this.trackDndWidget.forInItems(function(b,c){if(a.label===b.data.label){this.trackDndWidget.delItem(c);var e=
dojo.byId(c);e&&e.parentNode&&e.parentNode.removeChild(e)}},this)},this),this.updateTrackList())};h.prototype._getTracks=function(a){var b=[],c={count:a.length};dojo.forEach(a,function(a){c[a]=1});dojo.some(this.tracks,function(a){c[a.name]&&(b.push(a),c.count--);return!c.count},this);return b};h.prototype.renderTrack=function(a){var b=this;if(!a)return null;var c;if(dojo.some(this.tracks,function(b){return b.name==a.label?(c=b,!0):!1}))return c.div;var e=a.label,d=dojo.create("div",{className:["track",
("track_"+a.type).replace(/[^A-Za-z_0-9]/g,"_").toLowerCase(),("track_"+e).replace(/[^A-Za-z_0-9]/g,"_").toLowerCase()].join(" "),id:"track_"+e});d.trackName=e;var f,g,i=dojo.hitch(this,function(){var c=new f({refSeq:this.ref,config:a,changeCallback:dojo.hitch(this,"showVisibleBlocks",!0),trackPadding:this.trackPadding,store:g,browser:this.browser});"function"==typeof g.setTrack&&g.setTrack(c);g.hasRefSeq&&g.hasRefSeq(this.ref.name,function(c){c||(new q({title:"No data",content:"<b>"+(a.key||a.label)+
"</b> contains no data on this reference sequence ("+b.ref.name+")."})).show()});d.track=c;var i=dojo.hitch(this,"trackHeightUpdate",e);c.setViewInfo(this,i,this.stripeCount,d,this.stripePercent,this.stripeWidth,this.pxPerBp,this.trackPadding);c.updateStaticElements({x:this.getX(),y:this.getY(),height:this.getHeight(),width:this.getWidth()});this.updateTrackList()});a.store||console.warn("configuration for track "+a.label+" has no store set",a);this.browser.getStore(a.store,function(a){g=a;f&&g&&
i()});require([a.type],function(a){(f=a)&&g&&i()});return d};h.prototype.trackIterate=function(a){var b;for(b=0;b<this.uiTracks.length;b++)a.call(this,this.uiTracks[b],this);for(b=0;b<this.tracks.length;b++)a.call(this,this.tracks[b],this)};h.prototype.updateTrackList=function(){var a=[],b=dojo.toJson(this.trackIndices||{}),c=this.trackContainer.firstChild;do c.track&&a.push(c.track);while(c=c.nextSibling);var e=this.tracks;this.tracks=a;for(var d={},f=Array(this.tracks.length),c=0;c<a.length;c++)d[a[c].name]=
c,f[c]=a[c].name in this.trackIndices?this.trackHeights[this.trackIndices[a[c].name]]:0,this.trackIndices[a[c].name]=c;j.forEach(e||[],function(a){a.name in d||(g.removeAttribute(a.div,"track"),a.destroy())},this);this.trackIndices=d;this.trackHeights=f;a=this.topSpace;for(c=0;c<this.tracks.length;c++)this.trackTops[c]=a,this.tracks[c].div.style.top=a+"px",this.tracks[c].shown&&(a+=this.trackHeights[c]+this.trackPadding);this.containerHeight=Math.max(a||0,this.getHeight());this.scrollContainer.style.height=
this.containerHeight+"px";this.updateScroll();if(b!=dojo.toJson(this.trackIndices||{}))this.browser.publish("/jbrowse/v1/n/tracks/visibleChanged",[this.visibleTrackNames()]),this.showVisibleBlocks()};return h})},"dojo/dnd/move":function(){define("../_base/declare,../dom-geometry,../dom-style,./common,./Mover,./Moveable".split(","),function(h,j,g,i,f,d){i=h("dojo.dnd.move.constrainedMoveable",d,{constraints:function(){},within:!1,constructor:function(b,e){e||(e={});this.constraints=e.constraints;this.within=
e.within},onFirstMove:function(b){var e=this.constraintBox=this.constraints.call(this,b);e.r=e.l+e.w;e.b=e.t+e.h;this.within&&(b=j.getMarginSize(b.node),e.r-=b.w,e.b-=b.h)},onMove:function(b,e){var c=this.constraintBox,a=b.node.style;this.onMoving(b,e);e.l=e.l<c.l?c.l:c.r<e.l?c.r:e.l;e.t=e.t<c.t?c.t:c.b<e.t?c.b:e.t;a.left=e.l+"px";a.top=e.t+"px";this.onMoved(b,e)}});f=h("dojo.dnd.move.boxConstrainedMoveable",i,{box:{},constructor:function(b,e){var c=e&&e.box;this.constraints=function(){return c}}});
h=h("dojo.dnd.move.parentConstrainedMoveable",i,{area:"content",constructor:function(b,e){var c=e&&e.area;this.constraints=function(){var a=this.node.parentNode,b=g.getComputedStyle(a),e=j.getMarginBox(a,b);if("margin"==c)return e;var d=j.getMarginExtents(a,b);e.l+=d.l;e.t+=d.t;e.w-=d.w;e.h-=d.h;if("border"==c)return e;d=j.getBorderExtents(a,b);e.l+=d.l;e.t+=d.t;e.w-=d.w;e.h-=d.h;if("padding"==c)return e;d=j.getPadExtents(a,b);e.l+=d.l;e.t+=d.t;e.w-=d.w;e.h-=d.h;return e}}});return{constrainedMoveable:i,
boxConstrainedMoveable:f,parentConstrainedMoveable:h}})},"dojo/dnd/Source":function(){define("../_base/array,../_base/connect,../_base/declare,../_base/kernel,../_base/lang,../dom-class,../dom-geometry,../mouse,../ready,../topic,./common,./Selector,./Manager".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p,q){i.isAsync||c(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});var m=g("dojo.dnd.Source",p,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,
autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(b,c){f.mixin(this,f.mixin({},c));var e=this.accept;if(e.length){this.accept={};for(var g=0;g<e.length;++g)this.accept[e[g]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&d.add(this.node,"dojoDndSource");this.targetState="";this.accept&&d.add(this.node,"dojoDndTarget");this.horizontal&&d.add(this.node,"dojoDndHorizontal");this.topics=
[a.subscribe("/dnd/source/over",f.hitch(this,"onDndSourceOver")),a.subscribe("/dnd/start",f.hitch(this,"onDndStart")),a.subscribe("/dnd/drop",f.hitch(this,"onDndDrop")),a.subscribe("/dnd/cancel",f.hitch(this,"onDndCancel"))]},checkAcceptance:function(a,b){if(this==a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var e=a.getItem(b[c].id).type,d=!1,f=0;f<e.length;++f)if(e[f]in this.accept){d=!0;break}if(!d)return!1}return!0},copyState:function(a,b){if(a)return!0;2>arguments.length&&
(b=this==q.manager().target);if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){m.superclass.destroy.call(this);h.forEach(this.topics,function(a){a.remove()});this.targetAnchor=null},onMouseMove:function(a){if(!(this.isDragging&&"Disabled"==this.targetState)){m.superclass.onMouseMove.call(this,a);var c=q.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var e=
this.getSelectedNodes();e.length&&c.startDrag(this,e,this.copyState(k.getCopyKeyState(a),!0))}if(this.isDragging){e=!1;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current)this.targetBox=b.position(this.current,!0);e=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==b.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2}if(this.current!=this.targetAnchor||e!=this.before)this._markTargetAnchor(e),c.canDrop(!this.current||c.source!=this||!(this.current.id in
this.selection))}}},onMouseDown:function(a){if(!this.mouseDown&&this._legalMouseDown(a)&&(!this.skipForm||!k.isFormElement(a)))this.mouseDown=!0,this._lastX=a.pageX,this._lastY=a.pageY,m.superclass.onMouseDown.call(this,a)},onMouseUp:function(a){if(this.mouseDown)this.mouseDown=!1,m.superclass.onMouseUp.call(this,a)},onDndSourceOver:function(a){this!==a?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(a=q.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||
a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,b,c){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",this==a?c?"Copied":"Moved":"");this._changeState("Target",this.accept&&this.checkAcceptance(a,b)?"":"Disabled");this==a&&q.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,b,c,e){if(this==e)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){if(this.targetAnchor)this._unmarkTargetAnchor(),this.targetAnchor=null;this.before=
!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,b,c);else this.onDropInternal(b,c)},onDropExternal:function(a,b,c){var e=this._normalizedCreator;this._normalizedCreator=this.creator?function(b,c){return e.call(this,a.getItem(b.id).data,c)}:c?function(b){var c=a.getItem(b.id),b=b.cloneNode(!0);b.id=k.getUniqueId();return{node:b,data:c.data,type:c.type}}:function(b){var c=a.getItem(b.id);a.delItem(b.id);
return{node:b,data:c.data,type:c.type}};this.selectNone();!c&&!this.creator&&a.selectNone();this.insertNodes(!0,b,this.before,this.current);!c&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=e},onDropInternal:function(a,b){var c=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(b)this._normalizedCreator=this.creator?function(a,b){return c.call(this,this.getItem(a.id).data,b)}:function(a){var b=this.getItem(a.id),a=a.cloneNode(!0);a.id=k.getUniqueId();
return{node:a,data:b.data,type:b.type}};else{if(!this.current)return;this._normalizedCreator=function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,a,this.before,this.current);this._normalizedCreator=c}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){m.superclass.onOverEvent.call(this);q.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){m.superclass.onOutEvent.call(this);
q.manager().outSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a){if(!(this.current==this.targetAnchor&&this.before==a))this.targetAnchor&&this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){if(this.targetAnchor)this._removeItemClass(this.targetAnchor,
this.before?"Before":"After"),this.targetBox=this.targetAnchor=null,this.before=!0},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if("touchstart"!=a.type&&!e.isLeft(a))return!1;if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(d.contains(a,"dojoDndHandle"))return!0;if(d.contains(a,"dojoDndItem")||d.contains(a,"dojoDndIgnore"))break}return!1}});return m})},"dojo/dnd/Selector":function(){define("../_base/array,../_base/declare,../_base/event,../_base/kernel,../_base/lang,../dom,../dom-construct,../mouse,../_base/NodeList,../on,../touch,./common,./Container".split(","),
function(h,j,g,i,f,d,b,e,c,a,k,p,q){var m=j("dojo.dnd.Selector",q,{constructor:function(b,c){c||(c={});this.singular=c.singular;this.autoSync=c.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(a(this.node,k.press,f.hitch(this,"onMouseDown")),a(this.node,k.release,f.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var a=new c,b=p._empty,e;for(e in this.selection)e in b||a.push(d.byId(e));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},
selectAll:function(){this.forInItems(function(a,b){this._addItemClass(d.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=p._empty,c;for(c in this.selection)if(!(c in a)){var e=d.byId(c);this.delItem(c);b.destroy(e)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(a,b){var b=b||i.global,c=this.selection,e=p._empty,d;for(d in c)d in e||a.call(b,this.getItem(d),d,this)},sync:function(){m.superclass.sync.call(this);
if(this.anchor&&!this.getItem(this.anchor.id))this.anchor=null;var a=[],b=p._empty,c;for(c in this.selection)c in b||this.getItem(c)||a.push(c);h.forEach(a,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,b,c,e){var d=this._normalizedCreator;this._normalizedCreator=function(b,c){var e=d.call(this,b,c);a?(this.anchor?this.anchor!=e.node&&(this._removeItemClass(e.node,"Anchor"),this._addItemClass(e.node,"Selected")):(this.anchor=e.node,this._removeItemClass(e.node,"Selected"),
this._addItemClass(this.anchor,"Anchor")),this.selection[e.node.id]=1):(this._removeItemClass(e.node,"Selected"),this._removeItemClass(e.node,"Anchor"));return e};m.superclass.insertNodes.call(this,b,c,e);this._normalizedCreator=d;return this},destroy:function(){m.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!p.getCopyKeyState(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=
!0,e.isLeft(a)&&g.stop(a);else{if(!this.singular&&a.shiftKey){p.getCopyKeyState(a)||this._removeSelection();var b=this.getAllNodes();if(b.length){if(!this.anchor)this.anchor=b[0],this._addItemClass(this.anchor,"Anchor");this.selection[this.anchor.id]=1;if(this.anchor!=this.current){for(var c=0,d;c<b.length&&!(d=b[c],d==this.anchor||d==this.current);++c);for(++c;c<b.length;++c){d=b[c];if(d==this.anchor||d==this.current)break;this._addItemClass(d,"Selected");this.selection[d.id]=1}this._addItemClass(this.current,
"Selected");this.selection[this.current.id]=1}}}else if(this.singular)this.anchor==this.current?p.getCopyKeyState(a)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1);else if(p.getCopyKeyState(a))this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&
(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);else if(!(this.current.id in this.selection))this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1;g.stop(a)}},onMouseUp:function(){if(this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current))this.anchor=this.current,this._addItemClass(this.anchor,
"Anchor"),this.selection[this.current.id]=1},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=a(this.node,k.move,f.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var a=p._empty,b;for(b in this.selection)if(!(b in a)){var c=d.byId(b);c&&this._removeItemClass(c,"Selected")}this.selection={};return this},_removeAnchor:function(){if(this.anchor)this._removeItemClass(this.anchor,
"Anchor"),this.anchor=null;return this}});return m})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(h,j,g){var j=j.NodeList,i=j.prototype;i.connect=j._adaptAsForEach(function(){return h.connect.apply(this,arguments)});i.coords=j._adaptAsMap(h.coords);j.events="blur,focus,change,click,error,keydown,keypress,keyup,load,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,submit".split(",");g.forEach(j.events,function(f){var d=
"on"+f;i[d]=function(b,e){return this.connect(d,b,e)}});return h.NodeList=j})},"dojo/NodeList-dom":function(){define("./_base/kernel,./query,./_base/array,./_base/lang,./dom-class,./dom-construct,./dom-geometry,./dom-attr,./dom-style".split(","),function(h,j,g,i,f,d,b,e,c){function a(a){return function(b,c,e){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,e)}}var k=function(a){return 1==a.length&&"string"==typeof a[0]},p=function(a){var b=a.parentNode;b&&b.removeChild(a)},
q=j.NodeList,m=q._adaptWithCondition,o=q._adaptAsForEach,l=q._adaptAsMap;i.extend(q,{_normalize:function(a,b){var c=!0===a.parse;if("string"==typeof a.template)var e=a.templateFunc||h.string&&h.string.substitute,a=e?e(a.template,a):a;e=typeof a;"string"==e||"number"==e?(a=d.toDom(a,b&&b.ownerDocument),a=11==a.nodeType?i._toArray(a.childNodes):[a]):i.isArrayLike(a)?i.isArray(a)||(a=i._toArray(a)):a=[a];if(c)a._runParse=!0;return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,b,
c,e){if(!(1!=b.nodeType&&"only"==c))for(var f,g=a.length,i=g-1;0<=i;i--){var k=e?this._cloneNode(a[i]):a[i];if(a._runParse&&h.parser&&h.parser.parse){f||(f=b.ownerDocument.createElement("div"));f.appendChild(k);h.parser.parse(f);for(k=f.firstChild;f.firstChild;)f.removeChild(f.firstChild)}i==g-1?d.place(k,b,c):b.parentNode.insertBefore(k,b);b=k}},position:l(b.position),attr:m(a(e),k),style:m(a(c),k),addClass:o(f.add),removeClass:o(f.remove),toggleClass:o(f.toggle),replaceClass:o(f.replace),empty:o(d.empty),
removeAttr:o(e.remove),marginBox:l(b.getMarginBox),place:function(a,b){var c=j(a)[0];return this.forEach(function(a){d.place(a,c,b)})},orphan:function(a){return(a?j._filterResult(this,a):this).forEach(p)},adopt:function(a,b){return j(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new q;this.map(function(c){j(a,c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,c=this,e=0;if("string"==typeof a){c=j._filterResult(this,
b[0]);if(1==b.length)return c._stash(this);e=1}return this._wrap(g.filter(c,b[e],b[e+1]),this)},addContent:function(a,b){for(var a=this._normalize(a,this[0]),c=0,e;e=this[c];c++)this._place(a,e,b,0<c);return this}});return q})},"dojo/dnd/Container":function(){define("../_base/array,../_base/declare,../_base/event,../_base/kernel,../_base/lang,../_base/window,../dom,../dom-class,../dom-construct,../Evented,../has,../on,../query,../ready,../touch,./common".split(","),function(h,j,g,i,f,d,b,e,c,a,k,
p,q,m,o,l){j=j("dojo.dnd.Container",a,{skipForm:!1,allowNested:!1,constructor:function(a,c){this.node=b.byId(a);c||(c={});this.creator=c.creator||null;this.skipForm=c.skipForm;this.parent=c.dropParent&&b.byId(c.dropParent);this.map={};this.current=null;this.containerState="";e.add(this.node,"dojoDndContainer");(!c||!c._skipStartup)&&this.startup();this.events=[p(this.node,o.over,f.hitch(this,"onMouseOver")),p(this.node,o.out,f.hitch(this,"onMouseOut")),p(this.node,"dragstart",f.hitch(this,"onSelectStart")),
p(this.node,"selectstart",f.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(a,b){var b=b||i.global,c=this.map,e=l._empty,d;for(d in c)d in e||a.call(b,c[d],d,this);return b},clearItems:function(){this.map={}},getAllNodes:function(){return q((this.allowNested?"":"> ")+".dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=
this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=l.getUniqueId();var c=b.getAttribute("dndType"),e=b.getAttribute("dndData");a[b.id]={data:e||b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);this.map=a;return this},insertNodes:function(a,b,c){if(this.parent.firstChild)if(b){if(!c)c=this.parent.firstChild}else{if(c)c=c.nextSibling}else c=null;var e;if(c)for(b=0;b<a.length;++b)e=this._normalizedCreator(a[b]),this.setItem(e.node.id,{data:e.data,type:e.type}),c.parentNode.insertBefore(e.node,
c);else for(b=0;b<a.length;++b)e=this._normalizedCreator(a[b]),this.setItem(e.node.id,{data:e.data,type:e.type}),this.parent.appendChild(e.node);return this},destroy:function(){h.forEach(this.events,function(a){a.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var a=this.parent.getElementsByTagName("tbody");
if(a&&a.length)this.parent=a[0]}this.defaultCreator=l._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&!(b==this.node);)try{b=b.parentNode}catch(c){b=null}b||(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);if(this.current!=b)this.current&&this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(b){a=
null}}if(this.current)this._removeItemClass(this.current,"Over"),this.current=null;this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){(!this.skipForm||!l.isFormElement(a))&&g.stop(a)},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,b){var c="dojoDnd"+a,d=a.toLowerCase()+"State";e.replace(this.node,c+b,c+this[d]);this[d]=b},_addItemClass:function(a,b){e.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){e.remove(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=
a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if((b==this.parent||this.allowNested)&&e.contains(a,"dojoDndItem"))return a;return null},_normalizedCreator:function(a,b){var c=(this.creator||this.defaultCreator).call(this,a,b);if(!f.isArray(c.type))c.type=["text"];if(!c.node.id)c.node.id=l.getUniqueId();e.add(c.node,"dojoDndItem");return c}});l._createNode=function(a){return!a?l._createSpan:function(b){return c.create(a,{innerHTML:b})}};l._createTrTd=function(a){var b=c.create("tr");c.create("td",
{innerHTML:a},b);return b};l._createSpan=function(a){return c.create("span",{innerHTML:a})};l._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};l._defaultCreator=function(a){var a=a.tagName.toLowerCase(),b="tbody"==a||"thead"==a?l._createTrTd:l._createNode(l._defaultCreatorNodes[a]);return function(a,c){var e=a&&f.isObject(a),d,g;e&&a.tagName&&a.nodeType&&a.getAttribute?(d=a.getAttribute("dndData")||a.innerHTML,e=(e=a.getAttribute("dndType"))?e.split(/\s*,\s*/):["text"],g=a):(d=e&&a.data?a.data:
a,e=e&&a.type?a.type:["text"],g=("avatar"==c?l._createSpan:b)(""+d));if(!g.id)g.id=l.getUniqueId();return{node:g,data:d,type:e}}};return j})},"dojo/dnd/Manager":function(){define("../_base/array,../_base/declare,../_base/event,../_base/lang,../_base/window,../dom-class,../Evented,../has,../keys,../on,../topic,../touch,./common,./autoscroll,./Avatar".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o){var l=j("dojo.dnd.Manager",[b],{constructor:function(){this.source=this.avatar=null;this.nodes=[];
this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:e("touch")?0:16,OFFSET_Y:e("touch")?-64:16,overSource:function(a){if(this.avatar)this.target=a&&"Disabled"!=a.targetState?a:null,this.canDropFlag=Boolean(this.target),this.avatar.update();k.publish("/dnd/source/over",a)},outSource:function(a){if(this.avatar){if(this.target==a)this.target=null,this.canDropFlag=!1,this.avatar.update(),k.publish("/dnd/source/over",null)}else k.publish("/dnd/source/over",null)},startDrag:function(b,
c,e){m.autoScrollStart(f.doc);this.source=b;this.nodes=c;this.copy=Boolean(e);this.avatar=this.makeAvatar();f.body().appendChild(this.avatar.node);k.publish("/dnd/start",b,c,this.copy);this.events=[a(f.doc,p.move,i.hitch(this,"onMouseMove")),a(f.doc,p.release,i.hitch(this,"onMouseUp")),a(f.doc,"keydown",i.hitch(this,"onKeyDown")),a(f.doc,"keyup",i.hitch(this,"onKeyUp")),a(f.doc,"dragstart",g.stop),a(f.body(),"selectstart",g.stop)];d.add(f.body(),"dojoDnd"+(e?"Copy":"Move"))},canDrop:function(a){a=
Boolean(this.target&&a);if(this.canDropFlag!=a)this.canDropFlag=a,this.avatar.update()},stopDrag:function(){d.remove(f.body(),["dojoDndCopy","dojoDndMove"]);h.forEach(this.events,function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new o(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;if(b)m.autoScrollNodes(a),b=b.node.style,b.left=a.pageX+this.OFFSET_X+"px",
b.top=a.pageY+this.OFFSET_Y+"px",b=Boolean(this.source.copyState(q.getCopyKeyState(a))),this.copy!=b&&this._setCopyStatus(b);e("touch")&&a.preventDefault()},onMouseUp:function(a){if(this.avatar){if(this.target&&this.canDropFlag){var b=Boolean(this.source.copyState(q.getCopyKeyState(a)));k.publish("/dnd/drop/before",this.source,this.nodes,b,this.target,a);k.publish("/dnd/drop",this.source,this.nodes,b,this.target,a)}else k.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case c.CTRL:a=
Boolean(this.source.copyState(!0));this.copy!=a&&this._setCopyStatus(a);break;case c.ESCAPE:k.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==c.CTRL&&(a=Boolean(this.source.copyState(!1)),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();d.replace(f.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});q._manager=null;l.manager=q.manager=function(){if(!q._manager)q._manager=
new l;return q._manager};return l})},"dojo/dnd/Avatar":function(){define("../_base/declare,../_base/window,../dom,../dom-attr,../dom-class,../dom-construct,../hccss,../query".split(","),function(h,j,g,i,f,d,b,e){return h("dojo.dnd.Avatar",null,{constructor:function(b){this.manager=b;this.construct()},construct:function(){var c=d.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),a=this.manager.source,e,f=d.create("tbody",null,c),g=d.create("tr",null,f),
h=d.create("td",null,g),j=Math.min(5,this.manager.nodes.length),l=0;b("highcontrast")&&d.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},h);d.create("span",{innerHTML:a.generateText?this._generateText():""},h);for(i.set(g,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});l<j;++l)a.creator?e=a._normalizedCreator(a.getItem(this.manager.nodes[l].id).data,"avatar").node:(e=this.manager.nodes[l].cloneNode(!0),"tr"==e.tagName.toLowerCase()&&(g=d.create("table"),d.create("tbody",null,
g).appendChild(e),e=g)),e.id="",g=d.create("tr",null,f),h=d.create("td",null,g),h.appendChild(e),i.set(g,{"class":"dojoDndAvatarItem",style:{opacity:(9-l)/10}});this.node=c},destroy:function(){d.destroy(this.node);this.node=!1},update:function(){f.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(b("highcontrast")){var c=g.byId("a11yIcon"),a="+";this.manager.canDropFlag&&!this.manager.copy?a="< ":!this.manager.canDropFlag&&!this.manager.copy?a="o":this.manager.canDropFlag||(a="x");
c.innerHTML=a}e("tr.dojoDndAvatarHeader td span"+(b("highcontrast")?" span":""),this.node).forEach(function(a){a.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},"JBrowse/View/Track/LocationScale":function(){define(["dojo/_base/declare","dojo/dom-construct","JBrowse/View/Track/BlockBased","JBrowse/Util"],function(h,j,g,i){return h(g,{constructor:function(f){this.loaded=!0;this.labelClass=f.labelClass;
this.posHeight=f.posHeight;this.height=Math.round(1.2*f.posHeight)},makeTrackLabel:function(){},makeTrackMenu:function(){},fillBlock:function(f){var d=f.blockIndex,b=f.block,e=f.leftBase,c=document.createElement("div"),e=i.addCommas(e+1);c.className=this.labelClass;c.style.left="-"+Number(e.length)/1.7+"ex";c.appendChild(document.createTextNode(e));b.domNode.appendChild(c);(b=this.browser.getHighlight())&&b.ref==this.refSeq.name&&this.renderRegionHighlight(f,b);this.heightUpdate(Math.round(1.2*this.posHeight),
d);f.finishCallback()}})})},"JBrowse/View/Track/BlockBased":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/json,dojo/aspect,dojo/dom-construct,dojo/dom-geometry,dojo/dom-class,dojo/query,dojo/on,dijit/Destroyable,JBrowse/View/InfoDialog,dijit/Dialog,dijit/Menu,dijit/PopupMenuItem,dijit/MenuItem,dijit/CheckedMenuItem,dijit/MenuSeparator,JBrowse/Util,JBrowse/Component,JBrowse/Errors,JBrowse/View/TrackConfigEditor,JBrowse/View/ConfirmDialog,JBrowse/View/Track/BlockBased/Block,JBrowse/View/DetailsMixin".split(","),
function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l,n,s,u,r,v,t,w,x,B){return h([r,B,k],{constructor:function(a){a=a||{};this.refSeq=a.refSeq;this.name=a.label||this.config.label;this.key=a.key||this.config.key||this.name;this._changedCallback=a.changeCallback||function(){};this.height=0;this.shown=!0;this.empty=!1;this.browser=a.browser;this.store=a.store},_defaultConfig:function(){return{}},heightUpdate:function(a,b){this.shown?(void 0!==b&&(this.blockHeights[b]=a),this.height=Math.max(this.height,a),this.inShowRange||
(this.heightUpdateCallback(Math.max(this.labelHeight,this.height)),c(".height_overflow_message",this.div).style("top",this.height-16+"px"))):this.heightUpdateCallback(0)},setViewInfo:function(a,b,c,e,d,f){this.genomeView=a;this.heightUpdateCallback=b;this.div=e;this.widthPct=d;this.widthPx=f;this.leftBlank=document.createElement("div");this.leftBlank.className="blank-block";this.rightBlank=document.createElement("div");this.rightBlank.className="blank-block";this.div.appendChild(this.rightBlank);
this.div.appendChild(this.leftBlank);this.sizeInit(c,d);this.labelHTML="";this.labelHeight=0;this.label||this.makeTrackLabel();this.setLabel(this.key)},makeTrackLabel:function(){var b=dojo.create("div",{className:"track-label dojoDndHandle",id:"label_"+this.name,style:{position:"absolute",top:0}},this.div);this.label=b;if((this.config.style||{}).trackLabelCss)b.style.cssText+=";"+trackConfig.style.trackLabelCss;var c=dojo.create("div",{className:"track-close-button"},b);this.own(a(c,"click",dojo.hitch(this,
function(a){this.browser.view.suppressDoubleClick(100);this.browser.publish("/jbrowse/v1/v/tracks/hide",[this.config]);a.stopPropagation()})));dojo.create("span",{className:"track-label-text"},b);b=dojo.create("div",{className:"track-menu-button"},b);dojo.create("div",{},b);this.labelMenuButton=b;this.makeTrackMenu()},hide:function(){if(this.shown)this.div.style.display="none",this.shown=!1},show:function(){if(!this.shown)this.div.style.display="block",this.shown=!0},initBlocks:function(){this.blocks=
Array(this.numBlocks);this.blockHeights=Array(this.numBlocks);for(var a=0;a<this.numBlocks;a++)this.blockHeights[a]=0;this.lastAttached=this.firstAttached=null;this._adjustBlanks()},clear:function(){if(this.blocks)for(var a=0;a<this.numBlocks;a++)this._hideBlock(a);this.initBlocks();this.makeTrackMenu()},setLabel:function(a){if(!(void 0===this.label||this.labelHTML==a))this.labelHTML=a,c(".track-label-text",this.label).forEach(function(b){b.innerHTML=a}),this.labelHeight=this.label.offsetHeight},
transfer:function(){},startZoom:function(){},endZoom:function(){},showRange:function(a,b,c,e,d,f,g){if(this.fatalError)this.showFatalError(this.fatalError);else if(void 0!==this.blocks&&this.blocks.length){if(0==this.labelHeight&&this.label)this.labelHeight=this.label.offsetHeight;this.inShowRange=!0;this.height=this.labelHeight;var i=null==this.firstAttached?b+1:this.firstAttached,h=null==this.lastAttached?a-1:this.lastAttached,k,j;for(k=h;k>=a;k--)j=c+e*(k-a),this._showBlock(k,j,j+e,d,f,g);for(k=
h+1;k<=b;k++)j=c+e*(k-a),this._showBlock(k,j,j+e,d,f,g);c=this.blocks[a];for(k=i;k<a;k++)this.transfer(this.blocks[k],c,d,f,g),this.cleanupBlock(this.blocks[k]),this._hideBlock(k);c=this.blocks[b];for(k=h;k>b;k--)this.transfer(this.blocks[k],c,d,f,g),this.cleanupBlock(this.blocks[k]),this._hideBlock(k);this.firstAttached=a;this.lastAttached=b;this._adjustBlanks();this.inShowRange=!1;this.heightUpdate(this.height);this.updateStaticElements(this.genomeView.getPosition())}},cleanupBlock:function(a){a&&
a.destroy()},destroy:function(){g.forEach(this.blocks||[],function(a){this.cleanupBlock(a)},this);delete this.blocks;delete this.div;this.inherited(arguments)},_hideBlock:function(a){this.blocks[a]&&(this.div.removeChild(this.blocks[a].domNode),this.cleanupBlock(this.blocks[a]),this.blocks[a]=void 0,this.blockHeights[a]=0)},_adjustBlanks:function(){null===this.firstAttached||null===this.lastAttached?(this.leftBlank.style.left="0px",this.leftBlank.style.width="50%",this.rightBlank.style.left="50%",
this.rightBlank.style.width="50%"):(this.leftBlank.style.width=this.firstAttached*this.widthPct+"%",this.rightBlank.style.left=(this.lastAttached+1)*this.widthPct+"%",this.rightBlank.style.width=(this.numBlocks-this.lastAttached-1)*this.widthPct+"%")},hideAll:function(){if(null!=this.firstAttached){for(var a=this.firstAttached;a<=this.lastAttached;a++)this._hideBlock(a);this.lastAttached=this.firstAttached=null;this._adjustBlanks()}},hideRegion:function(a){if(null!=this.firstAttached){for(var b=this.firstAttached;b<=
this.lastAttached;b++)this.blocks[b]&&a.ref==this.refSeq.name&&!(this.blocks[b].leftBase>a.end||this.blocks[b].rightBase<a.start)&&this._hideBlock(b);this._adjustBlanks()}},changed:function(){this.hideAll();this._changedCallback&&this._changedCallback()},_makeLoadingMessage:function(){var a=dojo.create("div",{className:"loading",innerHTML:'<div class="text">Loading</span>',title:"Loading data...",style:{visibility:"hidden"}});window.setTimeout(function(){a.style.visibility="visible"},200);return a},
showFatalError:function(a){c(".block",this.div).concat(c(".blank-block",this.div)).concat(c(".error",this.div)).orphan();this.blocks=[];this.blockHeights=[];this.fatalErrorMessageElement=this._renderErrorMessage(a||this.fatalError,this.div);this.heightUpdate(b.position(this.fatalErrorMessageElement).h);this.updateStaticElements(this.genomeView.getPosition())},_handleError:function(a,b){console.error(""+a,a.stack,a);var c=dojo.mixin({},a);dojo.mixin(c,b);var e="object"==typeof a;e&&a instanceof v.TimeOut&&
c.block?this.fillBlockTimeout(c.blockIndex,c.block,a):e&&a instanceof v.DataOverflow?c.block?this.fillTooManyFeaturesMessage(c.blockIndex,c.block,a):g.forEach(this.blocks,function(b,c){b&&this.fillTooManyFeaturesMessage(c,b,a)},this):(this.fatalError=a,this.showFatalError(a))},fillBlockError:function(a,b,c){c=c||this.fatalError||this.error;d.empty(b.domNode);b=this._renderErrorMessage(c,b.domNode);this.heightUpdate(dojo.position(b).h,a)},_renderErrorMessage:function(a,b){return d.create("div",{className:"error",
innerHTML:'<h2>Error</h2><div class="text">An error was encountered when displaying this track.</div>'+(a?'<div class="codecaption">Diagnostic message</div><code>'+a+"</code>":""),title:"An error occurred"},b)},fillTooManyFeaturesMessage:function(a,b,c){this.fillMessage(a,b,"Too much data to show"+(c>=this.browser.view.maxPxPerBp?"":"; zoom in to see detail")+".")},markBlockHeightOverflow:function(a){if(!a.heightOverflowed)a.heightOverflowed=!0,e.add(a.domNode,"height_overflow"),d.create("div",{className:"height_overflow_message",
innerHTML:"Max height reached",style:{top:this.height-16+"px",height:"16px"}},a.domNode)},_showBlock:function(a,b,c,e,d,f){if(this.empty||this.fatalError)this.heightUpdate(this.labelHeight);else if(this.blocks[a])this.heightUpdate(this.blockHeights[a],a);else{var g=new x({startBase:b,endBase:c,scale:e,node:{className:"block",style:{left:a*this.widthPct+"%",width:this.widthPct+"%"}}});this.blocks[a]=g;this.div.appendChild(g.domNode);if(this.fatalError)this.fillBlockError(a,g);else{var i=this._makeLoadingMessage();
g.domNode.appendChild(i);var h=function(){g&&i.parentNode&&g.domNode.removeChild(i)};try{this.fillBlock({blockIndex:a,block:g,leftBlock:this.blocks[a-1],rightBlock:this.blocks[a+1],leftBase:b,rightBase:c,scale:e,stripeWidth:this.widthPx,containerStart:d,containerEnd:f,finishCallback:h})}catch(k){console.error(k,k.stack),this.fillBlockError(a,g,k),h()}}}},moveBlocks:function(a){var b=Array(this.numBlocks),c=Array(this.numBlocks),e;for(e=0;e<this.numBlocks;e++)c[e]=0;var d;0>this.lastAttached+a||this.firstAttached+
a>=this.numBlocks?this.lastAttached=this.firstAttached=null:(this.firstAttached=Math.max(0,Math.min(this.numBlocks-1,this.firstAttached+a)),this.lastAttached=Math.max(0,Math.min(this.numBlocks-1,this.lastAttached+a)),d=0>a?this.blocks[this.firstAttached-a]:this.blocks[this.lastAttached-a]);for(e=0;e<this.blocks.length;e++){var f=e+a;if(0>f||f>=this.numBlocks)d&&this.blocks[e]&&this.transfer(this.blocks[e],d),this._hideBlock(e);else{b[f]=this.blocks[e];if(b[f])b[f].domNode.style.left=f*this.widthPct+
"%";c[f]=this.blockHeights[e]}}this.blocks=b;this.blockHeights=c;this._adjustBlanks()},sizeInit:function(a,b,c){this.numBlocks=a;this.widthPct=b;c&&this.moveBlocks(-c);if(this.blocks&&0<this.blocks.length){for(var e=this.blocks[a-1],c=a;c<this.blocks.length;c++)e&&this.blocks[c]&&this.transfer(this.blocks[c],e),this._hideBlock(c);c=this.blocks.length;this.blocks.length=a;for(this.blockHeights.length=a;c<a;c++)this.blocks[c]=void 0,this.blockHeights[c]=0;this.lastAttached=Math.min(this.lastAttached,
a-1);if(this.firstAttached>this.lastAttached)this.lastAttached=this.firstAttached=null;if(this.blocks.length!=a)throw Error("block number mismatch: should be "+a+"; blocks.length: "+this.blocks.length);for(c=0;c<a;c++)if(this.blocks[c])this.blocks[c].domNode.style.left=c*b+"%",this.blocks[c].domNode.style.width=b+"%"}else this.initBlocks();this.makeTrackMenu()},fillMessage:function(a,b,c,e){d.empty(b.domNode);b=dojo.create("div",{className:e||"message",innerHTML:c},b.domNode);this.heightUpdate(dojo.position(b).h,
a)},updateStaticElements:function(a){this.window_info=dojo.mixin(this.window_info||{},a);if(this.fatalErrorMessageElement&&(this.fatalErrorMessageElement.style.width=0.6*this.window_info.width+"px","x"in a))this.fatalErrorMessageElement.style.left=a.x+0.2*this.window_info.width+"px";if(this.label&&"x"in a)this.label.style.left=a.x+"px"},_renderContextMenu:function(a,b,c){c||(c=new m,this.own(c));for(key in a){var e=a[key];try{if(e.children){var d=new m;c.addChild(d);c.addChild(new o({popup:d,label:e.label}));
this._renderContextMenu(e.children,b,d)}else{var f=dojo.clone(e);if(f.action||f.url||f.href)f.onClick=this._makeClickHandler(e,b);if(f.label&&!f.onClick)f.disabled=!0;c.addChild(new ({"dijit/MenuItem":l,"dijit/CheckedMenuItem":n,"dijit/MenuSeparator":s}[e.type]||l)(f))}}catch(g){console.error("failed to render menu item: "+g)}}return c},_makeClickHandler:function(a,b){var c=this;if("function"==typeof a)a={action:a};else if("undefined"==typeof a)return console.error("Undefined click specification, cannot make click handler"),
function(){};var e=function(e){if(!c.genomeView.dragging){var d=b||this,f=c._processMenuSpec(dojo.clone(a),d),g=f.url||f.href;f.url=g;dojo.clone(f.style||{});f.action=f.action||(g?"iframeDialog":f.content?"contentDialog":!1);f.title=f.title||f.label;"string"==typeof f.action?(f.action={iframedialog:"iframeDialog",iframe:"iframeDialog",contentdialog:"contentDialog",content:"contentDialog",baredialog:"bareDialog",bare:"bareDialog",xhrdialog:"xhrDialog",xhr:"xhrDialog",newwindow:"newWindow",_blank:"newWindow"}[(""+
f.action).toLowerCase()],"newWindow"==f.action?window.open(g,"_blank"):f.action in{iframeDialog:1,contentDialog:1,xhrDialog:1,bareDialog:1}&&c._openDialog(f,e,d)):"function"==typeof f.action&&f.action.call(d,e)}};if(a.label)e.label=a.label;return e},_trackDetailsContent:function(){var a=d.create("div",{className:"detail"}),b=dojo.hitch(this,"renderDetailField",a);b("Name",this.key||this.name);var c=dojo.clone(this.getMetadata());delete c.key;delete c.label;"object"==typeof c.conf&&delete c.conf;var e=
[],f;for(f in c)e.push(f);dojo.forEach(e,function(a){b(u.ucFirst(a),c[a])});return a},getMetadata:function(){return this.browser&&this.browser.trackMetaDataStore?this.browser.trackMetaDataStore.getItem(this.name):this.config.metadata?this.config.metadata:{}},_trackMenuOptions:function(){var a=this;return[{label:"About this track",title:"About track: "+(this.key||this.name),iconClass:"jbrowseIconHelp",action:"contentDialog",content:dojo.hitch(this,"_trackDetailsContent")},{label:"Edit config",title:"edit this track's configuration",
iconClass:"dijitIconConfigure",action:function(){(new t(a.config)).show(function(b){a.browser.publish("/jbrowse/v1/v/tracks/replace",[b.conf])})}},{label:"Delete track",title:"delete this track",iconClass:"dijitIconDelete",action:function(){(new w({title:"Delete track?",message:"Really delete this track?"})).show(function(b){b&&a.browser.publish("/jbrowse/v1/v/tracks/delete",[a.config])})}}]},_processMenuSpec:function(a,b){for(var c in a)a.hasOwnProperty(c)&&(a[c]="object"==typeof a[c]?this._processMenuSpec(a[c],
b):this.template(b.feature,this._evalConf(b,a[c],c)));return a},_evalConf:function(a,b,c){var e={action:1,click:1,content:1};return"function"==typeof b&&!e[c]?b.apply(a,a.callbackArgs||[]):b},getConfForFeature:function(a,b){return this.getConf(a,[b,a,null,null,this])},isFeatureHighlighted:function(a,b){var c=this.browser.getHighlight();return c&&c.objectName&&c.objectName==b&&c.ref==this.refSeq.name&&!(a.get("start")>c.end||a.get("end")<c.start)},_openDialog:function(a,c,e){var e=e||{},c=a.action,
c=c.replace(/Dialog/,""),d=e.feature&&(e.feature.get("name")||e.feature.get("id")),d={"class":"popup-dialog popup-dialog-"+c,title:a.title||a.label||(d?d+" details":"Details"),style:dojo.clone(a.style||{})};a.dialog&&h.safeMixin(d,a.dialog);var g;if("xhr"==c||"content"==c){if("xhr"==c)d.href=a.url;g=new p(d);e.dialog=g;"content"==c&&g.set("content",this._evalConf(e,a.content,null));u.removeAttribute(e,"dialog")}else if("bare"==c)g=new q(d),e.dialog=g,g.set("content",this._evalConf(e,a.content,null)),
u.removeAttribute(e,"dialog");else if("iframe"==c){e=function(){var a=b.position(this.browser.container);return{h:Math.round(0.8*a.h),w:Math.round(0.8*a.w)}}.call(this);g=new q(d);var i=dojo.create("iframe",{tabindex:"0",width:e.w,height:e.h,style:{border:"none"},src:a.url});g.set("content",i);dojo.create("a",{href:a.url,target:"_blank",className:"dialog-new-window",title:"open in new window",onclick:dojo.hitch(g,"hide"),innerHTML:a.url},g.titleBar);a=function(){var a=b.position(g.containerNode),
c=a.w,a=a.h-b.position(g.titleBar).h;i.width=c;i.height=a};f.after(g,"layout",a);f.after(g,"show",a)}f.after(g,"hide",function(){setTimeout(function(){g.destroyRecursive()},500)});g.show()},template:function(a,b){if("string"!=typeof b||!a)return b;if(b)return b.replace(/\{([^}]+)\}/g,function(b,c){var e=a?a.get(c.toLowerCase()):void 0;return void 0!==e?e:""})},makeTrackMenu:function(){var a=this._trackMenuOptions();if(a&&a.length&&this.label&&this.labelMenuButton)this.trackMenu&&this.trackMenu.destroyRecursive(),
a=this._renderContextMenu(a,{menuButton:this.labelMenuButton,track:this,browser:this.browser,refSeq:this.refSeq}),a.startup(),a.set("leftClickToOpen",!0),a.bindDomNode(this.labelMenuButton),a.set("leftClickToOpen",!1),a.bindDomNode(this.label),this.trackMenu=a,this.own(this.trackMenu)},fillBlockTimeout:function(a,b){d.empty(b.domNode);e.add(b.domNode,"timed_out");this.fillMessage(a,b,"This region took too long to display, possibly because it contains too much data. Try zooming in to show a smaller region.")},
renderRegionHighlight:function(a,b){if(!(b.start>a.rightBase||b.end<a.leftBase)){var c=a.rightBase-a.leftBase,e=b.start,f=b.end,g=a.leftBase-e;0<g&&(e+=g);var i=f-a.rightBase;0<i&&(f-=i);e=100*((e-a.leftBase)/c);d.create("div",{className:"global_highlight"+(0>=g?" left":"")+(0>=i?" right":""),style:{left:e+"%",width:100*((f-a.leftBase)/c)-e+"%",height:"100%"}},a.block.domNode)}}})})},"JBrowse/View/InfoDialog":function(){define("dojo/_base/declare,dojo/_base/array,dijit/focus,JBrowse/View/Dialog/WithActionBar,dojo/on,dijit/form/Button".split(","),
function(h,j,g,i,f,d){return h(i,{refocus:!1,autofocus:!1,_fillActionBar:function(b){(new d({className:"OK",label:"OK",onClick:dojo.hitch(this,"hide"),focus:!1})).placeAt(b)},show:function(){this.inherited(arguments);var b=this;this._extraEvents=[];var e=((dijit||{})._underlay||{}).domNode;e&&this._extraEvents.push(f(e,"click",dojo.hitch(this,"hideIfVisible")));this._extraEvents.push(f(document.body,"keydown",function(c){0<=[dojo.keys.ESCAPE,dojo.keys.ENTER].indexOf(c.keyCode)&&b.hideIfVisible()}));
g.focus(this.closeButtonNode)},hideIfVisible:function(){this.get("open")&&this.hide()},hide:function(){this.inherited(arguments);j.forEach(this._extraEvents,function(b){b.remove()})}})})},"JBrowse/View/Dialog/WithActionBar":function(){define(["dojo/_base/declare","dojo/dom-geometry","dijit/Dialog"],function(h,j,g){return h(g,{constructor:function(){dojo.connect(this,"onLoad",this,"_addActionBar")},_addActionBar:function(){if(this.containerNode&&!this.actionBar)this.actionBar=dojo.create("div",{className:"infoDialogActionBar dijitDialogPaneActionBar"}),
this._fillActionBar(this.actionBar),this.containerNode.appendChild(this.actionBar)},_fillActionBar:function(){},show:function(g){this._addActionBar();this.inherited(arguments);this.domNode.style.width=j.position(this.titleBar).w+"px"}})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare,dojo/dom-style,dojo/query,./registry,./MenuItem,./hccss".split(","),function(h,j,g,i,f){return h("dijit.PopupMenuItem",f,{_fillContent:function(){if(this.srcNodeRef){var d=g("*",this.srcNodeRef);this.inherited(arguments,
[d[0]]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var d=g("[widgetId]",this.dropDownContainer)[0];this.popup=i.byNode(d)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&j.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(d){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(d),
delete this.popup);this.inherited(arguments)}})})},"JBrowse/Component":function(){define(["dojo/_base/declare","dojo/_base/lang","JBrowse/Util"],function(h,j,g){return h(null,{constructor:function(g){g=g||{};this._finalizeConfig(g.config);this.browser=g.browser;if(!this.browser)throw"a reference to the main browser is required by this constructor";this.compiledConfig={}},_finalizeConfig:function(g){this.config=this._mergeConfigs(dojo.clone(this._defaultConfig()),g||{})},_defaultConfig:function(){return{baseUrl:"/"}},
resolveUrl:function(i,f){f=f||{};return g.resolveUrl(this.getConf("baseUrl",[]),this.fillTemplate(i,f))},_mergeConfigs:function(g,f){for(var d in f)if(d in g&&"object"==typeof f[d]&&"object"==typeof g[d])this._mergeConfigs(g[d],f[d]);else if("undefined"==typeof g[d]||"undefined"!=typeof f[d])g[d]=f[d];return g},_compileConfigurationPath:function(g){var f=this.config;for("string"==typeof g&&(g=g.split("."));g.length&&f;)f=f[g.shift()];return g.length?function(){return null}:"function"==typeof f?f:
function(){return f}},getConf:function(g,f){var d=this.compiledConfig[g];d||(d=this.compiledConfig[g]=this._compileConfigurationPath(g));return f?d.apply(this,f):d.call(this)},fillTemplate:function(i,f){if("string"!=typeof i||-1==i.indexOf("{"))return i;var d={refseq:(this.refSeq||{}).name||(this.ref||{}).name||this.ref||""};d.refSeq=d.refseq;if(d.refSeq)d.refSeqNum=(/\d+/.exec(d.refSeq)||[])[0]||"";if(d.refSeqNum)d.refSeqNumNoLeadingZeroes=(/^0*(\d+)/.exec(d.refSeqNum)||[])[1]||"";f&&j.mixin(d,f);
return g.fillTemplate(i,d)}})})},"JBrowse/Errors":function(){define(["dojo/_base/declare"],function(h){var j=h(Error,{constructor:function(g){if("object"==typeof g)g instanceof Error?(this._originalError=g,this.message=""+g,this.stack=g.stack):dojo.mixin(this,g);else if("string"==typeof g)this.message=g;if(!this.message)this.message=this._defaultMessage}}),g={};g.Fatal=h(j,{_defaultMessage:"Unknown fatal error."});g.TimeOut=h(j,{_defaultMessage:"Data took too long to fetch."});g.DataOverflow=h(j,
{_defaultMessage:"Too much data to show."});return g})},"JBrowse/View/TrackConfigEditor":function(){define("dojo/_base/declare,dojo/aspect,dojo/json,dojo/on,dojo/dom-construct,dijit/Dialog,dijit/form/Button".split(","),function(h,j,g,i,f,d,b){return h(null,{constructor:function(b){this.trackConfig=b},_makeActionBar:function(e,c){var a=f.create("div",{className:"dijitDialogPaneActionBar"});(new b({iconClass:"dijitIconDelete",label:"Cancel",onClick:dojo.hitch(this,function(){c&&c();this.dialog.hide()})})).placeAt(a);
this.applyButton=new b({iconClass:"dijitIconEdit",label:"Apply",onClick:dojo.hitch(this,function(){this.newConfig?e&&e({conf:this.newConfig}):c&&c();this.dialog.hide()})});this.applyButton.placeAt(a);return{domNode:a}},show:function(b,c){var a=this.dialog=new d({title:"Edit track configuration",className:"trackConfigEditor"}),f=[this._makeEditControls().domNode,this._makeActionBar(b,c).domNode];a.set("content",f);a.show();j.after(a,"hide",dojo.hitch(this,function(){setTimeout(function(){a.destroyRecursive()},
500)}))},_makeEditControls:function(){var b=dojo.hitch(this,function(){this.newConfig=this._parseNewConfig(d.value)}),c=f.create("div",{className:"editControls"}),a=this._stringifyConfig(this.trackConfig),d=f.create("textarea",{rows:Math.min((a||"").match(/\n/g).length+4,20),cols:70,value:a,spellcheck:!1,onchange:b},c),g="",i=this,h=function(){if(i.dialog.get("open")){if(d.value!=g)b(),g=d.value;window.setTimeout(h,700)}};window.setTimeout(h,700);this.errorReportArea=f.create("div",{className:"errors"},
c);return{domNode:c}},_stringifyConfig:function(b){b=dojo.mixin({},b);delete b.store;if(!b.style)b.style={};if(!b.metadata)b.metadata={};return g.stringify(b,void 0,2)},_reportError:function(b){this.errorReportArea.innerHTML='<div class="error">'+b+"</div>";this.applyButton.set("disabled",!0)},_clearErrors:function(){f.empty(this.errorReportArea);this.applyButton.set("disabled",!1)},_parseNewConfig:function(b){var c;try{c=g.parse(b,!0),this._clearErrors()}catch(a){this._reportError(a)}if(c)c.store=
this.trackConfig.store;return c}})})},"JBrowse/View/ConfirmDialog":function(){define(["dojo/_base/declare","dijit/focus","JBrowse/View/Dialog/WithActionBar","dojo/on","dijit/form/Button"],function(h,j,g,i,f){return h(g,{autofocus:!1,constructor:function(d){this.message=d.message||"Do you really want to do this?";this.confirmLabel=d.confirmLabel||"Yes";this.denyLabel=d.denyLabel||"No"},_fillActionBar:function(d){var b=this;(new f({className:"yes",label:this.confirmLabel,onClick:function(){b.callback(!0);
b.hide()}})).placeAt(d);(new f({className:"no",label:this.denyLabel,onClick:function(){b.callback(!1);b.hide()}})).placeAt(d)},show:function(d){this.callback=d||function(){};this.set("content",this.message);this.inherited(arguments);j.focus(this.closeButtonNode)}})})},"JBrowse/View/Track/BlockBased/Block":function(){define(["dojo/_base/declare","dijit/Destroyable"],function(h,j){return h(j,{constructor:function(g){dojo.mixin(this,g);g=this.node||{};delete this.node;this.domNode=dojo.create("div",
g)},bpToX:function(g){return(g-this.startBase)*this.scale}})})},"JBrowse/View/DetailsMixin":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/query,dojo/dom-construct,dojo/dom-class,dojo/store/Memory,dgrid/OnDemandGrid,dgrid/extensions/DijitRegistry,JBrowse/Util".split(","),function(h,j,g,i,f,d,b,e,c,a){var k=h([e,c]);return h(null,{renderDetailField:function(b,c,e,d){if(null===e||void 0===e)return"";var g;if(g=this["fmtDetail"+a.ucFirst(c)+"Field"])return g.apply(this,arguments);
var d=d||c.replace(/\s+/g,"_").toLowerCase(),h;if("object"==typeof e&&"values"in e)h=(e.meta||{}).description,j.isArray(h)&&(h=h.join(", ")),e=e.values;g=f.create("div",{className:"field_container",innerHTML:'<h2 class="field '+d+'"'+(h?' title="'+h+'"':"")+">"+c+"</h2>"},b);h=this.renderDetailValue(f.create("div",{className:"value_container "+d},g),c,e,d);if("number"==typeof h&&4<h)i("h2",g)[0].innerHTML=c+" ("+h+")";return g},renderDetailValue:function(b,c,e,i){var h=this,k;if(k=this["fmtDetail"+
a.ucFirst(c)+"Value"])return k.apply(this,arguments);k=typeof e;"function"==typeof e.toHTML&&(e=e.toHTML());if("boolean"==k)e=e?"yes":"no";else{if("undefined"==k||null===e)return 0;if(j.isArray(e))return k=g.map(e,function(a){return this.renderDetailValue(b,c,a,i)},this),10<k.length&&d.add(b,"big"),k.length;if("object"==k){var s=a.dojof.keys(e).sort();k=s.length;if(5<k)return this.renderDetailValueGrid(b,c,function(){if(!s.length)return null;var a=s.shift(),b=e[a],a={id:a},c;for(c in b)a[c]=h._valToString(b[c]);
return a},function(){if(!s.length)return{};var a=e[s[0]],b={},c;for(c in a)b[c]=a[c].meta&&a[c].meta.description||null;return b}()),k;g.forEach(s,function(a){return this.renderDetailField(b,a,e[a],i)},this);return s.length}}f.create("div",{className:"value "+i,innerHTML:e},b);return 1},renderDetailValueGrid:function(c,e,d,f){for(var e=[],g;g=d();)e.push(g);if(!e.length)return document.createElement("span");var i=[],h;for(h in e[0])(function(b){var c={label:{id:"Name"}[b]||a.ucFirst(b),field:b};c.renderHeaderCell=
function(a){if(f[b])a.title=f[b];a.appendChild(document.createTextNode(c.label||c.field))};i.push(c)})(h);c.style.overflow="hidden";c.style.width="90%";new k({columns:i,store:new b({data:e})},c);return container},_valToString:function(a){return j.isArray(a)?g.map(a,j.hitch(this,"_valToString")).join(" "):"object"==typeof a?"values"in a?this._valToString(a.values):JSON.stringify(a):""+a}})})},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(h,j,g){return h([j,
g],{})})},"dgrid/Grid":function(){define("dojo/_base/kernel,dojo/_base/declare,dojo/on,dojo/has,put-selector/put,./List,dojo/_base/sniff".split(","),function(h,j,g,i,f,d){function b(a,b){b&&b.nodeType&&a.appendChild(b)}var e=8>i("ie")&&!i("quirks"),c=/[^\._a-zA-Z0-9-]/g,j=j(d,{columns:null,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(a){return"string"==typeof a?this.columns[a]:this.cell(a).column},listType:"grid",cell:function(a,b){if(a.row&&a.row instanceof this._Row)return a;
if(a.target&&a.target.nodeType)a=a.target;var c;if(a.nodeType){do{if(this._rowIdToObject[a.id])break;var e=a.columnId;if(e){b=e;c=a;break}a=a.parentNode}while(a&&a!=this.domNode)}if(!c&&"undefined"!=typeof b){var d=this.row(a);if(e=d.element)for(var e=e.getElementsByTagName("td"),f=0;f<e.length;f++)if(e[f].columnId==b){c=e[f];break}}if(null!=a)return{row:d||this.row(a),column:b&&this.column(b),element:c}},_columnsCss:function(a){a.fullSelector=function(){return this.parent.fullSelector()+" .dgrid-cell"};
for(var b=0;b<a.children.length;b++){var c=a.children[b];c.field=c.className=c.selector.substring(1)}return a.children},createRowCells:function(a,b,d){var g=f("table.dgrid-row-table[role=presentation]"),h=9>i("ie")||i("quirks")?f(g,"tbody"):g,j,l,n,s,u,r,v,t,w,x,d=d||this.subRows;for(l=0,n=d.length;l<n;l++){r=d[l];j=1==n&&!i("ie")?h:f(h,"tr");r.className&&f(j,"."+r.className);for(s=0,u=r.length;s<u;s++){v=r[s];t=v.id;w=v.className||v.field&&"field-"+v.field;w=f(a+(".dgrid-cell.dgrid-cell-padding"+
(t?".dgrid-column-"+t:"")+(w?"."+w:"")).replace(c,"-")+"[role="+("th"===a?"columnheader":"gridcell")+"]");w.columnId=t;e?(t=f(w,"!dgrid-cell-padding div.dgrid-cell-padding"),w.contents=t):t=w;if(x=v.colSpan)w.colSpan=x;if(x=v.rowSpan)w.rowSpan=x;b(t,v);j.appendChild(w)}}return g},left:function(a,b){return this.cell(this._move(a,-(b||1),"dgrid-cell"))},right:function(a,b){return this.cell(this._move(a,b||1,"dgrid-cell"))},renderRow:function(a,c){var e=this.createRowCells("td",function(e,d){var f=a;
d.get?f=d.get(a):"field"in d&&"_item"!=d.field&&(f=f[d.field]);d.formatter?e.innerHTML=d.formatter(f):d.renderCell?b(e,d.renderCell(a,f,e,c)):null!=f&&e.appendChild(document.createTextNode(f))},c&&c.subRows);return f("div[role=row]>",e)},renderHeader:function(){var a=this,c=this.headerNode,d=c.childNodes.length;for(c.setAttribute("role","row");d--;)f(c.childNodes[d],"!");d=this.createRowCells("th",function(a,c){var d=c.headerNode=a;if(e)a=a.parentNode;var f=c.field;if(f)a.field=f;if(c.renderHeaderCell)b(d,
c.renderHeaderCell(d));else if(c.label||c.field)d.appendChild(document.createTextNode(c.label||c.field));if(!1!==c.sortable&&f&&"_item"!=f)a.sortable=!0,a.className+=" dgrid-sortable"},this.subRows&&this.subRows.headerRows);this._rowIdToObject[d.id=this.id+"-header"]=this.columns;c.appendChild(d);g(d,"click,keydown",function(b){if("click"==b.type||32==b.keyCode||!i("opera")&&13==b.keyCode){var b=b.target,e,d;do if(b.sortable)return a._sortNode=b,b=b.field||b.columnId,e=(d=a._sort[0])&&d.attribute==
b&&!d.descending,a.set("sort",b,e);while((b=b.parentNode)&&b!=c)}})},resize:function(){var a=this.headerNode.firstChild,b=this.contentNode,c;this.inherited(arguments);if(!i("ie")||7<i("ie")&&!i("quirks"))if(b.style.width="",b&&a&&(c=a.offsetWidth)!=b.offsetWidth)b.style.width=c+"px"},destroy:function(){this._destroyColumns();this.inherited(arguments)},_setSort:function(a,b){this.inherited(arguments);this._lastSortedArrow&&(f(this._lastSortedArrow,"<!dgrid-sort-up!dgrid-sort-down"),f(this._lastSortedArrow,
"!"),delete this._lastSortedArrow);if(this._sort[0]){var c=this._sort[0].attribute,e=this._sort[0].descending,d=this._sortNode,g,i,h;delete this._sortNode;if(!d)for(h in g=this.columns,g)if(i=g[h],i.field==c){d=i.headerNode;break}if(d)d=d.contents||d,this._lastSortedArrow=f(d.firstChild,"-div.dgrid-sort-arrow.ui-icon[role=presentation]"),this._lastSortedArrow.innerHTML="&nbsp;",f(d,e?".dgrid-sort-down":".dgrid-sort-up"),this.resize()}},styleColumn:function(a,b){return this.addCssRule("#"+this.domNode.id+
" .dgrid-column-"+a,b)},_configColumns:function(a,b){var c=[],e=b instanceof Array,d,f;for(d in b){f=b[d];"string"==typeof f&&(b[d]=f={label:f});if(!e&&!f.field)f.field=d;d=f.id=f.id||(isNaN(d)?d:a+d);a&&(this.columns[d]=f);this._configColumn&&this._configColumn(f,d,b,a);f.grid=this;"function"===typeof f.init&&f.init();c.push(f)}return e?b:c},_destroyColumns:function(){var a=this.subRows.length,b,c,e,d;this.cleanup();for(b=0;b<a;b++)for(c=0,d=this.subRows[b].length;c<d;c++)e=this.subRows[b][c],"function"===
typeof e.destroy&&e.destroy()},configStructure:function(){var a=this.subRows;if(a){this.columns={};for(var b=0;b<a.length;b++)a[b]=this._configColumns(b+"-",a[b])}else this.subRows=[this._configColumns("",this.columns)]},_setColumns:function(a){this._destroyColumns();this.subRows=null;this.columns=a;this._updateColumns()},_setSubRows:function(a){this._destroyColumns();this.subRows=a;this._updateColumns()},setColumns:function(a){h.deprecated("setColumns(...)",'use set("columns", ...) instead',"dgrid 1.0");
this.set("columns",a)},setSubRows:function(a){h.deprecated("setSubRows(...)",'use set("subRows", ...) instead',"dgrid 1.0");this.set("subRows",a)},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this.resize()}});j.appendIfNode=b;j.defaultRenderCell=function(a,b,c){null!=b&&c.appendChild(document.createTextNode(b))};return j})},"put-selector/put":function(){(function(h){var j,g=/[-+,> ]/;h([],j=function(i,
f){function d(c){function a(){o&&m&&o!=m&&(m==c&&(f||(f=g.test(u)&&i.createDocumentFragment()))||m).insertBefore(o,j||null)}for(var f,h,j,m,o,l=arguments,n=l[0],s=0;s<l.length;s++){var u=l[s];if("object"==typeof u){h=!1;if(u instanceof Array){o=i.createDocumentFragment();for(var r=0;r<u.length;r++)o.appendChild(d(u[r]));u=o}if(u.nodeType)o=u,a(),m=u,j=0;else for(r in u)o[r]=u[r]}else if(h)h=!1,o.appendChild(i.createTextNode(u));else{1>s&&(c=null);h=!0;if(n=u.replace(b,function(b,f,g,h,k,p){if(f){a();
if("-"==f||"+"==f){if(m=(j=o||m).parentNode,o=null,"+"==f)j=j.nextSibling}else"<"==f?m=o=(o||m).parentNode:(","==f?m=c:o&&(m=o),o=null),j=0;o&&(m=o)}if((b=!g&&h)||!o&&(g||k))"$"==b?(b=l[++s],m.appendChild(i.createTextNode(b))):(b=b||d.defaultTag,(f=e&&l[s+1]&&l[s+1].name)&&(b="<"+b+' name="'+f+'">'),o=i.createElement(b));if(g)if("$"==h&&(h=l[++s]),"#"==g)o.id=h;else if(f=(b=o.className)&&(" "+b+" ").replace(" "+h+" "," "),"."==g)o.className=b?(f+h).substring(1):h;else if("!"==u)d("div",o,"<").innerHTML=
"";else if(f=f.substring(1,f.length-1),f!=b)o.className=f;if(k)if("$"==p&&(p=l[++s]),"style"==k)o.style.cssText=p;else o["!"==k.charAt(0)?(k=k.substring(1))&&"removeAttribute":"setAttribute"](k,""===p?k:p);return""}))throw new SyntaxError("Unexpected char "+n+" in "+u);a();m=n=o||m}}c&&f&&c.appendChild(f);return n}g=f||g;var b=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,i=i||document,e="object"==typeof i.createElement;d.defaultTag="div";d.forDocument=j;
return d})})("undefined"==typeof define?function(h,j){"undefined"==typeof window?require("./node-html")(module,j):put=j()}:define)},"dgrid/List":function(){define("dojo/_base/array,dojo/_base/kernel,dojo/_base/declare,dojo/on,dojo/has,./util/misc,dojo/has!touch?./TouchScroll,xstyle/has-class,put-selector/put,dojo/_base/sniff,xstyle/css!./css/dgrid.css".split(","),function(h,j,g,i,f,d,b,e,c){function a(a){var b=a?"."+a.replace(l,"."):"";this._class&&(b="!"+this._class.replace(l,"!")+b);c(this.domNode,
b);this._class=a}function k(){return this._class}e("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var p,q=c(document.getElementsByTagName("head")[0],"style"),m=[],q=q.sheet||q.styleSheet,o=0,l=/ +/g,n=7>f("ie")&&!f("quirks")?function(){var a,b,c;if(this._started&&(a=document.documentElement,b=a.clientWidth,a=a.clientHeight,c=this._prevWinDims||[],c[0]!==b||c[1]!==a))this.resize(),this._prevWinDims=[b,a]}:function(){this._started&&this.resize()};return g(b?b:null,{tabableHeader:!1,
showHeader:!1,showFooter:!1,maintainOddEven:!0,postscript:function(a,b){var c=this;(this._Row=function(a,b,c){this.id=a;this.data=b;this.element=c}).prototype.remove=function(){c.removeRow(this.element)};if(b)this.srcNodeRef=b=b.nodeType?b:document.getElementById(b);this.create(a,b)},listType:"list",create:function(b,e){var d=this.domNode=e||c("div"),f;b?(this.params=b,g.safeMixin(this,b),f=b["class"]||b.className||d.className,this._sort=b.sort||[],delete this.sort):this._sort=[];this.observers=[];
this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=d.id=d.id||this.id||"dgrid_"+o++;this.buildRendering();f&&a.call(this,f);this.postCreate&&this.postCreate();delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var a=this.domNode,b=this,e,g,h,k;k=this.isRTL="rtl"==(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase();a.className="";c(a,"[role=grid].ui-widget.dgrid.dgrid-"+
this.listType);e=this.headerNode=c(a,"div.dgrid-header.dgrid-header-row.ui-widget-header"+(this.showHeader?"":".dgrid-header-hidden"));(f("quirks")||8>f("ie"))&&c(a,"div.dgrid-spacer");g=this.bodyNode=c(a,"div.dgrid-scroller");g.tabIndex=-1;this.headerScrollNode=c(a,"div.dgrid-header-scroll.dgrid-scrollbar-width.ui-widget-header");h=this.footerNode=c("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));c(a,h);k&&(a.className+=" dgrid-rtl"+(f("webkit")?"":" dgrid-rtl-nonwebkit"));i(g,"scroll",
function(c){if(b.showHeader)e.scrollLeft=c.scrollLeft||g.scrollLeft;c.stopPropagation();i.emit(a,"scroll",{scrollTarget:g})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=c(this.bodyNode,"div.dgrid-content.ui-widget-content");this._listeners.push(this._resizeHandle=i(window,"resize",d.throttleDelayed(n,this)))},startup:function(){this.inherited(arguments);if(!this._started)this._started=!0,this.resize(),this.set("sort",this._sort)},configStructure:function(){},resize:function(){var a=
this.bodyNode,b=this.headerNode,e=this.footerNode,d=b.offsetHeight,g=this.showFooter?e.offsetHeight:0,i=f("quirks")||7>f("ie");this.headerScrollNode.style.height=a.style.marginTop=d+"px";a.style.marginBottom=g+"px";if(i&&(a.style.height="",a.style.height=Math.max(this.domNode.offsetHeight-d-g,0)+"px",g))e.style.bottom="1px",setTimeout(function(){e.style.bottom=""},0);p||(d=c(document.body,"div.dgrid-scrollbar-measure"),p=d.offsetWidth-d.clientWidth,c(d,"!"),7===f("ie")&&p++,this.addCssRule(".dgrid-scrollbar-width",
"width: "+p+"px"),this.addCssRule(".dgrid-scrollbar-height","height: "+p+"px"),17!=p&&!i&&(this.addCssRule(".dgrid-header","right: "+p+"px"),this.addCssRule(".dgrid-rtl-nonwebkit .dgrid-header","left: "+p+"px")));if(i)b.style.width=a.clientWidth+"px",setTimeout(function(){b.scrollLeft=a.scrollLeft},0)},addCssRule:function(a,b){var c=m.length;m[c]=(q.cssRules||q.rules).length;q.addRule?q.addRule(a,b):q.insertRule(a+"{"+b+"}",m[c]);return{remove:function(){var a=m[c],b,e=m.length;if(void 0!==a){q.deleteRule?
q.deleteRule(a):q.removeRule(a);m[c]=void 0;for(b=c;b<e;b++)m[b]>a&&m[b]--}}}},on:function(a,b){var c=i(this.domNode,a,b);f("dom-addeventlistener")||this._listeners.push(c);return c},cleanup:function(){var a=this.observers,b;for(b in this._rowIdToObject)if(this._rowIdToObject[b]!=this.columns){var c=document.getElementById(b);c&&this.removeRow(c,!0)}for(b=0;b<a.length;b++)(c=a[b])&&c.cancel();this.observers=[];this.preload=null},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();
delete this._listeners}this.cleanup();c(this.domNode,"!")},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},newRow:function(a,b,e,d){if(!b||b.parentNode){var f=this.insertRow(a,b?b.parentNode:this.contentNode,b,d.start+e,d);c(f,".ui-state-highlight");setTimeout(function(){c(f,"!ui-state-highlight")},250);return f}},adjustRowIndices:function(a){if(this.maintainOddEven){var b=a.rowIndex;if(-1<b){do if(-1<a.rowIndex)-1<(a.className+
" ").indexOf("dgrid-row ")&&c(a,"."+(1==b%2?"dgrid-row-odd":"dgrid-row-even")+"!"+(0==b%2?"dgrid-row-odd":"dgrid-row-even")),a.rowIndex=b++;while((a=a.nextSibling)&&a.rowIndex!=b)}}},renderArray:function(a,b,c){function e(a){p=f.insertRow(a,m,null,g++,c);p.observerIndex=j;return p}function d(a){if(k=b?b.parentNode:f.contentNode)k.insertBefore(m,b||null),(p=a[a.length-1])&&f.adjustRowIndices(p);return h=a}var c=c||{},f=this,g=c.start||0,i,h,k;if(!b)this._lastCollection=a;if(a.observe)var j=this.observers.push(a.observe(function(a,
b,e){var d,g;if(-1<b&&h[b]){i=h.splice(b,1)[0];if(i.parentNode==k)(d=i.nextSibling)&&b!=e&&d.rowIndex--,f.removeRow(i);f._processScroll&&f._processScroll()}if(-1<e){g=h[e];if(!g&&(g=h[e-1]))g=(g.connected||g).nextSibling;if(i=f.newRow(a,g,e,c))if(i.observerIndex=j,h.splice(e,0,i),!d||e<b)a=i.previousSibling,d=!a||a.rowIndex+1==i.rowIndex||0==i.rowIndex?i:a;c.count++}b!=e&&d&&f.adjustRowIndices(d)},!0))-1;var m=document.createDocumentFragment();if(a.map){if(h=a.map(e,console.error),h.then)return h.then(d)}else{h=
[];for(var l=0,o=a.length;l<o;l++)h[l]=e(a[l])}var p;return d(h)},renderHeader:function(){},_autoId:0,insertRow:function(a,b,c,e,d){var f=d.parentId,f=this.id+"-row-"+(f?f+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(a):this._autoId++),g=document.getElementById(f),i=g&&g.previousSibling;if(!g||c&&g.parentNode!=c.parentNode)g&&this.removeRow(g),g=this.renderRow(a,d),g.className=(g.className||"")+" ui-state-default dgrid-row "+(1==e%2?"dgrid-row-odd":"dgrid-row-even"),this._rowIdToObject[g.id=
f]=a;b.insertBefore(g,c||null);i&&this.adjustRowIndices(i);g.rowIndex=e;return g},renderRow:function(a){return c("div",""+a)},removeRow:function(a,b){a=a.element||a;delete this._rowIdToObject[a.id];b||c(a,"!")},row:function(a){var b;if(a instanceof this._Row)return a;if(a.target&&a.target.nodeType)a=a.target;if(a.nodeType){do{var c=a.id;if(b=this._rowIdToObject[c])return new this._Row(c.substring(this.id.length+5),b,a);a=a.parentNode}while(a&&a!=this.domNode)}else return"object"==typeof a?b=this.store.getIdentity(a):
(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,document.getElementById(this.id+"-row-"+b))},cell:function(a){return{row:this.row(a)}},_move:function(a,b,c,e){var d,f;f=d=a.element;b=b||1;do if(a=d[0>b?"previousSibling":"nextSibling"]){do if((d=a)&&-1<(d.className+" ").indexOf(c+" ")){f=d;b+=0>b?1:-1;break}while(a=(!e||!d.hidden)&&d[0>b?"lastChild":"firstChild"])}else if(d=d.parentNode,d===this.bodyNode||d===this.headerNode)break;while(b);return f},up:function(a,b,c){return this.row(this._move(a,
-(b||1),"dgrid-row",c))},down:function(a,b,c){return this.row(this._move(a,b||1,"dgrid-row",c))},scrollTo:f("touch")?function(){return this.inherited(arguments)}:function(a){if("undefined"!==typeof a.x)this.bodyNode.scrollLeft=a.x;if("undefined"!==typeof a.y)this.bodyNode.scrollTop=a.y},getScrollPosition:f("touch")?function(){return this.inherited(arguments)}:function(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}},get:function(a){var b="_get"+a.charAt(0).toUpperCase()+a.slice(1);
return"function"===typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"===typeof a)for(var c in a)this.set(c,a[c]);else c="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[c]?this[c].apply(this,[].slice.call(arguments,1)):this[a]=b;return this},_getClass:k,_setClass:a,_getClassName:k,_setClassName:a,_setSort:function(a,b){this._sort="string"!=typeof a?a:[{attribute:a,descending:b}];this.refresh();if(this._lastCollection){if(a.length){if("string"!=
typeof a)b=a[0].descending,a=a[0].attribute;this._lastCollection.sort(function(c,e){var d=c[a],f=e[a];void 0===d&&(d="");void 0===f&&(f="");return d==f?0:d>f==!b?1:-1})}this.renderArray(this._lastCollection)}},sort:function(a,b){j.deprecated("sort(...)",'use set("sort", ...) instead',"dgrid 1.0");this.set("sort",a,b)},_getSort:function(){return this._sort},_setShowHeader:function(a){var b=this.headerNode;this.showHeader=a;c(b,(a?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();if(a)b.scrollLeft=
this.getScrollPosition().x},setShowHeader:function(a){j.deprecated("setShowHeader(...)",'use set("showHeader", ...) instead',"dgrid 1.0");this.set("showHeader",a)},_setShowFooter:function(a){this.showFooter=a;c(this.footerNode,(a?"!":".")+"dgrid-footer-hidden");this.resize()}})})},"dgrid/util/misc":function(){define([],function(){var h={defaultDelay:15,throttle:function(j,g,i){var f=!1,i=i||h.defaultDelay;return function(){f||(f=!0,j.apply(g,arguments),setTimeout(function(){f=!1},i))}},throttleDelayed:function(j,
g,i){var f=!1,i=i||h.defaultDelay;return function(){if(!f){f=!0;var d=arguments;setTimeout(function(){f=!1;j.apply(g,d)},i)}}},debounce:function(j,g,i){var f,i=i||h.defaultDelay;return function(){f&&(clearTimeout(f),f=null);var d=arguments;f=setTimeout(function(){j.apply(g,d)},i)}}};return h})},"xstyle/has-class":function(){define(["dojo/has"],function(h){var j={};return function(){for(var g,i=arguments,f=0;f<i.length;f++)if(g=i[f],!j[g]){j[g]=!0;var d=g.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),
b=h(d[2]),e=-d[4];if((0<e?e<=b&&(-d[5]||e)>=b:!!b)==!d[1])document.documentElement.className+=" has-"+g}}})},"xstyle/css":function(){define(["require"],function(h){var j=window.cssCache||(window.cssCache={});return{load:function(g,i,f){var d=i.toUrl(g);if(j[d])return createStyleSheet(j[d]);var b=document.documentElement,e=b.insertBefore(document.createElement("div"),b.firstChild);e.id=i.toAbsMid(g).replace(/\//g,"-").replace(/\..*/,"")+"-loaded";g=(e.currentStyle||getComputedStyle(e,null)).display;
b.removeChild(e);if("none"==g)return f();h(["./load-css"],function(b){b(d,f)})},pluginBuilder:"xstyle/css-builder"}})},"dgrid/OnDemandList":function(){define("./List,./_StoreMixin,dojo/_base/declare,dojo/_base/lang,dojo/_base/Deferred,dojo/on,./util/misc,put-selector/put".split(","),function(h,j,g,i,f,d,b,e){return g([h,j],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,rowHeight:22,queryRowsOverlap:1,pagingDelay:b.defaultDelay,postCreate:function(){this.inherited(arguments);
var c=this;d(this.bodyNode,"scroll",b.throttleDelayed(function(a){c._processScroll(a)},null,this.pagingDelay))},renderQuery:function(b,a,d){var g={query:b,count:0,node:a,options:d};if(!a){var h={node:e(this.contentNode,"div.dgrid-preload",{rowIndex:0}),count:0,query:b,next:g,options:d};g.node=a=e(this.contentNode,"div.dgrid-preload");g.previous=h}a.rowIndex=this.minRowsPerPage;(h=this.preload)?((g.next=h.next)&&this.bodyNode.scrollTop>=h.node.offsetTop?g.previous=h:(g.next=h,g.previous=h.previous),
g.previous.next=g,g.next.previous=g):this.preload=g;var j=e(a,"-div.dgrid-loading");e(j,"div.dgrid-below").innerHTML=this.loadingMessage;var d=i.mixin(this.get("queryOptions"),d,{start:0,count:this.minRowsPerPage,query:b}),o=b(d),l=this;f.when(this.renderArray(o,a,d),function(b){return f.when(o.total||o.length,function(c){e(j,"!");var d=b.length,c=c||d;if(!c)l.noDataNode=e(l.contentNode,"div.dgrid-no-data"),l.noDataNode.innerHTML=l.noDataMessage;for(var f=0,i=0;i<d;i++)f+=l._calcRowHeight(b[i]);if(d&&
f)l.rowHeight=f/d;c-=d;g.count=c;a.rowIndex=d;c?a.style.height=Math.min(c*l.rowHeight,l.maxEmptySpace)+"px":a.style.display="none";l._processScroll();return b})});return o},refresh:function(){this.inherited(arguments);if(this.store){var b=this;this._trackError(function(){return b.renderQuery(function(a){return b.store.query(b.query,a)})})}},_calcRowHeight:function(b){var a=b.previousSibling;return a&&a.offsetTop!=b.offsetTop?b.offsetHeight:0},lastScrollTop:0,_processScroll:function(b){function a(a,
b,c,f){var i=g.farOffRemoval,h=a.node;if(b>2*i){for(var j,m=h[c],t=0,l=0,o=[];j=m;){var n=g._calcRowHeight(j);if(t+n+i>b||0>m.className.indexOf("dgrid-row")&&0>m.className.indexOf("dgrid-loading"))break;var m=j[c],w,q=j.observerIndex;if(q!=w&&-1<w){var u=g.observers,v=u[w];v&&v.cancel();u[w]=0}t+=n;l+=j.count||1;w=q;g.removeRow(j,!0);o.push(j)}a.count+=l;f?(h.rowIndex-=l,d(a)):h.style.height=h.offsetHeight+t+"px";for(var x=e("div"),a=0;a<o.length;a++)e(x,o[a]);setTimeout(function(){e(x,"!")},1)}}
function d(a,b){a.node.style.height=Math.min(a.count*g.rowHeight,b?Infinity:g.maxEmptySpace)+"px"}var g=this,h=g.bodyNode,b=b&&b.scrollTop||h.scrollTop,j=h.offsetHeight+b,o,l,n=g.preload,s=g.lastScrollTop,u=g.bufferRows*g.rowHeight,r=u-g.rowHeight;for(g.lastScrollTop=b;n&&!n.node.offsetWidth;)n=n.previous;for(;n&&n!=o;){o=g.preload;g.preload=n;l=n.node;var v=l.offsetTop;if(j+1+r<v){do n=n.previous;while(n&&!n.node.offsetWidth)}else if(b-1-r>v+l.offsetHeight){do n=n.next;while(n&&!n.node.offsetWidth)
}else{var t=((l.rowIndex?b-u:j)-v)/g.rowHeight,v=(j-b+2*u)/g.rowHeight,w=Math.max(Math.min((b-s)*g.rowHeight,g.maxRowsPerPage/2),g.maxRowsPerPage/-2),v=v+Math.min(Math.abs(w),10);0==l.rowIndex&&(t-=v);t=Math.max(t,0);10>t&&0<t&&v+t<g.maxRowsPerPage&&(v+=Math.max(0,t),t=0);v=Math.min(Math.max(v,g.minRowsPerPage),g.maxRowsPerPage,n.count);if(0==v)break;var v=Math.ceil(v),t=Math.min(Math.floor(t),n.count-v),x=i.mixin(g.get("queryOptions"),n.options);n.count-=v;var B=l,A,E=g.queryRowsOverlap;if(w=0<l.rowIndex&&
n){var H=n.previous;H&&(a(H,b-(H.node.offsetTop+H.node.offsetHeight),"nextSibling"),0<t&&H.node==l.previousSibling?(t=Math.min(n.count,t),n.previous.count+=t,d(n.previous,!0),n.count-=t,l.rowIndex+=t,E=0):v+=t);x.start=l.rowIndex-E;l.rowIndex+=v}else{if(n.next)a(n.next,n.next.node.offsetTop-j,"previousSibling",!0),B=l.nextSibling,B==n.next.node?(n.next.count+=n.count-t,n.next.node.rowIndex=t+v,d(n.next),n.count=t,E=0):A=!0;x.start=n.count}x.count=Math.min(v+E,g.maxRowsPerPage);if(A)A=B.offsetTop;
d(n);l=e(B,"-div.dgrid-loading[style=height:"+v*g.rowHeight+"px]");e(l,"div.dgrid-"+(w?"below":"above")).innerHTML=g.loadingMessage;l.count=v;x.query=n.query;var Q=n.query(x);if(void 0===g._trackError(function(){return Q}))break;(function(a,b,c,i,h){f.when(g.renderArray(h,a,x),function(){B=a.nextSibling;e(a,"!");if(i&&B){var b=g.getScrollPosition();g.scrollTo({x:b.x,y:b.y+B.offsetTop-i,preserveMomentum:!0})}c&&f.when(h.total||h.length,function(a){c.count=a-c.node.rowIndex;d(c)});g._processScroll()})}).call(this,
l,h,w,A,Q);n=n.previous}}}})})},"dgrid/_StoreMixin":function(){define("dojo/_base/kernel,dojo/_base/declare,dojo/_base/lang,dojo/_base/Deferred,dojo/on,put-selector/put".split(","),function(h,j,g,i,f,d){function b(b){"object"!==typeof b&&(b=Error(b));b.grid=this;f.emit(this.domNode,"dgrid-error",{grid:this,error:b,cancelable:!0,bubbles:!0})&&console.error(b)}return j(null,{store:null,query:null,queryOptions:null,getBeforePut:!0,noDataMessage:"",loadingMessage:"",constructor:function(){this.query=
{};this.queryOptions={};this.dirty={};this._updating={}},_configColumn:function(b){if(b.set){if(!this._columnsWithSet)this._columnsWithSet={};this._columnsWithSet[b.field]=b}},_configColumns:function(){this._columnsWithSet=null;return this.inherited(arguments)},_setStore:function(b,c,a){this.store=b;this.dirty={};this.set("query",c,a)},_setQuery:function(b,c){var a=c&&c.sort;this.query=void 0!==b?b:this.query;this.queryOptions=c||this.queryOptions;a?this.set("sort",a):this.refresh()},setStore:function(b,
c,a){h.deprecated("setStore(...)",'use set("store", ...) instead',"dgrid 1.0");this.set("store",b,c,a)},setQuery:function(b,c){h.deprecated("setQuery(...)",'use set("query", ...) instead',"dgrid 1.0");this.set("query",b,c)},_getQueryOptions:function(){var b=g.delegate(this.queryOptions,{});if(this._sort.length)b.sort=this._sort;return b},_getQuery:function(){var b=this.query;return"object"==typeof b&&null!=b?g.delegate(b,{}):b},_setSort:function(b,c){if(this.store)this._lastCollection=null;this.inherited(arguments)},
insertRow:function(b,c,a,d,f){var i=this.store,h=this.dirty,i=i&&i.getIdentity(b),j;i in h&&!(i in this._updating)&&(j=h[i]);j&&(b=g.delegate(b,j));return this.inherited(arguments)},updateDirty:function(b,c,a){var d=this.dirty,f=d[b];f||(f=d[b]={});f[c]=a},setDirty:function(b,c,a){h.deprecated("setDirty(...)","use updateDirty() instead","dgrid 1.0");this.updateDirty(b,c,a)},save:function(){function b(e,f){return function(b){var g=c._columnsWithSet,h=c._updating,j,m;for(j in f)b[j]=f[j];if(g)for(j in g)m=
g[j].set(b),void 0!==m&&(b[j]=m);h[e]=!0;return i.when(a.put(b),function(){delete d[e];delete h[e]})}}var c=this,a=this.store,d=this.dirty,f=new i,g=f.promise,h=function(b){var e;return c.getBeforePut||!(e=c.row(b).data)?function(){return a.get(b)}:function(){return e}},j;for(j in d)var l=b(j,d[j]),g=g.then(h(j)).then(l);f.resolve();return g},revert:function(){this.dirty={};this.refresh()},_trackError:function(e){var c;"string"==typeof e&&(e=g.hitch(this,e));try{c=e()}catch(a){b.call(this,a)}return i.when(c,
null,g.hitch(this,b))},newRow:function(){this.noDataNode&&(d(this.noDataNode,"!"),delete this.noDataNode);return this.inherited(arguments)},removeRow:function(b,c){var a={element:b};if(!c&&this.noDataMessage&&this.up(a).element===b&&this.down(a).element===b)this.noDataNode=d(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage;return this.inherited(arguments)}})})},"dgrid/extensions/DijitRegistry":function(){define(["dojo/_base/declare","dijit/registry"],function(h,j){return h(null,
{buildRendering:function(){j.add(this);this.inherited(arguments);this.domNode.setAttribute("widgetId",this.id)},startup:function(){if(!this._started){this.inherited(arguments);var g=j.getEnclosingWidget(this.domNode.parentNode);g&&g.isLayoutContainer&&this._resizeHandle.remove()}},destroyRecursive:function(){this.destroy()},destroy:function(){this.inherited(arguments);j.remove(this.id)},getChildren:function(){return[]}})})},"JBrowse/View/Track/GridLines":function(){define(["dojo/_base/declare","dojo/dom-construct",
"JBrowse/View/Track/BlockBased"],function(h,j,g){return dojo.declare(g,{constructor:function(){this.loaded=!0;this.name="gridlines"},makeTrackLabel:function(){},makeTrackMenu:function(){},fillBlock:function(g){this.renderGridlines(g.block,g.leftBase,g.rightBase);var f=this.browser.getHighlight();f&&f.ref==this.refSeq.name&&this.renderRegionHighlight(g,f);g.finishCallback();this.heightUpdate(100,g.blockIndex)},renderGridlines:function(g,f,d){for(var f=d-f,f=!(f%20)?20:!(f%10)?10:!(f%5)?5:!(f%2)?2:
0,d=function(b,a){var e=document.createElement("div");e.style.cssText="left: "+a+"%; width: 0px";e.className="gridline "+b;return e},b=0;b<f;b++){var e=100/f*b;g.domNode.appendChild(d(0==e||20==f&&10==b?"gridline_major":"gridline_minor",e))}}})})},"JBrowse/BehaviorManager":function(){define([],function(){function h(h){this.context=h.context;this.behaviors=h.behaviors}h.prototype.initialize=function(){this.removeAll();for(var h in this.behaviors)this.behaviors[h].apply_on_init&&this.applyBehaviors(h)};
h.prototype.applyBehaviors=function(){dojo.forEach(arguments,function(h){h=this._get(h);if(!h.applied)h.handles=h.handles||[],h.handles=h.apply.call(this.context||this,this,h.handles),h.applied=!0},this)};h.prototype._get=function(h){h=this.behaviors[h];if(!h)throw"no behavior registed with name ''name";return h};h.prototype.swapBehaviors=function(h,g){this.removeBehaviors(h);this.applyBehaviors(g)};h.prototype.removeBehaviors=function(){dojo.forEach(arguments,function(h){h=this._get(h);if(h.applied)(h.remove||
function(g,i){dojo.forEach(i,dojo.disconnect,dojo)}).call(this.context||this,this,h.handles),h.applied=!1},this)};h.prototype.removeAll=function(){for(var h in this.behaviors)this.removeBehaviors(h)};return h})},"JBrowse/View/Animation/Zoomer":function(){define(["JBrowse/View/Animation"],function(h){function j(g,i,f,d,b){h.call(this,i,f,d);this.toZoom=i.zoomContainer;this.initialWidth=f=this.toZoom.clientWidth;this.width0=f*Math.min(1,g);this.distance=f*Math.max(1,g)-this.width0;this.zoomingIn=1<
g;this.center=(i.getX()+i.elem.clientWidth*b)/i.scrollContainer.clientWidth;this.initialX=this.subject.getX();this.initialLeft=parseInt(this.toZoom.style.left)}j.prototype=new h;j.prototype.step=function(g){var g=this.zoomingIn?g:1-g,g=g*g*this.distance+this.width0,i=this.center*this.initialWidth-this.center*g;this.toZoom.style.width=g+"px";this.toZoom.style.left=this.initialLeft+i+"px";this.subject.updateStaticElements&&this.subject.updateStaticElements({x:this.initialX-i})};return j})},"JBrowse/View/Animation":function(){define([],
function(){function h(h,g,i){if(void 0!==h){"animation"in h&&h.animation.stop();this.index=0;this.time=i;this.subject=h;this.callback=g;var f=this;this.animFunction=function(){f.animate()};this.animID=setTimeout(this.animFunction,33);this.frames=0;h.animation=this}}h.prototype.animate=function(){if(this.finished)this.stop();else{var h=33,g=0;"startTime"in this?(g=(new Date).getTime()-this.startTime,h=Math.max(33,g/this.frames)):this.startTime=(new Date).getTime();g<this.time?(this.step(g/this.time),
this.frames++):(this.step(1),this.finished=!0);this.animID=setTimeout(this.animFunction,h)}};h.prototype.stop=function(){clearTimeout(this.animID);delete this.subject.animation;this.callback.call(this.subject,this)};return h})},"JBrowse/View/Animation/Slider":function(){define(["JBrowse/View/Animation"],function(h){function j(g,i,f,d){h.call(this,g,i,f);this.slideStart=g.getX();this.slideDistance=d}j.prototype=new h;j.prototype.step=function(g){g=this.slideStart-this.slideDistance*(-0.5*Math.cos(g*
Math.PI)+0.5)|0;g=Math.max(Math.min(this.subject.maxLeft-this.subject.offset,g),this.subject.minLeft-this.subject.offset);this.subject.setX(g)};return j})},"JBrowse/TouchScreenSupport":function(){define([],function(){var h,j,g;return g={CompareObjPos:function(g,f){for(var d=0,b=0,e=f.pageY,c=0;c<g.length&&!(d=b++,findPos(g[c]).top>e);c++);return d},checkAvatarPosition:function(g){var f=document.getElementById("tracksAvail"),d=document.getElementById("container");return g.pageX<f.offsetLeft+f.offsetWidth?
f:d},removeTouchEvents:function(){h=null},touchSimulated:function(i){if(1>=i.touches.length){var f=i.changedTouches[0],d="",b=document.getElementsByClassName("dojoDndAvatar"),e={},c=g.checkAvatarPosition(f),a=c.getElementsByClassName("dojoDndItem"),d={},k=document.createEvent("MouseEvent"),p=document.createEvent("MouseEvent");switch(i.type){case "touchstart":h=f.pageX;d="mousedown";break;case "touchmove":i.preventDefault();d="mousemove";break;default:return}k.initMouseEvent(d,!0,!0,window,1,f.pageX,
f.pageY,f.clientX,f.clientY,!1,!1,!1,!1,0,null);p.initMouseEvent("mouseover",!0,!0,window,1,f.pageX,f.pageY,f.clientX,f.clientY,!1,!1,!1,!1,0,null);switch(i.type){case "touchstart":f.target.dispatchEvent(k);f.target.dispatchEvent(p);j=c;break;case "touchmove":if(0<b.length){0<a.length&&(d=g.CompareObjPos(a,f),e=a[d]);try{if(j!=c){var q=document.createEvent("MouseEvent");q.initMouseEvent("mouseout",!0,!0,window,1,f.pageX,f.pageY,f.clientX,f.clientY,!1,!1,!1,!1,0,null);j.dispatchEvent(q)}e.dispatchEvent(p);
e.dispatchEvent(k)}catch(m){c.dispatchEvent(p),c.dispatchEvent(k)}}}}else g.removeTouchEvents()},touchEnd:function(i){var f=i.changedTouches[0],d=document.getElementsByClassName("dojoDndAvatar"),b={},e=g.checkAvatarPosition(f),c=e.getElementsByClassName("dojoDndItem"),a={},k=document.createEvent("MouseEvent"),j=document.createEvent("MouseEvent");h!==f.pageX&&i.preventDefault();g.findPos(f.target);k.initMouseEvent("mouseup",!0,!0,window,1,f.pageX,f.pageY,f.clientX,f.clientY,!1,!1,!1,!1,0,null);j.initMouseEvent("mouseover",
!0,!0,window,1,f.pageX,f.pageY,f.clientX,f.clientY,!1,!1,!1,!1,0,null);if(0<d.length){0<c.length&&(a=CompareObjPos(c,f),b=c[a]);try{b.dispatchEvent(j),b.dispatchEvent(k)}catch(q){f.target.dispatchEvent(j),e.dispatchEvent(j)}}else f.target.dispatchEvent(k),f.target.dispatchEvent(j);g.removeTouchEvents()},touchHandle:function(i){dojo.query(".dojoDndItemAnchor").connect("touchstart",g.touchSimulated);dojo.query(".dojoDndItemAnchor").connect("touchmove",g.touchSimulated);dojo.query(".dojoDndItemAnchor").connect("touchend",
g.touchEnd);dojo.query(".dojoDndItemAnchor").connect("click",function(){});if(1>=i.touches.length){var f=i.changedTouches[0],d="";switch(i.type){case "touchstart":h=f.pageX;d="mousedown";break;case "touchmove":i.preventDefault();d="mousemove";break;case "touchend":h!==f.pageX&&i.preventDefault();d="mouseup";break;default:return}i=document.createEvent("MouseEvent");i.initMouseEvent(d,!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null);f.target.dispatchEvent(i)}else g.removeTouchEvents()},
touchinit:function(){dojo.query(".dojoDndItem").connect("touchstart",g.touchSimulated);dojo.query(".dojoDndItem").connect("touchmove",g.touchSimulated);dojo.query(".dojoDndItem").connect("touchend",g.touchEnd);dojo.query(".locationThumb").connect("touchstart",g.touchHandle);dojo.query(".locationThumb").connect("touchmove",g.touchHandle);dojo.query(".locationThumb").connect("touchend",g.touchHandle);dojo.query(".dojoDndItem").connect("click",function(){});dojo.query(".dojoDndTarget").connect("touchstart",
g.touchHandle);dojo.query(".dojoDndTarget").connect("touchmove",g.touchHandle);dojo.query(".dojoDndTarget").connect("touchend",g.touchHandle);dojo.query(".dijitSplitter").connect("touchstart",g.touchHandle);dojo.query(".dijitSplitter").connect("touchmove",g.touchHandle);dojo.query(".dijitSplitter").connect("touchend",g.touchHandle)},loadTouch:function(){g.touchinit();document.documentElement.style.webkitTouchCallout="none"},findPos:function(g){var f=0,d={};if(g.offsetParent){do f+=g.offsetTop;while(g=
g.offsetParent)}d.top=f;return d}}})},"JBrowse/ConfigManager":function(){define(["dojo/_base/declare","JBrowse/Util"],function(h,j){return h(null,{constructor:function(g){this.config=dojo.clone(g.config||{});this.defaults=dojo.clone(g.defaults||{});this.browser=g.browser;this.skipValidation=g.skipValidation;this.topLevelIncludes=this.config.include||this.defaults.include;delete this.defaults.include;delete this.config.include},getFinalConfig:function(g){this._loadIncludes({include:this.topLevelIncludes},
dojo.hitch(this,function(i){this._mergeConfigs(i,this.config);this.config=i;this.config=this._applyDefaults(this.config,this.defaults);this.skipValidation||this._validateConfig(this.config);g(this.config)}))},_getConfigAdaptor:function(g,i){var f="JBrowse/ConfigAdaptor/"+g.format;"version"in g&&(f+="_v"+g.version);f.replace(/\W/g,"");return require([f],function(d){i(new d(g))})},_loadIncludes:function(g,i){var g=dojo.clone(g),f=g.include||[];delete g.include;"object"!=typeof f&&(f=[f]);for(var d=
0;d<f.length;d++)"string"==typeof f[d]&&(f[d]={url:f[d]});var b=f.length,e=dojo.map(f,function(c){var a={};if(!c)return a;if(!("format"in c))c.format="JB_json";if("JB_json"==c.format&&!("version"in c))c.version=1;this._getConfigAdaptor(c,dojo.hitch(this,function(d){d?d.load({config:c,baseUrl:g.baseUrl,onSuccess:dojo.hitch(this,function(c){this._loadIncludes(c,dojo.hitch(this,function(c){a.loaded=!0;a.data=c;--b||i(this._mergeIncludes(g,e))}))}),onFailure:dojo.hitch(this,function(c){a.error=c;404!=
c.status&&this._fatalError(c);--b||i(this._mergeIncludes(g,e))})}):a.error="Could not load config "+c.url+", no configuration adaptor found for config format "+c.format+" version "+c.version}));return a},this);e.length||i(g)},_mergeIncludes:function(g,i){dojo.forEach(i,function(f){f.loaded&&f.data&&this._mergeConfigs(g,f.data)},this);return g},_applyDefaults:function(g,i){return j.deepUpdate(dojo.clone(i),g)},_validateConfig:function(g){(!g.tracks||!g.tracks.length)&&this._fatalError("No tracks defined in configuration.");
g.baseUrl||this._fatalError("Must provide a <code>baseUrl</code> in configuration");if(this.hasFatalErrors)throw"Errors in configuration, cannot start.";},_fatalError:function(g){this.hasFatalErrors=!0;g.url&&(g=g+" when loading "+g.url);this.browser.fatalError(g)},_mergeConfigs:function(g,i){for(var f in i)if("tracks"==f&&f in g)this._mergeTrackConfigs(g[f],i[f]);else if(f in g&&"object"==typeof i[f]&&"object"==typeof g[f])this._mergeConfigs(g[f],i[f]);else if("undefined"==typeof g[f]||"undefined"!=
typeof i[f])g[f]=i[f];return g},_mergeTrackConfigs:function(g,i){if(i.length){var f={};dojo.forEach(g,function(d,b){d.index=b;f[d.label]=d});dojo.forEach(i,function(d){var b=f[d.label];b?this._mergeConfigs(b,d):g.push(d)},this)}}})})},"JBrowse/View/FileDialog":function(){define("dojo/_base/declare,dojo/_base/array,dojo/aspect,dijit/focus,dijit/form/Button,dijit/form/RadioButton,dojo/dom-construct,dijit/Dialog,dojox/form/Uploader,dojox/form/uploader/plugins/IFrame,./FileDialog/ResourceList,./FileDialog/TrackList".split(","),
function(h,j,g,i,f,d,b,e,c,a,k,p){return h(null,{constructor:function(a){this.browser=a.browser;this.config=dojo.clone(a.config||{});this.browserSupports={dnd:"draggable"in document.createElement("span")}},_makeActionBar:function(a,c){var e=b.create("div",{className:"dijitDialogPaneActionBar"}),g=this.trackDispositionChoice=[new d({id:"openImmediately",value:"openImmediately",checked:!0}),new d({id:"addToTrackList",value:"addToTrackList"})],i=b.create("div",{className:"aux"},e);g[0].placeAt(i);b.create("label",
{"for":"openImmediately",innerHTML:"Open immediately"},i);g[1].placeAt(i);b.create("label",{"for":"addToTrackList",innerHTML:"Add to tracks"},i);(new f({iconClass:"dijitIconDelete",label:"Cancel",onClick:dojo.hitch(this,function(){c&&c();this.dialog.hide()})})).placeAt(e);(new f({iconClass:"dijitIconFolderOpen",label:"Open",onClick:dojo.hitch(this,function(){a&&a({trackConfs:this.trackList.getTrackConfigurations(),trackDisposition:this.trackDispositionChoice[0].checked?this.trackDispositionChoice[0].value:
this.trackDispositionChoice[1].checked?this.trackDispositionChoice[1].value:void 0});this.dialog.hide()})})).placeAt(e);return{domNode:e}},show:function(a){var c=this.dialog=new e({title:"Open files",className:"fileDialog"}),d=this._makeLocalFilesControl(),f=this._makeRemoteURLsControl(),h=this._makeResourceListControl(),k=this._makeTrackListControl(),a=this._makeActionBar(a.openCallback,a.cancelCallback);dojo.connect(d.uploader,"onChange",function(){h.addLocalFiles(d.uploader._files)});dojo.connect(f,
"onChange",function(a){h.clearURLs();h.addURLs(a)});dojo.connect(h,"onChange",function(a){k.update(a)});f=[b.create("div",{className:"intro",innerHTML:"Add any combination of data files and URLs, and JBrowse will automatically suggest tracks to display their contents."}),function(a,c){var e=b.create("div",a);j.forEach(c,dojo.hitch(e,"appendChild"));return e}({className:"resourceControls"},[d.domNode,f.domNode]),h.domNode,k.domNode,a.domNode];c.set("content",f);c.show();g.after(c,"hide",dojo.hitch(this,
function(){i.curNode&&i.curNode.blur();setTimeout(function(){c.destroyRecursive()},500)}))},_makeLocalFilesControl:function(){var a=b.create("div",{className:"localFilesControl"});b.create("h3",{innerHTML:"Local files"},a);var c=b.create("div",{className:"dragArea"},a),e=new dojox.form.Uploader({multiple:!0});e.placeAt(c);this.browserSupports.dnd&&(e.addDropTarget(this.dialog.domNode),b.create("div",{className:"dragMessage",innerHTML:"Select or drag files here."},c));b.create("div",{className:"connector",
innerHTML:"&nbsp;"},a);return{domNode:a,uploader:e}},_makeRemoteURLsControl:function(){var a=b.create("div",{className:"remoteURLsControl"});b.create("h3",{innerHTML:"Remote URLs - <smaller>one per line</smaller>"},a);var c={domNode:a,onChange:function(){}};c.input=b.create("textarea",{className:"urlInput",placeHolder:"http://paste.urls.here/example.bam",cols:25,rows:5,spellcheck:!1},a);var e="",d=function(){if(c.input.value.replace(/\s+/g,",")!=e){var a=dojo.trim(c.input.value),a=a.length?a.split(/\s+/):
[];c.onChange(a);e=c.input.value.replace(/\s+/g,",")}window.setTimeout(d,900)};window.setTimeout(d,900);b.create("div",{className:"connector",innerHTML:"&nbsp;"},a);return c},_makeResourceListControl:function(){return new k({dialog:this})},_makeTrackListControl:function(){var a=new p({browser:this.browser});return this.trackList=a}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(h,j,g){return h("dijit.form.RadioButton",[j,g],{baseClass:"dijitRadio"})})},
"dijit/form/CheckBox":function(){define("require,dojo/_base/declare,dojo/dom-attr,dojo/has,dojo/query,dojo/ready,./ToggleButton,./_CheckBoxMixin,dojo/text!./templates/CheckBox.html,dojo/NodeList-dom".split(","),function(h,j,g,i,f,d,b,e,c){i("dijit-legacy-requires")&&d(0,function(){h(["dijit/form/RadioButton"])});return j("dijit.form.CheckBox",[b,e],{templateString:c,baseClass:"dijitCheckBox",_setValueAttr:function(a,b){"string"==typeof a&&(this.inherited(arguments),a=!0);this._created&&this.set("checked",
a,b)},_getValueAttr:function(){return this.checked?this.value:!1},_setIconClassAttr:null,postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=this.checked?"checked":""},_fillContent:function(){},_onFocus:function(){this.id&&f("label[for='"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&f("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare",
"dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(h,j,g,i){return h("dijit.form.ToggleButton",[g,i],{baseClass:"dijitToggleButton",setChecked:function(f){j.deprecated("setChecked("+f+") is deprecated. Use set('checked',"+f+") instead.","","2.0");this.set("checked",f)}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(h,j){return h("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(g){var i=
this.checked;this._set("checked",!i);var f=this.inherited(arguments);this.set("checked",f?this.checked:i);return f},_setCheckedAttr:function(g,i){this._set("checked",g);var f=this.focusNode||this.domNode;j.set(f,"checked",!!g);g?f.setAttribute("checked",""):f.removeAttribute("checked");f.setAttribute(this._aria_attr,""+g);this._handleOnChange(g,i)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare",
"dojo/dom-attr","dojo/_base/event"],function(h,j,g){return h("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(g){this._set("readOnly",g);j.set(this.focusNode,"readOnly",g)},_setLabelAttr:void 0,_getSubmitValue:function(g){return!g&&0!==g?"on":g},_setValueAttr:function(g){g=this._getSubmitValue(g);this._set("value",g);j.set(this.focusNode,"value",g)},reset:function(){this.inherited(arguments);this._set("value",this.params.value||
"on");j.set(this.focusNode,"value",this.value)},_onClick:function(i){return this.readOnly?(g.stop(i),!1):this.inherited(arguments)}})})},"url:dijit/form/templates/CheckBox.html":'<div class="dijit dijitReset dijitInline" role="presentation"\n\t><input\n\t \t${!nameAttrSetting} type="${type}" role="${type}" aria-checked="false" ${checkedAttrSetting}\n\t\tclass="dijitReset dijitCheckBoxInput"\n\t\tdata-dojo-attach-point="focusNode"\n\t \tdata-dojo-attach-event="onclick:_onClick"\n/></div>\n',"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/_base/event,dojo/_base/lang,dojo/query,../registry".split(","),
function(h,j,g,i,f,d,b){return j("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var e=[];d("input[type=radio]",this.focusNode.form||this.ownerDocument).forEach(f.hitch(this,function(c){c.name==this.name&&c.form==this.focusNode.form&&(c=b.getEnclosingWidget(c))&&e.push(c)}));return e},_setCheckedAttr:function(b){this.inherited(arguments);this._created&&b&&h.forEach(this._getRelatedWidgets(),f.hitch(this,function(b){b!=this&&b.checked&&b.set("checked",!1)}))},_getSubmitValue:function(b){return null===
b?"on":b},_onClick:function(b){if(this.checked||this.disabled)return i.stop(b),!1;return this.readOnly?(i.stop(b),h.forEach(this._getRelatedWidgets(),f.hitch(this,function(b){g.set(this.focusNode||this.domNode,"checked",b.checked)})),!1):this.inherited(arguments)}})})},"dojox/form/Uploader":function(){define("dojo/_base/kernel,dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/_base/connect,dojo/_base/window,dojo/dom-style,dojo/dom-geometry,dojo/dom-attr,dojo/dom-construct,dojo/dom-form,dijit,dijit/form/Button,dojox/form/uploader/Base,dojo/i18n!./nls/Uploader,dojo/text!./resources/Uploader.html".split(","),
function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l){h.experimental("dojox.form.Uploader");j("dojox.form.Uploader",[m,q],{uploadOnSelect:!1,tabIndex:0,multiple:!1,label:o.label,url:"",name:"uploadedfile",flashFieldName:"",uploadType:"form",showInput:"",_nameIndex:0,templateString:l,baseClass:"dijitUploader "+q.prototype.baseClass,postMixInProperties:function(){this._inputs=[];this._cons=[];this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);b.set(this.domNode,{overflow:"hidden",position:"relative"});
this._buildDisplay();c.set(this.titleNode,"tabIndex",-1)},_buildDisplay:function(){if(this.showInput)this.displayInput=dojo.create("input",{"class":"dijitUploadDisplayInput",tabIndex:-1,autocomplete:"off"},this.containerNode,this.showInput),this._attachPoints.push("displayInput"),this.connect(this,"onChange",function(a){for(var b=0,c,e=[];c=a[b++];)c&&c.name&&e.push(c.name);this.displayInput.value=e.join(", ")}),this.connect(this,"reset",function(){this.displayInput.value=""})},startup:function(){if(!this._buildInitialized)this._buildInitialized=
!0,this._getButtonStyle(this.domNode),this._setButtonStyle(),this.inherited(arguments)},onChange:function(){},onBegin:function(){},onProgress:function(){},onComplete:function(){this.reset()},onCancel:function(){},onAbort:function(){},onError:function(){},upload:function(){},submit:function(a){a=a?a.tagName?a:this.getForm():this.getForm();this.upload(k.toObject(a))},reset:function(){delete this._files;this._disconnectButton();i.forEach(this._inputs,a.destroy,dojo);this._inputs=[];this._nameIndex=0;
this._createInput()},getFileList:function(){var a=[];this.supports("multiple")?i.forEach(this._files,function(b,c){a.push({index:c,name:b.name,size:b.size,type:b.type})},this):i.forEach(this._inputs,function(b,c){b.value&&a.push({index:c,name:b.value.substring(b.value.lastIndexOf("\\")+1),size:0,type:b.value.substring(b.value.lastIndexOf(".")+1)})},this);return a},_getValueAttr:function(){return this.getFileList()},_setValueAttr:function(){console.error("Uploader value is read only")},_setDisabledAttr:function(a){this.disabled!=
a&&this.inputNode&&(this.inherited(arguments),b.set(this.inputNode,"display",a?"none":""))},_getButtonStyle:function(a){this.btnSize={w:b.get(a,"width"),h:b.get(a,"height")}},_setButtonStyle:function(){this.inputNodeFontSize=Math.max(2,Math.max(Math.ceil(this.btnSize.w/60),Math.ceil(this.btnSize.h/15)));this._createInput()},_getFileFieldName:function(){return this.multiple&&this.supports("multiple")?this.name+"s[]":this.name+(this.multiple?this._nameIndex:"")},_createInput:function(){this._inputs.length&&
(b.set(this.inputNode,{top:"500px"}),this._disconnectButton(),this._nameIndex++);var e=this._getFileFieldName();this.focusNode=this.inputNode=a.create("input",{type:"file",name:e},this.domNode,"first");this.supports("multiple")&&this.multiple&&c.set(this.inputNode,"multiple",!0);this._inputs.push(this.inputNode);b.set(this.inputNode,{position:"absolute",fontSize:this.inputNodeFontSize+"em",top:"-3px",right:"-3px",opacity:0});this._connectButton()},_connectButton:function(){this._cons.push(f.connect(this.inputNode,
"change",this,function(a){this._files=this.inputNode.files;this.onChange(this.getFileList(a));!this.supports("multiple")&&this.multiple&&this._createInput()}));if(-1<this.tabIndex)this.inputNode.tabIndex=this.tabIndex,this._cons.push(f.connect(this.inputNode,"focus",this,function(){this.titleNode.style.outline="1px dashed #ccc"})),this._cons.push(f.connect(this.inputNode,"blur",this,function(){this.titleNode.style.outline=""}))},_disconnectButton:function(){i.forEach(this._cons,f.disconnect);this._cons.splice(0,
this._cons.length)}});dojox.form.UploaderOrg=dojox.form.Uploader;var n=[dojox.form.UploaderOrg];dojox.form.addUploaderPlugin=function(a){n.push(a);j("dojox.form.Uploader",n,{})};return dojox.form.Uploader})},"dojox/form/uploader/Base":function(){define("dojo/dom-form,dojo/dom-style,dojo/dom-construct,dojo/dom-attr,dojo/has,dojo/_base/declare,dojo/_base/event,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin".split(","),function(h,j,g,i,f,d,b,e,c,a){f.add("FormData",function(){return!!window.FormData});
f.add("xhr-sendAsBinary",function(){var a=window.XMLHttpRequest&&new window.XMLHttpRequest;return a&&!!a.sendAsBinary});f.add("file-multiple",function(){return!!{"true":1,"false":1}[i.get(document.createElement("input",{type:"file"}),"multiple")]});return d("dojox.form.uploader.Base",[e,c,a],{getForm:function(){if(!this.form)for(var a=this.domNode;a&&a.tagName&&a!==document.body;){if("form"==a.tagName.toLowerCase()){this.form=a;break}a=a.parentNode}return this.form},getUrl:function(){if(this.uploadUrl)this.url=
this.uploadUrl;if(this.url)return this.url;if(this.getForm())this.url=this.form.action;return this.url},connectForm:function(){this.url=this.getUrl();if(!this._fcon&&this.getForm())this._fcon=!0,this.connect(this.form,"onsubmit",function(a){b.stop(a);this.submit(this.form)})},supports:function(a){switch(a){case "multiple":if("flash"==this.force||"iframe"==this.force)break;return f("file-multiple");case "FormData":return f(a);case "sendAsBinary":return f("xhr-sendAsBinary")}return!1},getMimeType:function(){return"application/octet-stream"},
getFileType:function(a){return a.substring(a.lastIndexOf(".")+1).toUpperCase()},convertBytes:function(a){var b=Math.round(1E5*(a/1024))/1E5,c=Math.round(1E5*(a/1048576))/1E5,e=Math.round(1E5*(a/1073741824))/1E5,d=a;1<b&&(d=b.toFixed(1)+" kb");1<c&&(d=c.toFixed(1)+" mb");1<e&&(d=e.toFixed(1)+" gb");return{kb:b,mb:c,gb:e,bytes:a,value:d}}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/parser"],function(h,j,g){return j("dijit._WidgetsInTemplateMixin",
null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,_beforeFillContent:function(){if(this.widgetsInTemplate){var i=this._startupWidgets=g.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,scope:"dojo"});if(!i.isFulfilled())throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
this._attachTemplateNodes(i,function(f,d){return f[d]})}},startup:function(){h.forEach(this._startupWidgets,function(g){g&&!g._started&&g.startup&&g.startup()});this.inherited(arguments)}})})},"url:dojox/form/resources/Uploader.html":'<span class="dijit dijitReset dijitInline"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdojoAttachEvent="ondijitclick:_onClick"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdojoAttachPoint="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" dojoAttachPoint="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdojoAttachPoint="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><\!--no need to have this for Uploader \n\t<input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n\t\tdojoAttachPoint="valueNode"\n/--\></span>\n',
"dojox/form/uploader/plugins/IFrame":function(){define("dojo/dom-construct,dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/io/iframe,dojox/form/uploader/plugins/HTML5".split(","),function(h,j,g,i,f){j=j("dojox.form.uploader.plugins.IFrame",[],{force:"",postMixInProperties:function(){this.inherited(arguments);if(!this.supports("multiple")||"iframe"==this.force)this.uploadType="iframe",this.upload=this.uploadIFrame},uploadIFrame:function(d){var b,e=!1;this.getForm()?b=this.form:(b=h.place('<form enctype="multipart/form-data" method="post"></form>',
this.domNode),i.forEach(this._inputs,function(a){a.value&&b.appendChild(a)},this),e=!0);var c=this.getUrl();f.send({url:c,form:b,handleAs:"json",content:d,method:"POST",error:g.hitch(this,function(a){e&&h.destroy(b);this.onError(a)}),load:g.hitch(this,function(a){e&&h.destroy(b);if(a.ERROR||a.error)this.onError(a);else this.onComplete(a)})})}});dojox.form.addUploaderPlugin(j);return j})},"dojo/io/iframe":function(){define("../_base/config,../_base/json,../_base/kernel,../_base/lang,../_base/xhr,../sniff,../_base/window,../dom,../dom-construct,../query,require,../aspect,../request/iframe".split(","),
function(h,j,g,i,f,d,b,e,c,a,k,p,q){g.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var d=q._iframeName,d=d.substring(0,d.lastIndexOf("_")),m=i.delegate(q,{create:function(){return m._frame=q.create.apply(q,arguments)},get:null,post:null,send:function(a){var b,c=f._ioSetArgs(a,function(){b&&b.cancel()},function(a){var c=null,a=a.ioArgs;try{var e=a.handleAs;"xml"===e||"html"===e?c=b.response.data:(c=b.response.text,"json"===e?c=j.fromJson(c):"javascript"===e&&(c=g.eval(c)))}catch(d){c=
d}return c},function(a,b){b.ioArgs._hasError=!0;return a}),d=c.ioArgs,i="GET",k=e.byId(a.form);a.method&&"POST"===a.method.toUpperCase()&&k&&(i="POST");a={method:i,handleAs:"json"===a.handleAs||"javascript"===a.handleAs?"text":a.handleAs,form:a.form,query:k?null:a.content,data:k?a.content:null,timeout:a.timeout,ioArgs:d};if(a.method)a.method=a.method.toUpperCase();if(h.ioPublish&&g.publish&&!1!==d.args.ioPublish)var m=p.after(q,"_notifyStart",function(a){a.options.ioArgs===d&&(m.remove(),f._ioNotifyStart(c))},
!0);b=q(d.url,a,!0);d._callNext=b._callNext;b.then(function(){c.resolve(c)}).otherwise(function(a){c.ioArgs.error=a;c.reject(a)});return c},_iframeOnload:b.global[d+"_onload"]});i.setObject("dojo.io.iframe",m);return m})},"dojo/request/iframe":function(){define("module,require,./watch,./util,./handlers,../_base/lang,../io-query,../query,../has,../dom,../dom-construct,../_base/window".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p){function q(){return!this.isFulfilled()}function m(){return!!this._finished}
function o(a,b){if(!b)try{var c=a.options,g=n.doc(n._frame),i=c.handleAs;if("html"!==i){if("xml"===i)if("html"===g.documentElement.tagName.toLowerCase()){e("a",g.documentElement).orphan();var h=g.documentElement.innerText,h=h.replace(/>\s+</g,"><");a.text=d.trim(h)}else a.data=g;else a.text=g.getElementsByTagName("textarea")[0].value;f(a)}else a.data=g}catch(k){b=k}b?this.reject(b):this._finished?this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}function l(){this._callNext()}
function n(a,b,c){var e=i.parseArgs(a,i.deepCreate(r,b),!0),a=e.url,b=e.options;if("GET"!==b.method&&"POST"!==b.method)throw Error(b.method+" not supported by dojo/request/iframe");if(!n._frame)n._frame=n.create(n._iframeName,u+"();");a=i.deferred(e,null,q,m,o,l);a._callNext=function(){if(!this._calledNext)this._calledNext=!0,n._currentDfd=null,n._fireNextRequest()};a._legacy=c;n._dfdQueue.push(a);n._fireNextRequest();g(a);return c?a:a.promise}var s=h.id.replace(/[\/\.\-]/g,"_"),u=s+"_onload";p.global[u]||
(p.global[u]=function(){var b=n._currentDfd;if(b){var c=a.byId(b.response.options.form)||b._tmpForm;if(c){for(var e=b._contentToClean,d=0;d<e.length;d++)for(var f=e[d],g=0;g<c.childNodes.length;g++){var i=c.childNodes[g];if(i.name===f){k.destroy(i);break}}b._originalAction&&c.setAttribute("action",b._originalAction);if(b._originalMethod)c.setAttribute("method",b._originalMethod),c.method=b._originalMethod;if(b._originalTarget)c.setAttribute("target",b._originalTarget),c.target=b._originalTarget}b._tmpForm&&
(k.destroy(b._tmpForm),delete b._tmpForm);b._finished=!0}else n._fireNextRequest()});var r={method:"POST"};n.create=function(a,b,e){if(p.global[a])return p.global[a];if(p.global.frames[a])return p.global.frames[a];e||(c("config-useXDomain")&&!c("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),e=c("config-dojoBlankHtmlUrl")||
j.toUrl("dojo/resources/blank.html"));b=k.place('<iframe id="'+a+'" name="'+a+'" src="'+e+'" onload="'+b+'" style="position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden">',p.body());return p.global[a]=b};n.doc=function(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var c=p.doc.getElementsByTagName("iframe");if(a.document&&c[b].contentWindow&&c[b].contentWindow.document)return c[b].contentWindow.document;if(p.doc.frames[b]&&p.doc.frames[b].document)return p.doc.frames[b].document}return null};
n.setSrc=function(a,b,c){a=p.global.frames[a.name];if(a.contentWindow)a=a.contentWindow;try{c?a.location.replace(b):a.location=b}catch(e){}};n._iframeName=s+"_IoIframe";n._notifyStart=function(){};n._dfdQueue=[];n._currentDfd=null;n._fireNextRequest=function(){var c;try{if(!n._currentDfd&&n._dfdQueue.length){do c=n._currentDfd=n._dfdQueue.shift();while(c&&(c.canceled||c.isCanceled&&c.isCanceled())&&n._dfdQueue.length);if(!c||c.canceled||c.isCanceled&&c.isCanceled())n._currentDfd=null;else{var e=c.response,
f=e.options,g=c._contentToClean=[],h=a.byId(f.form),j=i.notify,m=f.data||null,l;!c._legacy&&"POST"===f.method&&!h?h=c._tmpForm=k.create("form",{name:s+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},p.body()):"GET"===f.method&&h&&-1<e.url.indexOf("?")&&(l=e.url.slice(e.url.indexOf("?")+1),m=d.mixin(b.queryToObject(l),m));if(h){if(!c._legacy){var o=h;do o=o.parentNode;while(o!==p.doc.documentElement);if(!o)h.style.position="absolute",h.style.left="-1000px",h.style.top="-1000px",p.body().appendChild(h);
if(!h.name)h.name=s+"_form"}if(m){var o=function(a,b){k.create("input",{type:"hidden",name:a,value:b},h);g.push(a)},q;for(q in m){var u=m[q];if(d.isArray(u)&&1<u.length)for(l=0;l<u.length;l++)o(q,u[l]);else h[q]?h[q].value=u:o(q,u)}}var r=h.getAttributeNode("action"),y=h.getAttributeNode("method"),C=h.getAttributeNode("target");if(e.url)c._originalAction=r?r.value:null,r?r.value=e.url:h.setAttribute("action",e.url);if(c._legacy){if(!y||!y.value)mthdNode?mthdNode.value=f.method:fn.setAttribute("method",
f.method)}else c._originalMethod=y?y.value:null,y?y.value=f.method:h.setAttribute("method",f.method);c._originalTarget=C?C.value:null;C?C.value=n._iframeName:h.setAttribute("target",n._iframeName);h.target=n._iframeName;j&&j.emit("send",e,c.promise.cancel);n._notifyStart(e);h.submit()}else{f="";if(e.options.data)f=e.options.data,"string"!==typeof f&&(f=b.objectToQuery(f));o=e.url+(-1<e.url.indexOf("?")?"&":"?")+f;j&&j.emit("send",e,c.promise.cancel);n._notifyStart(e);n.setSrc(n._frame,o,!0)}}}}catch(F){c.reject(F)}};
i.addCommonMethods(n,["GET","POST"]);return n})},"dojox/form/uploader/plugins/HTML5":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo"],function(h,j,g,i){h=h("dojox.form.uploader.plugins.HTML5",[],{errMsg:"Error uploading files. Try checking permissions",uploadType:"html5",postCreate:function(){this.connectForm();this.inherited(arguments);this.uploadOnSelect&&this.connect(this,"onChange",function(f){this.upload(f[0])})},_drop:function(f){i.stopEvent(f);this._files=
f.dataTransfer.files;this.onChange(this.getFileList())},upload:function(f){this.onBegin(this.getFileList());this.supports("FormData")?this.uploadWithFormData(f):this.supports("sendAsBinary")&&this.sendAsBinary(f)},addDropTarget:function(f,d){d||(this.connect(f,"dragenter",i.stopEvent),this.connect(f,"dragover",i.stopEvent),this.connect(f,"dragleave",i.stopEvent));this.connect(f,"drop","_drop")},sendAsBinary:function(f){if(this.getUrl()){var d="---------------------------"+(new Date).getTime(),b=this.createXhr();
b.setRequestHeader("Content-Type","multipart/form-data; boundary="+d);if(f=this._buildRequestBody(f,d))b.sendAsBinary(f);else this.onError(this.errMsg)}else console.error("No upload url found.",this)},uploadWithFormData:function(f){if(this.getUrl()){var d=new FormData,b=this._getFileFieldName();g.forEach(this._files,function(c){d.append(b,c)},this);if(f)for(var e in f)d.append(e,f[e]);this.createXhr().send(d)}else console.error("No upload url found.",this)},_xhrProgress:function(f){if(f.lengthComputable){var d=
{bytesLoaded:f.loaded,bytesTotal:f.total,type:f.type,timeStamp:f.timeStamp};"load"==f.type?(d.percent="100%",d.decimal=1):(d.decimal=f.loaded/f.total,d.percent=Math.ceil(100*(f.loaded/f.total))+"%");this.onProgress(d)}},createXhr:function(){var f=new XMLHttpRequest,d;f.upload.addEventListener("progress",j.hitch(this,"_xhrProgress"),!1);f.addEventListener("load",j.hitch(this,"_xhrProgress"),!1);f.addEventListener("error",j.hitch(this,function(b){this.onError(b);clearInterval(d)}),!1);f.addEventListener("abort",
j.hitch(this,function(b){this.onAbort(b);clearInterval(d)}),!1);f.onreadystatechange=j.hitch(this,function(){4===f.readyState&&(clearInterval(d),this.onComplete(JSON.parse(f.responseText.replace(/^\{\}&&/,""))))});f.open("POST",this.getUrl());d=setInterval(j.hitch(this,function(){}),250);return f},_buildRequestBody:function(f,d){var b="",d="--"+d,e=[],c=this._files,a=this._getFileFieldName();g.forEach(c,function(c,f){var g=c.fileName,i;try{i=c.getAsBinary()+"\r\n",b+=d+"\r\n",b+="Content-Disposition: form-data; ",
b+='name="'+a+'"; ',b+='filename="'+g+'"\r\n',b+="Content-Type: "+this.getMimeType()+"\r\n\r\n",b+=i}catch(h){e.push({index:f,name:g})}},this);e.length&&e.length>=c.length&&(this.onError({message:this.errMsg,filesInError:e}),b=!1);if(!b)return!1;if(f)for(var i in f)b+=d+"\r\n",b+="Content-Disposition: form-data; ",b+='name="'+i+'"\r\n\r\n',b+=f[i]+"\r\n";return b+=d+"--\r\n"}});dojox.form.addUploaderPlugin(h);return h})},"dojo/main":function(){define("./_base/kernel,./has,require,./sniff,./_base/lang,./_base/array,./_base/config,./ready,./_base/declare,./_base/connect,./_base/Deferred,./_base/json,./_base/Color,./has!dojo-firebug?./_firebug/firebug,./_base/browser,require".split(","),
function(h,j,g,i,f,d,b,e){b.isDebug&&g(["./_firebug/firebug"]);var c=b.require;c&&(c=d.map(f.isArray(c)?c:[c],function(a){return a.replace(/\./g,"/")}),h.isAsync?g(c):e(1,function(){g(c)}));return h})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready,./kernel,./connect,./unload,./window,./event,./html,./NodeList,../query,./xhr,./fx".split(","),function(h){return h})},"JBrowse/View/FileDialog/ResourceList":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/dom-construct","dijit/form/Select"],function(h,j,g,i){return h(null,{constructor:function(f){this.dialog=f.dialog;this.domNode=g.create("div",{className:"resourceList"});this._updateView()},clearLocalFiles:function(){this._resources=j.filter(this._resources||[],function(f){return!f.file});this._notifyChange()},_notifyChange:function(){this.onChange(j.map(this._resources||[],function(f){var d={};if(f.file)d.file=f.file;if(f.url)d.url=f.url;d.type=f.type.get("value");return d}))},
_addResources:function(f){var d={},f=(this._resources||[]).concat(f);this._resources=j.filter(f.reverse(),function(b){b=b.file&&b.file.name||b.url;return d[b]?!1:d[b]=!0}).reverse();this._updateView();this._notifyChange()},addLocalFiles:function(f){this._addResources(j.map(f,function(d){return{file:d}}))},clearURLs:function(){this._resources=j.filter(this._resources||[],function(f){return!f.url});this._notifyChange()},addURLs:function(f){this._addResources(j.map(f,function(d){return{url:d}}))},onChange:function(){},
_updateView:function(){var f=this.domNode;g.empty(f);g.create("h3",{innerHTML:"Files and URLs"},f);if((this._resources||[]).length){var d=g.create("table",{},f);j.forEach(this._resources,function(b){var e=this,c=g.create("tr",{},d),a=b.url||b.file.name,f=new i({options:[{label:'<span class="ghosted">file type?</span>',value:null},{label:"GFF3",value:"gff3"},{label:"BigWig",value:"bigwig"},{label:"BAM",value:"bam"},{label:"BAM index",value:"bai"},{label:"VCF+bgzip",value:"vcf.gz"},{label:"Tabix index",
value:"tbi"}],value:this.guessType(a),onChange:function(){e._rememberedTypes=e._rememberedTypes||{};e._rememberedTypes[a]=this.get("value");e._notifyChange()}});f.placeAt(dojo.create("td",{width:"4%"},c));b.type=f;dojo.create("td",{width:"1%",innerHTML:'<div class="'+(b.file?"dijitIconFile":"jbrowseIconLink")+'"></div>'},c);dojo.create("td",{innerHTML:a},c);dojo.create("td",{width:"1%",innerHTML:'<div class="dijitIconDelete"></div>',onclick:function(a){a.preventDefault&&a.preventDefault();e.deleteResource(b)}},
c)},this)}else g.create("div",{className:"emptyMessage",innerHTML:"Add files and URLs using the controls above."},f);g.create("div",{className:"connector",innerHTML:"&nbsp;"},f)},deleteResource:function(f){this._resources=j.filter(this._resources||[],function(d){return d!==f});this._updateView();this._notifyChange()},guessType:function(f){return(this._rememberedTypes||{})[f]||(/\.bam$/i.test(f)?"bam":/\.bai$/i.test(f)?"bai":/\.gff3?$/i.test(f)?"gff3":/\.(bw|bigwig)$/i.test(f)?"bigwig":/\.vcf\.gz$/i.test(f)?
"vcf.gz":/\.tbi$/i.test(f)?"tbi":null)}})})},"JBrowse/View/FileDialog/TrackList":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-construct,JBrowse/Util,dijit/form/TextBox,dijit/form/Select,dijit/form/Button,./TrackList/BAMDriver,./TrackList/BigWigDriver,./TrackList/GFF3Driver,./TrackList/VCFTabixDriver,JBrowse/View/TrackConfigEditor".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p){return h(null,{constructor:function(b){this.browser=b.browser;this.fileDialog=b.dialog;this.domNode=g.create("div",
{className:"trackList",innerHTML:"track list!"});this.types=[new e,new c,new a,new k];this._updateDisplay()},getTrackConfigurations:function(){return i.dojof.values(this.trackConfs||{})},update:function(a){this.storeConfs={};this.trackConfs={};this._makeStoreConfs(a);this._makeTrackConfs();this._updateDisplay()},_makeStoreConfs:function(a){this.storeConfs=this.storeConfs||{};for(var b=0;a.length&&a.length!=b;)a=j.filter(a,function(a){return!j.some(this.types,function(b){return b.tryResource(this.storeConfs,
a)},this)},this),b=a.length;j.forEach(this.types,function(a){a.finalizeConfiguration(this.storeConfs)},this);a.length&&console.warn("Not all resources could be assigned to tracks.  Unused resources:",a)},_makeTrackConfs:function(){var a=this.browser.getTrackTypes().trackTypeDefaults,b;for(b in this.storeConfs){var c=a[this.storeConfs[b].type]||"JBrowse/View/Track/HTMLFeatures";this.trackConfs=this.trackConfs||{};this.trackConfs[b]={store:this.storeConfs[b],label:b,key:b.replace(/_\d+$/,"").replace(/_/g,
" "),type:c}}},_delete:function(a){delete (this.trackConfs||{})[a];this._updateDisplay()},_updateDisplay:function(){var a=this;g.empty(this.domNode);g.create("h3",{innerHTML:"New Tracks"},this.domNode);if(i.dojof.keys(this.trackConfs||{}).length){var c=g.create("table",{innerHTML:'<tr class="head"><th>Name</th><th>Display</th><th></th></tr>'},this.domNode),e=this.browser.getTrackTypes(),h;for(h in this.trackConfs){var k=this.trackConfs[h],s=g.create("tr",{},c);(new f({value:k.key,onChange:function(){k.key=
this.get("value")}})).placeAt(g.create("td",{className:"name"},s));(new d({options:j.map(e.knownTrackTypes,function(a){return{label:e.trackTypeLabels[a]||a.replace("JBrowse/View/Track/","").replace(/\//g," "),value:a}}),value:k.type,onChange:function(){k.type=this.get("value")}})).placeAt(g.create("td",{className:"type"},s));(new b({className:"edit",title:"edit configuration",innerHTML:"Edit Configuration",onClick:function(){(new p(k)).show(function(b){dojo.mixin(k,b.conf);a._updateDisplay()})}})).placeAt(g.create("td",
{className:"edit"},s));dojo.create("td",{width:"1%",innerHTML:'<div class="dijitIconDelete"></div>',onclick:function(b){b.preventDefault&&b.preventDefault();a._delete(h)}},s);g.create("td",{className:"type"},s)}}else g.create("div",{className:"emptyMessage",innerHTML:"None"},this.domNode)}})})},"JBrowse/View/FileDialog/TrackList/BAMDriver":function(){define(["dojo/_base/declare","./_IndexedFileDriver"],function(h,j){return h(j,{name:"BAM",storeType:"JBrowse/Store/SeqFeature/BAM",fileExtension:"bam",
fileConfKey:"bam",fileUrlConfKey:"urlTemplate",indexExtension:"bai",indexConfKey:"bai",indexUrlConfKey:"baiUrlTemplate"})})},"JBrowse/View/FileDialog/TrackList/_IndexedFileDriver":function(){define(["dojo/_base/declare","JBrowse/Util","JBrowse/Model/FileBlob","JBrowse/Model/XHRBlob"],function(h,j,g,i){var f=0;return h(null,{tryResource:function(d,b){if(b.type==this.fileExtension){var e=j.basename(b.file?b.file.name:b.url?b.url:"");if(!e)return!1;for(var c in d){var a=d[c];if(j.basename(a[this.indexConfKey]?
a[this.indexConfKey].url||a[this.indexConfKey].blob.name:a[this.indexUrlConfKey],"."+this.indexExtension)==e)return a[this.fileConfKey]=this._makeBlob(b),!0}e=j.basename(e,"."+this.fileExtension);for(c in d)if(a=d[c],j.basename(a[this.indexConfKey]?a[this.indexConfKey].url||a[this.indexConfKey].blob.name:a[this.indexUrlConfKey],"."+this.indexExtension)==e)return a[this.fileConfKey]=this._makeBlob(b),!0;e=this.name+"_"+e+"_"+f++;d[e]={type:this.storeType,name:e};d[e][this.fileConfKey]=this._makeBlob(b);
return!0}if(b.type==this.indexExtension){e=j.basename(b.file?b.file.name:b.url?b.url:"","."+this.indexExtension);if(!e)return!1;for(c in d)if(a=d[c],j.basename(a[this.fileConfKey]?a[this.fileConfKey].url||a[this.fileConfKey].blob.name:a[this.fileUrlConfKey])==e)return a[this.indexConfKey]=this._makeBlob(b),!0;for(c in d)if(a=d[c],j.basename(a[this.fileConfKey]?a[this.fileConfKey].url||a[this.fileConfKey].blob.name:a[this.fileUrlConfKey],"."+this.fileExtension)==e)return a[this.indexConfKey]=this._makeBlob(b),
!0;e=this.name+"_"+j.basename(e,"."+this.fileExtension)+"_"+f++;d[e]={name:e,type:this.storeType};d[e][this.indexConfKey]=this._makeBlob(b);return!0}return!1},finalizeConfiguration:function(d){var b={},e=0,c={},a=0,f;for(f in d){var g=d[f];if((g.bai||g[this.indexUrlConfKey])&&!g.bam&&!g[this.fileUrlConfKey])e++,b[f]=g;else if((g.bam||g[this.fileUrlConfKey])&&!g.bai&&!g[this.indexUrlConfKey])a++,c[f]=g}if(1==a&&1==e)for(var i in b)for(var h in c){b[i][this.indexUrlConfKey]&&(c[h][this.indexUrlConfKey]=
b[i][this.indexUrlConfKey]);if(b[i].bai)c[h].bai=b[i].bai;delete d[i]}for(i in b)delete d[i];for(h in c)d[h][this.fileUrlConfKey]||delete d[h]},_makeBlob:function(d){d=d.file?new g(d.file):d.url?new i(d.url):null;if(!d)throw"unknown resource type";return d},confIsValid:function(d){return(d[this.fileConfKey]||d[this.fileUrlConfKey])&&(d[this.indexConfKey]||d[this.indexUrlConfKey]||d[this.fileUrlConfKey])}})})},"JBrowse/Model/FileBlob":function(){define(["dojo/_base/declare","dojo/has"],function(h,
j){var g=h(null,{constructor:function(g){this.blob=g;this.totalSize=this.size=g.size},slice:function(i,f){var d=this.blob.mozSlice||this.blob.slice||this.blob.webkitSlice;return new g(f?d.call(this.blob,i,i+f):d.call(this.blob,i))},read:function(g,f,d,b){this.slice(g,f).fetch(d,b)},fetch:function(g){var f=this,d=new FileReader;d.onloadend=function(){g(f._stringToBuffer(d.result))};d.readAsBinaryString(this.blob)},_stringToBuffer:function(g){if(!g||!j("typed-arrays"))return null;for(var f=new Uint8Array(g.length),
d=0;d<f.length;d++)f[d]=g.charCodeAt(d);return f.buffer}});return g})},"JBrowse/Model/XHRBlob":function(){define(["dojo/_base/declare","JBrowse/Model/FileBlob","JBrowse/Store/RemoteBinaryFile"],function(h,j,g){var i=new g({name:"XHRBlob",maxSize:1E8}),f=h(j,{constructor:function(d,b,e,c){c||("object"===typeof b?(c=b,b=void 0):c={});this.url=d;this.start=b||0;if(e)this.end=e;this.opts=c},slice:function(d,b){var e=this.start,c=this.end,e=e&&d?e+d:d||e;return new f(this.url,e,b&&e?e+b-1:c||b-1,this.opts)},
fetch:function(d,b){i.get({url:this.url,start:this.start,end:this.end,success:d,failure:b})},read:function(d,b,e,c){d=this.start+d;i.get({url:this.url,start:d,end:d+b,success:e,failure:c})}});return f})},"JBrowse/Store/RemoteBinaryFile":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,JBrowse/has,JBrowse/Util,JBrowse/Store/LRUCache,jszlib/arrayCopy".split(","),function(h,j,g,i,f,d,b){var e=f.fastDeclare({constructor:function(b){j.mixin(this,b)},toString:function(){return this.url+
" (bytes "+this.start+".."+this.end+")"},toUniqueString:function(){return this.url+" (bytes "+this.start+".."+this.end+")"}});return h(null,{constructor:function(b){this.name=b.name;this._arrayCopyCount=this._fetchCount=0;this.minChunkSize="minChunkSize"in b?b.minChunkSize:32768;this.chunkCache=new d({name:b.name+" chunk cache",fillCallback:dojo.hitch(this,"_fetch"),maxSize:b.maxSize||1E7});this.totalSizes={}},_escapeRegExp:function(b){return b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},
_relevantExistingChunks:function(b,a,e){if(!e)return[];a=a||0;b=this.chunkCache.query(RegExp("^"+this._escapeRegExp(b+" (bytes")));g.forEach(b,function(a){if(a.size){if(!a.key.start)a.key.start=0;if(!a.key.end)a.key.end=a.key.start+(a.size||a.value.byteLength)}});b=b.sort(function(a,b){return a.key.start-b.key.start||b.key.end-b.key.start-(a.key.end-a.key.start)});return g.filter(b,function(b){return!(b.key.start>e||b.key.end<a)},this)},_fetchChunks:function(b,a,d,f,i){a=a||0;"number"!=typeof d&&
this.totalSizes[b]?d=this.totalSizes[b]-1:d>=this.totalSizes[b]&&(d=this.totalSizes[b]-1);var h=this._relevantExistingChunks(b,a,d);this._log("existing",h);var j=[];if("number"!=typeof d)j.push({key:new e({url:b,start:0,end:void 0})});else for(;a<=d;a=j[j.length-1].key.end+1)h[0]&&h[0].key.start<=a?j.push(h.shift()):j.push({key:new e({url:b,start:a,end:h[0]?h[0].key.start-1:d})});g.forEach(j,function(a){if(!a.value&&(a=a.key,a.start=Math.floor(a.start/this.minChunkSize)*this.minChunkSize,a.end))a.end=
Math.ceil((a.end+1)/this.minChunkSize)*this.minChunkSize-1},this);var j=this._optimizeGoldenPath(j),l=g.filter(j,function(a){return!a.value});this._log("needed",l);if(l.length){var n=0;g.forEach(l,function(a){this.chunkCache.get(a.key,function(b,c){a.value=b;c?i(c):++n==l.length&&f(j)})},this)}else f(j)},_optimizeGoldenPath:function(b){for(var a=[b[0]],e=1;e<b.length;e++){var d=b[e],f=a[a.length-1];d.value?d.key.end>f.key.end&&a.push(d):f.value?a.push(d):f.key.end=d.key.end}return a},_fetch:function(b,
a,e,d){this._log("fetch",b.url,b.start,b.end);this._fetchCount++;var e=e||1,f=new XMLHttpRequest,g,h=b.url;i("safari")&&b.end&&(h=h+(-1<h.indexOf("?")?"&":"?")+"safari_range="+b.start+"-"+b.end);f.open("GET",h,!0);f.overrideMimeType&&f.overrideMimeType("text/plain; charset=x-user-defined");b.end&&(f.setRequestHeader("Range","bytes="+b.start+"-"+b.end),g=b.end-b.start+1);f.responseType="arraybuffer";var j=function(e){if(e){if(!b.start)b.start=0;if(!b.end)b.end=b.start+e.byteLength}a(e)};f.onreadystatechange=
dojo.hitch(this,function(){if(4==f.readyState)if(200==f.status||206==f.status){this.totalSizes[b.url]=function(){var a=f.getResponseHeader("Content-Range");if(a)return(a=a.match(/\/(\d+)$/))?parseInt(a[1]):void 0}();var i=f.response||f.mozResponseArrayBuffer||function(){try{var i=f.responseText;g&&g!=i.length&&(!d||i.length!=d)?3==e?a(null,this._errorString(f,h)):this._fetch(b,a,e+1,i.length):j(this._stringToBuffer(f.responseText))}catch(n){console.error(""+n,n.stack,n),j(new ArrayBuffer)}}.call(this);
i&&a(i)}else if(3==e)a(null,this._errorString(f,h));else return this._fetch(b,a,e+1);return null});f.send("")},_errorString:function(b,a){return b.status?b.status+" ("+b.statusText+") when attempting to fetch "+a:"Unable to fetch "+a},get:function(b){if(i("typed-arrays")){this._log("get",b.url,b.start,b.end);var a=b.start||0,e=b.end;if(a&&!e)throw"cannot specify a fetch start without a fetch end";if(!b.success)throw Error("success callback required");if(!b.failure)throw Error("failure callback required");
this._fetchChunks(b.url,a,e,dojo.hitch(this,function(d){var f=this.totalSizes[b.url];this._assembleChunks(a,e,function(a){if("number"==typeof f)a.fileSize=f;try{b.success.call(this,a)}catch(e){console.error(""+e,e.stack,e),b.failure&&b.failure(e)}},b.failure,d)}),b.failure)}else(b.failure||function(a){console.error(a)})("Web browser does not support typed arrays.")},_assembleChunks:function(c,a,e,d,f){this._log("golden path",f);var h;if(i("typed-arrays")){if(1==f.length&&f[0].key.start==c&&(!a||f[0].key.end==
a))h=f[0].value;else{d=Math.max.apply(Math,g.map(f,function(a){return a.key.start+((a.value||{}).byteLength||0)-1}));a&&(d=Math.min(d,a));var j=d-c+1;h=new Uint8Array(j);var l=0;g.forEach(f,function(a){if(a.value&&a.value.byteLength){var e=new Uint8Array(a.value),a=c+l-a.key.start;0>a&&this._error("chunking error");var d=Math.min(e.byteLength-a,j-l);this._log("arrayCopy",e,a,h,l,d);b(e,a,h,l,d);this._arrayCopyCount++;l+=d}},this);h=h.buffer}e(h)}else d("Web browser does not support typed arrays")},
_stringToBuffer:function(b){if(!b||"function"!=typeof Uint8Array)return null;for(var a=new Uint8Array(b.length),e=0;e<a.length;e++)a[e]=b.charCodeAt(e);return a.buffer},_log:function(){},_warn:function(){console.warn.apply(console,this._logf.apply(this,arguments))},_error:function(){console.error.apply(console,this._logf.apply(this,arguments));throw"file error";},_logf:function(){arguments[0]=this.name+" "+arguments[0];if("string"==typeof arguments[0])for(;15>arguments[0].length;)arguments[0]+=" ";
return arguments}})})},"JBrowse/Store/LRUCache":function(){define(["dojo/_base/declare","dojo/_base/array","JBrowse/Util","JBrowse/Digest/Crc32"],function(h,j,g,i){return h(null,{constructor:function(f){this.fill=f.fillCallback;this.maxSize=f.maxSize||1E6;this.verbose=f.verbose;this.name=f.name||"LRUcache";this._size=f.sizeFunction||this._size;this._keyString=f.keyFunction||this._keyString;this.size=this.itemCount=0;this._cacheByKey={};this._cacheNewest=this._cacheOldest=null;this._inProgressFills=
{}},get:function(f,d){var b=this._keyString(f),e=this._cacheByKey[b];e?(this._log("hit",b),this._touch(e),window.setTimeout(function(){d(e.value)},1)):(this._log("miss",b),this._attemptFill(f,b,d))},query:function(f){var d=[],b=this._cacheByKey,e;for(e in b)f.test(e)&&b.hasOwnProperty(e)&&d.push(b[e]);return d},touch:function(f){this._touch(this._cacheByKey[this._keyString(f)])},_touch:function(f){f&&this._cacheNewest!==f&&(this._llRemove(f),this._llPush(f))},_llRemove:function(f){if(f.prev)f.prev.next=
f.next;if(f.next)f.next.prev=f.prev;if(this._cacheNewest===f)this._cacheNewest=f.prev;if(this._cacheOldest===f)this._cacheOldest=f.next;f.prev=null;f.next=null},_llPush:function(f){if(this._cacheNewest)this._cacheNewest.next=f,f.prev=this._cacheNewest;this._cacheNewest=f;if(!this._cacheOldest)this._cacheOldest=f},_attemptFill:function(f,d,b){if(this.fill){var e=this._inProgressFills[d]=this._inProgressFills[d]||{callbacks:[],running:!1};e.callbacks.push(b);if(!e.running)e.running=!0,this.fill(f,dojo.hitch(this,
function(a,b,c,e,d){delete this._inProgressFills[a];c.running=!1;e&&(this._log("fill",a),this.set(b,e));j.forEach(c.callbacks,function(a){try{a.call(this,e,d)}catch(b){console.error(""+b,b.stack,b)}},this)},d,f,e))}else try{b(void 0)}catch(c){console.error(c)}},set:function(f,d){var b=this._keyString(f);if(!this._cacheByKey[b]){var e={value:d,key:f,keyString:b,size:this._size(d)};e.size>this.maxSize?this._warn("cannot fit",b,"("+g.addCommas(e.size)+" > "+g.addCommas(this.maxSize)+")"):(this._log("set",
b,e,this.size),this._prune(e.size),this._cacheByKey[b]=e,this._llPush(e),this.size+=e.size,this.itemCount++)}},_keyString:function(f){return"object"==typeof f&&"function"==typeof f.toUniqueString?f.toUniqueString():i.objectFingerprint(f)},_size:function(f){var d=typeof f;if("object"==d&&null!==d){d=typeof f.size;if("number"==d)return d;if("function"==d)return f.size();if(f.byteLength)return f.byteLength;var d=0,b;for(b in f)f.hasOwnProperty(b)&&(d+=this._size(f[b]));return d}return"string"==d?f.length:
1},_prune:function(f){for(;this.size+(f||0)>this.maxSize;){var d=this._cacheOldest;if(d)this._log("evict",d),this._llRemove(d),delete this._cacheByKey[d.keyString],delete d.next,delete d.prev,this.itemCount--,this.size-=d.size;else{this._error("eviction error",this.size,f,this);break}}},_log:function(){this.verbose&&console.log.apply(console,this._logf.apply(this,arguments))},_warn:function(){console.warn.apply(console,this._logf.apply(this,arguments))},_error:function(){console.error.apply(console,
this._logf.apply(this,arguments))},_logf:function(){arguments[0]=this.name+" "+arguments[0];if("string"==typeof arguments[0])for(;15>arguments[0].length;)arguments[0]+=" ";return arguments}})})},"jszlib/arrayCopy":function(){define([],function(){try{new Uint8Array(1)}catch(h){}return function(h,g,i,f,d){if(0!=d){if(h){if(!i)throw"Undef dest";}else throw"Undef src";if(0==g&&d==h.length)i.set(h,f);else if(h.subarray)h=h.subarray(g,g+d),i.set(h,f);else if(1==h.BYTES_PER_ELEMENT&&100<d)h=new Uint8Array(h.buffer,
h.byteOffset+g,d),i.set(h,f);else for(var b=0;b<d;++b)i[f+b]=h[g+b]}}})},"JBrowse/View/FileDialog/TrackList/BigWigDriver":function(){define(["dojo/_base/declare","JBrowse/Util","JBrowse/Model/FileBlob","JBrowse/Model/XHRBlob"],function(h,j,g,i){var f=0;return h(null,{storeType:"JBrowse/Store/SeqFeature/BigWig",tryResource:function(d,b){if("bigwig"==b.type){var e=j.basename(b.file?b.file.name:b.url?b.url:"");if(!e)return!1;e="BigWig_"+e+"_"+f++;d[e]={type:this.storeType,blob:this._makeBlob(b),name:e};
return!0}return!1},finalizeConfiguration:function(){},_makeBlob:function(d){d=d.file?new g(d.file):d.url?new i(d.url):null;if(!d)throw"unknown resource type";return d},confIsValid:function(d){return d.blob||d.urlTemplate}})})},"JBrowse/View/FileDialog/TrackList/GFF3Driver":function(){define(["dojo/_base/declare","JBrowse/Util","JBrowse/Model/FileBlob","JBrowse/Model/XHRBlob"],function(h,j,g,i){var f=0;return h(null,{storeType:"JBrowse/Store/SeqFeature/GFF3",tryResource:function(d,b){if("gff3"==b.type){var e=
j.basename(b.file?b.file.name:b.url?b.url:"");if(!e)return!1;e="GFF3_"+e+"_"+f++;d[e]={type:this.storeType,blob:this._makeBlob(b),name:e};return!0}return!1},finalizeConfiguration:function(){},_makeBlob:function(d){d=d.file?new g(d.file):d.url?new i(d.url):null;if(!d)throw"unknown resource type";return d},confIsValid:function(d){return d.blob||d.urlTemplate}})})},"JBrowse/View/FileDialog/TrackList/VCFTabixDriver":function(){define(["dojo/_base/declare","./_IndexedFileDriver"],function(h,j){return h(j,
{name:"VCF+Tabix",storeType:"JBrowse/Store/SeqFeature/VCFTabix",fileExtension:"vcf.gz",fileConfKey:"file",fileUrlConfKey:"urlTemplate",indexExtension:"tbi",indexConfKey:"tbi",indexUrlConfKey:"tbiUrlTemplate"})})},"JBrowse/View/LocationChoiceDialog":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/aspect,dijit/Dialog,dijit/form/Button,dijit/focus,JBrowse/View/LocationList".split(","),function(h,j,g,i,f,d,b){return h(null,{constructor:function(b){this.browser=b.browser;this.config=dojo.clone(b.config||
{});this.locationChoices=b.locationChoices||[];this.title=b.title||"Choose location";this.prompt=b.prompt;this.goCallback=b.goCallback;this.showCallback=b.showCallback},show:function(){var e=this.dialog=new i({title:this.title,className:"locationChoiceDialog",style:{width:"70%"}}),c=j.create("div",{});this.prompt&&j.create("div",{className:"prompt",innerHTML:this.prompt},c);var a=this.browser;this.locationListView=new b({browser:a,locations:this.locationChoices,buttons:[{className:"show",innerHTML:"Show",
onClick:this.showCallback||function(b){a.showRegionWithHighlight(b)}},{className:"go",innerHTML:"Go",onClick:this.goCallback||function(b){e.hide();a.showRegionWithHighlight(b)}}]},j.create("div",{className:"locationList",style:{maxHeight:0.5*this.browser.container.offsetHeight+"px"}},c));this.actionBar=dojo.create("div",{className:"infoDialogActionBar dijitDialogPaneActionBar"});(new f({iconClass:"dijitIconDelete",label:"Cancel",onClick:dojo.hitch(e,"hide")})).placeAt(this.actionBar);e.set("content",
[c,this.actionBar]);e.show();g.after(e,"hide",dojo.hitch(this,function(){d.curNode&&d.curNode.blur();setTimeout(function(){e.destroyRecursive()},500)}))}})})},"JBrowse/View/LocationList":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-construct,dijit/form/Button,JBrowse/Util,dojo/store/Memory,dgrid/OnDemandGrid,dgrid/extensions/DijitRegistry".split(","),function(h,j,g,i,f,d,b,e){var c=h([b,e]);return h(null,{constructor:function(a,b){this.browser=a.browser;var e=j.map(a.locations||
[],function(a){return{locstring:f.assembleLocString(a),location:a,label:a.label||a.objectName,description:a.description,score:a.score,tracks:j.map(j.filter(a.tracks||[],function(a){return a}),function(a){return a.key||a.name||a.label||a}).join(", ")}}),h=[];j.some(e,function(a){return a.label})&&h.unshift({label:"Name",field:"label"});j.some(e,function(a){return a.description})&&h.unshift({label:"Description",field:"description"});j.some(e,function(a){return a.score})&&h.unshift({label:"Score",field:"score"});
h.push({label:"Location",field:"locstring"});e.length&&e[0].tracks&&h.push({label:"Track",field:"tracks"});a.buttons&&h.push({label:"",className:"goButtonColumn",renderCell:function(b,c,e,d){var f=g.create("div");j.forEach(a.buttons,function(a){var g=dojo.mixin({},a);g.onClick=function(){a.onClick(b.location,c,e,d)};(new i(g)).placeAt(f)});return f}});this.grid=new c({columns:h,store:new d({data:e})},b)}})})},"JBrowse/View/Dialog/SetHighlight":function(){define("dojo/_base/declare,dojo/dom-construct,dijit/focus,dijit/form/TextBox,JBrowse/View/Dialog/WithActionBar,dojo/on,dijit/form/Button,JBrowse/Model/Location".split(","),
function(h,j,g,i,f,d,b,e){return h(f,{autofocus:!1,title:"Set highlight",constructor:function(b){this.browser=b.browser;this.setCallback=b.setCallback||function(){};this.cancelCallback=b.cancelCallback||function(){}},_fillActionBar:function(c){var a=this;(new b({iconClass:"dijitIconDelete",label:"Cancel",onClick:function(){a.cancelCallback&&a.cancelCallback();a.hide()}})).placeAt(c);(new b({iconClass:"dijitIconFilter",label:"Highlight",onClick:function(){a.setCallback&&a.setCallback(a.getLocation());
a.hide()}})).placeAt(c)},show:function(b){dojo.addClass(this.domNode,"setHighlightDialog");this.highlightInput=new i({id:"newhighlight_locstring",value:(this.browser.getHighlight()||"").toString()||this.browser.view.visibleRegionLocString()||"",placeHolder:this.browser.view.visibleRegionLocString()||"ctgA:1234..5678"});this.set("content",[j.create("label",{"for":"newhighlight_locstring",innerHTML:"Location"}),this.highlightInput.domNode]);this.inherited(arguments)},getLocation:function(){return new e(this.highlightInput.get("value"))},
hide:function(){this.inherited(arguments);window.setTimeout(dojo.hitch(this,"destroyRecursive"),500)}})})},"JBrowse/View/Dialog/QuickHelp":function(){define(["dojo/_base/declare","JBrowse/View/InfoDialog"],function(h,j){return h(j,{title:"JBrowse Help",constructor:function(g){this.browser=g.browser},show:function(){this.set("content",'<div class="help_dialog"><div class="main" style="float: left; width: 49%;"><dl><dt>Moving</dt><dd><ul>    <li>Move the view by clicking and dragging in the track area, or by clicking <img height="20px" src="'+
this.browser.resolveUrl("img/slide-left.png")+'"> or <img height="20px"  src="'+this.browser.resolveUrl("img/slide-right.png")+'"> in the navigation bar, or by pressing the left and right arrow keys.</li>    <li>Center the view at a point by clicking on either the track scale bar or overview bar, or by shift-clicking in the track area.</li></ul></dd><dt>Zooming</dt><dd><ul>    <li>Zoom in and out by clicking <img height="20px" src="'+this.browser.resolveUrl("img/zoom-in-1.png")+'"> or <img height="20px"  src="'+
this.browser.resolveUrl("img/zoom-out-1.png")+'"> in the navigation bar, or by pressing the up and down arrow keys while holding down "shift".</li>    <li>Select a region and zoom to it ("rubber-band" zoom) by clicking and dragging in the overview or track scale bar, or shift-clicking and dragging in the track area.</li>    </ul></dd><dt>Showing Tracks</dt><dd><ul><li>Turn a track on by dragging its track label from the "Available Tracks" area into the genome area, or double-clicking it.</li>        <li>Turn a track off by dragging its track label from the genome area back into the "Available Tracks" area.</li>    </ul></dd></dl></div><div class="main" style="float: right; width: 49%;"><dl><dt>Searching</dt><dd><ul>    <li>Jump to a feature or reference sequence by typing its name in the location box and pressing Enter.</li>    <li>Jump to a specific region by typing the region into the location box as: <span class="example">ref:start..end</span>.</li>    </ul></dd><dt>Example Searches</dt><dd>    <dl class="searchexample">        <dt>uc0031k.2</dt><dd>searches for the feature named <span class="example">uc0031k.2</span>.</dd>        <dt>chr4</dt><dd>jumps to chromosome 4</dd>        <dt>chr4:79,500,000..80,000,000</dt><dd>jumps the region on chromosome 4 between 79.5Mb and 80Mb.</dd>        <dt>5678</dt><dd>centers the display at base 5,678 on the current sequence</dd>    </dl></dd><dt>JBrowse Documentation</dt><dd><ul><li><a target="_blank" href="docs/tutorial/">Quick-start tutorial</a></li>        <li><a target="_blank" href="http://gmod.org/wiki/JBrowse">JBrowse Configuration Guide</a></li>        <li><a target="_blank" href="docs/config.html"><tt>biodb-to-json.pl</tt> reference</a></li>        <li><a target="_blank" href="docs/featureglyphs.html">HTMLFeatures class reference</a></li>    </ul></dd></dl></div></div>');
this.inherited(arguments)}})})},"lazyload/lazyload":function(){define([],function(){return function(h){function j(a,b){var c=h.createElement(a),e;for(e in b)b.hasOwnProperty(e)&&c.setAttribute(e,b[e]);return c}function g(b){var c=a[b],e,d;if(c)e=c.callback,d=c.urls,d.shift(),k=0,d.length||(e&&e.call(c.context,c.obj),a[b]=null,p[b].length&&f(b))}function i(){var a=navigator.userAgent;e={async:!0===h.createElement("script").async};(e.webkit=/AppleWebKit\//.test(a))||(e.ie=/MSIE/.test(a))||(e.opera=
/Opera/.test(a))||(e.gecko=/Gecko\//.test(a))||(e.unknown=!0)}function f(f,k,l,n,q){var u=function(){g(f)},r="css"===f,v=[],t,w,x,B;e||i();if(k)if(k="string"===typeof k?[k]:k.concat(),r||e.async||e.gecko||e.opera)p[f].push({urls:k,callback:l,obj:n,context:q});else for(t=0,w=k.length;t<w;++t)p[f].push({urls:[k[t]],callback:t===w-1?l:null,obj:n,context:q});if(!a[f]&&(B=a[f]=p[f].shift())){c||(c=h.head||h.getElementsByTagName("head")[0]);k=B.urls;for(t=0,w=k.length;t<w;++t)l=k[t],r?x=e.gecko?j("style"):
j("link",{href:l,rel:"stylesheet"}):(x=j("script",{src:l}),x.async=!1),x.className="lazyload",x.setAttribute("charset","utf-8"),e.ie&&!r?x.onreadystatechange=function(){if(/loaded|complete/.test(x.readyState))x.onreadystatechange=null,u()}:r&&(e.gecko||e.webkit)?e.webkit?(B.urls[t]=x.href,b()):(x.innerHTML='@import "'+l+'";',d(x)):x.onload=x.onerror=u,v.push(x);for(t=0,w=v.length;t<w;++t)c.appendChild(v[t])}}function d(a){var b;try{b=!!a.sheet.cssRules}catch(c){k+=1;200>k?setTimeout(function(){d(a)},
50):b&&g("css");return}g("css")}function b(){var c=a.css,e;if(c){for(e=q.length;0<=--e;)if(q[e].href===c.urls[0]){g("css");break}k+=1;c&&(200>k?setTimeout(b,50):g("css"))}}var e,c,a={},k=0,p={css:[],js:[]},q=h.styleSheets;return{css:function(a,b,c,e){f("css",a,b,c,e)},js:function(a,b,c,e){f("js",a,b,c,e)}}}(this.document)})},"JBrowse/ConfigAdaptor/JB_json_v1":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/_base/json,JBrowse/Util,JBrowse/Digest/Crc32,JBrowse/ConfigAdaptor/AdaptorUtil".split(","),
function(h,j,g,i,f,d,b){var e=f.dojof;return h("JBrowse.ConfigAdaptor.JB_json_v1",null,{constructor:function(){},load:function(b){var a=this;if(b.config.url){var e=f.resolveUrl(b.baseUrl||window.location.href,b.config.url),d=function(a){a.url=e;b.onFailure&&b.onFailure.call(b.context||this,a)};dojo.xhrGet({url:e,handleAs:"text",load:function(f){try{f=a.parse_conf(f,b)||{},f.sourceUrl=e,f=a.regularize_conf(f,b),b.onSuccess.call(b.context||a,f)}catch(g){d(g)}},error:d})}else if(b.config.data){var g=
this.regularize_conf(b.config.data,b);b.onSuccess.call(b.context||this,g)}},parse_conf:function(b){return i.fromJson(b)},regularize_conf:function(c,a){c.sourceUrl=c.sourceUrl||a.config.url;c.baseUrl=c.baseUrl||f.resolveUrl(c.sourceUrl,".");c.baseUrl.length&&!/\/$/.test(c.baseUrl)&&(c.baseUrl+="/");if(c.sourceUrl){var d=[].concat(c.tracks||[]).concat(e.values(c.stores||{}));c.names&&d.push(c.names);g.forEach(d,function(a){if(!a.baseUrl)a.baseUrl=c.baseUrl||"/"},this)}c=b.evalHooks(c);return c=this._regularizeTrackConfigs(c)},
_regularizeTrackConfigs:function(b){b.stores=b.stores||{};g.forEach(b.tracks||[],function(a){if(a.config){var e=a.config;delete a.config;for(var f in e)!(f in a)&&e.hasOwnProperty(f)&&(a[f]=e[f])}if(!a.store)e=this._regularizeClass("JBrowse/View/Track",{FeatureTrack:"JBrowse/View/Track/HTMLFeatures",ImageTrack:"JBrowse/View/Track/FixedImage","ImageTrack.Wiggle":"JBrowse/View/Track/FixedImage/Wiggle",SequenceTrack:"JBrowse/View/Track/Sequence"}[a.type]||a.type),a.type=e,f=a.urlTemplate,(e=this._regularizeClass("JBrowse/Store",
a.storeClass?a.storeClass:/\/FixedImage/.test(e)?"JBrowse/Store/TiledImage/Fixed"+(0==a.backendVersion?"_v0":""):/\.jsonz?$/i.test(f)?"JBrowse/Store/SeqFeature/NCList"+(0==a.backendVersion?"_v0":""):/\.bam$/i.test(f)?"JBrowse/Store/SeqFeature/BAM":/\.(bw|bigwig)$/i.test(f)?"JBrowse/Store/SeqFeature/BigWig":/\/Sequence$/.test(e)?"JBrowse/Store/Sequence/StaticChunked":null))?(f=j.mixin({},a),j.mixin(f,{type:e}),f.name="JBrowse/Store/Sequence/StaticChunked"==e&&!b.stores.refseqs?"refseqs":"store"+d.objectFingerprint(f),
b.stores[f.name]=f,a.store=f.name):console.error("Unable to determine an appropriate data store to use with track '"+a.label+"', please explicitly specify a storeClass in the configuration.")},this);return b},_regularizeClass:function(b,a){if(!a)return null;/\//.test(a)||(a=b+"/"+a);return a=a.replace(/^\//)}})})},"JBrowse/ConfigAdaptor/AdaptorUtil":function(){define(["dojox/lang/functional/object","dojox/lang/functional/fold"],function(){return{evalHooks:function(h){for(var j in h)if("object"==typeof h[j])h[j]=
this.evalHooks(h[j]);else if("string"==typeof h[j]){var g=h[j];/^\s*function\s*\(/.test(g)&&/\}[\s;]*$/.test(g)&&(h[j]=this.evalHook(g))}return h},evalHook:function(h){if("string"!=typeof h)return h;try{eval("arguments[0]="+h+";")}catch(j){console.error(j+" parsing config callback '"+h+"'")}return h}}})},"JBrowse/View/TrackList/Simple":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-construct,dijit/layout/ContentPane,dojo/dnd/Source,dojo/fx/easing,dijit/form/TextBox".split(","),function(h,
j,g,i,f,d){return h("JBrowse.View.TrackList.Simple",null,{constructor:function(b){this.browser=b.browser;this.createTrackList(b.browser.container);this.inactiveTrackNodes={};this.trackListWidget.insertNodes(!1,b.trackConfigs);this.browser.subscribe("/dnd/drop",dojo.hitch(this,function(b,c,a,d){if(d===this.trackListWidget&&(b=dojo.filter(dojo.map(c,function(a){return a.track&&a.track.config}),function(a){return a}),b.length))this.dndDrop=!0,this.browser.publish("/jbrowse/v1/v/tracks/hide",b),this.dndDrop=
!1}));this.browser.subscribe("/jbrowse/v1/c/tracks/show",dojo.hitch(this,"setTracksActive"));this.browser.subscribe("/jbrowse/v1/c/tracks/hide",dojo.hitch(this,"setTracksInactive"));this.browser.subscribe("/jbrowse/v1/c/tracks/new",dojo.hitch(this,"addTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/replace",dojo.hitch(this,"replaceTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/delete",dojo.hitch(this,"deleteTracks"))},addTracks:function(b){this.trackListWidget.insertNodes(!1,b);this._blinkTracks(b)},
replaceTracks:function(b){j.forEach(b,function(b){var c=this.inactiveTrackNodes[b.label];c&&(delete this.inactiveTrackNodes[b.label],this.trackListWidget.delItem(c.id),c.parentNode&&c.parentNode.removeChild(c),this.trackListWidget.insertNodes(!1,[b],!1,c.previousSibling))},this)},createTrackList:function(b){b=dojo.create("div",{id:"trackPane",style:{width:"12em"}},b);new i({region:"left",splitter:!0},b);b=this.div=dojo.create("div",{id:"tracksAvail",className:"container handles",style:{width:"100%",
height:"100%",overflowX:"hidden",overflowY:"auto"},innerHTML:"<h2>Available Tracks</h2>",onclick:dojo.hitch(this,function(){this.trackListWidget.selectNone()})},b);this.textFilterDiv=g.create("div",{className:"textfilter",style:{width:"100%",position:"relative",overflow:"hidden"}},b);this.textFilterInput=g.create("input",{type:"text",style:{paddingLeft:"18px",height:"16px",width:"80%"},placeholder:"filter by text",onkeypress:dojo.hitch(this,function(b){this.textFilterTimeout&&window.clearTimeout(this.textFilterTimeout);
this.textFilterTimeout=window.setTimeout(dojo.hitch(this,function(){this._updateTextFilterControl();this._textFilter(this.textFilterInput.value)}),500);this._updateTextFilterControl();b.stopPropagation()})},g.create("div",{style:"overflow: show;"},this.textFilterDiv));this.textFilterClearButton=g.create("div",{className:"jbrowseIconCancel",onclick:dojo.hitch(this,function(){this._clearTextFilterControl();this._textFilter(this.textFilterInput.value)}),style:{position:"absolute",left:"4px",top:"6px"}},
this.textFilterDiv);this._updateTextFilterControl();this.trackListWidget=new f(b,{accept:["track"],withHandles:!1,creator:dojo.hitch(this,function(b,c){var a=b.key||b.name||b.label,a=dojo.create("div",{className:"tracklist-label",title:a+" (drag or double-click to activate)",innerHTML:a});if("avatar"!=c){dojo.connect(a,"dblclick",dojo.hitch(this,function(){this.browser.publish("/jbrowse/v1/v/tracks/show",[b])}));var d=dojo.create("div",{className:"tracklist-container"});d.appendChild(a);a=d}a.id=
dojo.dnd.getUniqueId();this.inactiveTrackNodes[b.label]=a;return{node:a,data:b,type:["track"]}})});return b},_textFilter:function(b){b&&/\S/.test(b)?(b=b.toLowerCase(),dojo.query(".tracklist-label",this.div).forEach(function(e){-1!=e.innerHTML.toLowerCase().indexOf(b)?dojo.removeClass(e,"collapsed"):dojo.addClass(e,"collapsed")})):dojo.query(".tracklist-label",this.div).removeClass("collapsed")},_clearTextFilterControl:function(){this.textFilterInput.value="";this._updateTextFilterControl()},_updateTextFilterControl:function(){this.textFilterInput.value.length?
dojo.removeClass(this.textFilterDiv,"dijitDisabled"):dojo.addClass(this.textFilterDiv,"dijitDisabled")},setTracksActive:function(b){this.deleteTracks(b)},deleteTracks:function(b){j.forEach(b||[],function(b){var c=this.inactiveTrackNodes[b.label];c&&(delete this.inactiveTrackNodes[b.label],c.parentNode&&c.parentNode.removeChild(c),this.trackListWidget.delItem(c.id))},this)},setTracksInactive:function(b){this.dndDrop||(this.trackListWidget.insertNodes(!1,b),this._blinkTracks(b))},_blinkTracks:function(b){this.trackListWidget.node.scrollTop=
this.trackListWidget.node.scrollHeight;j.forEach(b,function(b){var c=this.inactiveTrackNodes[b.label].firstChild;c&&dojo.animateProperty({node:c,duration:400,properties:{backgroundColor:{start:"#DEDEDE",end:"#FFDE2B"}},easing:d.sine,repeat:2,onEnd:function(){c.style.backgroundColor=null}}).play()},this)},show:function(){},hide:function(){},toggle:function(){}})})},"dojo/fx/easing":function(){define(["../_base/lang"],function(h){var j={linear:function(g){return g},quadIn:function(g){return Math.pow(g,
2)},quadOut:function(g){return-1*g*(g-2)},quadInOut:function(g){g*=2;return 1>g?Math.pow(g,2)/2:-1*(--g*(g-2)-1)/2},cubicIn:function(g){return Math.pow(g,3)},cubicOut:function(g){return Math.pow(g-1,3)+1},cubicInOut:function(g){g*=2;return 1>g?Math.pow(g,3)/2:(Math.pow(g-2,3)+2)/2},quartIn:function(g){return Math.pow(g,4)},quartOut:function(g){return-1*(Math.pow(g-1,4)-1)},quartInOut:function(g){g*=2;return 1>g?Math.pow(g,4)/2:-0.5*(Math.pow(g-2,4)-2)},quintIn:function(g){return Math.pow(g,5)},quintOut:function(g){return Math.pow(g-
1,5)+1},quintInOut:function(g){g*=2;return 1>g?Math.pow(g,5)/2:(Math.pow(g-2,5)+2)/2},sineIn:function(g){return-1*Math.cos(g*(Math.PI/2))+1},sineOut:function(g){return Math.sin(g*(Math.PI/2))},sineInOut:function(g){return-1*(Math.cos(Math.PI*g)-1)/2},expoIn:function(g){return 0==g?0:Math.pow(2,10*(g-1))},expoOut:function(g){return 1==g?1:-1*Math.pow(2,-10*g)+1},expoInOut:function(g){if(0==g)return 0;if(1==g)return 1;g*=2;if(1>g)return Math.pow(2,10*(g-1))/2;--g;return(-1*Math.pow(2,-10*g)+2)/2},circIn:function(g){return-1*
(Math.sqrt(1-Math.pow(g,2))-1)},circOut:function(g){return Math.sqrt(1-Math.pow(g-1,2))},circInOut:function(g){g*=2;return 1>g?-0.5*(Math.sqrt(1-Math.pow(g,2))-1):0.5*(Math.sqrt(1-Math.pow(g-2,2))+1)},backIn:function(g){return Math.pow(g,2)*(2.70158*g-1.70158)},backOut:function(g){g-=1;return Math.pow(g,2)*(2.70158*g+1.70158)+1},backInOut:function(g){g*=2;if(1>g)return Math.pow(g,2)*(3.5949095*g-2.5949095)/2;g-=2;return(Math.pow(g,2)*(3.5949095*g+2.5949095)+2)/2},elasticIn:function(g){if(0==g||1==
g)return g;g-=1;return-1*Math.pow(2,10*g)*Math.sin((g-0.075)*2*Math.PI/0.3)},elasticOut:function(g){return 0==g||1==g?g:Math.pow(2,-10*g)*Math.sin((g-0.075)*2*Math.PI/0.3)+1},elasticInOut:function(g){if(0==g)return 0;g*=2;if(2==g)return 1;var i=0.3*1.5,f=i/4;if(1>g)return g-=1,-0.5*Math.pow(2,10*g)*Math.sin((g-f)*2*Math.PI/i);g-=1;return 0.5*Math.pow(2,-10*g)*Math.sin((g-f)*2*Math.PI/i)+1},bounceIn:function(g){return 1-j.bounceOut(1-g)},bounceOut:function(g){return g=g<1/2.75?7.5625*Math.pow(g,2):
g<2/2.75?7.5625*Math.pow(g-1.5/2.75,2)+0.75:g<2.5/2.75?7.5625*Math.pow(g-2.25/2.75,2)+0.9375:7.5625*Math.pow(g-2.625/2.75,2)+0.984375},bounceInOut:function(g){return 0.5>g?j.bounceIn(2*g)/2:j.bounceOut(2*g-1)/2+0.5}};h.setObject("dojo.fx.easing",j);return j})},"JBrowse/Store/Sequence/StaticChunked":function(){define(["dojo/_base/declare","JBrowse/Store/SeqFeature","JBrowse/Util","JBrowse/Digest/Crc32"],function(h,j,g,i){var f=g.fastDeclare({constructor:function(d){this.start=d.start;this.end=d.end;
this.seq=d.seq;this.seq_id=d.seq_id},get:function(d){return this[d]},tags:function(){return["seq_id","start","end","seq"]}});return h(j,{constructor:function(d){this.chunkCache={};this.compress=d.compress;this.urlTemplate=d.urlTemplate;if(!this.urlTemplate)throw"no urlTemplate provided, cannot open sequence store";this.baseUrl=d.baseUrl;this.seqChunkSize=d.seqChunkSize},getFeatures:function(d,b,e,c){var c=c||function(a){console.error(a)},a=d.start,g=d.end,h=d.ref,j=d.seqChunkSize||this.refSeq.name==
d.ref&&this.refSeq.seqChunkSize||this.seqChunkSize,m=Math.floor(Math.max(0,a)/j),o=Math.floor((g-1)/j),b=function(){var a=[],c=o-m+1,g=b;return function(b,i,h,j){a[j]=h;0==--c&&(g(new f({seq_id:d.ref,start:b,end:i,seq:a.join("")})),e&&e())}}(),l={start:a,end:g,success:b,error:c};this.chunkCache[h]||(this.chunkCache[h]=[]);for(var h=this.chunkCache[h],n=m;n<=o;n++){var s=h[n];s?s.loaded?b(a,g,s.sequence.substring(a-n*j,g-n*j),n):s.error?c(s.error):s.callbacks.push(l):(h[n]={loaded:!1,num:n,callbacks:[l]},
s=this.resolveUrl(this.urlTemplate,{refseq:d.ref,refseq_dirpath:function(){for(var a=i.crc32(d.ref).toString(16).toLowerCase().replace("-","n");8>a.length;)a="0"+a;for(var b=[],c=0;c<a.length;c+=3)b.push(a.substring(c,c+3));return b.join("/")}}),dojo.xhrGet({url:s+n+".txt"+(this.compress?"z":""),load:dojo.hitch(this,function(a,b){a.sequence=b;a.loaded=!0;dojo.forEach(a.callbacks,function(c){c.success(c.start,c.end,b.substring(c.start-a.num*j,c.end-a.num*j),n)});delete a.callbacks},h[n]),error:dojo.hitch(this,
function(a,b){a.error=b;dojo.forEach(a.callbacks,function(a){a.error(b)});delete a.callbacks},h[n])}))}}})})},"JBrowse/Store/SeqFeature":function(){define(["dojo/_base/declare","JBrowse/Store","JBrowse/Store/LRUCache"],function(h,j,g){return h(j,{constructor:function(g){this.globalStats={};this.config=g||{}},getGlobalStats:function(g){g(this.globalStats||{})},getRegionStats:function(g,f,d){return this._getRegionStats.apply(this,arguments)},_getRegionStats:function(i,f,d){var b=this;(b._regionStatsCache=
b._regionStatsCache||new g({name:"regionStatsCache",maxSize:1E3,sizeFunction:function(){return 1},fillCallback:function(e,c){var a={scoreMax:-Infinity,scoreMin:Infinity,scoreSum:0,scoreSumSquares:0,basesCovered:e.end-e.start,featureCount:0};b.getFeatures(e,function(b){b=b.get("score")||0;a.scoreMax=Math.max(b,a.scoreMax);a.scoreMin=Math.min(b,a.scoreMin);a.scoreSum+=b;a.scoreSumSquares+=b*b;a.featureCount++},function(){a.scoreMean=a.featureCount?a.scoreSum/a.featureCount:0;a.scoreStdDev=b._calcStdFromSums(a.scoreSum,
a.scoreSumSquares,a.featureCount);a.featureDensity=a.featureCount/a.basesCovered;c(a)},function(a){c(null,a)})}})).get(i,function(b,c){c?d(c):f(b)})},_calcStdFromSums:function(g,f,d){if(0==d)return 0;g=f-g*g/d;1<d&&(g/=d-1);return 0>g?0:Math.sqrt(g)},getFeatures:function(g,f,d){d()}})})},"JBrowse/Store":function(){define(["dojo/_base/declare","JBrowse/Component"],function(h,j){var g=0;return h(j,{namePrefix:"store-",constructor:function(i){this.refSeq=dojo.clone(i.refSeq);this.name=i.name||this.namePrefix+
++g;this.changeCallback=i.changeCallback||function(){}},notifyChanged:function(g){this.changeCallback&&this.changeCallback(g)},_failAllDeferred:function(g){var f=this._deferred||{},d;for(d in f)f.hasOwnProperty(d)&&f[d].reject(g)}})})},"JBrowse/Store/SeqFeature/NCList":function(){define("dojo/_base/declare,JBrowse/Store/SeqFeature,JBrowse/Store/DeferredFeaturesMixin,JBrowse/Store/DeferredStatsMixin,JBrowse/Util,JBrowse/Model/ArrayRepr,JBrowse/Store/NCList,JBrowse/Store/LazyArray".split(","),function(h,
j,g,i,f,d,b,e){var c=function(){return this._uniqueID},a=function(){return this._parent},k=function(){return this.get("subfeatures")};return h([j,g,i],{constructor:function(a){this.args=a;this.nclist=this.makeNCList();this.baseUrl=a.baseUrl;this.urlTemplates={tracklist:a.urlTemplate};this.refSeq=a.refSeq;this._load()},makeNCList:function(){return new b},_load:function(){var a=this.resolveUrl(this.urlTemplates.tracklist);dojo.xhrGet({url:a,handleAs:"json",failOk:!0,load:f.debugHandler(this,function(b){this.loadSuccess(b,
a)}),error:dojo.hitch(this,"loadFail")})},loadSuccess:function(a,b){this.globalStats.featureCount=a.featureCount;this.globalStats.featureDensity=a.featureCount/this.refSeq.length;this.loadNCList(a,b);if(a.histograms&&a.histograms.meta){this.histograms=a.histograms;for(var c=0;c<this.histograms.meta.length;c++)this.histograms.meta[c].lazyArray=new e(this.histograms.meta[c].arrayParams,b)}this._deferred.stats.resolve({success:!0});this._deferred.features.resolve({success:!0})},loadNCList:function(a,
b){this.attrs=new d(a.intervals.classes);this.nclist.importExisting(a.intervals.nclist,this.attrs,b,a.intervals.urlTemplate,a.intervals.lazyClass)},loadFail:function(a){404!=a.status&&console.error(""+a);this.empty=!0;this._deferred.stats.resolve({success:!1});this._deferred.features.resolve({success:!1})},histogram:function(){return this.nclist.histogram.apply(this.nclist,arguments)},_getFeatures:function(a,b,c,e){if(this.empty)c();else{var d=this,f=a.start,a=a.end,g=this.attrs.accessors();return this.nclist.iterate.call(this.nclist,
f,a,function(a,c){if(!a.decorated){var e=c.join(",");d._decorate_feature(g,a,e)}return b(a)},c,e)}},_decorate_feature:function(b,e,d,f){e.get=b.get;e.tags=b.tags;e._uniqueID=d;e.id=c;e._parent=f;e.parent=a;e.children=k;dojo.forEach(e.get("subfeatures"),function(a,c){this._decorate_feature(b,a,d+"-"+c,e)},this);e.decorated=!0}})})},"JBrowse/Store/DeferredFeaturesMixin":function(){define(["dojo/_base/declare","dojo/Deferred"],function(h,j){return h(null,{constructor:function(){this._deferFeatures()},
_deferFeatures:function(){if(!this._deferred)this._deferred={};this._deferred.features=new j},getFeatures:function(g,i,f,d){this._deferred.features.then(dojo.hitch(this,"_getFeatures",g,i,f,d),d)}})})},"JBrowse/Store/DeferredStatsMixin":function(){define(["dojo/_base/declare","dojo/Deferred","JBrowse/Util"],function(h,j){return h(null,{constructor:function(){this._deferGlobalStats()},_deferGlobalStats:function(){if(!this._deferred)this._deferred={};this._deferred.stats=new j},getGlobalStats:function(g,
i){this._deferred.stats.then(dojo.hitch(this,"_getGlobalStats",g,i),i)},_getGlobalStats:function(g){g(this.globalStats||{})},getRegionStats:function(g,i,f){this._deferred.stats.then(dojo.hitch(this,"_getRegionStats",g,i,f),f)}})})},"JBrowse/Model/ArrayRepr":function(){define([],function(){function h(h){this.classes=h;this.fields=[];for(var g=0;g<h.length;g++){this.fields[g]={};for(var i=0;i<h[g].attributes.length;i++)this.fields[g][h[g].attributes[i]]=i+1;if(void 0===h[g].proto)h[g].proto={};if(void 0===
h[g].isArrayAttr)h[g].isArrayAttr={}}}h.prototype.attrIndices=function(h){return this.classes.map(function(g){g=g.attributes.indexOf(h);return 0<=g?g+1:void 0})};h.prototype.get=function(h,g){if(g in this.fields[h[0]])return h[this.fields[h[0]][g]];var i=this.classes[h[0]].attributes.length+1;if(i>=h.length||!(g in h[i])){if(g in this.classes[h[0]].proto)return this.classes[h[0]].proto[g]}else return h[i][g]};h.prototype.set=function(h,g,i){if(g in this.fields[h[0]])h[this.fields[h[0]][g]]=i;else{var f=
this.classes[h[0]].attributes.length+1;f>=h.length&&(h[f]={});h[f][g]=i}};h.prototype.makeSetter=function(h){var g=this;return function(i,f){g.set(i,h,f)}};h.prototype.makeGetter=function(h){var g=this;return function(i){return g.get(i,h)}};h.prototype.makeFastSetter=function(h){var g=this.attrIndices(h);return function(h,f){void 0!==g[h[0]]&&(h[g[h[0]]]=f)}};h.prototype.makeFastGetter=function(h){var g=this.attrIndices(h);return function(h){if(void 0!==g[h[0]])return h[g[h[0]]]}};h.prototype.construct=
function(h,g,i){var h=Array(h.classes[i].length),f;for(f in g)this.set(h,f,g[f]);return h};h.prototype.accessors=function(){return this._accessors=this._accessors||this._makeAccessors()};h.prototype._makeAccessors=function(){var h={},g,i={get:function(d){if(d=this.get.field_accessors[d])return d.call(this)},set:function(d,b){var e=this.set.field_accessors[d];if(e)return e.call(this,b)},tags:function(){return g[this[0]]||[]}};i.get.field_accessors={};i.set.field_accessors={};dojo.forEach(this.classes,
function(d,b){dojo.forEach(d.attributes||[],function(e,c){h[e]=h[e]||[];h[e][b]=c+1;e=e.toLowerCase();h[e]=h[e]||[];h[e][b]=c+1})});g=dojo.map(this.classes,function(d){return d.attributes});for(var f in h)h.hasOwnProperty(f)&&(i.get.field_accessors[f]=function(){var d=h[f];return!d?function(){}:function(){return this[d[this[0]]]}}(),i.set.field_accessors[f]=function(){var d=h[f];return!d?function(){}:function(b){return this[d[this[0]]]=b}}());return i};return h})},"JBrowse/Store/NCList":function(){define(["JBrowse/Finisher",
"JBrowse/Util"],function(h,j){function g(){this.topList=[]}g.prototype.importExisting=function(g,f,d,b,e){this.topList=g;this.attrs=f;this.start=f.makeFastGetter("Start");this.end=f.makeFastGetter("End");this.lazyClass=e;this.baseURL=d;this.lazyUrlTemplate=b;this.lazyChunks={}};g.prototype.fill=function(g,f){if(0==g.length)this.topList=[];else{this.attrs=f;this.start=f.makeFastGetter("Start");this.end=f.makeFastGetter("End");var d=f.makeSetter("Sublist"),b=this.start,e=this.end;g.sort(function(a,
c){return b(a)!=b(c)?b(a)-b(c):e(c)-e(a)});var c=[],a=[];this.topList=a;a.push(g[0]);if(1!=g.length)for(var h,j,q=1,m=g.length;q<m;q++)if(h=g[q],e(h)<e(g[q-1]))c.push(a),a=Array(h),d(g[q-1],a);else for(;;)if(0==c.length){a.push(h);break}else if(j=c[c.length-1],e(j[j.length-1])>e(h)){a.push(h);break}else a=c.pop()}};g.prototype.binarySearch=function(g,f,d){for(var b=-1,e=g.length,c;1<e-b;)c=b+e>>>1,d(g[c])>=f?e=c:b=c;return d===this.end?e:b};g.prototype.iterHelper=function(g,f,d,b,e,c,a,h,p){for(var q=
g.length,m=this.binarySearch(g,f,a),o=this.attrs.makeGetter("Chunk"),l=this.attrs.makeGetter("Sublist");m<q&&0<=m&&c*h(g[m])<c*d;){if(g[m][0]==this.lazyClass){var n=this,s=o(g[m]);s in this.lazyChunks||(this.lazyChunks[s]={});var u=this.lazyChunks[s];e.inc();j.maybeLoad({url:j.resolveUrl(this.baseURL,this.lazyUrlTemplate.replace(/\{Chunk\}/ig,s)),handleAs:"json"},u,function(g){return function(i){n.iterHelper(i,f,d,b,e,c,a,h,[g]);e.dec()}}(s),function(){e.dec()})}else b(g[m],p.concat(m));(s=l(g[m]))&&
this.iterHelper(s,f,d,b,e,c,a,h,p.concat(m));m+=c}};g.prototype.iterate=function(g,f,d,b){var e=g>f?-1:1,c=g>f?this.start:this.end,a=g>f?this.end:this.start,b=new h(b);0<this.topList.length&&this.iterHelper(this.topList,g,f,d,b,e,c,a,[0]);b.finish()};g.prototype.histogram=function(g,f,d,b){for(var e=Array(d),c=(f-g)/d,a=this.start,h=this.end,j=0;j<d;j++)e[j]=0;this.iterate(g,f,function(b){for(var f=Math.max(0,(a(b)-g)/c|0),b=Math.min(d,(h(b)-g)/c|0);f<=b;f++)e[f]++},function(){b(e)})};return g})},
"JBrowse/Finisher":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(h){this.fun=h;this.count=0;this.finished=!1},inc:function(){this.count++},dec:function(){this.count--;this.finish()},finish:function(){if(0>=this.count&&!this.finished)this.fun(),this.finished=!0}})})},"JBrowse/Store/LazyArray":function(){define(["JBrowse/Util","JBrowse/Finisher","dojo/_base/xhr"],function(h,j){var g=function(g,f){this.urlTemplate=g.urlTemplate;this.chunkSize=g.chunkSize;this.length=
g.length;this.baseUrl=void 0===f?"":f;this.chunks=[];this.toProcess={}};g.prototype.index=function(g,f,d){this.range(g,g,f,void 0,d)};g.prototype.range=function(g,f,d,b,e){var g=Math.max(0,g),f=Math.min(f,this.length-1),c=Math.floor(g/this.chunkSize),a=Math.floor(f/this.chunkSize);void 0===b&&(b=function(){});for(var k=new j(b),b=c;b<=a;b++)this.chunks[b]?this._processChunk(g,f,b,d,e):(c={start:g,end:f,callback:d,param:e,finish:k},k.inc(),this.toProcess[b]?this.toProcess[b].push(c):(this.toProcess[b]=
[c],c=this.urlTemplate.replace(/\{Chunk\}/gi,b),dojo.xhrGet({url:this.baseUrl?h.resolveUrl(this.baseUrl,c):c,handleAs:"json",load:this._makeLoadFun(b),error:function(){k.dec()}})));k.finish()};g.prototype._makeLoadFun=function(g){var f=this;return function(d){f.chunks[g]=d;d=f.toProcess[g];delete f.toProcess[g];for(var b=0;b<d.length;b++)f._processChunk(d[b].start,d[b].end,g,d[b].callback,d[b].param),d[b].finish.dec()}};g.prototype._processChunk=function(g,f,d,b,e){for(var c=d*this.chunkSize,f=f-
c,g=Math.max(0,g-c),f=Math.min(f,this.chunkSize-1);g<=f;g++)b(g+c,this.chunks[d][g],e)};return g})},"JBrowse/Store/TiledImage/Fixed":function(){define(["dojo/_base/declare","dojo/_base/Deferred","JBrowse/Store","JBrowse/Store/DeferredStatsMixin","JBrowse/Util"],function(h,j,g,i,f){return h([g,i],{constructor:function(d){this.tileToImage={};this.zoomCache={};this.baseUrl=d.baseUrl;this.url=this.resolveUrl(d.urlTemplate);this._deferred.images=new j;dojo.xhrGet({url:this.url,handleAs:"json",failOk:!0,
load:dojo.hitch(this,function(b){this.loadSuccess(b)}),error:dojo.hitch(this,"_failAllDeferred")})},loadSuccess:function(d){this.globalStats=d.stats||{};if(!("scoreMin"in this.globalStats))this.globalStats.scoreMin=this.globalStats.global_min;if(!("scoreMax"in this.globalStats))this.globalStats.scoreMax=this.globalStats.global_max;this.tileWidth=d.tileWidth;this.align=d.align;this.zoomLevels=d.zoomLevels;this._deferred.stats.resolve({success:!0});this._deferred.images.resolve({success:!0})},_getZoom:function(d){var b=
this.zoomCache[d];if(b)return b;for(var b=this.zoomLevels[0],e=this.tileWidth/d,c=1;c<this.zoomLevels.length;c++)Math.abs(this.zoomLevels[c].basesPerTile-e)<Math.abs(b.basesPerTile-e)&&(b=this.zoomLevels[c]);return this.zoomCache[d]=b},getImages:function(d,b,e){this._deferred.images.then(dojo.hitch(this,function(c){c.success?this._getImages(d,b,e):(this.error=c.error,e(c.error||c))}))},_getImages:function(d,b){for(var e=d.start,c=d.end,a=this._getZoom(d.scale||1),f=Math.max(e/a.basesPerTile,0)|0,
c=c/a.basesPerTile|0,e=[],g=f;g<=c;g++)f=document.createElement("img"),dojo.connect(f,"onerror",this.handleImageError),f.src=this._imageSource(a,g),f.startBase=g*a.basesPerTile,f.baseWidth=a.basesPerTile,f.tileNum=g,e.push(f);b(e)},_imageSource:function(d,b){return f.resolveUrl(this.url,d.urlPrefix+b+".png")}})})},"JBrowse/View/Track/Sequence":function(){define(["dojo/_base/declare","JBrowse/View/Track/BlockBased","JBrowse/View/Track/ExportMixin","JBrowse/Util"],function(h,j,g,i){return h([j,g],{constructor:function(){},
_defaultConfig:function(){return{maxExportSpan:5E5,showReverseStrand:!0}},_exportFormats:function(){return["FASTA"]},endZoom:function(){this.clear()},setViewInfo:function(f,d,b,e,c,a,g){this.inherited(arguments);this.show()},nbsp:String.fromCharCode(160),fillBlock:function(f){var d=f.blockIndex,b=f.block,e=f.leftBase,c=f.rightBase,a=f.scale,g=this.getCharacterMeasurements();1<=a?(this.store.getFeatures({ref:this.refSeq.name,seqChunkSize:this.refSeq.seqChunkSize,start:e,end:c},dojo.hitch(this,"_fillSequenceBlock",
b,a),function(){}),this.heightUpdate(2*g.h,d)):(e=Math.max(1,Math.round(4*a/g.w)),b=dojo.create("div",{className:"sequence_blur",style:{borderStyle:"solid",borderTopWidth:e+"px",borderBottomWidth:e+"px"}},b.domNode),this.heightUpdate(b.offsetHeight+2*b.offsetTop,d));f.finishCallback()},_fillSequenceBlock:function(f,d,b){var e=b.get("seq"),c=b.get("start"),a=b.get("end");if(c<this.refSeq.start)for(;e.length<a-c;)e=this.nbsp+e;else if(a>this.refSeq.end)for(;e.length<a-c;)e+=this.nbsp;b=document.createElement("div");
b.className="sequence";b.style.width="100%";f.domNode.appendChild(b);b.appendChild(this._renderSeqDiv(c,a,e,d));if(this.config.showReverseStrand)f=this._renderSeqDiv(c,a,i.complement(e),d),f.className="revcom",b.appendChild(f)},_renderSeqDiv:function(f,d,b,e){for(var c=this.getCharacterMeasurements(),a=document.createElement("div"),f=100/(d-f)+"%",d=e>=c.w,e=e>c.w+4,c=0;c<b.length;c++){var g=document.createElement("span");g.className="base base_"+b.charAt([c]).toLowerCase();g.style.width=f;if(d)e&&
(g.className+=" big"),g.innerHTML=b.charAt(c);a.appendChild(g)}return a},getCharacterMeasurements:function(){if(!this._measurements)this._measurements=this._measureSequenceCharacterSize(this.div);return this._measurements},_measureSequenceCharacterSize:function(f){var d=document.createElement("div");d.className="sequence";d.style.visibility="hidden";d.appendChild(document.createTextNode("12345678901234567890123456789012345678901234567890"));f.appendChild(d);var b={w:d.clientWidth/50,h:d.clientHeight};
f.removeChild(d);return b}})})},"JBrowse/View/Track/ExportMixin":function(){define("dojo/_base/declare,dojo/_base/array,dojo/aspect,JBrowse/has,dojo/window,dojo/dom-construct,JBrowse/Util,dijit/form/Button,dijit/form/RadioButton,dijit/Dialog".split(","),function(h,j,g,i,f,d,b,e,c,a){return h(null,{_canExport:function(){if(this.config.noExport)return!1;var a={ref:this.refSeq.name,start:this.refSeq.start,end:this.refSeq.end},b=this._canExportRegion(this.browser.view.visibleRegion()),a=this._canExportRegion(a);
return b||a},_possibleExportRegions:function(){var a=dojo.clone(this.browser.view.visibleRegion());a.description="Visible region";a.name="visible";return[a,{ref:this.refSeq.name,start:this.refSeq.start,end:this.refSeq.end,description:"Whole reference sequence",name:"wholeref"}]},_exportDialogContent:function(){var c=this.track._possibleExportRegions();j.forEach(c,function(a){a.length=Math.round(a.end-a.start+1);a.canExport=this._canExportRegion(a)},this.track);var h=d.create("form",{onSubmit:function(){return!1}});
h.innerHTML=' <fieldset class="region">   <legend>Region to save</legend>'+function(){var a="",e=0;j.forEach(c,function(c){var d=b.assembleLocString(c);a+=" <input "+(c.canExport?e++?"":' checked="checked"':' disabled="disabled"')+'     type="radio" data-dojo-type="dijit.form.RadioButton" name="region" id="region_'+c.name+'"     value="'+d+'" />   <label '+(c.canExport?"":' class="ghosted"')+' for="region_'+c.name+'">'+c.description+' - <span class="locString">'+d+"</span> ("+b.humanReadableNumber(c.length)+
(c.canExport?"b":"b, too large")+")</label>   <br>"});return a}.call(this)+' </fieldset>  <fieldset class="format">   <legend>Format</legend>'+function(){var a="",b=0;j.forEach(this.track._exportFormats(),function(c){c.name||(c={name:c,label:c});a+=' <input type="radio" '+(b++?"":'checked="checked" ')+'      data-dojo-type="dijit.form.RadioButton" name="format" id="format'+c.name+'" value="'+c.name+'" />   <label for="format'+c.name+'">'+c.label+"</label>   <br>"},this);return a}.call(this)+" </fieldset>";
var q=d.create("div",{className:"dijitDialogPaneActionBar"}),m=this.dialog;(new e({iconClass:"dijitIconDelete",onClick:dojo.hitch(m,"hide"),label:"Cancel"})).placeAt(q);var o=(new e({iconClass:"dijitIconTask",label:"View",disabled:!j.some(c,function(a){return a.canExport}),onClick:dojo.hitch(this.track,function(){var c=this;o.set("disabled",!0);o.set("iconClass","jbrowseIconBusy");var j=this._readRadio(h.elements.region),k=this._readRadio(h.elements.format);this.exportRegion(j,k,function(h){m.hide();
var l=d.create("textarea",{rows:Math.round(0.5*(f.getBox().h/12)),wrap:"off",cols:80,style:"maxWidth: 90em; overflow: scroll; overflow-y: scroll; overflow-x: scroll; overflow:-moz-scrollbars-vertical;",readonly:!0});l.value=h;var t=d.create("div",{className:"dijitDialogPaneActionBar"}),o=new a({className:"export-view-dialog",title:k+' export - <span class="locString">'+j+"</span> ("+b.humanReadableNumber(h.length)+"b)",content:[l,t]});(new e({iconClass:"dijitIconDelete",label:"Close",onClick:dojo.hitch(o,
"hide")})).placeAt(t);10>i("ie")||(new e({iconClass:"dijitIconSave",label:"Save",onClick:function(){o.hide();c._fileDownload({format:k,data:h})}})).placeAt(t);g.after(o,"hide",function(){l.parentNode.removeChild(l);l=null;setTimeout(function(){o.destroyRecursive()},500)});o.show()})})})).placeAt(q);if(!(10>i("ie")))var l=(new e({iconClass:"dijitIconSave",label:"Save",disabled:!j.some(c,function(a){return a.canExport}),onClick:dojo.hitch(this.track,function(){var a=this._readRadio(h.elements.format),
b=this._readRadio(h.elements.region);l.set("disabled",!0);l.set("iconClass","jbrowseIconBusy");this.exportRegion(b,a,dojo.hitch(this,function(b){m.hide();this._fileDownload({format:a,data:b})}))})})).placeAt(q);return[h,q]},_fileDownload:function(a){d.create("iframe",{style:{display:"none"}},this.div).src="data:"+(a.format?"application/x-"+a.format.toLowerCase():"text/plain")+","+escape(a.data||"")},_readRadio:function(a){if(a.length)for(var b=0;b<a.length;b++)if(a[b].checked)return a[b].value;return a.value},
exportRegion:function(a,c,e){"string"==typeof a&&(a=b.parseLocString(a));a.ref!=this.refSeq.name?console.error("cannot export data for ref seq "+a.ref+", exporting is currently only supported for the currently-visible reference sequence"):require(["JBrowse/View/Export/"+c],dojo.hitch(this,function(b){(new b({refSeq:this.refSeq,track:this,store:this.store})).exportRegion(a,e)}))},_trackMenuOptions:function(){var a=this.inherited(arguments);this.config.noExport||a.push({label:"Save track data",iconClass:"dijitIconSave",
disabled:!this._canExport(),action:"bareDialog",content:this._exportDialogContent,dialog:{id:"exportDialog",className:"export-dialog"}});return a},_canExportRegion:function(a){if(!a)return!1;if("number"==typeof this.config.maxExportSpan||"string"==typeof this.config.maxExportSpan)return a.end-a.start+1<=this.config.maxExportSpan;var b={};this.store.getGlobalStats(function(a){b=a});return b.featureDensity?b.featureDensity*(a.end-a.start)<=(this.config.maxExportFeatures||5E3):!0}})})},"JBrowse/View/Track/HTMLFeatures":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/dom-construct,dojo/dom-geometry,dojo/on,JBrowse/has,dijit/Dialog,dijit/form/Select,dijit/form/RadioButton,dijit/form/Button,JBrowse/View/Track/BlockBased,JBrowse/View/Track/YScaleMixin,JBrowse/View/Track/ExportMixin,JBrowse/View/Track/FeatureDetailMixin,JBrowse/Util,JBrowse/View/GranularRectLayout,JBrowse/Model/Location".split(","),
function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l,n,s){return h([p,q,m,o],{constructor:function(a){this.numBins=25;this.histLabel=!1;this.padding=this.defaultPadding=5;this.glyphHeightPad=1;this.levelHeightPad=2;this.minFeatWidth=this.labelPad=1;this.trackPadding=a.trackPadding;this.heightCache={};this.showLabels=this.config.style.showLabels;this._setupEventHandlers()},_defaultConfig:function(){return{maxFeatureScreenDensity:0.5,maxHeight:1E3,style:{arrowheadClass:"arrowhead",className:"feature2",_defaultHistScale:4,
_defaultLabelScale:30,_defaultDescriptionScale:120,minSubfeatureWidth:6,maxDescriptionLength:70,showLabels:!0,label:function(a){return a.get("name")||a.get("id")},description:"note, description",centerChildrenVertically:!0},hooks:{create:function(){return document.createElement("div")}},events:{},menuTemplate:[{label:"View details",title:"{type} {name}",action:"contentDialog",iconClass:"dijitIconTask",content:dojo.hitch(this,"defaultFeatureDetail")},{label:function(){return"Highlight this "+(this.feature&&
this.feature.get("type")?this.feature.get("type"):"feature")},action:function(){this.track.browser.setHighlightAndRedraw(new s({feature:this.feature,tracks:[this.track]}))},iconClass:"dijitIconFilter"}]}},wrapHandler:function(a){var b=this;return function(c){c=c||window.event;if(!c.shiftKey){var e=c.currentTarget||c.srcElement;if(!e.feature)e=e.parentElement;e.feature&&a(b,e,e.feature,c)}}},_histDimensions:function(a){for(var a=a/this.numBins,b=2,c=!1,e=this.store.histograms.stats,d,f=0;f<e.length;f++)if(e[f].basesPerBin>=
a){c=0.01>e[f].mean/e[f].max;b=100/(c?Math.log(e[f].max):e[f].max);d=e[f];break}return{bpPerBin:a,pxPerCount:b,logScale:c,stats:d}},fillHist:function(a){for(var b=a.blockIndex,c=a.block,e=a.leftBase,d=a.rightBase,f=a.stripeWidth,g=this._histDimensions(Math.abs(d-e)),h=this,i=function(a){for(var i=0,j=0;j<h.numBins;j++)"number"==typeof a[j]&&isFinite(a[j])&&(i=Math.max(i,a[j]));for(var k,j=0;j<h.numBins;j++)if("number"==typeof a[j]&&isFinite(a[j]))k=document.createElement("div"),k.className="hist feature-hist "+
h.config.style.className+"-hist",k.style.cssText="left: "+100*(j/h.numBins)+"%; height: "+g.pxPerCount*(g.logScale?Math.log(a[j]):a[j])+"px;bottom: "+h.trackPadding+"px;width: "+(100/h.numBins-100/f)+"%;"+(h.config.style.histCss?h.config.style.histCss:""),k.setAttribute("value",a[j]),l.is_ie6&&k.appendChild(document.createComment()),c.domNode.appendChild(k);h.heightUpdate(g.pxPerCount*(g.logScale?Math.log(i):i),b);h.makeHistogramYScale(Math.abs(d-e))},j=this.store.histograms.meta[0],k=0;k<this.store.histograms.meta.length;k++)g.bpPerBin>=
this.store.histograms.meta[k].basesPerBin&&(j=this.store.histograms.meta[k]);var m=g.bpPerBin/j.basesPerBin;if(0.9<m&&1.0E-4>Math.abs(m-Math.round(m))){for(var o=Math.floor(e/j.basesPerBin),m=Math.round(m),n=[],k=0;k<this.numBins;k++)n[k]=0;j.lazyArray.range(o,o+m*this.numBins,function(a,b){n[Math.floor((a-o)/m)]+=b},function(){i(n)})}else this.store.histogram(e,d,this.numBins,i);a.finishCallback()},endZoom:function(){this.clear()},updateStaticElements:function(a){this.inherited(arguments);this.updateYScaleFromViewDimensions(a);
this.updateFeatureLabelPositions(a);this.updateFeatureArrowPositions(a)},updateFeatureArrowPositions:function(a){if(!(!1 in a)){var b=this.browser.view.minVisible(),c=this.browser.view.maxVisible();g.forEach(this.blocks,function(a){a&&dojo.query("> .feature",a.domNode).forEach(function(e){var d=e.feature,f=d.get("strand");if(f){var g=d.get("start"),h=d.get("end");0>f&&h>b?dojo.query("> .minus-"+this.config.style.arrowheadClass,e).forEach(function(c){c.style.left=(g<b?a.bpToX(b)-a.bpToX(g):-this.minusArrowWidth)+
"px"},this):0<f&&g<c&&dojo.query("> .plus-"+this.config.style.arrowheadClass,e).forEach(function(b){b.style.right=(h>c?a.bpToX(h)-a.bpToX(c):-this.plusArrowWidth)+"px"},this)}},this)},this)}},updateFeatureLabelPositions:function(a){!1 in a||g.forEach(this.blocks,function(a){if(a&&this.label){var b=100*(this.label.offsetLeft+this.label.offsetWidth-a.domNode.offsetLeft)/a.domNode.offsetWidth+2;if(b){var c=a.endBase-a.startBase;dojo.query(".feature",a.domNode).forEach(function(e){if(e.label){var d=e.label,
f=e.feature,e=parseInt(f.get("start")),e=100*(e-a.startBase)/c,f=parseInt(f.get("end")),f=100*((f-a.startBase)/c-d.offsetWidth/a.domNode.offsetWidth);d.style.left=Math.max(e,Math.min(b,f))+"%"}},this)}}},this)},fillBlock:function(a){var b=a.blockIndex,c=a.block,e=a.leftBase,d=a.rightBase,f=a.scale;this.store.getGlobalStats(dojo.hitch(this,function(g){var h=g.featureDensity,i=this.config.style.histScale||h*this.config.style._defaultHistScale,h=this.config.style.featureScale||h/this.config.maxFeatureScreenDensity,
j=Math.abs(e-d);if(this._updatedLabelForBlockSize!=j)this.store.histogram&&f<i?this.setLabel(this.key+' <span class="feature-density">per '+l.addCommas(Math.round(j/this.numBins))+" bp</span>"):this.setLabel(this.key),this._updatedLabelForBlockSize=j;this.store.histograms&&f<i?this.fillHist(a):f<h?(this.fillTooManyFeaturesMessage(b,c,f),a.finishCallback()):(this._removeYScale(),this.fillFeatures(dojo.mixin({stats:g},a)))}),dojo.hitch(this,"fillBlockError",b,c))},makeHistogramYScale:function(a){var b=
this._histDimensions(a);if(b.logScale)console.error("Log histogram scale axis labels not yet implemented.");else{var c=this.height/b.pxPerCount,c=b.logScale?log(c):c;if(!this.yscale||!this.yscale_params||!(this.yscale_params.maxval==c&&this.yscale_params.height==this.height&&this.yscale_params.blockbp==a))this._removeYScale(),this.makeYScale({min:0,max:c}),this.yscale_params={height:this.height,blockbp:a,maxval:c}}},_removeYScale:function(){this.yscale?(this.yscale.parentNode.removeChild(this.yscale),
delete this.yscale_params,delete this.yscale):dojo.query(".ruler",this.div).orphan()},destroy:function(){this._clearLayout();this.inherited(arguments)},cleanupBlock:function(a){if(a&&(this.layout&&this.layout.discardRange(a.startBase,a.endBase),a.featureNodes))for(var b in a.featureNodes){var c=a.featureNodes[b];g.forEach("track,feature,callbackArgs,_labelScale,_descriptionScale".split(","),function(a){l.removeAttribute(c,a)});"label"in c&&(g.forEach("track,feature,callbackArgs".split(","),function(a){l.removeAttribute(c.label,
a)}),l.removeAttribute(c,"label"))}this.inherited(arguments)},transfer:function(a,b,c,e,d){if(a&&b)for(var f=b.startBase,g=b.endBase,h,i=a.startBase<b.startBase?a.rightOverlaps:a.leftOverlaps,i=i||[],j=0;j<i.length;j++)(h=a.featureNodes[i[j]])&&h.label&&h.label.parentNode&&h.label.parentNode.removeChild(h.label),h&&h.feature&&h.layoutEnd>f&&h.feature.get("start")<g&&(h.parentNode.removeChild(h),delete a.featureNodes[i[j]],this.addFeatureToBlock(h.feature,i[j],b,c,h._labelScale,h._descriptionScale,
e,d))},fillFeatures:function(a){var b=a.blockIndex,c=a.block,e=a.leftBase,d=a.rightBase,f=a.scale,g=a.stats,h=a.containerStart,i=a.containerEnd,j=a.finishCallback;this.scale=f;c.featureNodes={};if(!this.haveMeasurements)this.measureStyles(),this.haveMeasurements=!0;var k=this.config.style.labelScale||g.featureDensity*this.config.style._defaultLabelScale,m=this.config.style.descriptionScale||g.featureDensity*this.config.style._defaultDescriptionScale,l=this,a=dojo.hitch(this,function(a){var b=a.id();
this._featureIsRendered(b)||this.addFeatureToBlock(a,b,c,f,k,m,h,i)});this.store.getFeatures({ref:this.refSeq.name,start:e,end:d},a,function(){l.heightUpdate(l._getLayout(f).getTotalHeight(),b);j()},function(a){console.error(a,a.stack);l.fillBlockError(b,c,a);j()})},addFeatureToBlock:function(a,b,c,e,d,f,g,h){a=this.renderFeature(a,b,c,e,d,f,g,h);if(!a)return null;c.domNode.appendChild(a);this.config.style.centerChildrenVertically&&this._centerChildrenVertically(a);return a},fillBlockTimeout:function(a,
b){this.inherited(arguments);b.featureNodes={}},_featureIsRendered:function(a){for(var b=this.blocks,c=0;c<b.length;c++)if(b[c]&&b[c].featureNodes&&b[c].featureNodes[a])return!0;return!1},measureStyles:function(){var a=document.createElement("div");a.className="feature-label";a.style.height="auto";a.style.visibility="hidden";a.appendChild(document.createTextNode("1234567890"));document.body.appendChild(a);this.labelHeight=a.clientHeight;this.labelWidth=a.clientWidth/10;document.body.removeChild(a);
var b,a=document.createElement("div");a.className="feature "+this.config.style.className+" plus-"+this.config.style.className+" plus-"+this.config.style.className+"1";if(this.config.style.featureCss)a.style.cssText=this.config.style.featureCss;a.style.visibility="hidden";l.is_ie6&&a.appendChild(document.createComment("foo"));document.body.appendChild(a);b=f.getMarginBox(a);this.glyphHeight=Math.round(b.h);this.padding=this.defaultPadding+b.w;document.body.removeChild(a);if(this.config.style.arrowheadClass)a=
document.createElement("div"),a.className="plus-"+this.config.style.arrowheadClass,l.is_ie6&&a.appendChild(document.createComment("foo")),document.body.appendChild(a),b=f.position(a),this.plusArrowWidth=b.w,this.plusArrowHeight=b.h,a.className="minus-"+this.config.style.arrowheadClass,b=f.position(a),this.minusArrowWidth=b.w,this.minusArrowHeight=b.h,document.body.removeChild(a)},getFeatDiv:function(a){a=this.getId(a);if(!a)return null;for(var b=0;b<this.blocks.length;b++){var c=this.blocks[b];if(c&&
c.featureNodes&&(c=c.featureNodes[a]))return c}return null},getId:function(a){return a.id()},renderFeature:function(a,b,c,e,d,f,g,h){var i=a.get("end"),j=a.get("start");"string"==typeof i&&(i=parseInt(i));"string"==typeof j&&(j=parseInt(j));var k=j,l=i;if(this.config.style.arrowheadClass)switch(a.get("strand")){case 1:case "+":l+=this.plusArrowWidth/e;break;case -1:case "-":k-=this.minusArrowWidth/e}var m=this.glyphHeight+this.glyphHeightPad,o=this.getConfForFeature("style.label",a),n=e>f&&this.getFeatureDescription(a);
n&&n.length>this.config.style.maxDescriptionLength&&(n=n.substr(0,this.config.style.maxDescriptionLength+1).replace(/(\s+\S+|\s*)$/,"")+String.fromCharCode(8230));this.showLabels&&e>=d&&o&&(l=Math.max(l,k+(""+o).length*this.labelWidth/e),m+=this.labelHeight+this.labelPad);n&&(l=Math.max(l,k+(""+n).length*this.labelWidth/e),m+=this.labelHeight+this.labelPad);var l=l+Math.max(1,this.padding/e),p=this._getLayout(e).addRect(b,k,l,m);if(null===p)return this.markBlockHeightOverflow(c),null;m=this.config.hooks.create(this,
a);this._connectFeatDivHandlers(m);m.track=this;m.feature=a;m.layoutEnd=l;m.callbackArgs=[this,m.feature,m];m._labelScale=d;m._descriptionScale=f;c.featureNodes[b]=m;if(k<c.startBase){if(!c.leftOverlaps)c.leftOverlaps=[];c.leftOverlaps.push(b)}if(l>c.endBase){if(!c.rightOverlaps)c.rightOverlaps=[];c.rightOverlaps.push(b)}dojo.addClass(m,"feature");f=this.config.style.className;"{type}"==f&&(f=a.get("type"));b=a.get("strand");switch(b){case 1:case "+":dojo.addClass(m,"plus-"+f);break;case -1:case "-":dojo.addClass(m,
"minus-"+f);break;default:dojo.addClass(m,f)}l=a.get("phase");null!==l&&void 0!==l&&dojo.addClass(m,f+"_phase"+l);(f=this.isFeatureHighlighted(a,o))&&dojo.addClass(m,"highlighted");g=Math.max(j,g);h=Math.min(i,h);j=c.endBase-c.startBase;i=Math.max(this.minFeatWidth,100*((h-g)/j));m.style.cssText="left:"+100*(g-c.startBase)/j+"%;top:"+p+"px; width:"+i+"%;"+(this.config.style.featureCss?this.config.style.featureCss:"");if(this.config.style.arrowheadClass)switch(l=document.createElement("div"),b){case 1:case "+":l.className=
"plus-"+this.config.style.arrowheadClass;l.style.cssText="right: "+-this.plusArrowWidth+"px";m.appendChild(l);break;case -1:case "-":l.className="minus-"+this.config.style.arrowheadClass,l.style.cssText="left: "+-this.minusArrowWidth+"px",m.appendChild(l)}if(o&&this.showLabels&&e>=d||n)e=dojo.create("div",{className:"feature-label"+(f?" highlighted":""),innerHTML:(o?'<div class="feature-name">'+o+"</div>":"")+(n?' <div class="feature-description">'+n+"</div>":""),style:{top:p+this.glyphHeight+2+"px",
left:100*(k-c.startBase)/j+"%"}},c.domNode),this._connectFeatDivHandlers(e),m.label=e,e.feature=a,e.track=this,e.callbackArgs=[this,m.feature,m];i>this.config.style.minSubfeatureWidth&&this.handleSubFeatures(a,m,g,h,c);this.config.menuTemplate&&window.setTimeout(dojo.hitch(this,"_connectMenus",m),50+150*Math.random());"function"==typeof this.config.hooks.modify&&this.config.hooks.modify(this,a,m);return m},handleSubFeatures:function(a,b,c,e,d){var f=a.get("subfeatures");if(f)for(var g=0;g<f.length;g++)this.renderSubfeature(a,
b,f[g],c,e,d)},_getHeight:function(a){if(this.config.disableHeightCache)return a.offsetHeight||0;var b=this.heightCache[a.className];if(b)return b;b=a.offsetHeight||0;return this.heightCache[a.className]=b},_centerChildrenVertically:function(a){if(0<a.childNodes.length)for(var b=this._getHeight(a),c=0;c<a.childNodes.length;c++){var e=a.childNodes[c];if(e.style){var d=this._getHeight(e);dojo.style(e,{marginTop:"0",top:(b-d)/2+"px"});0<e.childNodes.length&&this._centerChildrenVertically(e)}}},_connectFeatDivHandlers:function(a){for(var b in this.eventHandlers)this.own(d(a,
b,this.eventHandlers[b]));this.eventHandlers.click&&this.eventHandlers.click.label&&a.setAttribute("title",this.eventHandlers.click.label)},_connectMenus:function(a){var b=j.hitch(this,"_refreshMenu",a);this.own(d(a,"mouseover",b));a.label&&this.own(d(a.label,"mouseover",b))},_refreshMenu:function(a){if(!a.contextMenu)a.contextMenu=this._makeFeatureContextMenu(a,this.config.menuTemplate);a.contextMenuTimeout&&window.clearTimeout(a.contextMenuTimeout);a.contextMenuTimeout=window.setTimeout(function(){a.contextMenu&&
(a.contextMenu.destroyRecursive(),l.removeAttribute(a,"contextMenu"));l.removeAttribute(a,"contextMenuTimeout")},3E4)},_makeFeatureContextMenu:function(a,b){var b=this._processMenuSpec(dojo.clone(b),a),c=this._renderContextMenu(b,a);c.startup();c.bindDomNode(a);a.labelDiv&&c.bindDomNode(a.labelDiv);return c},renderSubfeature:function(a,b,c,e,d,f){var a=c.get("start"),g=c.get("end"),h=d-e,i=c.get("type"),j;if(this.config.style.subfeatureClasses)if(j=this.config.style.subfeatureClasses[i],void 0===
j)j=i;else{if(null===j)return null}else j=i;if("hidden"==j)return null;i=document.createElement("div");dojo.addClass(i,"subfeature");if(j)switch(c.get("strand")){case 1:case "+":dojo.addClass(i,"plus-"+j);break;case -1:case "-":dojo.addClass(i,"minus-"+j);break;default:dojo.addClass(i,j)}if(g<=e||a>=d)return null;l.is_ie6&&i.appendChild(document.createComment());i.style.cssText="left: "+100*((a-e)/h)+"%;width: "+100*((g-a)/h)+"%;";b.appendChild(i);return f.featureNodes[c.id()]=i},_getLayout:function(a){if(!this.haveMeasurements)this.measureStyles(),
this.haveMeasurements=!0;if((!this.layout||this.layout.pitchX!=4/a)&&a)this.layout=new n({pitchX:4/a,pitchY:this.config.layoutPitchY||this.glyphHeight+this.glyphHeightPad,maxHeight:this.getConf("maxHeight")});return this.layout},_clearLayout:function(){delete this.layout},clear:function(){delete this.layout;this.inherited(arguments)},changed:function(){this._clearLayout();this.inherited(arguments)},_exportFormats:function(){return["GFF3","BED",{name:"SequinTable",label:"Sequin Table"}]},_trackMenuOptions:function(){var a=
this.inherited(arguments),b=this;a.push.apply(a,[{type:"dijit/MenuSeparator"},{label:"Show labels",type:"dijit/CheckedMenuItem",checked:!!("showLabels"in this?this.showLabels:this.config.style.showLabels),onClick:function(){b.showLabels=this.checked;b.changed()}}]);return a}})})},"JBrowse/View/Track/YScaleMixin":function(){define(["dojo/_base/declare","JBrowse/View/Ruler"],function(h,j){return h(null,{makeYScale:function(g){var g=g||{},h="number"==typeof g.min?g.min:this.minDisplayed,f="number"==
typeof g.max?g.max:this.maxDisplayed;this.yscale&&this.yscale.parentNode.removeChild(this.yscale);var d=dojo.create("div",{className:"ruler vertical_ruler",style:{height:this.height+"px",width:"10px",position:"absolute",zIndex:17}},this.div);this.yscale=d;if(this.window_info&&"x"in this.window_info)d.style.left=this.window_info.x+(this.window_info.width||0)/2+"px";dojo.style(d,"top"==this.config.align?{bottom:0}:{top:0});g=new j({min:h,max:f,direction:"up",fixBounds:g.fixBounds||!1});g.render_to(d);
this.ruler=g},updateYScaleFromViewDimensions:function(g){if(("number"==typeof g.x||"number"==typeof g.width)&&this.yscale)this.yscale.style.left=this.window_info.x+(this.window_info.width||0)/2+"px"}})})},"JBrowse/View/Ruler":function(){define("dojo/query,dojox/charting/Chart,dojox/charting/axis2d/Default,dojox/charting/plot2d/Bubble,dojo/NodeList-dom,dojo/number".split(","),function(h,j){function g(g){dojo.mixin(this,g)}g.prototype.render_to=function(g){"string"==typeof g&&(g=dojo.byId(g));var f=
dojo.position(g);Math.log(this.max+1);Math.log(10);f=dojo.create("div",{style:{position:"absolute",left:"-9px",bottom:"-9px",width:"10px",height:f.h+18+"px"}},g);try{var d=new j(f,{fill:"transparent"});d.addAxis("y",{vertical:!0,fill:"transparent",min:this.min,max:this.max,fixLower:this.fixBounds?"major":"none",fixUpper:this.fixBounds?"major":"none"});d.addPlot("default",{type:"Bubble",fill:"transparent"});d.render();h("svg rect",d.domNode).orphan();this.scaler=d.axes.y.scaler}catch(b){console.error(b+
""),console.error("Failed to draw Ruler with SVG, your browser may not support the necessary technology."),g.removeChild(f)}};return g})},"dojox/charting/Chart":function(){define("../main,dojo/_base/lang,dojo/_base/array,dojo/_base/declare,dojo/dom-style,dojo/dom,dojo/dom-geometry,dojo/dom-construct,dojo/_base/Color,dojo/_base/sniff,./Element,./SimpleTheme,./Series,./axis2d/common,dojox/gfx/shape,dojox/gfx,dojox/lang/functional,dojox/lang/functional/fold,dojox/lang/functional/reversed".split(","),
function(h,j,g,i,f,d,b,e,c,a,k,p,q,m,o,l,n){function s(a,b){if(a&&b)a.min=Math.min(a.min,b.min),a.max=Math.max(a.max,b.max);return a||b}function u(a,b){var c={},e={};g.forEach(a,function(a){var b=c[a.name]=a.getSeriesStats();a.hAxis&&(e[a.hAxis]=s(e[a.hAxis],{min:b.hmin,max:b.hmax}));a.vAxis&&(e[a.vAxis]=s(e[a.vAxis],{min:b.vmin,max:b.vmax}))});g.forEach(a,function(a){var d=c[a.name];if(a.hAxis){var f=e[a.hAxis];d.hmin=f.min;d.hmax=f.max}if(a.vAxis)f=e[a.vAxis],d.vmin=f.min,d.vmax=f.max;a.initializeScalers(b,
d)})}var r=j.getObject("charting",!0,h),v=n.lambda("item.clear()"),t=n.lambda("item.purgeGroup()"),w=n.lambda("item.destroy()"),x=n.lambda("item.dirty = false"),B=n.lambda("item.dirty = true"),A=n.lambda("item.name");return i("dojox.charting.Chart",null,{constructor:function(a,c){c||(c={});this.margins=c.margins?c.margins:{l:10,t:10,r:10,b:10};this.stroke=c.stroke;this.fill=c.fill;this.delayInMs=c.delayInMs||200;this.title=c.title;this.titleGap=c.titleGap;this.titlePos=c.titlePos;this.titleFont=c.titleFont;
this.titleFontColor=c.titleFontColor;this.theme=this.chartTitle=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=!0;this.node=d.byId(a);var e=b.getMarginBox(a);this.surface=l.createSurface(this.node,e.w||400,e.h||300);if(-1==this.surface.declaredClass.indexOf("vml"))this.plotGroup=this.surface.createGroup()},destroy:function(){g.forEach(this.series,w);g.forEach(this.stack,w);n.forIn(this.axes,w);this.surface.destroy();this.chartTitle&&this.chartTitle.tagName&&e.destroy(this.chartTitle)},
getCoords:function(){var a=this.node,c=f.getComputedStyle(a),c=b.getMarginBox(a,c),a=b.position(a,!0);c.x=a.x;c.y=a.y;return c},setTheme:function(a){this.theme=a.clone();this.dirty=!0;return this},addAxis:function(a,b){var c;c=b&&b.type||"Default";if("string"==typeof c){if(!r.axis2d||!r.axis2d[c])throw Error("Can't find axis: "+c+" - Check require() dependencies.");c=new r.axis2d[c](this,b)}else c=new c(this,b);c.name=a;c.dirty=!0;a in this.axes&&this.axes[a].destroy();this.axes[a]=c;this.dirty=!0;
return this},getAxis:function(a){return this.axes[a]},removeAxis:function(a){if(a in this.axes)this.axes[a].destroy(),delete this.axes[a],this.dirty=!0;return this},addPlot:function(a,b){var c;c=b&&b.type||"Default";if("string"==typeof c){if(!r.plot2d||!r.plot2d[c])throw Error("Can't find plot: "+c+" - didn't you forget to dojo.require() it?");c=new r.plot2d[c](this,b)}else c=new c(this,b);c.name=a;c.dirty=!0;a in this.plots?(this.stack[this.plots[a]].destroy(),this.stack[this.plots[a]]=c):(this.plots[a]=
this.stack.length,this.stack.push(c));this.dirty=!0;return this},getPlot:function(a){return this.stack[this.plots[a]]},removePlot:function(a){if(a in this.plots){var b=this.plots[a];delete this.plots[a];this.stack[b].destroy();this.stack.splice(b,1);n.forIn(this.plots,function(a,c,e){a>b&&(e[c]=a-1)});var c=g.filter(this.series,function(b){return b.plot!=a});if(c.length<this.series.length)g.forEach(this.series,function(b){b.plot==a&&b.destroy()}),this.runs={},g.forEach(c,function(a,b){this.runs[a.plot]=
b},this),this.series=c;this.dirty=!0}return this},getPlotOrder:function(){return n.map(this.stack,A)},setPlotOrder:function(a){var b={},c=n.filter(a,function(a){if(!(a in this.plots)||a in b)return!1;b[a]=1;return!0},this);c.length<this.stack.length&&n.forEach(this.stack,function(a){a=a.name;a in b||c.push(a)});a=n.map(c,function(a){return this.stack[this.plots[a]]},this);n.forEach(a,function(a,b){this.plots[a.name]=b},this);this.stack=a;this.dirty=!0;return this},movePlotToFront:function(a){if(a in
this.plots){var b=this.plots[a];if(b){var c=this.getPlotOrder();c.splice(b,1);c.unshift(a);return this.setPlotOrder(c)}}return this},movePlotToBack:function(a){if(a in this.plots){var b=this.plots[a];if(b<this.stack.length-1){var c=this.getPlotOrder();c.splice(b,1);c.push(a);return this.setPlotOrder(c)}}return this},addSeries:function(a,b,c){b=new q(this,b,c);b.name=a;a in this.runs?(this.series[this.runs[a]].destroy(),this.series[this.runs[a]]=b):(this.runs[a]=this.series.length,this.series.push(b));
this.dirty=!0;if(!("ymin"in b)&&"min"in b)b.ymin=b.min;if(!("ymax"in b)&&"max"in b)b.ymax=b.max;return this},getSeries:function(a){return this.series[this.runs[a]]},removeSeries:function(a){if(a in this.runs){var b=this.runs[a];delete this.runs[a];this.series[b].destroy();this.series.splice(b,1);n.forIn(this.runs,function(a,c,e){a>b&&(e[c]=a-1)});this.dirty=!0}return this},updateSeries:function(a,b,c){if(a in this.runs)a=this.series[this.runs[a]],a.update(b),c?this.dirty=!0:(this._invalidateDependentPlots(a.plot,
!1),this._invalidateDependentPlots(a.plot,!0));return this},getSeriesOrder:function(a){return n.map(n.filter(this.series,function(b){return b.plot==a}),A)},setSeriesOrder:function(a){var b,c={},e=n.filter(a,function(a){if(!(a in this.runs)||a in c)return!1;var e=this.series[this.runs[a]];if(b){if(e.plot!=b)return!1}else b=e.plot;c[a]=1;return!0},this);n.forEach(this.series,function(a){var d=a.name;!(d in c)&&a.plot==b&&e.push(d)});this.series=n.map(e,function(a){return this.series[this.runs[a]]},
this).concat(n.filter(this.series,function(a){return a.plot!=b}));n.forEach(this.series,function(a,b){this.runs[a.name]=b},this);this.dirty=!0;return this},moveSeriesToFront:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[0])return c.splice(b,1),c.unshift(a),this.setSeriesOrder(c)}return this},moveSeriesToBack:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[c.length-1])return c.splice(b,1),c.push(a),
this.setSeriesOrder(c)}return this},resize:function(a,c){var e;switch(arguments.length){case 1:e=j.mixin({},a);b.setMarginBox(this.node,e);break;case 2:e={w:a,h:c},b.setMarginBox(this.node,e)}e=b.getMarginBox(this.node);var d=this.surface.getDimensions();return d.width!=e.w||d.height!=e.h?(this.surface.setDimensions(e.w,e.h),this.dirty=!0,this.render()):this},getGeometry:function(){var a={};n.forIn(this.axes,function(b){b.initialized()&&(a[b.name]={name:b.name,vertical:b.vertical,scaler:b.scaler,
ticks:b.ticks})});return a},setAxisWindow:function(a,b,c,e){var d=this.axes[a];d&&(d.setWindow(b,c),g.forEach(this.stack,function(b){if(b.hAxis==a||b.vAxis==a)b.zoom=e}));return this},setWindow:function(a,b,c,e,d){"plotArea"in this||this.calculateGeometry();n.forIn(this.axes,function(d){var f,g;f=d.getScaler().bounds;g=f.span/(f.upper-f.lower);d.vertical?(f=b,g=e/g/f):(f=a,g=c/g/f);d.setWindow(f,g)});g.forEach(this.stack,function(a){a.zoom=d});return this},zoomIn:function(a,b,c){var e=this.axes[a];
if(e){var e=e.getScaler().bounds,d=Math.min(b[0],b[1]),f=Math.max(b[0],b[1]),d=b[0]<e.lower?e.lower:d,f=b[1]>e.upper?e.upper:f;this.setAxisWindow(a,(e.upper-e.lower)/(f-d),d-e.lower);c?this.delayedRender():this.render()}},calculateGeometry:function(){if(this.dirty)return this.fullGeometry();var a=g.filter(this.stack,function(a){return a.dirty||a.hAxis&&this.axes[a.hAxis].dirty||a.vAxis&&this.axes[a.vAxis].dirty},this);u(a,this.plotArea);return this},fullGeometry:function(){this._makeDirty();g.forEach(this.stack,
v);this.theme||this.setTheme(new p);g.forEach(this.series,function(a){if(!(a.plot in this.plots)){if(!r.plot2d||!r.plot2d.Default)throw Error("Can't find plot: Default - didn't you forget to dojo.require() it?");var b=new r.plot2d.Default(this,{});b.name=a.plot;this.plots[a.plot]=this.stack.length;this.stack.push(b)}this.stack[this.plots[a.plot]].addSeries(a)},this);g.forEach(this.stack,function(a){a.assignAxes&&a.assignAxes(this.axes)},this);var a=this.dim=this.surface.getDimensions();a.width=l.normalizedLength(a.width);
a.height=l.normalizedLength(a.height);n.forIn(this.axes,v);u(this.stack,a);var b=this.offsets={l:0,r:0,t:0,b:0};n.forIn(this.axes,function(a){n.forIn(a.getOffsets(),function(a,c){b[c]=Math.max(a,b[c])})});if(this.title){this.titleGap=0==this.titleGap?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";var c=
l.normalizedLength(l.splitFontString(this.titleFont).size);b["top"==this.titlePos?"t":"b"]+=c+this.titleGap}n.forIn(this.margins,function(a,c){b[c]+=a});this.plotArea={width:a.width-b.l-b.r,height:a.height-b.t-b.b};n.forIn(this.axes,v);u(this.stack,this.plotArea);return this},render:function(){if(this._delayedRenderHandle)clearTimeout(this._delayedRenderHandle),this._delayedRenderHandle=null;this.theme&&this.theme.clear();if(this.dirty)return this.fullRender();this.calculateGeometry();n.forEachRev(this.stack,
function(a){a.render(this.dim,this.offsets)},this);n.forIn(this.axes,function(a){a.render(this.dim,this.offsets)},this);this._makeClean();return this},fullRender:function(){this.fullGeometry();var b=this.offsets,c=this.dim,d=Math.max(0,c.width-b.l-b.r),f=Math.max(0,c.height-b.t-b.b);g.forEach(this.series,t);n.forIn(this.axes,t);g.forEach(this.stack,t);for(var h=this.surface.children,i=0;i<h.length;++i)o.dispose(h[i]);this.chartTitle&&this.chartTitle.tagName&&e.destroy(this.chartTitle);this.plotGroup&&
this.plotGroup.clear();this.surface.clear();this.chartTitle=null;this.plotGroup?(this._renderChartBackground(c,b),this._renderPlotBackground(c,b,d,f),this.surface.add(this.plotGroup),this.plotGroup.setClip({x:b.l,y:b.t,width:d,height:f})):this._renderPlotBackground(c,b,d,f);n.foldr(this.stack,function(a,e){return e.render(c,b),0},0);this.plotGroup||this._renderChartBackground(c,b);if(this.title)d="canvas"==l.renderer||!a("ie")&&!a("opera")?"html":"gfx",f=l.normalizedLength(l.splitFontString(this.titleFont).size),
this.chartTitle=m.createText[d](this,this.surface,c.width/2,"top"==this.titlePos?f+this.margins.t:c.height-this.margins.b,"middle",this.title,this.titleFont,this.titleFontColor);n.forIn(this.axes,function(a){a.render(c,b)});this._makeClean();return this},_renderChartBackground:function(a,b){var e=this.theme,d,g=void 0!==this.fill?this.fill:e.chart&&e.chart.fill,e=void 0!==this.stroke?this.stroke:e.chart&&e.chart.stroke;if("inherit"==g){d=this.node;for(g=new c(f.get(d,"backgroundColor"));0==g.a&&d!=
document.documentElement;)g=new c(f.get(d,"backgroundColor")),d=d.parentNode}g&&(this.plotGroup?(g=k.prototype._shapeFill(k.prototype._plotFill(g,a),{x:0,y:0,width:a.width+1,height:a.height+1}),this.surface.createRect({width:a.width+1,height:a.height+1}).setFill(g)):(g=k.prototype._plotFill(g,a,b),b.l&&(d={x:0,y:0,width:b.l,height:a.height+1},this.surface.createRect(d).setFill(k.prototype._shapeFill(g,d))),b.r&&(d={x:a.width-b.r,y:0,width:b.r+1,height:a.height+2},this.surface.createRect(d).setFill(k.prototype._shapeFill(g,
d))),b.t&&(d={x:0,y:0,width:a.width+1,height:b.t},this.surface.createRect(d).setFill(k.prototype._shapeFill(g,d))),b.b&&(d={x:0,y:a.height-b.b,width:a.width+1,height:b.b+2},this.surface.createRect(d).setFill(k.prototype._shapeFill(g,d)))));e&&this.surface.createRect({width:a.width-1,height:a.height-1}).setStroke(e)},_renderPlotBackground:function(a,b,c,e){var d=this.theme,f=d.plotarea&&d.plotarea.fill,d=d.plotarea&&d.plotarea.stroke,g={x:b.l-1,y:b.t-1,width:c+2,height:e+2};f&&(f=k.prototype._shapeFill(k.prototype._plotFill(f,
a,b),g),this.surface.createRect(g).setFill(f));d&&this.surface.createRect({x:b.l,y:b.t,width:c+1,height:e+1}).setStroke(d)},delayedRender:function(){if(!this._delayedRenderHandle)this._delayedRenderHandle=setTimeout(j.hitch(this,function(){this.render()}),this.delayInMs);return this},connectToPlot:function(a,b,c){return a in this.plots?this.stack[this.plots[a]].connect(b,c):null},fireEvent:function(a,b,c){if(a in this.runs){var e=this.series[this.runs[a]].plot;e in this.plots&&(e=this.stack[this.plots[e]])&&
e.fireEvent(a,b,c)}return this},_makeClean:function(){g.forEach(this.axes,x);g.forEach(this.stack,x);g.forEach(this.series,x);this.dirty=!1},_makeDirty:function(){g.forEach(this.axes,B);g.forEach(this.stack,B);g.forEach(this.series,B);this.dirty=!0},_invalidateDependentPlots:function(a,b){if(a in this.plots){var c=this.stack[this.plots[a]],e,d=b?"vAxis":"hAxis";if(c[d]){if((e=this.axes[c[d]])&&e.dependOnData())e.dirty=!0,g.forEach(this.stack,function(a){if(a[d]&&a[d]==c[d])a.dirty=!0})}else c.dirty=
!0}}})})},"dojox/charting/Element":function(){define("dojo/_base/lang,dojo/_base/array,dojo/dom-construct,dojo/_base/declare,dojox/gfx,dojox/gfx/shape".split(","),function(h,j,g,i,f,d){return i("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:!0,constructor:function(b){this.chart=b;this.group=null;this.htmlElements=[];this.dirty=!0;this.trailingSymbol="...";this._events=[]},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.group.removeShape();for(var b=
this.group.children,e=0;e<b.length;++e)d.dispose(b[e],!0);this.group.clear();d.dispose(this.group,!0);this.group=null}this.dirty=!0;if(this._events.length)j.forEach(this._events,function(b){b.shape.disconnect(b.handle)}),this._events=[];return this},cleanGroup:function(b){this.destroyHtmlElements();if(!b)b=this.chart.surface;if(this.group){for(var b=this.group.children,e=0;e<b.length;++e)d.dispose(b[e],!0);this.group.clear()}else this.group=b.createGroup();this.dirty=!0;return this},destroyHtmlElements:function(){if(this.htmlElements.length)j.forEach(this.htmlElements,
g.destroy),this.htmlElements=[]},destroy:function(){this.purgeGroup()},getTextWidth:function(b,e){return f._base._getTextBox(b,{font:e}).w||0},getTextWithLimitLength:function(b,e,c,a){if(!b||0>=b.length)return{text:"",truncated:a||!1};if(!c||0>=c)return{text:b,truncated:a||!1};var d=b.substring(0,1)+this.trailingSymbol,f=this.getTextWidth(d,e);if(c<=f)return{text:d,truncated:!0};if(this.getTextWidth(b,e)<=c)return{text:b,truncated:a||!1};a=0;for(d=b.length;a<d;){if(2>=d-a){for(;this.getTextWidth(b.substring(0,
a)+this.trailingSymbol,e)>c;)a-=1;return{text:b.substring(0,a)+this.trailingSymbol,truncated:!0}}f=a+Math.round(0.618*(d-a));this.getTextWidth(b.substring(0,f),e)<c?a=f:d=f}},getTextWithLimitCharCount:function(b,e,c,a){return!b||0>=b.length?{text:"",truncated:a||!1}:!c||0>=c||b.length<=c?{text:b,truncated:a||!1}:{text:b.substring(0,c)+this.trailingSymbol,truncated:!0}},_plotFill:function(b,e,c){if(!b||!b.type||!b.space)return b;var a=b.space,d;switch(b.type){case "linear":if("plot"===a||"shapeX"===
a||"shapeY"===a){b=f.makeParameters(f.defaultLinearGradient,b);b.space=a;if("plot"===a||"shapeX"===a)d=e.height-c.t-c.b,b.y1=c.t+d*b.y1/100,b.y2=c.t+d*b.y2/100;if("plot"===a||"shapeY"===a)d=e.width-c.l-c.r,b.x1=c.l+d*b.x1/100,b.x2=c.l+d*b.x2/100}break;case "radial":if("plot"===a)b=f.makeParameters(f.defaultRadialGradient,b),b.space=a,a=e.width-c.l-c.r,e=e.height-c.t-c.b,b.cx=c.l+a*b.cx/100,b.cy=c.t+e*b.cy/100,b.r=b.r*Math.sqrt(a*a+e*e)/200;break;case "pattern":if("plot"===a||"shapeX"===a||"shapeY"===
a){b=f.makeParameters(f.defaultPattern,b);b.space=a;if("plot"===a||"shapeX"===a)d=e.height-c.t-c.b,b.y=c.t+d*b.y/100,b.height=d*b.height/100;if("plot"===a||"shapeY"===a)d=e.width-c.l-c.r,b.x=c.l+d*b.x/100,b.width=d*b.width/100}}return b},_shapeFill:function(b,e){if(!b||!b.space)return b;var c=b.space,a;switch(b.type){case "linear":if("shape"===c||"shapeX"===c||"shapeY"===c){b=f.makeParameters(f.defaultLinearGradient,b);b.space=c;if("shape"===c||"shapeX"===c)a=e.width,b.x1=e.x+a*b.x1/100,b.x2=e.x+
a*b.x2/100;if("shape"===c||"shapeY"===c)a=e.height,b.y1=e.y+a*b.y1/100,b.y2=e.y+a*b.y2/100}break;case "radial":if("shape"===c)b=f.makeParameters(f.defaultRadialGradient,b),b.space=c,b.cx=e.x+e.width/2,b.cy=e.y+e.height/2,b.r=b.r*e.width/200;break;case "pattern":if("shape"===c||"shapeX"===c||"shapeY"===c){b=f.makeParameters(f.defaultPattern,b);b.space=c;if("shape"===c||"shapeX"===c)a=e.width,b.x=e.x+a*b.x/100,b.width=a*b.width/100;if("shape"===c||"shapeY"===c)a=e.height,b.y=e.y+a*b.y/100,b.height=
a*b.height/100}}return b},_pseudoRadialFill:function(b,e,c,a,d){if(!b||"radial"!==b.type||"shape"!==b.space)return b;var g=b.space,b=f.makeParameters(f.defaultRadialGradient,b);b.space=g;if(4>arguments.length)return b.cx=e.x,b.cy=e.y,b.r=b.r*c/100,b;g=5>arguments.length?a:(d+a)/2;return{type:"linear",x1:e.x,y1:e.y,x2:e.x+b.r*c*Math.cos(g)/100,y2:e.y+b.r*c*Math.sin(g)/100,colors:b.colors}}})})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(h,j,g){j.switchTo(g);
return j})},"dojox/gfx/_base":function(){define("dojo/_base/kernel,dojo/_base/lang,dojo/_base/Color,dojo/_base/sniff,dojo/_base/window,dojo/_base/array,dojo/dom,dojo/dom-construct,dojo/dom-geometry".split(","),function(h,j,g,i,f,d,b,e,c){var a=j.getObject("dojox.gfx",!0),k=a._base={};a._hasClass=function(a,b){var c=a.getAttribute("className");return c&&0<=(" "+c+" ").indexOf(" "+b+" ")};a._addClass=function(a,b){var c=a.getAttribute("className")||"";if(!c||0>(" "+c+" ").indexOf(" "+b+" "))a.setAttribute("className",
c+(c?" ":"")+b)};a._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};k._getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b;if(i("ie"))f.doc.documentElement.style.fontSize="100%";var c=e.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",
padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},f.body());for(b in a)c.style.fontSize=b,a[b]=16*Math.round(12*c.offsetHeight/16)/12/1E3;f.body().removeChild(c);return a};var p=null;k._getCachedFontMeasurements=function(a){if(a||!p)p=k._getFontMeasurements();return p};var q=null,m={};k._getTextBox=function(a,b,d){var g,h,i=arguments.length,j;q||(q=e.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},f.body()));g=q;g.className="";h=g.style;h.borderWidth="0";h.margin="0";
h.padding="0";h.outline="0";if(1<i&&b)for(j in b)j in m||(h[j]=b[j]);if(2<i&&d)g.className=d;g.innerHTML=a;return g.getBoundingClientRect?(g=g.getBoundingClientRect(),{l:g.left,t:g.top,w:g.width||g.right-g.left,h:g.height||g.bottom-g.top}):c.getMarginBox(g)};var o=0;k._getUniqueId=function(){var a;do a=h._scopeName+"xUnique"+ ++o;while(b.byId(a));return a};j.mixin(a,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,
r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",
x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var b={};return function(c){var e=b[c];if(e)return new e;e=b[c]=new Function;e.prototype=a["default"+c];return new e}}(),
normalizeColor:function(a){return a instanceof g?a:new g(a)},normalizeParameters:function(a,b){var c;if(b){var e={};for(c in a)c in b&&!(c in e)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return j.delegate(a);var e={};for(c in a)c in e||(e[c]=j.clone(c in b?b[c]:a[c]));return e},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var e=c.indexOf(".");0<=e&&5<c.length-e&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+
" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(b){var c=a.getDefault("Font"),b=b.split(/\s+/);if(!(5>b.length)){c.style=b[0];c.variant=b[1];c.weight=b[2];var e=b[3].indexOf("/");c.size=0>e?b[3]:b[3].substring(0,e);var d=4;0>e&&("/"==b[4]?d=6:"/"==b[4].charAt(0)&&(d=5));if(d<b.length)c.family=b.slice(d).join(" ")}return c},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return a._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(b){return b*a.px_in_pt()},
px2pt:function(b){return b/a.px_in_pt()},normalizedLength:function(b){if(0===b.length)return 0;if(2<b.length){var c=a.px_in_pt(),e=parseFloat(b);switch(b.slice(-2)){case "px":return e;case "pt":return e*c;case "in":return 72*e*c;case "pc":return 12*e*c;case "mm":return e*a.mm_in_pt*c;case "cm":return e*a.cm_in_pt*c}}return parseFloat(b)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,
b){return a&&b&&a===b},switchTo:function(b){var c="string"==typeof b?a[b]:b;c&&d.forEach("Group,Rect,Ellipse,Circle,Line,Polyline,Image,Text,Path,TextPath,Surface,createSurface,fixTarget".split(","),function(b){a[b]=c[b]})}});return a})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(h,j,g,i,f){var d=null;return{load:function(b,e,c){function a(){e(["dojox/gfx/"+k],function(a){h.renderer=k;d=a;c(a)})}if(d&&"force"!=
b)c(d);else{for(var k=f.forceGfxRenderer,b=!k&&(j.isString(f.gfxRenderer)?f.gfxRenderer:"svg,vml,canvas,silverlight").split(","),p,q;!k&&b.length;)switch(b.shift()){case "svg":"SVGAngle"in i.global&&(k="svg");break;case "vml":g("ie")&&(k="vml");break;case "silverlight":try{g("ie")?(p=new ActiveXObject("AgControl.AgControl"))&&p.IsVersionSupported("1.0")&&(q=!0):navigator.plugins["Silverlight Plug-In"]&&(q=!0)}catch(m){q=!1}finally{p=null}q&&(k="silverlight");break;case "canvas":i.global.CanvasRenderingContext2D&&
(k="canvas")}"canvas"===k&&!1!==f.canvasEvents&&(k="canvasWithEvents");"svg"==k&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(a):a()}}}})},"dojox/gfx/shape":function(){define("./_base,dojo/_base/lang,dojo/_base/declare,dojo/_base/kernel,dojo/_base/sniff,dojo/_base/connect,dojo/_base/array,dojo/dom-construct,dojo/_base/Color,./matrix".split(","),function(h,j,g,i,f,d,b,e,c,a){var k=h.shape={},p={},q={};k.register=function(a){var b=a.declaredClass.split(".").pop(),c=b in p?++p[b]:p[b]=0,
b=b+c;q[b]=a;return b};k.byId=function(a){return q[a]};k.dispose=function(a,b){if(b&&a.children)for(var c=0;c<a.children.length;++c)k.dispose(a.children[c],!0);delete q[a.getUID()]};k.Shape=g("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;var a=k.register(this);this.getUID=function(){return a}},destroy:function(){k.dispose(this)},getNode:function(){return this.rawNode},getShape:function(){return this.shape},
getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b)return null;var c=this._getRealMatrix();return[a.multiplyPoint(c,b.x,b.y),a.multiplyPoint(c,b.x+b.width,b.y),a.multiplyPoint(c,b.x+b.width,b.y+b.height),a.multiplyPoint(c,b.x,b.y+b.height)]},getEventSource:function(){return this.rawNode},
setClip:function(a){this.clip=a},getClip:function(){return this.clip},setShape:function(a){this.shape=h.makeParameters(this.shape,a);this.bbox=null;return this},setFill:function(a){if(!a)return this.fillStyle=null,this;var b=null;if("object"==typeof a&&"type"in a)switch(a.type){case "linear":b=h.makeParameters(h.defaultLinearGradient,a);break;case "radial":b=h.makeParameters(h.defaultRadialGradient,a);break;case "pattern":b=h.makeParameters(h.defaultPattern,a)}else b=h.normalizeColor(a);this.fillStyle=
b;return this},setStroke:function(a){if(!a)return this.strokeStyle=null,this;if("string"==typeof a||j.isArray(a)||a instanceof c)a={color:a};a=this.strokeStyle=h.makeParameters(h.defaultStroke,a);a.color=h.normalizeColor(a.color);return this},setTransform:function(b){this.matrix=a.clone(b?a.normalize(b):a.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var a=
this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&this.parent.remove(this,a);return this},_setParent:function(a,b){this.parent=a;return this._updateParentMatrix(b)},
_updateParentMatrix:function(b){this.parentMatrix=b?a.clone(b):null;return this._applyTransform()},_getRealMatrix:function(){for(var b=this.matrix,c=this.parent;c;)c.matrix&&(b=a.multiply(c.matrix,b)),c=c.parent;return b}});k._eventsProcessing={connect:function(a,b,c){return d.connect(this.getEventSource(),a,k.fixCallback(this,h.fixTarget,b,c))},disconnect:function(a){d.disconnect(a)}};k.fixCallback=function(a,b,c,e){e||(e=c,c=null);if(j.isString(e)){c=c||i.global;if(!c[e])throw['dojox.gfx.shape.fixCallback: scope["',
e,'"] is null (scope="',c,'")'].join("");return function(d){return b(d,a)?c[e].apply(c,arguments||[]):void 0}}return!c?function(d){return b(d,a)?e.apply(c,arguments):void 0}:function(d){return b(d,a)?e.apply(c,arguments||[]):void 0}};j.extend(k.Shape,k._eventsProcessing);k.Container={_init:function(){this.children=[]},openBatch:function(){},closeBatch:function(){},add:function(a){var b=a.getParent();b&&b.remove(a,!0);this.children.push(a);return a._setParent(this,this._getRealMatrix())},remove:function(a,
b){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){if(!b)a.parent=null,a.parentMatrix=null;this.children.splice(c,1);break}return this},clear:function(a){for(var b,c=0;c<this.children.length;++c)b=this.children[c],b.parent=null,b.parentMatrix=null,a&&b.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var c=null;b.forEach(this.children,function(b){var e=b.getBoundingBox();if(e)(b=b.getTransform())&&(e=a.multiplyRectangle(b,e)),c?(c.x=Math.min(c.x,e.x),
c.y=Math.min(c.y,e.y),c.endX=Math.max(c.endX,e.x+e.width),c.endY=Math.max(c.endY,e.y+e.height)):c={x:e.x,y:e.y,endX:e.x+e.width,endY:e.y+e.height}});if(c)c.width=c.endX-c.x,c.height=c.endY-c.y;return c}return null},_moveChildToFront:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){this.children.splice(b,1);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){this.children.splice(b,1);this.children.unshift(a);
break}return this}};k.Surface=g("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){b.forEach(this._nodes,e.destroy);this._nodes=[];b.forEach(this._events,d.disconnect);this._events=[];this.rawNode=null;if(f("ie"))for(;this._parent.lastChild;)e.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,
onLoad:function(){},whenLoaded:function(a,b){var c=j.hitch(a,b);if(this.isLoaded)c(this);else var e=d.connect(this,"onLoad",function(a){d.disconnect(e);c(a)})}});j.extend(k.Surface,k._eventsProcessing);k.Rect=g("dojox.gfx.shape.Rect",k.Shape,{constructor:function(a){this.shape=h.getDefault("Rect");this.rawNode=a},getBoundingBox:function(){return this.shape}});k.Ellipse=g("dojox.gfx.shape.Ellipse",k.Shape,{constructor:function(a){this.shape=h.getDefault("Ellipse");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=
this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});k.Circle=g("dojox.gfx.shape.Circle",k.Shape,{constructor:function(a){this.shape=h.getDefault("Circle");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});k.Line=g("dojox.gfx.shape.Line",k.Shape,{constructor:function(a){this.shape=h.getDefault("Line");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=
this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});k.Polyline=g("dojox.gfx.shape.Polyline",k.Shape,{constructor:function(a){this.shape=h.getDefault("Polyline");this.rawNode=a},setShape:function(a,b){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]);return this},_normalizePoints:function(){var a=
this.shape.points,b=a&&a.length;if(b&&"number"==typeof a[0]){for(var c=[],e=0;e<b;e+=2)c.push({x:a[e],y:a[e+1]});this.shape.points=c}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,b=a.length,c=a[0],e=c.x,d=c.y,f=c.x,g=c.y,h=1;h<b;++h){c=a[h];if(e>c.x)e=c.x;if(f<c.x)f=c.x;if(d>c.y)d=c.y;if(g<c.y)g=c.y}this.bbox={x:e,y:d,width:f-e,height:g-d}}return this.bbox}});k.Image=g("dojox.gfx.shape.Image",k.Shape,{constructor:function(a){this.shape=h.getDefault("Image");
this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});k.Text=g(k.Shape,{constructor:function(a){this.fontStyle=null;this.shape=h.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle="string"==typeof a?h.splitFontString(a):h.makeParameters(h.defaultFont,a);this._setFont();return this}});k.Creator={createShape:function(a){switch(a.type){case h.defaultPath.type:return this.createPath(a);
case h.defaultRect.type:return this.createRect(a);case h.defaultCircle.type:return this.createCircle(a);case h.defaultEllipse.type:return this.createEllipse(a);case h.defaultLine.type:return this.createLine(a);case h.defaultPolyline.type:return this.createPolyline(a);case h.defaultImage.type:return this.createImage(a);case h.defaultText.type:return this.createText(a);case h.defaultTextPath.type:return this.createTextPath(a)}return null},createGroup:function(){return this.createObject(h.Group)},createRect:function(a){return this.createObject(h.Rect,
a)},createEllipse:function(a){return this.createObject(h.Ellipse,a)},createCircle:function(a){return this.createObject(h.Circle,a)},createLine:function(a){return this.createObject(h.Line,a)},createPolyline:function(a){return this.createObject(h.Polyline,a)},createImage:function(a){return this.createObject(h.Image,a)},createText:function(a){return this.createObject(h.Text,a)},createPath:function(a){return this.createObject(h.Path,a)},createTextPath:function(a){return this.createObject(h.TextPath,{}).setText(a)},
createObject:function(){return null}};return k})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(h,j){var g=h.matrix={},i={};g._degToRad=function(f){return i[f]||(i[f]=Math.PI*f/180)};g._radToDeg=function(f){return 180*(f/Math.PI)};g.Matrix2D=function(f){if(f)if("number"==typeof f)this.xx=this.yy=f;else if(f instanceof Array){if(0<f.length){for(var d=g.normalize(f[0]),b=1;b<f.length;++b){var e=d,c=g.normalize(f[b]),d=new g.Matrix2D;d.xx=e.xx*c.xx+e.xy*c.yx;d.xy=e.xx*c.xy+
e.xy*c.yy;d.yx=e.yx*c.xx+e.yy*c.yx;d.yy=e.yx*c.xy+e.yy*c.yy;d.dx=e.xx*c.dx+e.xy*c.dy+e.dx;d.dy=e.yx*c.dx+e.yy*c.dy+e.dy}j.mixin(this,d)}}else j.mixin(this,f)};j.extend(g.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});j.mixin(g,{identity:new g.Matrix2D,flipX:new g.Matrix2D({xx:-1}),flipY:new g.Matrix2D({yy:-1}),flipXY:new g.Matrix2D({xx:-1,yy:-1}),translate:function(f,d){return 1<arguments.length?new g.Matrix2D({dx:f,dy:d}):new g.Matrix2D({dx:f.x,dy:f.y})},scale:function(f,d){return 1<arguments.length?
new g.Matrix2D({xx:f,yy:d}):"number"==typeof f?new g.Matrix2D({xx:f,yy:f}):new g.Matrix2D({xx:f.x,yy:f.y})},rotate:function(f){var d=Math.cos(f),f=Math.sin(f);return new g.Matrix2D({xx:d,xy:-f,yx:f,yy:d})},rotateg:function(f){return g.rotate(g._degToRad(f))},skewX:function(f){return new g.Matrix2D({xy:Math.tan(f)})},skewXg:function(f){return g.skewX(g._degToRad(f))},skewY:function(f){return new g.Matrix2D({yx:Math.tan(f)})},skewYg:function(f){return g.skewY(g._degToRad(f))},reflect:function(f,d){if(1==
arguments.length)d=f.y,f=f.x;var b=f*f,e=d*d,c=b+e,a=2*f*d/c;return new g.Matrix2D({xx:2*b/c-1,xy:a,yx:a,yy:2*e/c-1})},project:function(f,d){if(1==arguments.length)d=f.y,f=f.x;var b=f*f,e=d*d,c=b+e,a=f*d/c;return new g.Matrix2D({xx:b/c,xy:a,yx:a,yy:e/c})},normalize:function(f){return f instanceof g.Matrix2D?f:new g.Matrix2D(f)},isIdentity:function(f){return 1==f.xx&&0==f.xy&&0==f.yx&&1==f.yy&&0==f.dx&&0==f.dy},clone:function(f){var d=new g.Matrix2D,b;for(b in f)"number"==typeof f[b]&&"number"==typeof d[b]&&
d[b]!=f[b]&&(d[b]=f[b]);return d},invert:function(f){var f=g.normalize(f),d=f.xx*f.yy-f.xy*f.yx;return f=new g.Matrix2D({xx:f.yy/d,xy:-f.xy/d,yx:-f.yx/d,yy:f.xx/d,dx:(f.xy*f.dy-f.yy*f.dx)/d,dy:(f.yx*f.dx-f.xx*f.dy)/d})},_multiplyPoint:function(f,d,b){return{x:f.xx*d+f.xy*b+f.dx,y:f.yx*d+f.yy*b+f.dy}},multiplyPoint:function(f,d,b){f=g.normalize(f);return"number"==typeof d&&"number"==typeof b?g._multiplyPoint(f,d,b):g._multiplyPoint(f,d.x,d.y)},multiplyRectangle:function(f,d){var b=g.normalize(f),d=
d||{x:0,y:0,width:0,height:0};if(g.isIdentity(b))return{x:d.x,y:d.y,width:d.width,height:d.height};var e=g.multiplyPoint(b,d.x,d.y),c=g.multiplyPoint(b,d.x,d.y+d.height),a=g.multiplyPoint(b,d.x+d.width,d.y),h=g.multiplyPoint(b,d.x+d.width,d.y+d.height),b=Math.min(e.x,c.x,a.x,h.x),i=Math.min(e.y,c.y,a.y,h.y),j=Math.max(e.x,c.x,a.x,h.x),e=Math.max(e.y,c.y,a.y,h.y);return{x:b,y:i,width:j-b,height:e-i}},multiply:function(f){for(var d=g.normalize(f),b=1;b<arguments.length;++b){var e=d,c=g.normalize(arguments[b]),
d=new g.Matrix2D;d.xx=e.xx*c.xx+e.xy*c.yx;d.xy=e.xx*c.xy+e.xy*c.yy;d.yx=e.yx*c.xx+e.yy*c.yx;d.yy=e.yx*c.xy+e.yy*c.yy;d.dx=e.xx*c.dx+e.xy*c.dy+e.dx;d.dy=e.yx*c.dx+e.yy*c.dy+e.dy}return d},_sandwich:function(f,d,b){return g.multiply(g.translate(d,b),f,g.translate(-d,-b))},scaleAt:function(f,d,b,e){switch(arguments.length){case 4:return g._sandwich(g.scale(f,d),b,e);case 3:return"number"==typeof b?g._sandwich(g.scale(f),d,b):g._sandwich(g.scale(f,d),b.x,b.y)}return g._sandwich(g.scale(f),d.x,d.y)},rotateAt:function(f,
d,b){return 2<arguments.length?g._sandwich(g.rotate(f),d,b):g._sandwich(g.rotate(f),d.x,d.y)},rotategAt:function(f,d,b){return 2<arguments.length?g._sandwich(g.rotateg(f),d,b):g._sandwich(g.rotateg(f),d.x,d.y)},skewXAt:function(f,d,b){return 2<arguments.length?g._sandwich(g.skewX(f),d,b):g._sandwich(g.skewX(f),d.x,d.y)},skewXgAt:function(f,d,b){return 2<arguments.length?g._sandwich(g.skewXg(f),d,b):g._sandwich(g.skewXg(f),d.x,d.y)},skewYAt:function(f,d,b){return 2<arguments.length?g._sandwich(g.skewY(f),
d,b):g._sandwich(g.skewY(f),d.x,d.y)},skewYgAt:function(f,d,b){return 2<arguments.length?g._sandwich(g.skewYg(f),d,b):g._sandwich(g.skewYg(f),d.x,d.y)}});h.Matrix2D=g.Matrix2D;return g})},"dojox/charting/SimpleTheme":function(){define("dojo/_base/lang,dojo/_base/array,dojo/_base/declare,dojo/_base/Color,dojox/lang/utils,dojox/gfx/gradutils".split(","),function(h,j,g,i,f,d){var b=g("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(e){var e=e||{},c=b.defaultTheme;
j.forEach("chart,plotarea,axis,grid,series,marker,indicator".split(","),function(a){this[a]=h.delegate(c[a],e[a])},this);e.seriesThemes&&e.seriesThemes.length?(this.colors=null,this.seriesThemes=e.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(e.colors||b.defaultColors).slice(0));this.markerThemes=null;if(e.markerThemes&&e.markerThemes.length)this.markerThemes=e.markerThemes.slice(0);this.markers=e.markers?h.clone(e.markers):h.delegate(b.defaultMarkers);this.noGradConv=e.noGradConv;this.noRadialConv=
e.noRadialConv;e.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},clone:function(){var b=new this.constructor({chart:this.chart,plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv});j.forEach("clone,clear,next,skip,addMixin,post,getTick".split(","),function(c){this.hasOwnProperty(c)&&
(b[c]=this[c])},this);return b},clear:function(){this._current=0},next:function(b,c,a){var d=f.merge,g;if(this.colors){g=h.delegate(this.series);var d=h.delegate(this.marker),j=new i(this.colors[this._current%this.colors.length]),m;g.stroke&&g.stroke.color?(g.stroke=h.delegate(g.stroke),m=new i(g.stroke.color),g.stroke.color=new i(j),g.stroke.color.a=m.a):g.stroke={color:j};d.stroke&&d.stroke.color?(d.stroke=h.delegate(d.stroke),m=new i(d.stroke.color),d.stroke.color=new i(j),d.stroke.color.a=m.a):
d.stroke={color:j};!g.fill||g.fill.type?g.fill=j:(m=new i(g.fill),g.fill=new i(j),g.fill.a=m.a);!d.fill||d.fill.type?d.fill=j:(m=new i(d.fill),d.fill=new i(j),d.fill.a=m.a)}else g=this.seriesThemes?d(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,d=this.markerThemes?d(this.marker,this.markerThemes[this._current%this.markerThemes.length]):g;g={series:g,marker:d,symbol:d&&d.symbol||this._markers[this._current%this._markers.length]};++this._current;c&&(g=this.addMixin(g,
b,c));a&&(g=this.post(g,b));return g},skip:function(){++this._current},addMixin:function(b,c,a,d){if(h.isArray(a))j.forEach(a,function(a){b=this.addMixin(b,c,a)},this);else{var g={};"color"in a&&("line"==c||"area"==c?(h.setObject("series.stroke.color",a.color,g),h.setObject("marker.stroke.color",a.color,g)):h.setObject("series.fill",a.color,g));j.forEach("stroke,outline,shadow,fill,font,fontColor,labelWiring".split(","),function(b){var c="marker"+b.charAt(0).toUpperCase()+b.substr(1),e=c in a;b in
a&&(h.setObject("series."+b,a[b],g),e||h.setObject("marker."+b,a[b],g));e&&h.setObject("marker."+b,a[c],g)});if("marker"in a)g.symbol=a.marker,g.symbol=a.marker;b=f.merge(b,g)}d&&(b=this.post(b,c));return b},post:function(b,c){var a=b.series.fill,d;if(!this.noGradConv&&this.shapeSpaces[a.space]&&"linear"==a.type){if("bar"==c)d={x1:a.y1,y1:a.x1,x2:a.y2,y2:a.x2};else if(!this.noRadialConv&&"shape"==a.space&&("slice"==c||"circle"==c))d={type:"radial",cx:0,cy:0,r:100};if(d)return f.merge(b,{series:{fill:d}})}return b},
getTick:function(b,c){var a=this.axis.tick,d=b+"Tick",g=f.merge;a?this.axis[d]&&(a=g(a,this.axis[d])):a=this.axis[d];c&&(a?c[d]&&(a=g(a,c[d])):a=c[d]);return a},inspectObjects:function(b){j.forEach("chart,plotarea,axis,grid,series,marker,indicator".split(","),function(c){b(this[c])},this);this.seriesThemes&&j.forEach(this.seriesThemes,b);this.markerThemes&&j.forEach(this.markerThemes,b)},reverseFills:function(){this.inspectObjects(function(b){if(b&&b.fill)b.fill=d.reverse(b.fill)})},addMarker:function(b,
c){this.markers[b]=c;this._buildMarkerArray()},setMarkers:function(b){this.markers=b;this._buildMarkerArray()},_buildMarkerArray:function(){this._markers=[];for(var b in this.markers)this._markers.push(this.markers[b])}});h.mixin(b,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c",
"#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:0.8,length:3},microTick:{width:0.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",
fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:0.1,color:"#ccc"},lineShadow:null,stroke:{width:1.5,color:"#333"},
outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:0.1,color:"#ccc"},markerShadow:null}}});return b})},"dojox/lang/utils":function(){define(["..","dojo/_base/lang"],function(h,j){var g=j.getObject("lang.utils",!0,h),i={},f=Object.prototype.toString,d=function(b){if(b)switch(f.call(b)){case "[object Array]":return b.slice(0);
case "[object Object]":return j.delegate(b)}return b};j.mixin(g,{coerceType:function(b,e){switch(typeof b){case "number":return Number(eval("("+e+")"));case "string":return""+e;case "boolean":return Boolean(eval("("+e+")"))}return eval("("+e+")")},updateWithObject:function(b,e,c){if(!e)return b;for(var a in b)if(a in e&&!(a in i)){var f=b[a];f&&"object"==typeof f?g.updateWithObject(f,e[a],c):b[a]=c?g.coerceType(f,e[a]):d(e[a])}return b},updateWithPattern:function(b,e,c,a){if(!e||!c)return b;for(var f in c)f in
e&&!(f in i)&&(b[f]=a?g.coerceType(c[f],e[f]):d(e[f]));return b},merge:function(b,e){if(e){var c=f.call(b),a=f.call(e),d,h;switch(a){case "[object Array]":if(a==c){c=Array(Math.max(b.length,e.length));for(d=0,a=c.length;d<a;++d)c[d]=g.merge(b[d],e[d]);return c}return e.slice(0);case "[object Object]":if(a==c&&b){c=j.delegate(b);for(d in e)d in b?(a=b[d],h=e[d],h!==a&&(c[d]=g.merge(a,h))):c[d]=j.clone(e[d]);return c}return j.clone(e)}}return e}});return g})},"dojox/gfx/gradutils":function(){define(["./_base",
"dojo/_base/lang","./matrix","dojo/_base/Color"],function(h,j,g,i){function f(d,b){if(0>=d)return b[0].color;var e=b.length;if(1<=d)return b[e-1].color;for(var c=0;c<e;++c){var a=b[c];if(a.offset>=d)return c?(e=b[c-1],i.blendColors(new i(e.color),new i(a.color),(d-e.offset)/(a.offset-e.offset))):a.color}return b[e-1].color}h=h.gradutils={};h.getColor=function(d,b){var e;if(d){switch(d.type){case "linear":e=Math.atan2(d.y2-d.y1,d.x2-d.x1);e=g.rotate(-e);var c=g.project(d.x2-d.x1,d.y2-d.y1),a=g.multiplyPoint(c,
b),h=g.multiplyPoint(c,d.x1,d.y1),c=g.multiplyPoint(c,d.x2,d.y2),c=g.multiplyPoint(e,c.x-h.x,c.y-h.y).x;e=g.multiplyPoint(e,a.x-h.x,a.y-h.y).x/c;break;case "radial":e=b.x-d.cx,a=b.y-d.cy,e=Math.sqrt(e*e+a*a)/d.r}return f(e,d.colors)}return new i(d||[0,0,0,0])};h.reverse=function(d){if(d)switch(d.type){case "linear":case "radial":if(d=j.delegate(d),d.colors){for(var b=d.colors,e=b.length,c=0,a,f=d.colors=Array(b.length);c<e;++c)a=b[c],f[c]={offset:1-a.offset,color:a.color};f.sort(function(a,b){return a.offset-
b.offset})}}return d};return h})},"dojox/charting/Series":function(){define(["dojo/_base/lang","dojo/_base/declare","./Element"],function(h,j,g){return j("dojox.charting.Series",g,{constructor:function(g,f,d){h.mixin(this,d);if("string"!=typeof this.plot)this.plot="default";this.update(f)},clear:function(){this.dyn={}},update:function(g){h.isArray(g)?this.data=g:(this.source=g,this.data=this.source.data,this.source.setSeriesObject&&this.source.setSeriesObject(this));this.dirty=!0;this.clear()}})})},
"dojox/charting/axis2d/common":function(){define(["dojo/_base/lang","dojo/_base/window","dojo/dom-geometry","dojox/gfx"],function(h,j,g,i){var f=h.getObject("dojox.charting.axis2d.common",!0),d=function(b){b.marginLeft="0px";b.marginTop="0px";b.marginRight="0px";b.marginBottom="0px";b.paddingLeft="0px";b.paddingTop="0px";b.paddingRight="0px";b.paddingBottom="0px";b.borderLeftWidth="0px";b.borderTopWidth="0px";b.borderRightWidth="0px";b.borderBottomWidth="0px"};return h.mixin(f,{createText:{gfx:function(b,
e,c,a,d,f,g,h){return e.createText({x:c,y:a,text:f,align:d}).setFont(g).setFill(h)},html:function(b,e,c,a,f,h,q,m,o){var e=j.doc.createElement("div"),l=e.style,n;if(b.getTextDir)e.dir=b.getTextDir(h);d(l);l.font=q;e.innerHTML=(""+h).replace(/\s/g,"&nbsp;");l.color=m;l.position="absolute";l.left="-10000px";j.body().appendChild(e);h=i.normalizedLength(i.splitFontString(q).size);if(!o)e.getBoundingClientRect?(n=e.getBoundingClientRect(),n=n.width||n.right-n.left):n=g.getMarginBox(e).w;"rtl"==e.dir&&
(c+=o?o:n);j.body().removeChild(e);l.position="relative";if(o)switch(l.width=o+"px",f){case "middle":l.textAlign="center";l.left=c-o/2+"px";break;case "end":l.textAlign="right";l.left=c-o+"px";break;default:l.left=c+"px",l.textAlign="left"}else switch(f){case "middle":l.left=Math.floor(c-n/2)+"px";break;case "end":l.left=Math.floor(c-n)+"px";break;default:l.left=Math.floor(c)+"px"}l.top=Math.floor(a-h)+"px";l.whiteSpace="nowrap";c=j.doc.createElement("div");a=c.style;d(a);a.width="0px";a.height="0px";
c.appendChild(e);b.node.insertBefore(c,b.node.firstChild);return c}}})})},"dojox/lang/functional":function(){define(["./functional/lambda","./functional/array","./functional/object"],function(h){return h})},"dojox/lang/functional/array":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(h,j,g,i){var f={};j.mixin(i,{filter:function(d,b,e){"string"==typeof d&&(d=d.split(""));var e=e||h.global,b=i.lambda(b),c=[],a,g,p;if(j.isArray(d))for(g=0,p=d.length;g<
p;++g)a=d[g],b.call(e,a,g,d)&&c.push(a);else if("function"==typeof d.hasNext&&"function"==typeof d.next)for(g=0;d.hasNext();)a=d.next(),b.call(e,a,g++,d)&&c.push(a);else for(g in d)g in f||(a=d[g],b.call(e,a,g,d)&&c.push(a));return c},forEach:function(d,b,e){"string"==typeof d&&(d=d.split(""));var e=e||h.global,b=i.lambda(b),c,a;if(j.isArray(d))for(c=0,a=d.length;c<a;b.call(e,d[c],c,d),++c);else if("function"==typeof d.hasNext&&"function"==typeof d.next)for(c=0;d.hasNext();b.call(e,d.next(),c++,d));
else for(c in d)c in f||b.call(e,d[c],c,d);return e},map:function(d,b,e){"string"==typeof d&&(d=d.split(""));var e=e||h.global,b=i.lambda(b),c,a,g;if(j.isArray(d)){c=Array(a=d.length);for(g=0;g<a;c[g]=b.call(e,d[g],g,d),++g);}else if("function"==typeof d.hasNext&&"function"==typeof d.next){c=[];for(g=0;d.hasNext();c.push(b.call(e,d.next(),g++,d)));}else for(g in c=[],d)g in f||c.push(b.call(e,d[g],g,d));return c},every:function(d,b,e){"string"==typeof d&&(d=d.split(""));var e=e||h.global,b=i.lambda(b),
c,a;if(j.isArray(d))for(c=0,a=d.length;c<a;++c){if(!b.call(e,d[c],c,d))return!1}else if("function"==typeof d.hasNext&&"function"==typeof d.next)for(c=0;d.hasNext();){if(!b.call(e,d.next(),c++,d))return!1}else for(c in d)if(!(c in f)&&!b.call(e,d[c],c,d))return!1;return!0},some:function(d,b,e){"string"==typeof d&&(d=d.split(""));var e=e||h.global,b=i.lambda(b),c,a;if(j.isArray(d))for(c=0,a=d.length;c<a;++c){if(b.call(e,d[c],c,d))return!0}else if("function"==typeof d.hasNext&&"function"==typeof d.next)for(c=
0;d.hasNext();){if(b.call(e,d.next(),c++,d))return!0}else for(c in d)if(!(c in f)&&b.call(e,d[c],c,d))return!0;return!1}});return i})},"dojox/lang/functional/reversed":function(){define(["dojo/_base/lang","dojo/_base/kernel","./lambda"],function(h,j,g){h.mixin(g,{filterRev:function(h,f,d){"string"==typeof h&&(h=h.split(""));for(var d=d||j.global,f=g.lambda(f),b=[],e,c=h.length-1;0<=c;--c)e=h[c],f.call(d,e,c,h)&&b.push(e);return b},forEachRev:function(h,f,d){"string"==typeof h&&(h=h.split(""));for(var d=
d||j.global,f=g.lambda(f),b=h.length-1;0<=b;f.call(d,h[b],b,h),--b);},mapRev:function(h,f,d){"string"==typeof h&&(h=h.split(""));for(var d=d||j.global,f=g.lambda(f),b=h.length,e=Array(b),b=b-1,c=0;0<=b;e[c++]=f.call(d,h[b],b,h),--b);return e},everyRev:function(h,f,d){"string"==typeof h&&(h=h.split(""));for(var d=d||j.global,f=g.lambda(f),b=h.length-1;0<=b;--b)if(!f.call(d,h[b],b,h))return!1;return!0},someRev:function(h,f,d){"string"==typeof h&&(h=h.split(""));for(var d=d||j.global,f=g.lambda(f),b=
h.length-1;0<=b;--b)if(f.call(d,h[b],b,h))return!0;return!1}});return g})},"dojox/charting/axis2d/Default":function(){define("dojo/_base/lang,dojo/_base/array,dojo/_base/sniff,dojo/_base/declare,dojo/_base/connect,dojo/dom-geometry,./Invisible,../scaler/common,../scaler/linear,./common,dojox/gfx,dojox/lang/utils,dojox/lang/functional".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p,q){return i("dojox.charting.axis2d.Default",b,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,
includeZero:!1,fixed:!0,majorLabels:!0,minorTicks:!0,minorLabels:!0,microTicks:!1,rotation:0,htmlLabels:!0,enableCache:!1,dropLabels:!0,labelSizeChange:!1},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(a,b){this.opt=
h.clone(this.defaultParams);p.updateWithObject(this.opt,b);p.updateWithPattern(this.opt,b,this.optionalParams);if(this.opt.enableCache)this._textFreePool=[],this._lineFreePool=[],this._textUsePool=[],this._lineUsePool=[];this._invalidMaxLabelSize=!0},setWindow:function(a,b){if(a!=this.scale)this._invalidMaxLabelSize=!0;return this.inherited(arguments)},_groupLabelWidth:function(a,b,c){if(!a.length)return 0;if(50<a.length)a.length=50;h.isObject(a[0])&&(a=q.map(a,function(a){return a.text}));c&&(a=
q.map(a,function(a){return 0==h.trim(a).length?"":a.substring(0,c)+this.trailingSymbol},this));a=a.join("<br>");return k._base._getTextBox(a,{font:b}).w||0},_getMaxLabelSize:function(a,b,e,d,f,g){if(null==this._maxLabelSize&&6==arguments.length){var i=this.opt;this.scaler.minMinorStep=this._prevMinMinorStep=0;var k=h.clone(i);delete k.to;delete k.from;var t=c.buildScaler(a,b,e,k,i.to-i.from);t.minMinorStep=0;this._majorStart=t.major.start;i=c.buildTicks(t,i);if(g&&i){var w=t=0,p=function(a){a.label&&
this.push(a.label)},q=[];this.opt.majorLabels&&(j.forEach(i.major,p,q),t=this._groupLabelWidth(q,f,k.maxLabelCharCount),k.maxLabelSize&&(t=Math.min(k.maxLabelSize,t)));q=[];this.opt.dropLabels&&this.opt.minorLabels&&(j.forEach(i.minor,p,q),w=this._groupLabelWidth(q,f,k.maxLabelCharCount),k.maxLabelSize&&(w=Math.min(k.maxLabelSize,w)));this._maxLabelSize={majLabelW:t,minLabelW:w,majLabelH:g,minLabelH:g}}else this._maxLabelSize=null}return this._maxLabelSize},calculate:function(a,b,e){this.inherited(arguments);
this.scaler.minMinorStep=this._prevMinMinorStep;if((this._invalidMaxLabelSize||e!=this._oldSpan)&&Infinity!=a&&-Infinity!=b){this._invalidMaxLabelSize=!1;if(this.opt.labelSizeChange)this._maxLabelSize=null;this._oldSpan=e;var d=this.opt,f=this.chart.theme.axis,g=d.rotation%360,h=this.chart.theme.axis.tick.labelGap,i=d.font||f.majorTick&&f.majorTick.font||f.tick&&f.tick.font,f=i?k.normalizedLength(k.splitFontString(i).size):0,i=this._getMaxLabelSize(a,b,e,g,i,f);"number"!=typeof h&&(h=4);if(i&&d.dropLabels){var d=
Math.abs(Math.cos(g*Math.PI/180)),j=Math.abs(Math.sin(g*Math.PI/180));0>g&&(g+=360);switch(g){case 0:case 180:this.vertical?g=f:(g=i.majLabelW,f=i.minLabelW);break;case 90:case 270:this.vertical?(g=i.majLabelW,f=i.minLabelW):g=f;break;default:var g=this.vertical?Math.min(i.majLabelW,f/d):Math.min(i.majLabelW,f/j),w=Math.sqrt(i.minLabelW*i.minLabelW+f*f),f=Math.min(w,this.vertical?f*d+i.minLabelW*j:i.minLabelW*d+f*j)}this.scaler.minMinorStep=this._prevMinMinorStep=Math.max(g,f)+h;this._skipInterval=
this.scaler.minMinorStep<=this.scaler.minor.tick*this.scaler.bounds.scale?0:Math.floor((g+h)/(this.scaler.major.tick*this.scaler.bounds.scale))}else this._skipInterval=0}this.ticks=c.buildTicks(this.scaler,this.opt);return this},getOffsets:function(){var a={l:0,r:0,t:0,b:0};if(!this.scaler)return a;var b=this.opt,c=this.chart.theme.axis,e=this.chart.theme.axis.tick.labelGap,d=b.titleFont||c.title&&c.title.font,c=0==b.titleGap?0:b.titleGap||c.title&&c.title.gap,f=this.chart.theme.getTick("major",b),
g=this.chart.theme.getTick("minor",b),d=d?k.normalizedLength(k.splitFontString(d).size):0,h=b.rotation%360,i=b.leftBottom,j=Math.abs(Math.cos(h*Math.PI/180)),p=Math.abs(Math.sin(h*Math.PI/180));this.trailingSymbol=void 0===b.trailingSymbol||null===b.trailingSymbol?this.trailingSymbol:b.trailingSymbol;"number"!=typeof e&&(e=4);0>h&&(h+=360);var q=this._getMaxLabelSize();if(q){var A=Math.ceil(Math.max(q.majLabelW,q.minLabelW))+1,E=Math.ceil(Math.max(q.majLabelH,q.minLabelH))+1;if(this.vertical)switch(q=
i?"l":"r",h){case 0:case 180:a[q]=A;a.t=a.b=E/2;break;case 90:case 270:a[q]=E;a.t=a.b=A/2;break;default:45>=h||180<h&&225>=h?(a[q]=E*p/2+A*j,a[i?"t":"b"]=E*j/2+A*p,a[i?"b":"t"]=E*j/2):315<h||180>h&&135<h?(a[q]=E*p/2+A*j,a[i?"b":"t"]=E*j/2+A*p,a[i?"t":"b"]=E*j/2):90>h||180<h&&270>h?(a[q]=E*p+A*j,a[i?"t":"b"]=E*j+A*p):(a[q]=E*p+A*j,a[i?"b":"t"]=E*j+A*p)}else switch(q=i?"b":"t",h){case 0:case 180:a[q]=E;a.l=a.r=A/2;break;case 90:case 270:a[q]=A;a.l=a.r=E/2;break;default:45<=h&&90>=h||225<=h&&270>=h?
(a[q]=E*j/2+A*p,a[i?"r":"l"]=E*p/2+A*j,a[i?"l":"r"]=E*p/2):90<=h&&135>=h||270<=h&&315>=h?(a[q]=E*j/2+A*p,a[i?"l":"r"]=E*p/2+A*j,a[i?"r":"l"]=E*p/2):45>h||180<h&&225>h?(a[q]=E*j+A*p,a[i?"r":"l"]=E*p+A*j):(a[q]=E*j+A*p,a[i?"l":"r"]=E*p+A*j)}a[q]+=e+Math.max(f.length,g.length)+(b.title?d+c:0)}return a},cleanGroup:function(a){if(this.opt.enableCache&&this.group)this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._textFreePool=this._textFreePool.concat(this._textUsePool),
this._textUsePool=[];this.inherited(arguments)},createText:function(b,c,e,d,f,g,h,i,j){if(!this.opt.enableCache||"html"==b)return a.createText[b](this.chart,c,e,d,f,g,h,i,j);0<this._textFreePool.length?(b=this._textFreePool.pop(),b.setShape({x:e,y:d,text:g,align:f}),c.add(b)):b=a.createText[b](this.chart,c,e,d,f,g,h,i);this._textUsePool.push(b);return b},createLine:function(a,b){var c;this.opt.enableCache&&0<this._lineFreePool.length?(c=this._lineFreePool.pop(),c.setShape(b),a.add(c)):c=a.createLine(b);
this.opt.enableCache&&this._lineUsePool.push(c);return c},render:function(b,e){var d,f,h,i,p,q,t,w,x,B,A,E,H,Q;if(!this.dirty||!this.scaler)return this;var K=this.opt;x=this.chart.theme.axis;var G=K.leftBottom,z=K.rotation%360,y=0,C,F,y=this.chart.theme.axis.tick.labelGap,L=K.font||x.majorTick&&x.majorTick.font||x.tick&&x.tick.font,J=K.titleFont||x.title&&x.title.font,N=K.fontColor||x.majorTick&&x.majorTick.fontColor||x.tick&&x.tick.fontColor||"black",T=K.titleFontColor||x.title&&x.title.fontColor||
"black";p=0==K.titleGap?0:K.titleGap||x.title&&x.title.gap||15;var I=K.titleOrientation||x.title&&x.title.orientation||"axis",D=this.chart.theme.getTick("major",K),V=this.chart.theme.getTick("minor",K),M=this.chart.theme.getTick("micro",K);Math.max(D.length,V.length,M.length);var P="stroke"in K?K.stroke:x.stroke,O=L?k.normalizedLength(k.splitFontString(L).size):0;q=Math.abs(Math.cos(z*Math.PI/180));C=Math.abs(Math.sin(z*Math.PI/180));var R=J?k.normalizedLength(k.splitFontString(J).size):0;"number"!=
typeof y&&(y=4);0>z&&(z+=360);var Z=this._getMaxLabelSize(),Z=Z&&Z.majLabelW;if(this.vertical){H=b.height-e.b;Q=void 0;A=e.t;E=void 0;x=(b.height-e.b+e.t)/2;B=void 0;C=O*C+(Z||0)*q+y+Math.max(D.length,V.length)+R+p;t=0;w=-1;d=0;f=0;p=1;q=0;h=y;i=0;switch(z){case 0:F="end";f=0.4*O;break;case 90:F="middle";d=-O;break;case 180:F="start";f=0.4*-O;break;case 270:F="middle";break;default:45>z?(F="end",f=0.4*O):90>z?(F="end",f=0.4*O):135>z?F="start":225>z?(F="start",f=0.4*-O):270>z?(F="start",d=G?0:0.4*
O):315>z?(F="end",d=G?0:0.4*O):(F="end",f=0.4*O)}if(G)Q=E=e.l,y=I&&"away"==I?90:270,B=e.l-C+(270==y?R:0),p=-1,h=-h;else switch(Q=E=b.width-e.r,y=I&&"axis"==I?90:270,B=b.width-e.r+C-(270==y?0:R),F){case "start":F="end";break;case "end":F="start";break;case "middle":d+=O}}else{Q=e.l;H=void 0;E=b.width-e.r;A=void 0;B=(b.width-e.r+e.l)/2;x=void 0;C=O*q+(Z||0)*C+y+Math.max(D.length,V.length)+R+p;t=1;w=0;d=0;f=0;p=0;q=1;h=0;i=y;switch(z){case 0:F="middle";f=O;break;case 90:F="start";d=0.4*-O;break;case 180:F=
"middle";break;case 270:F="end";d=0.4*O;break;default:45>z?(F="start",f=G?O:0):135>z?(F="start",d=0.4*-O):180>z?(F="start",f=G?0:-O):225>z?(F="end",f=G?0:-O):315>z?(F="end",f=G?0.4*O:0):(F="end",f=G?O:0)}if(G)H=A=b.height-e.b,y=I&&"axis"==I?180:0,x=b.height-e.b+C-(y?R:0);else switch(H=A=e.t,y=I&&"away"==I?180:0,x=e.t-C+(y?0:R),q=-1,i=-i,F){case "start":F="end";break;case "end":F="start";break;case "middle":f-=O}}this.cleanGroup();var U=this.group,G=this.scaler,I=this.ticks,$=c.getTransformerFromModel(this.scaler),
X=(!K.title||!y)&&!z&&this.opt.htmlLabels&&!g("ie")&&!g("opera")?"html":"gfx",Y=p*D.length,S=q*D.length,aa=this._skipInterval;U.createLine({x1:Q,y1:H,x2:E,y2:A}).setStroke(P);K.title&&(J=a.createText[X](this.chart,U,B,x,"middle",K.title,J,T),"html"==X?this.htmlElements.push(J):J.setTransform(k.matrix.rotategAt(y,B,x)));if(null==I)return this.dirty=!1,this;var W=0<I.major.length?(I.major[0].value-this._majorStart)/G.major.tick:0,ha=this.opt.majorLabels;j.forEach(I.major,function(a,b){var c=$(a.value),
e=Q+t*c,g=H+w*c,b=b+W;this.createLine(U,{x1:e,y1:g,x2:e+Y,y2:g+S}).setStroke(D);if(a.label&&(!aa||0==(b-(1+aa))%(1+aa))){var j=K.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,L,K.maxLabelCharCount):{text:a.label,truncated:!1},j=K.maxLabelSize?this.getTextWithLimitLength(j.text,L,K.maxLabelSize,j.truncated):j,c=this.createText(X,U,e+Y+h+(z?0:d),g+S+i+(z?0:f),F,j.text,L,N);this.chart.truncateBidi&&j.truncated&&this.chart.truncateBidi(c,a.label,X);j.truncated&&this.labelTooltip(c,this.chart,
a.label,j.text,L,X);"html"==X?this.htmlElements.push(c):z&&c.setTransform([{dx:d,dy:f},k.matrix.rotategAt(z,e+Y+h,g+S+i)])}},this);Y=p*V.length;S=q*V.length;ha=this.opt.minorLabels&&G.minMinorStep<=G.minor.tick*G.bounds.scale;j.forEach(I.minor,function(a){var b=$(a.value),c=Q+t*b,e=H+w*b;this.createLine(U,{x1:c,y1:e,x2:c+Y,y2:e+S}).setStroke(V);if(ha&&a.label){var g=K.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,L,K.maxLabelCharCount):{text:a.label,truncated:!1},g=K.maxLabelSize?this.getTextWithLimitLength(g.text,
L,K.maxLabelSize,g.truncated):g,b=this.createText(X,U,c+Y+h+(z?0:d),e+S+i+(z?0:f),F,g.text,L,N);this.chart.getTextDir&&g.truncated&&this.chart.truncateBidi(b,a.label,X);g.truncated&&this.labelTooltip(b,this.chart,a.label,g.text,L,X);"html"==X?this.htmlElements.push(b):z&&b.setTransform([{dx:d,dy:f},k.matrix.rotategAt(z,c+Y+h,e+S+i)])}},this);Y=p*M.length;S=q*M.length;j.forEach(I.micro,function(a){var b=$(a.value),a=Q+t*b,b=H+w*b;this.createLine(U,{x1:a,y1:b,x2:a+Y,y2:b+S}).setStroke(M)},this);this.dirty=
!1;return this},labelTooltip:function(a,b,c,e,g,i){var j=["dijit/Tooltip"],p={type:"rect"},t=["above","below"],e=k._base._getTextBox(e,{font:g}).w||0,g=g?k.normalizedLength(k.splitFontString(g).size):0;"html"==i?(h.mixin(p,d.position(a.firstChild,!0)),p.width=Math.ceil(e),p.height=Math.ceil(g),this._events.push({shape:dojo,handle:f.connect(a.firstChild,"onmouseover",this,function(){require(j,function(a){a.show(c,p,t)})})}),this._events.push({shape:dojo,handle:f.connect(a.firstChild,"onmouseout",this,
function(){require(j,function(a){a.hide(p)})})})):(i=a.getShape(),b=b.getCoords(),p=h.mixin(p,{x:i.x-e/2,y:i.y}),p.x+=b.x,p.y+=b.y,p.x=Math.round(p.x),p.y=Math.round(p.y),p.width=Math.ceil(e),p.height=Math.ceil(g),this._events.push({shape:a,handle:a.connect("onmouseenter",this,function(){require(j,function(a){a.show(c,p,t)})})}),this._events.push({shape:a,handle:a.connect("onmouseleave",this,function(){require(j,function(a){a.hide(p)})})}))}})})},"dojox/charting/axis2d/Invisible":function(){define("dojo/_base/lang,dojo/_base/declare,./Base,../scaler/linear,dojox/gfx,dojox/lang/utils".split(","),
function(h,j,g,i,f,d){return j("dojox.charting.axis2d.Invisible",g,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1},constructor:function(b,e){this.opt=h.clone(this.defaultParams);d.updateWithObject(this.opt,e);d.updateWithPattern(this.opt,e,this.optionalParams)},dependOnData:function(){return!("min"in this.opt)||!("max"in this.opt)},clear:function(){delete this.scaler;
delete this.ticks;this.dirty=!0;return this},initialized:function(){return"scaler"in this&&!(this.dirty&&this.dependOnData())},setWindow:function(b,e){this.scale=b;this.offset=e;return this.clear()},getWindowScale:function(){return"scale"in this?this.scale:1},getWindowOffset:function(){return"offset"in this?this.offset:0},calculate:function(b,e,c){if(this.initialized())return this;var a=this.opt;this.labels=a.labels;this.scaler=i.buildScaler(b,e,c,a);var d=this.scaler.bounds;if("scale"in this){a.from=
d.lower+this.offset;a.to=(d.upper-d.lower)/this.scale+a.from;if(!isFinite(a.from)||isNaN(a.from)||!isFinite(a.to)||isNaN(a.to)||a.to-a.from>=d.upper-d.lower)delete a.from,delete a.to,delete this.scale,delete this.offset;else{if(a.from<d.lower)a.to+=d.lower-a.from,a.from=d.lower;else if(a.to>d.upper)a.from+=d.upper-a.to,a.to=d.upper;this.offset=a.from-d.lower}this.scaler=i.buildScaler(b,e,c,a);1==this.scale&&0==this.offset&&(delete this.scale,delete this.offset)}return this},getScaler:function(){return this.scaler},
getTicks:function(){return this.ticks}})})},"dojox/charting/axis2d/Base":function(){define(["dojo/_base/declare","../Element"],function(h,j){return h("dojox.charting.axis2d.Base",j,{constructor:function(g,h){this.vertical=h&&h.vertical;this.opt={};this.opt.min=h&&h.min;this.opt.max=h&&h.max},clear:function(){return this},initialized:function(){return!1},calculate:function(){return this},getScaler:function(){return null},getTicks:function(){return null},getOffsets:function(){return{l:0,r:0,t:0,b:0}},
render:function(){this.dirty=!1;return this}})})},"dojox/charting/scaler/linear":function(){define(["dojo/_base/lang","./common"],function(h,j){function g(b,e){for(var b=b.toLowerCase(),c=e.length-1;0<=c;--c)if(b===e[c])return!0;return!1}var i=h.getObject("dojox.charting.scaler.linear",!0),f=j.getNumericLabel,d=function(b,e,c,a,d,f,j){c=h.delegate(c);if(!a){if("major"==c.fixUpper)c.fixUpper="minor";if("major"==c.fixLower)c.fixLower="minor"}if(!d){if("minor"==c.fixUpper)c.fixUpper="micro";if("minor"==
c.fixLower)c.fixLower="micro"}if(!f){if("micro"==c.fixUpper)c.fixUpper="none";if("micro"==c.fixLower)c.fixLower="none"}var m=g(c.fixLower,["major"])?Math.floor(c.min/a)*a:g(c.fixLower,["minor"])?Math.floor(c.min/d)*d:g(c.fixLower,["micro"])?Math.floor(c.min/f)*f:c.min,o=g(c.fixUpper,["major"])?Math.ceil(c.max/a)*a:g(c.fixUpper,["minor"])?Math.ceil(c.max/d)*d:g(c.fixUpper,["micro"])?Math.ceil(c.max/f)*f:c.max;c.useMin&&(b=m);c.useMax&&(e=o);var l=!a||c.useMin&&g(c.fixLower,["major"])?b:Math.ceil(b/
a)*a,n=!d||c.useMin&&g(c.fixLower,["major","minor"])?b:Math.ceil(b/d)*d,s=!f||c.useMin&&g(c.fixLower,["major","minor","micro"])?b:Math.ceil(b/f)*f,u=!a?0:(c.useMax&&g(c.fixUpper,["major"])?Math.round((e-l)/a):Math.floor((e-l)/a))+1,r=!d?0:(c.useMax&&g(c.fixUpper,["major","minor"])?Math.round((e-n)/d):Math.floor((e-n)/d))+1,c=!f?0:(c.useMax&&g(c.fixUpper,["major","minor","micro"])?Math.round((e-s)/f):Math.floor((e-s)/f))+1,v=d?Math.round(a/d):0,t=f?Math.round(d/f):0,w=a?Math.floor(Math.log(a)/Math.LN10):
0,x=d?Math.floor(Math.log(d)/Math.LN10):0,B=j/(e-b);isFinite(B)||(B=1);return{bounds:{lower:m,upper:o,from:b,to:e,scale:B,span:j},major:{tick:a,start:l,count:u,prec:w},minor:{tick:d,start:n,count:r,prec:x},micro:{tick:f,start:s,count:c,prec:0},minorPerMajor:v,microPerMinor:t,scaler:i}};return h.mixin(i,{buildScaler:function(b,e,c,a,f,g){var h={fixUpper:"none",fixLower:"none",natural:!1};if(a){if("fixUpper"in a)h.fixUpper=""+a.fixUpper;if("fixLower"in a)h.fixLower=""+a.fixLower;if("natural"in a)h.natural=
Boolean(a.natural)}g=!g||3>g?3:g;if("min"in a)b=a.min;if("max"in a)e=a.max;a.includeZero&&(0<b&&(b=0),0>e&&(e=0));h.min=b;h.useMin=!0;h.max=e;h.useMax=!0;if("from"in a)b=a.from,h.useMin=!1;if("to"in a)e=a.to,h.useMax=!1;if(e<=b)return d(b,e,h,0,0,0,c);f||(f=e-b);var f=Math.floor(Math.log(f)/Math.LN10),f=a&&"majorTickStep"in a?a.majorTickStep:Math.pow(10,f),i=0,j=0,l;if(a&&"minorTickStep"in a)i=a.minorTickStep;else{do{i=f/10;if(!h.natural||0.9<i)if(l=d(b,e,h,f,i,0,c),l.bounds.scale*l.minor.tick>g)break;
i=f/5;if(!h.natural||0.9<i)if(l=d(b,e,h,f,i,0,c),l.bounds.scale*l.minor.tick>g)break;i=f/2;if(!h.natural||0.9<i)if(l=d(b,e,h,f,i,0,c),l.bounds.scale*l.minor.tick>g)break;return d(b,e,h,f,0,0,c)}while(0)}if(a&&"microTickStep"in a)j=a.microTickStep,l=d(b,e,h,f,i,j,c);else{do{j=i/10;if(!h.natural||0.9<j)if(l=d(b,e,h,f,i,j,c),3<l.bounds.scale*l.micro.tick)break;j=i/5;if(!h.natural||0.9<j)if(l=d(b,e,h,f,i,j,c),3<l.bounds.scale*l.micro.tick)break;j=i/2;if(!h.natural||0.9<j)if(l=d(b,e,h,f,i,j,c),3<l.bounds.scale*
l.micro.tick)break;j=0}while(0)}return j?l:d(b,e,h,f,i,0,c)},buildTicks:function(b,e){var c,a,d,g=b.major.start,h=b.minor.start,i=b.micro.start;if(e.microTicks&&b.micro.tick)c=b.micro.tick,a=i;else if(e.minorTicks&&b.minor.tick)c=b.minor.tick,a=h;else if(b.major.tick)c=b.major.tick,a=g;else return null;var j=1/b.bounds.scale;if(b.bounds.to<=b.bounds.from||isNaN(j)||!isFinite(j)||0>=c||isNaN(c)||!isFinite(c))return null;for(var l=[],n=[],s=[];a<=b.bounds.to+j;){if(Math.abs(g-a)<c/2){d={value:g};if(e.majorLabels)d.label=
f(g,b.major.prec,e);l.push(d);g+=b.major.tick;h+=b.minor.tick}else if(Math.abs(h-a)<c/2){if(e.minorTicks){d={value:h};if(e.minorLabels&&b.minMinorStep<=b.minor.tick*b.bounds.scale)d.label=f(h,b.minor.prec,e);n.push(d)}h+=b.minor.tick}else e.microTicks&&s.push({value:i});i+=b.micro.tick;a+=c}return{major:l,minor:n,micro:s}},getTransformerFromModel:function(b){var e=b.bounds.from,c=b.bounds.scale;return function(a){return(a-e)*c}},getTransformerFromPlot:function(b){var e=b.bounds.from,c=b.bounds.scale;
return function(a){return a/c+e}}})})},"dojox/charting/scaler/common":function(){define(["dojo/_base/lang"],function(h){var j=function(f,d){return Math.abs(f-d)<=1.0E-6*(Math.abs(f)+Math.abs(d))},g=h.getObject("dojox.charting.scaler.common",!0),i={};return h.mixin(g,{doIfLoaded:function(f,d,b){if(void 0==i[f])try{i[f]=require(f)}catch(e){i[f]=null}return i[f]?d(i[f]):b()},getNumericLabel:function(f,d,b){var e="";g.doIfLoaded("dojo/number",function(a){e=(b.fixed?a.format(f,{places:0>d?-d:0}):a.format(f))||
""},function(){e=b.fixed?f.toFixed(0>d?-d:0):f.toString()});if(b.labelFunc){var c=b.labelFunc(e,f,d);if(c)return c}if(b.labels){for(var c=b.labels,a=0,h=c.length;a<h;){var i=Math.floor((a+h)/2);c[i].value<f?a=i+1:h=i}if(a<c.length&&j(c[a].value,f))return c[a].text;--a;if(0<=a&&a<c.length&&j(c[a].value,f))return c[a].text;a+=2;if(a<c.length&&j(c[a].value,f))return c[a].text}return e}})})},"dojox/charting/plot2d/Bubble":function(){define("dojo/_base/lang,dojo/_base/declare,dojo/_base/array,./CartesianBase,./_PlotEvents,./common,dojox/lang/functional,dojox/lang/functional/reversed,dojox/lang/utils,dojox/gfx/fx".split(","),
function(h,j,g,i,f,d,b,e,c,a){var k=e.lambda("item.purgeGroup()");return j("dojox.charting.plot2d.Bubble",[i,f],{defaultParams:{hAxis:"x",vAxis:"y",animate:null},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},styleFunc:null,font:"",fontColor:""},constructor:function(a,b){this.opt=h.clone(this.defaultParams);c.updateWithObject(this.opt,b);c.updateWithPattern(this.opt,b,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate},render:function(a,
c){if(this.zoom&&!this.isDataDirty())return this.performZoom(a,c);this.resetEvents();if(this.dirty=this.isDirty()){g.forEach(this.series,k);this._eventSeries={};this.cleanGroup();var e=this.group;b.forEachRev(this.series,function(a){a.cleanGroup(e)})}for(var f=this.chart.theme,h=this._hScaler.scaler.getTransformerFromModel(this._hScaler),i=this._vScaler.scaler.getTransformerFromModel(this._vScaler),j=this.events(),u=this.series.length-1;0<=u;--u){var r=this.series[u];if(!this.dirty&&!r.dirty)f.skip(),
this._reconnectEvents(r.name);else if(r.cleanGroup(),r.data.length)if("number"==typeof r.data[0])console.warn("dojox.charting.plot2d.Bubble: the data in the following series cannot be rendered as a bubble chart; ",r);else{var v=f.next("circle",[this.opt,r]),e=r.group,t=g.map(r.data,function(b){return b?{x:h(b.x)+c.l,y:a.height-c.b-i(b.y),radius:this._vScaler.bounds.scale*(b.size/2)}:null},this),w=null,x=null,B=null,A=this.opt.styleFunc,E=function(a){return A?f.addMixin(v,"circle",[a,A(a)],!0):f.addMixin(v,
"circle",a,!0)};if(v.series.shadow&&(B=g.map(t,function(b,d){if(null!==b){var f=E(r.data[d]).series.shadow,f=e.createCircle({cx:b.x+f.dx,cy:b.y+f.dy,r:b.radius}).setStroke(f).setFill(f.color);this.animate&&this._animateBubble(f,a.height-c.b,b.radius);return f}return null},this),B.length))r.dyn.shadow=B[B.length-1].getStroke();if(v.series.outline&&(x=g.map(t,function(b,f){if(null!==b){var g=E(r.data[f]),g=d.makeStroke(g.series.outline);g.width=2*g.width+v.series.stroke.width;g=e.createCircle({cx:b.x,
cy:b.y,r:b.radius}).setStroke(g);this.animate&&this._animateBubble(g,a.height-c.b,b.radius);return g}return null},this),x.length))r.dyn.outline=x[x.length-1].getStroke();w=g.map(t,function(b,d){if(null!==b){var f=E(r.data[d]),g={x:b.x-b.radius,y:b.y-b.radius,width:2*b.radius,height:2*b.radius},h=this._plotFill(f.series.fill,a,c),h=this._shapeFill(h,g),f=e.createCircle({cx:b.x,cy:b.y,r:b.radius}).setFill(h).setStroke(f.series.stroke);this.animate&&this._animateBubble(f,a.height-c.b,b.radius);return f}return null},
this);if(w.length)r.dyn.fill=w[w.length-1].getFill(),r.dyn.stroke=w[w.length-1].getStroke();if(j){var H=Array(w.length);g.forEach(w,function(a,b){if(null!==a){var c={element:"circle",index:b,run:r,shape:a,outline:x&&x[b]||null,shadow:B&&B[b]||null,x:r.data[b].x,y:r.data[b].y,r:r.data[b].size/2,cx:t[b].x,cy:t[b].y,cr:t[b].radius};this._connectEvents(c);H[b]=c}},this);this._eventSeries[r.name]=H}else delete this._eventSeries[r.name];r.dirty=!1}else r.dirty=!1,f.skip()}this.dirty=!1;return this},_animateBubble:function(b,
c,e){a.animateTransform(h.delegate({shape:b,duration:1200,transform:[{name:"translate",start:[0,c],end:[0,0]},{name:"scale",start:[0,1/e],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/CartesianBase":function(){define("dojo/_base/lang,dojo/_base/declare,dojo/_base/connect,./Base,../scaler/primitive,dojox/gfx/fx".split(","),function(h,j,g,i,f,d){return j("dojox.charting.plot2d.CartesianBase",i,{constructor:function(){this.axes=["hAxis","vAxis"];this.zoom=null;this.zoomQueue=
[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0}},clear:function(){this.inherited(arguments);this._vAxis=this._hAxis=null;return this},cleanGroup:function(b){this.inherited(arguments,[b||this.chart.plotGroup])},setAxis:function(b){b&&(this[b.vertical?"_vAxis":"_hAxis"]=b);return this},toPage:function(b){var e=this._hAxis,c=this._vAxis,a=e.getScaler(),d=c.getScaler(),f=a.scaler.getTransformerFromModel(a),g=d.scaler.getTransformerFromModel(d),h=this.chart.getCoords(),i=this.chart.offsets,
j=this.chart.dim,a=function(a){var b={};b.x=f(a[e.name])+h.x+i.l;b.y=h.y+j.height-i.b-g(a[c.name]);return b};return b?a(b):a},toData:function(b){var e=this._hAxis,c=this._vAxis,a=e.getScaler(),d=c.getScaler(),f=a.scaler.getTransformerFromPlot(a),g=d.scaler.getTransformerFromPlot(d),h=this.chart.getCoords(),i=this.chart.offsets,j=this.chart.dim,a=function(a){var b={};b[e.name]=f(a.x-h.x-i.l);b[c.name]=g(h.y+j.height-a.y-i.b);return b};return b?a(b):a},isDirty:function(){return this.dirty||this._hAxis&&
this._hAxis.dirty||this._vAxis&&this._vAxis.dirty},performZoom:function(b,e){var c=this._vAxis.scale||1,a=this._hAxis.scale||1,f=this._hScaler.bounds,f=(f.from-f.lower)*f.scale,i=this._vScaler.bounds,i=(i.from-i.lower)*i.scale,j=c/this.lastWindow.vscale,m=a/this.lastWindow.hscale,j=d.animateTransform(h.delegate({shape:this.group,duration:1200,transform:[{name:"translate",start:[0,0],end:[e.l*(1-m),(b.height-e.b)*(1-j)]},{name:"scale",start:[1,1],end:[m,j]},{name:"original"},{name:"translate",start:[0,
0],end:[(this.lastWindow.xoffset-f)/(1==this.lastWindow.hscale?a:this.lastWindow.hscale),(i-this.lastWindow.yoffset)/(1==this.lastWindow.vscale?c:this.lastWindow.vscale)]}]},this.zoom));h.mixin(this.lastWindow,{vscale:c,hscale:a,xoffset:f,yoffset:i});this.zoomQueue.push(j);g.connect(j,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();0<this.zoomQueue.length&&this.zoomQueue[0].play()});1==this.zoomQueue.length&&this.zoomQueue[0].play();return this},initializeScalers:function(b,e){this._hAxis?
(this._hAxis.initialized()||this._hAxis.calculate(e.hmin,e.hmax,b.width),this._hScaler=this._hAxis.getScaler()):this._hScaler=f.buildScaler(e.hmin,e.hmax,b.width);this._vAxis?(this._vAxis.initialized()||this._vAxis.calculate(e.vmin,e.vmax,b.height),this._vScaler=this._vAxis.getScaler()):this._vScaler=f.buildScaler(e.vmin,e.vmax,b.height);return this}})})},"dojox/charting/plot2d/Base":function(){define(["dojo/_base/declare","../Element","dojo/_base/array","./common"],function(h,j,g,i){return h("dojox.charting.plot2d.Base",
j,{constructor:function(){},clear:function(){this.series=[];this.dirty=!0;return this},setAxis:function(){return this},assignAxes:function(f){g.forEach(this.axes,function(d){this[d]&&this.setAxis(f[this[d]])},this)},addSeries:function(f){this.series.push(f);return this},getSeriesStats:function(){return i.collectSimpleStats(this.series)},calculateAxes:function(f){this.initializeScalers(f,this.getSeriesStats());return this},initializeScalers:function(){return this},isDataDirty:function(){return g.some(this.series,
function(f){return f.dirty})},render:function(){return this},getRequiredColors:function(){return this.series.length}})})},"dojox/charting/plot2d/common":function(){define("dojo/_base/lang,dojo/_base/array,dojo/_base/Color,dojox/gfx,dojox/lang/functional,../scaler/common".split(","),function(h,j,g,i,f,d){var b=h.getObject("dojox.charting.plot2d.common",!0);return h.mixin(b,{doIfLoaded:d.doIfLoaded,makeStroke:function(b){if(!b)return b;if("string"==typeof b||b instanceof g)b={color:b};return i.makeParameters(i.defaultStroke,
b)},augmentColor:function(b,c){var a=new g(b),d=new g(c);d.a=a.a;return d},augmentStroke:function(e,c){var a=b.makeStroke(e);if(a)a.color=b.augmentColor(a.color,c);return a},augmentFill:function(e,c){new g(c);return"string"==typeof e||e instanceof g?b.augmentColor(e,c):e},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(e){for(var c=h.delegate(b.defaultStats),a=0;a<e.length;++a)for(var d=
e[a],f=0;f<d.data.length;f++)if(null!==d.data[f]){if("number"==typeof d.data[f]){var f=c.vmin,g=c.vmax;(!("ymin"in d)||!("ymax"in d))&&j.forEach(d.data,function(a,b){if(null!==a){var e=b+1,d=a;isNaN(d)&&(d=0);c.hmin=Math.min(c.hmin,e);c.hmax=Math.max(c.hmax,e);c.vmin=Math.min(c.vmin,d);c.vmax=Math.max(c.vmax,d)}})}else{var i=c.hmin,o=c.hmax,f=c.vmin,g=c.vmax;(!("xmin"in d)||!("xmax"in d)||!("ymin"in d)||!("ymax"in d))&&j.forEach(d.data,function(a,b){if(null!==a){var e="x"in a?a.x:b+1,d=a.y;isNaN(e)&&
(e=0);isNaN(d)&&(d=0);c.hmin=Math.min(c.hmin,e);c.hmax=Math.max(c.hmax,e);c.vmin=Math.min(c.vmin,d);c.vmax=Math.max(c.vmax,d)}});if("xmin"in d)c.hmin=Math.min(i,d.xmin);if("xmax"in d)c.hmax=Math.max(o,d.xmax)}if("ymin"in d)c.vmin=Math.min(f,d.ymin);if("ymax"in d)c.vmax=Math.max(g,d.ymax);break}return c},calculateBarSize:function(b,c,a){a||(a=1);var d=c.gap,d=(b-2*d)/a;"minBarSize"in c&&(d=Math.max(d,c.minBarSize));"maxBarSize"in c&&(d=Math.min(d,c.maxBarSize));d=Math.max(d,1);return{size:d,gap:(b-
d*a)/2}},collectStackedStats:function(e){var c=h.clone(b.defaultStats);if(e.length){c.hmin=Math.min(c.hmin,1);c.hmax=f.foldl(e,"seed, run -> Math.max(seed, run.data.length)",c.hmax);for(var a=0;a<c.hmax;++a){var d=e[0].data[a],d=d&&("number"==typeof d?d:d.y);isNaN(d)&&(d=0);c.vmin=Math.min(c.vmin,d);for(var g=1;g<e.length;++g){var i=e[g].data[a],i=i&&("number"==typeof i?i:i.y);isNaN(i)&&(i=0);d+=i}c.vmax=Math.max(c.vmax,d)}}return c},curve:function(b,c){var a=b.slice(0);"x"==c&&(a[a.length]=a[0]);
return j.map(a,function(b,e){if(0==e)return"M"+b.x+","+b.y;if(isNaN(c)){if("X"==c||"x"==c||"S"==c){var d,f=a[e-1],g=a[e],h,i,j,u=1/6;1==e?(d="x"==c?a[a.length-2]:f,u=1/3):d=a[e-2];e==a.length-1?(h="x"==c?a[1]:g,u=1/3):h=a[e+1];i=Math.sqrt((g.x-f.x)*(g.x-f.x)+(g.y-f.y)*(g.y-f.y));j=Math.sqrt((g.x-d.x)*(g.x-d.x)+(g.y-d.y)*(g.y-d.y));var r=Math.sqrt((h.x-f.x)*(h.x-f.x)+(h.y-f.y)*(h.y-f.y)),v=j*u,u=r*u;v>i/2&&u>i/2?(v=i/2,u=i/2):v>i/2?(v=i/2,u=i/2*r/j):u>i/2&&(u=i/2,v=i/2*j/r);"S"==c&&(d==f&&(v=0),g==
h&&(u=0));i=f.x+v*(g.x-d.x)/j;d=f.y+v*(g.y-d.y)/j;j=g.x-u*(h.x-f.x)/r;f=g.y-u*(h.y-f.y)/r}}else return g=b.x-a[e-1].x,"C"+(b.x-(c-1)*(g/c))+","+a[e-1].y+" "+(b.x-g/c)+","+b.y+" "+b.x+","+b.y;return"C"+(i+","+d+" "+j+","+f+" "+g.x+","+g.y)}).join(" ")},getLabel:function(b,c,a){return d.doIfLoaded("dojo/number",function(d){return(c?d.format(b,{places:a}):d.format(b))||""},function(){return c?b.toFixed(a):b.toString()})}})})},"dojox/charting/scaler/primitive":function(){define(["dojo/_base/lang"],function(h){var j=
h.getObject("dojox.charting.scaler.primitive",!0);return h.mixin(j,{buildScaler:function(g,h,f){g==h&&(g-=0.5,h+=0.5);return{bounds:{lower:g,upper:h,from:g,to:h,scale:f/(h-g),span:f},scaler:j}},buildTicks:function(){return{major:[],minor:[],micro:[]}},getTransformerFromModel:function(g){var h=g.bounds.from,f=g.bounds.scale;return function(d){return(d-h)*f}},getTransformerFromPlot:function(g){var h=g.bounds.from,f=g.bounds.scale;return function(d){return d/f+h}}})})},"dojox/gfx/fx":function(){define("dojo/_base/lang,./_base,./matrix,dojo/_base/Color,dojo/_base/array,dojo/_base/fx,dojo/_base/connect".split(","),
function(h,j,g,i,f,d,b){function e(a,b){this.start=a;this.end=b}function c(a,b,c){this.start=a;this.end=b;this.units=c}function a(a,b){this.start=a;this.end=b;this.temp=new i}function k(a){this.values=a;this.length=a.length}function p(a,b){this.values=a;this.def=b?b:{}}function q(a,b){this.stack=a;this.original=b}function m(b,c,e,d){if(b.values)return new k(b.values);var f,g;g=b.start?j.normalizeColor(b.start):f=c?e?c[e]:c:d;b.end?b=j.normalizeColor(b.end):(f||(f=c?e?c[e]:c:d),b=f);return new a(g,
b)}var o=j.fx={};e.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};c.prototype.getValue=function(a){return(this.end-this.start)*a+this.start+this.units};a.prototype.getValue=function(a){return i.blendColors(this.start,this.end,a,this.temp)};k.prototype.getValue=function(a){return this.values[Math.min(Math.floor(a*this.length),this.length-1)]};p.prototype.getValue=function(a){var b=h.clone(this.def),c;for(c in this.values)b[c]=this.values[c].getValue(a);return b};q.prototype.getValue=
function(a){var b=[];f.forEach(this.stack,function(c){if(c instanceof g.Matrix2D)b.push(c);else if("original"==c.name&&this.original)b.push(this.original);else if("matrix"==c.name){if(c.start instanceof g.Matrix2D&&c.end instanceof g.Matrix2D){var e=new g.Matrix2D,d;for(d in c.start)e[d]=(c.end[d]-c.start[d])*a+c.start[d];b.push(e)}}else c.name in g&&(e=g[c.name],"function"!=typeof e?b.push(e):(d=f.map(c.start,function(b,e){return(c.end[e]-b)*a+b}),e=e.apply(g,d),e instanceof g.Matrix2D&&b.push(e)))},
this);return b};var l=new i(0,0,0,0);o.animateStroke=function(a){if(!a.easing)a.easing=d._defaultEasing;var c=new d.Animation(a),f=a.shape,g;b.connect(c,"beforeBegin",c,function(){g=f.getStroke();var b=a.color,c={},d;if(b)c.color=m(b,g,"color",l);if((b=a.style)&&b.values)c.style=new k(b.values);if(b=a.width){var h=b;h.values?d=new k(h.values):(b=h.start?h.start:d=g?g.width:1,h.end?d=h.end:"number"!=typeof d&&(d=g?g.width:1),d=new e(b,d));c.width=d}if((b=a.cap)&&b.values)c.cap=new k(b.values);if(b=
a.join)if(b.values)c.join=new k(b.values);else if(d=b.start?b.start:g&&g.join||0,b=b.end?b.end:g&&g.join||0,"number"==typeof d&&"number"==typeof b)c.join=new e(d,b);this.curve=new p(c,g)});b.connect(c,"onAnimate",f,"setStroke");return c};o.animateFill=function(a){if(!a.easing)a.easing=d._defaultEasing;var c=new d.Animation(a),e=a.shape,f;b.connect(c,"beforeBegin",c,function(){f=e.getFill();var b=a.color;if(b)this.curve=m(b,f,"",l)});b.connect(c,"onAnimate",e,"setFill");return c};o.animateFont=function(a){if(!a.easing)a.easing=
d._defaultEasing;var e=new d.Animation(a),f=a.shape,g;b.connect(e,"beforeBegin",e,function(){g=f.getFont();var b=a.style,e={},d,h;if(b&&b.values)e.style=new k(b.values);if((b=a.variant)&&b.values)e.variant=new k(b.values);if((b=a.weight)&&b.values)e.weight=new k(b.values);if((b=a.family)&&b.values)e.family=new k(b.values);if((b=a.size)&&b.units)d=parseFloat(b.start?b.start:f.font&&f.font.size||"0"),h=parseFloat(b.end?b.end:f.font&&f.font.size||"0"),e.size=new c(d,h,b.units);this.curve=new p(e,g)});
b.connect(e,"onAnimate",f,"setFont");return e};o.animateTransform=function(a){if(!a.easing)a.easing=d._defaultEasing;var c=new d.Animation(a),e=a.shape,f;b.connect(c,"beforeBegin",c,function(){f=e.getTransform();this.curve=new q(a.transform,f)});b.connect(c,"onAnimate",e,"setTransform");return c};return o})},"dojox/charting/plot2d/_PlotEvents":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(h,j,g,i){return g("dojox.charting.plot2d._PlotEvents",
null,{constructor:function(){this._shapeEvents=[];this._eventSeries={}},destroy:function(){this.resetEvents();this.inherited(arguments)},plotEvent:function(){},raiseEvent:function(f){this.plotEvent(f);var d=h.delegate(f);d.originalEvent=f.type;d.originalPlot=f.plot;d.type="onindirect";j.forEach(this.chart.stack,function(b){if(b!==this&&b.plotEvent)d.plot=b,b.plotEvent(d)},this)},connect:function(f,d){this.dirty=!0;return i.connect(this,"plotEvent",f,d)},events:function(){return!!this.plotEvent.after},
resetEvents:function(){if(this._shapeEvents.length)j.forEach(this._shapeEvents,function(f){f.shape.disconnect(f.handle)}),this._shapeEvents=[];this.raiseEvent({type:"onplotreset",plot:this})},_connectSingleEvent:function(f,d){this._shapeEvents.push({shape:f.eventMask,handle:f.eventMask.connect(d,this,function(b){f.type=d;f.event=b;this.raiseEvent(f);f.event=null})})},_connectEvents:function(f){if(f)f.chart=this.chart,f.plot=this,f.hAxis=this.hAxis||null,f.vAxis=this.vAxis||null,f.eventMask=f.eventMask||
f.shape,this._connectSingleEvent(f,"onmouseover"),this._connectSingleEvent(f,"onmouseout"),this._connectSingleEvent(f,"onclick")},_reconnectEvents:function(f){(f=this._eventSeries[f])&&j.forEach(f,this._connectEvents,this)},fireEvent:function(f,d,b,e){if((f=this._eventSeries[f])&&f.length&&b<f.length)b=f[b],b.type=d,b.event=e||null,this.raiseEvent(b),b.event=null}})})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(h,j,g,i,f){var d=
{};h.setObject("dojo.number",d);d.format=function(b,c){var c=h.mixin({},c||{}),a=j.normalizeLocale(c.locale),a=j.getLocalization("dojo.cldr","number",a);c.customs=a;a=c.pattern||a[(c.type||"decimal")+"Format"];return isNaN(b)||Infinity==Math.abs(b)?null:d._applyPattern(b,a,c)};d._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;d._applyPattern=function(b,c,a){var a=a||{},f=a.customs.group,g=a.customs.decimal,c=c.split(";"),h=c[0],c=c[0>b?1:0]||"-"+h;if(-1!=c.indexOf("%"))b*=100;else if(-1!=c.indexOf("\u2030"))b*=
1E3;else if(-1!=c.indexOf("\u00a4"))f=a.customs.currencyGroup||f,g=a.customs.currencyDecimal||g,c=c.replace(/\u00a4{1,3}/,function(b){return a[["symbol","currency","displayName"][b.length-1]]||a.currency||""});else if(-1!=c.indexOf("E"))throw Error("exponential notation not supported");var i=d._numberPatternRE,h=h.match(i);if(!h)throw Error("unable to find a number expression in pattern: "+c);if(!1===a.fractional)a.places=0;return c.replace(i,d._formatAbsolute(b,h[0],{decimal:g,group:f,places:a.places,
round:a.round}))};d.round=function(b,c,a){a=10/(a||10);return(a*+b).toFixed(c)/a};if(0==(0.9).toFixed()){var b=d.round;d.round=function(e,c,a){var d=Math.pow(10,-c||0),f=Math.abs(e);if(!e||f>=d)d=0;else if(f/=d,0.5>f||0.95<=f)d=0;return b(e,c,a)+(0<e?d:-d)}}d._formatAbsolute=function(b,c,a){a=a||{};if(!0===a.places)a.places=0;if(Infinity===a.places)a.places=6;var c=c.split("."),f="string"==typeof a.places&&a.places.indexOf(","),g=a.places;if(f)g=a.places.substring(f+1);else if(!(0<=g))g=(c[1]||[]).length;
0>a.round||(b=d.round(b,g,a.round));var b=(""+Math.abs(b)).split("."),h=b[1]||"";if(c[1]||a.places){if(f)a.places=a.places.substring(0,f);f=void 0!==a.places?a.places:c[1]&&c[1].lastIndexOf("0")+1;f>h.length&&(b[1]=i.pad(h,f,"0",!0));g<h.length&&(b[1]=h.substr(0,g))}else b[1]&&b.pop();g=c[0].replace(",","");f=g.indexOf("0");-1!=f&&(f=g.length-f,f>b[0].length&&(b[0]=i.pad(b[0],f)),-1==g.indexOf("#")&&(b[0]=b[0].substr(b[0].length-f)));var g=c[0].lastIndexOf(","),j,o;-1!=g&&(j=c[0].length-g-1,c=c[0].substr(0,
g),g=c.lastIndexOf(","),-1!=g&&(o=c.length-g-1));c=[];for(g=b[0];g;)f=g.length-j,c.push(0<f?g.substr(f):g),g=0<f?g.slice(0,f):"",o&&(j=o,delete o);b[0]=c.reverse().join(a.group||",");return b.join(a.decimal||".")};d.regexp=function(b){return d._parseInfo(b).regexp};d._parseInfo=function(b){var b=b||{},c=j.normalizeLocale(b.locale),c=j.getLocalization("dojo.cldr","number",c),a=b.pattern||c[(b.type||"decimal")+"Format"],g=c.group,h=c.decimal,i=1;if(-1!=a.indexOf("%"))i/=100;else if(-1!=a.indexOf("\u2030"))i/=
1E3;else{var m=-1!=a.indexOf("\u00a4");m&&(g=c.currencyGroup||g,h=c.currencyDecimal||h)}c=a.split(";");1==c.length&&c.push("-"+c[0]);c=f.buildGroupRE(c,function(a){a="(?:"+f.escapeString(a,".")+")";return a.replace(d._numberPatternRE,function(a){var c={signed:!1,separator:b.strict?g:[g,""],fractional:b.fractional,decimal:h,exponent:!1},a=a.split("."),f=b.places;1==a.length&&1!=i&&(a[1]="###");if(1==a.length||0===f)c.fractional=!1;else{void 0===f&&(f=b.pattern?a[1].lastIndexOf("0")+1:Infinity);if(f&&
void 0==b.fractional)c.fractional=!0;!b.places&&f<a[1].length&&(f+=","+a[1].length);c.places=f}a=a[0].split(",");if(1<a.length&&(c.groupSize=a.pop().length,1<a.length))c.groupSize2=a.pop().length;return"("+d._realNumberRegexp(c)+")"})},!0);m&&(c=c.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(a,c,d,g){a=f.escapeString(b[["symbol","currency","displayName"][d.length-1]]||b.currency||"");c=c?"[\\s\\xa0]":"";g=g?"[\\s\\xa0]":"";return!b.strict?(c&&(c+="*"),g&&(g+="*"),"(?:"+c+a+g+")?"):c+a+
g}));return{regexp:c.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:g,decimal:h,factor:i}};d.parse=function(b,c){var a=d._parseInfo(c),f=RegExp("^"+a.regexp+"$").exec(b);if(!f)return NaN;var g=f[1];if(!f[1]){if(!f[2])return NaN;g=f[2];a.factor*=-1}g=g.replace(RegExp("["+a.group+"\\s\\xa0]","g"),"").replace(a.decimal,".");return g*a.factor};d._realNumberRegexp=function(b){b=b||{};if(!("places"in b))b.places=Infinity;if("string"!=typeof b.decimal)b.decimal=".";if(!("fractional"in b)||/^0/.test(b.places))b.fractional=
[!0,!1];if(!("exponent"in b))b.exponent=[!0,!1];if(!("eSigned"in b))b.eSigned=[!0,!1];var c=d._integerRegexp(b),a=f.buildGroupRE(b.fractional,function(a){var c="";a&&0!==b.places&&(c="\\"+b.decimal,c=Infinity==b.places?"(?:"+c+"\\d+)?":c+("\\d{"+b.places+"}"));return c},!0),g=f.buildGroupRE(b.exponent,function(a){return a?"([eE]"+d._integerRegexp({signed:b.eSigned})+")":""}),c=c+a;a&&(c="(?:(?:"+c+")|(?:"+a+"))");return c+g};d._integerRegexp=function(b){b=b||{};if(!("signed"in b))b.signed=[!0,!1];
if("separator"in b){if(!("groupSize"in b))b.groupSize=3}else b.separator="";var c=f.buildGroupRE(b.signed,function(a){return a?"[-+]":""},!0),a=f.buildGroupRE(b.separator,function(a){if(!a)return"(?:\\d+)";a=f.escapeString(a);" "==a?a="\\s":"\u00a0"==a&&(a="\\s\\xa0");var c=b.groupSize,d=b.groupSize2;return d?(a="(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+a+"]\\d{"+d+"})*["+a+"]\\d{"+c+"})",0<c-d?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":a):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+a+"]\\d{"+c+"})*)"},!0);return c+a};
return d})},"JBrowse/View/Track/FeatureDetailMixin":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/aspect,dojo/dom-construct,JBrowse/Util,JBrowse/View/FASTA".split(","),function(h,j,g,i,f,d,b){return h(null,{constructor:function(){"function"==typeof this.destroy&&i.before(this,"destroy",function(){delete this.eventHandlers})},_setupEventHandlers:function(){var b=dojo.clone(this.config.events||{});if(!b.click)b.click=(this.config.style||{}).linkTemplate?{action:"newWindow",
url:this.config.style.linkTemplate}:{action:"contentDialog",title:"{type} {name}",content:dojo.hitch(this,"defaultFeatureDetail")};var b=dojo.clone(b),c;for(c in this.config){var a=c.replace(/^on(?=[A-Z])/,"");a!=c&&(b[a.toLowerCase()]=this.config[c])}for(c in b)"string"==typeof b[c]&&(b[c]={url:b[c]});this.eventHandlers=b;this.eventHandlers.click=this._makeClickHandler(this.eventHandlers.click)},defaultFeatureDetail:function(b,c,a,d){d=d||dojo.create("div",{className:"detail feature-detail feature-detail-"+
b.name.replace(/\s+/g,"_").toLowerCase(),innerHTML:""});this._renderCoreDetails(b,c,a,d);this._renderAdditionalTagsDetail(b,c,a,d);this._renderUnderlyingReferenceSequence(b,c,a,d);this._renderSubfeaturesDetail(b,c,a,d);return d},_renderCoreDetails:function(b,c,a,f){b=dojo.create("div",{className:"core"},f);a=dojo.hitch(this,"renderDetailField",b);b.innerHTML+='<h2 class="sectiontitle">Primary Data</h2>';a("Name",this.getConfForFeature("style.label",c));a("Type",c.get("type"));a("Score",c.get("score"));
a("Description",this._getDescription?this._getDescription(c):c.get("note")||c.get("description"));a("Position",d.assembleLocString({start:c.get("start"),end:c.get("end"),ref:this.refSeq.name,strand:c.get("strand")}));a("Length",d.addCommas(c.get("end")-c.get("start"))+" bp")},_renderSubfeaturesDetail:function(b,c,a,d){(c=c.get("subfeatures"))&&c.length&&this._subfeaturesDetail(b,c,d)},_isReservedTag:function(b){return{name:1,start:1,end:1,strand:1,note:1,subfeatures:1,type:1,score:1}[b.toLowerCase()]},
_renderAdditionalTagsDetail:function(b,c,a,d){b=j.filter(c.tags(),function(a){return!this._isReservedTag(a)},this);b.length&&(f.create("div",{className:"additional",innerHTML:'<h2 class="sectiontitle">Attributes</h2>'},d),j.forEach(b.sort(),function(a){this.renderDetailField(d,a,c.get(a))},this))},getFeatureDescription:function(b){var c=this.config.style.description||this.config.description;if(!c)return null;if("function"==typeof c)return c.call(this,b);var a;if(!(a=this.descriptionFields))c?(g.isArray(c)?
c=c.join(","):"string"!=typeof c&&(console.warn("invalid `description` setting ("+c+') for "'+this.name+'" track, falling back to "note,description"'),c="note,description"),c=c.toLowerCase().split(/\s*\,\s*/)):c=[],a=this.descriptionFields=c;c=a;for(a=0;a<c.length;a++){var d=b.get(c[a]);if(d)return d}return null},_renderUnderlyingReferenceSequence:function(e,c,a,f){a=dojo.create("div",{className:"field_container feature_sequence"},f);dojo.create("h2",{className:"field feature_sequence",innerHTML:"Region sequence",
title:"reference sequence underlying this "+(c.get("type")||"feature")},a);var g="feature_sequence"+this._uniqID(),h=dojo.create("div",{id:g,innerHTML:'<div style="height: 12em">Loading...</div>',className:"value feature_sequence"},a);e.browser.getStore("refseqs",dojo.hitch(this,function(a){h=dojo.byId(g)||h;a?a.getFeatures({ref:this.refSeq.name,start:c.get("start"),end:c.get("end")},dojo.hitch(this,function(a){a=a.get("seq");h=dojo.byId(g)||h;h.innerHTML="";(new b({width:62,htmlMaxRows:10})).renderHTML({ref:this.refSeq.name,
start:c.get("start"),end:c.get("end"),strand:c.get("strand"),type:c.get("type")},-1==c.get("strand")?d.revcom(a):a,h)}),function(){},dojo.hitch(this,function(){h=dojo.byId(g)||h;h.innerHTML='<span class="ghosted">reference sequence not available</span>'})):h.innerHTML='<span class="ghosted">reference sequence not available</span>'}))},_uniqID:function(){this._idCounter=this._idCounter||0;return this._idCounter++},_subfeaturesDetail:function(b,c,a){a=dojo.create("div",{className:"field_container subfeatures"},
a);dojo.create("h2",{className:"field subfeatures",innerHTML:"Subfeatures"},a);var d=dojo.create("div",{className:"value subfeatures"},a);j.forEach(c||[],function(a){this.defaultFeatureDetail(b,a,null,dojo.create("div",{className:"detail feature-detail subfeature-detail feature-detail-"+b.name+" subfeature-detail-"+b.name,innerHTML:""},d))},this)}})})},"JBrowse/View/FASTA":function(){define(["dojo/_base/declare","JBrowse/Util"],function(h,j){return h(null,{constructor:function(g){this.width=g.width||
78;this.htmlMaxRows=g.htmlMaxRows||15},renderHTML:function(g,h,f){var g=this.renderText(g,h),h=g.match(/\n/g).length+1,f=dojo.create("textarea",{className:"fasta",cols:this.width,rows:Math.min(h,this.htmlMaxRows),readonly:!0},f),d=0;f.innerHTML=g.replace(/\n/g,function(){return d++?"":"\n"});return f},renderText:function(g,h){return">"+g.ref+" "+j.assembleLocString(g)+(g.type?" class="+g.type:"")+" length="+(g.end-g.start)+"\n"+this._wrap(h,this.width)},_wrap:function(g,h){h=h||this.width;return g.replace(RegExp("(.{"+
h+"})","g"),"$1\n")}})})},"JBrowse/View/GranularRectLayout":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(h){this.pitchX=h.pitchX||10;this.pitchY=h.pitchY||10;this.bitmap=[];this.rectangles={};this.maxHeight=Math.ceil((h.maxHeight||Infinity)/this.pitchY);this.pTotalHeight=0},addRect:function(h,g,i,f,d){if(h in this.rectangles){h=this.rectangles[h];if(null===h.top)return null;this._addRectToBitmap(h,d);return h.top*this.pitchY}g=Math.floor(g/this.pitchX);
i=Math.floor(i/this.pitchX);f=Math.ceil(f/this.pitchY);g={id:h,l:g,r:i,mX:Math.floor((g+i)/2),h:f};if(d)g.data=d;for(var i=this.maxHeight-f,b=0;b<=i&&this._collides(g,b);b++);if(b>i)return g.top=b=null,this.rectangles[h]=g,this.pTotalHeight=Math.max(this.pTotalHeight||0,b+f),null;g.top=b;this._addRectToBitmap(g,d);this.rectangles[h]=g;this.pTotalHeight=Math.max(this.pTotalHeight||0,b+f);return b*this.pitchY},_collides:function(h,g){var i=this.bitmap,f=i[g];if(f&&(f[h.l]||f[h.r]||f[h.mX]))return!0;
for(var f=g+h.h,d=g;d<f;d++){var b=i[d];if(b){if(b.allFilled)return!0;if(b.length>h.l)for(var e=h.l;e<=h.r;e++)if(b[e])return!0}}return!1},_autovivify:function(h,g){var i;if(!(i=h[g]))i=[],h[g]=i;return i},_addRectToBitmap:function(h,g){if(null!==h.top){var g=g||!0,i=this.bitmap,f=this._autovivify,d=h.top+h.h;if(2E4<h.r-h.l)for(var b=h.top;b<d;b++)f(i,b).allFilled=g;else for(b=h.top;b<d;b++)for(var e=f(i,b),c=h.l;c<=h.r;c++)e[c]=g}},discardRange:function(h,g){for(var i=Math.floor(h/this.pitchX),f=
Math.floor(g/this.pitchX),d=this.bitmap,b=0;b<d.length;++b){var e=d[b];if(e)for(var c=i;c<=f;++c)delete e[c]}},hasSeen:function(h){return!!this.rectangles[h]},getByCoord:function(h,g){return(this.bitmap[Math.floor(g/this.pitchY)]||[])[Math.floor(h/this.pitchX)]},getByID:function(h){if(h=this.rectangles[h])return h.data||!0},cleanup:function(){},getTotalHeight:function(){return this.pTotalHeight*this.pitchY}})})},"JBrowse/View/Track/FixedImage/Wiggle":function(){define(["dojo/_base/declare","JBrowse/View/Track/FixedImage",
"JBrowse/View/Track/YScaleMixin"],function(h,j,g){return h([j,g],{constructor:function(){},updateStaticElements:function(g){this.inherited(arguments);this.updateYScaleFromViewDimensions(g)},makeImageLoadHandler:function(g,f,d,b){return this.inherited(arguments,[g,f,d,dojo.hitch(this,function(){this.makeWiggleYScale();b&&b()})])},makeWiggleYScale:function(){var g=this;this.store.getGlobalStats(function(f){g.yscale||g.makeYScale({min:f.scoreMin,max:f.scoreMax})})}})})},"JBrowse/View/Track/FixedImage":function(){define(["dojo/_base/declare",
"JBrowse/View/Track/BlockBased"],function(h,j){return h(j,{constructor:function(g){this.trackPadding=g.trackPadding||0},handleImageError:function(g){(g.currentTarget||g.srcElement).style.display="none";dojo.stopEvent(g)},makeImageLoadHandler:function(g,h,f,d){var b=dojo.hitch(this,function(){this.imageHeight=g.height;g.style.height=g.height+"px";g.style.width=100*(g.baseWidth/f)+"%";this.heightUpdate(g.height,h);d&&d();return!0});return dojo.isIE?function(){window.setTimeout(b,250)}:b},fillBlock:function(g){var h=
g.blockIndex,f=g.block,d=g.leftBase,b=g.rightBase,e=g.finishCallback||function(){},c=b-d;this.store.getImages({scale:g.scale,start:d,end:b},dojo.hitch(this,function(a){dojo.forEach(a,function(a){a.className="image-track";if(!a.parentNode||!a.parentNode.parentNode){a.style.position="absolute";a.style.left=100*((a.startBase-d)/c)+"%";switch(this.config.align){case "top":a.style.top="0px";break;default:a.style.bottom=this.trackPadding+"px"}f.domNode.appendChild(a)}var b=this.makeImageLoadHandler(a,h,
c);a.complete?b():a.onload=b},this);e()}),dojo.hitch(this,function(a){404!=a.status&&this.fillBlockError(h,f,a);e()}))},startZoom:function(){},endZoom:function(){this.clear()},clear:function(){this.inherited(arguments)},transfer:function(g,h){if(g&&h)for(var f=g.domNode.childNodes,d=h.startBase,b=h.endBase,e,c=0;c<f.length;c++)if(e=f[c],"startBase"in e&&e.startBase<b&&e.startBase+e.baseWidth>d)e.style.left=100*((e.startBase-d)/(b-d))+"%",h.domNode.appendChild(e)}})})},"JBrowse/View/Track/Wiggle":function(){define(["JBrowse/View/Track/Wiggle/XYPlot"],
function(h){return h})},"JBrowse/View/Track/Wiggle/XYPlot":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/Color,dojo/on,JBrowse/View/Track/WiggleBase,JBrowse/View/Track/YScaleMixin,JBrowse/Util,./_Scale".split(","),function(h,j,g,i,f,d,b,e){return h([f,d],{_defaultConfig:function(){return b.deepUpdate(dojo.clone(this.inherited(arguments)),{style:{pos_color:"blue",neg_color:"red",origin_color:"#888",variance_band_color:"rgba(0,0,0,0.3)"}})},_getScaling:function(b,a){this._getScalingStats(dojo.hitch(this,
function(a){if(!this.lastScaling||!this.lastScaling.sameStats(a)){a=new e(this.config,a);if(0.005>Math.abs(a.min/a.max))a.min=0;this.makeYScale({fixBounds:!0,min:a.min,max:a.max});a.min=this.ruler.scaler.bounds.lower;a.max=this.ruler.scaler.bounds.upper;a.range=a.max-a.min;this.lastScaling=a}b(this.lastScaling)}),a)},updateStaticElements:function(b){this.inherited(arguments);this.updateYScaleFromViewDimensions(b)},_drawFeatures:function(b,a,e,d,f,g,h,i){var j=f.getContext("2d"),s=f.height,u=dojo.hitch(this,
function(a){return s*(1-i.normalize.call(this,a))}),r=u(i.origin),v=this.config.disable_clip_markers;dojo.forEach(g,function(a,b){var c=h[b],e=a.get("score");c.t=u(e);if(0<=c.t&&(e=this.getConfForFeature("style.bg_color",a)))j.fillStyle=e,j.fillRect(c.l,0,c.w,s);if(c.t<=s)if(c.t<=r){if(j.fillStyle=this.getConfForFeature("style.pos_color",a),j.fillRect(c.l,c.t,c.w,r-c.t+1),!v&&0>c.t)j.fillStyle=this.getConfForFeature("style.clip_marker_color",a)||this.getConfForFeature("style.neg_color",a),j.fillRect(c.l,
0,c.w,2)}else if(j.fillStyle=this.getConfForFeature("style.neg_color",a),j.fillRect(c.l,r,c.w,c.t-r+1),!v&&c.t>=s)j.fillStyle=this.getConfForFeature("style.clip_marker_color",a)||this.getConfForFeature("style.pos_color",a),j.fillRect(c.l,s-3,c.w,2)},this)},_postDraw:function(b,a,e,d,f,h,i,l){var n=f.getContext("2d"),s=f.height,u=dojo.hitch(this,function(a){return s*(1-l.normalize.call(this,a))});if(this.config.variance_band){var r="object"==typeof this.config.variance_band?j.map(this.config.variance_band,
function(a){return parseFloat(a)}).sort().reverse():[2,1];this.getGlobalStats(dojo.hitch(this,function(a){if("scoreMean"in a&&"scoreStdDev"in a){var b=function(b,c,e){n.fillStyle=c;var c=u(a.scoreMean+b),d=u(a.scoreMean-b)-c,d=Math.max(1,d);n.fillRect(0,c,f.width,d);n.font="12px sans-serif";0<b?(n.fillText("+"+e,2,c),n.fillText("-"+e,2,c+d)):n.fillText(e,2,c)},c=new g(this.config.style.variance_band_color),e=new g(this.config.style.variance_band_color);e.a/=r.length;j.forEach(r,function(d,f){b(d*
a.scoreStdDev,g.blendColors(e,c,(f+1)/r.length).toCss(!0),d+"\u03c3")});b(0,"rgba(255,255,0,0.7)","mean")}}))}b=this.config.style.origin_color;if("string"==typeof b&&!{none:1,off:1,no:1,zero:1}[b])a=u(l.origin),n.fillStyle=b,n.fillRect(0,a,f.width-1,1)}})})},"JBrowse/View/Track/WiggleBase":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-construct,dojo/on,JBrowse/View/Track/BlockBased,JBrowse/View/Track/ExportMixin,JBrowse/Util,./Wiggle/_Scale".split(","),function(h,j,g,i,f,d,b,e){return h([f,
d],{constructor:function(b){this.trackPadding=b.trackPadding||0;if(!("style"in this.config))this.config.style={};this.store=b.store},_defaultConfig:function(){return{maxExportSpan:5E5,autoscale:"global"}},_getScaling:function(b,a){this._getScalingStats(dojo.hitch(this,function(d){if(!this.lastScaling||!this.lastScaling.sameStats(d))try{this.lastScaling=new e(this.config,d),b(this.lastScaling)}catch(f){a(f)}else b(this.lastScaling)}),a)},_getScalingStats:function(b,a){if(e.prototype.needStats(this.config))return"local"==
this.config.autoscale?this.getRegionStats.call(this,this.browser.view.visibleRegion(),b,a):this.getGlobalStats.apply(this,arguments);b(null);return null},getFeatures:function(b,a,e){this.store.getFeatures.apply(this.store,arguments)},getGlobalStats:function(b,a){this.store.getGlobalStats(b,a)},getRegionStats:function(b,a,e){this.store.getRegionStats(b,a,e)},_canvasWidth:function(b){return Math.ceil((b.endBase-b.startBase)*b.scale)},_canvasHeight:function(){return parseInt((this.config.style||{}).height)||
100},_getBlockFeatures:function(b){var a=b.block,e=b.leftBase,d=b.rightBase,f=b.scale,g=b.finishCallback||function(){},h=this._canvasWidth(b.block),i=[];this.getFeatures({ref:this.refSeq.name,basesPerSpan:1/f,scale:f,start:e,end:d+1},function(a){i.push(a)},dojo.hitch(this,function(){if(a.domNode&&a.domNode.parentNode){var b=j.map(i,function(a){return this._featureRect(f,e,h,a)},this);a.features=i;a.featureRects=b;a.pixelScores=this._calculatePixelScores(this._canvasWidth(a),i,b);g()}}),dojo.hitch(this,
function(a){this._handleError(a,b)}))},renderBlock:function(b){var a=b.block;if(this.scaling.compare(a.scaling)&&a.pixelScores){a.scaling=this.scaling;g.empty(a.domNode);try{document.createElement("canvas").getContext("2d").fillStyle="red"}catch(e){this.fatalError="This browser does not support HTML canvas elements.";this.showFatalError(this.fatalError);return}var d=a.features,f=a.featureRects,h=this.scaling,i=this._canvasHeight(),i=dojo.create("canvas",{height:i,width:this._canvasWidth(a),style:{cursor:"default",
width:"100%",height:i+"px"},innerHTML:"Your web browser cannot display this type of track.",className:"canvas-track"},a.domNode);i.startBase=a.startBase;this._preDraw(null,a.startBase,a.endBase,a,i,d,f,h);this._drawFeatures(null,a.startBase,a.endBase,a,i,d,f,h);this._postDraw(null,a.startBase,a.endBase,a,i,d,f,h);this._makeScoreDisplay(null,a.startBase,a.endBase,a,i,d,f);this.heightUpdate(i.height,b.blockIndex);if(!i.parentNode||!i.parentNode.parentNode)switch(b=a.endBase-a.startBase,i.style.position=
"absolute",i.style.left=100*((i.startBase-a.startBase)/b)+"%",this.config.align){case "top":i.style.top="0px";break;default:i.style.bottom=this.trackPadding+"px"}}},fillBlock:function(b){var a=this;this.heightUpdate(this._canvasHeight(),b.blockIndex);var e=b.finishCallback||function(){};b.finishCallback=function(){a.updateGraphs(e)};this._getBlockFeatures(b)},updateGraphs:function(b){var a=this;this._getScaling(function(e){a.scaling=e;j.forEach(a.blocks,function(b,c){b&&b.domNode.parentNode&&a.renderBlock({block:b,
blockIndex:c})});b()},function(b){a.error=b;a._handleError(b)})},startZoom:function(){},endZoom:function(){this.clear()},_featureRect:function(b,a,e,d){b={w:Math.ceil((d.get("end")-d.get("start"))*b),l:Math.round((d.get("start")-a)*b)};if(0>b.l)b.w+=b.l,b.l=0;b.w=Math.min(e-b.l,b.w);b.r=b.w+b.l;return b},_preDraw:function(){},_drawFeatures:function(){},_postDraw:function(){},_calculatePixelScores:function(b,a,e){var d=Array(b);dojo.forEach(a,function(a,b){for(var c=e[b],f=c.r,g=a.get("score"),c=Math.round(c.l);c<
f;c++)d[c]=c in d?Math.max(d[c],g):g},this);return d},_makeScoreDisplay:function(b,a,e,d,f){var g=d.pixelScores,h=dojo.create("div",{className:"wiggleValueDisplay",style:{position:"fixed",display:"none",zIndex:15}},d.domNode),j=dojo.create("div",{className:"wigglePositionIndicator",style:{position:"fixed",display:"none",height:f.height+"px",zIndex:15}},d.domNode),n;dojo.forEach([f,j,h],function(a){this.own(i(a,"mousemove",dojo.hitch(this,function(a){var b=dojo.position(f),c=a.pageX,a=a.pageX-b.x;
j.style.display="block";j.style.left=c+"px";j.style.top=b.y+"px";this._showPixelValue(h,g[Math.round(a)])?(h.style.left=c+"px",h.style.top=b.y+"px",h.style.display="block"):h.style.display="none"})))},this);this.own(i(d.domNode,"mouseout",function(){n&&window.clearTimeout(n);n=window.setTimeout(function(){h.style.display="none";j.style.display="none"},50)}))},_showPixelValue:function(b,a){var e=typeof a;if("number"==e)return b.innerHTML=parseFloat(a.toPrecision(6)),!0;return"string"==e?(b.innerHTML=
a,!0):!1},_exportFormats:function(){return["bedGraph","Wiggle","GFF3"]}})})},"JBrowse/View/Track/Wiggle/_Scale":function(){define(["JBrowse/Util","JBrowse/Digest/Crc32"],function(h,j){return h.fastDeclare({needStats:function(g){return!("min_score"in g&&"max_score"in g&&"z_score"!=g.bicolor_pivot&&"mean"!=g.bicolor_pivot&&"z_score"!=g.scale)},constructor:function(g,h){var f=this.needStats(g);if(f&&!h)throw"No stats object provided, cannot calculate scale";if(f&&h.scoreMin==h.scoreMax)h=dojo.clone(h),
0>h.scoreMin?h.scoreMax=0:h.scoreMin=0;if("z_score"==g.autoscale&&!g.scale||"z_score"==g.scale&&!g.autoscale)g.scale="z_score",g.autoscale="z_score";var d=parseFloat(g.z_score_bound)||4,b="min_score"in g?parseFloat(g.min_score):function(){switch(g.autoscale){case "z_score":return Math.max(-d,(h.scoreMin-h.scoreMean)/h.scoreStdDev);case "global":case "local":return h.scoreMin;default:return Math.max(h.scoreMin,h.scoreMean-d*h.scoreStdDev)}}(),f="max_score"in g?parseFloat(g.max_score):function(){switch(g.autoscale){case "z_score":return Math.min(d,
(h.scoreMax-h.scoreMean)/h.scoreStdDev);case "global":case "local":return h.scoreMax;default:return Math.min(h.scoreMax,h.scoreMean+d*h.scoreStdDev)}}();if("number"!=typeof b||isNaN(b))b=0;if("number"!=typeof f||isNaN(f))f=b+10;var e=parseFloat(g.data_offset)||0;"log"==g.scale?(f=this.log(f+e),b=this.log(b+e)):(f+=e,b+=e);var c="bicolor_pivot"in g?"mean"==g.bicolor_pivot?h.scoreMean||0:"zero"==g.bicolor_pivot?0:parseFloat(g.bicolor_pivot):"z_score"==g.scale?h.scoreMean||0:"log"==g.scale?1:0;dojo.mixin(this,
{offset:e,min:b,max:f,range:f-b,origin:c,_statsFingerprint:j.objectFingerprint(h)});var a=this;this.normalize=function(){switch(g.scale){case "z_score":return function(c){with(a)return(c+e-h.scoreMean)/h.scoreStdDev-b/range};case "log":return function(c){with(a)return(a.log(c+e)-b)/range};default:return function(c){with(a)return(c+e-b)/range}}}()},log:function(g){return g?Math.log(Math.abs(g))*(0>g?-1:1):0},compare:function(g){return!g?1:this.offset-g.offset||this.min-g.min||this.max-g.max||this.range-
g.range||this.origin-g.origin},sameStats:function(g){return this._statsFingerprint==j.objectFingerprint(g)}})})},"JBrowse/View/Track/Wiggle/Density":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Color","JBrowse/View/Track/WiggleBase","JBrowse/Util"],function(h,j,g,i,f){return h(i,{_defaultConfig:function(){return f.deepUpdate(dojo.clone(this.inherited(arguments)),{maxExportSpan:5E5,style:{height:31,pos_color:"#00f",neg_color:"#f00",bg_color:"rgba(230,230,230,0.6)"}})},_drawFeatures:function(d,
b,e,c,a,f,h,i){var j=this,o=a.getContext("2d"),l=a.height,n=i.normalize,s="function"==typeof this.config.style.color?this.config.style.color:function(){var a=new g("white"),b=new g("black"),c=j.config.disable_clip_markers,e=n(i.origin);return function(d){var f=d.get("score"),f=n(f);return c||1>=f&&0<=f?g.blendColors(new g(j.getConfForFeature("style.bg_color",d)),new g(j.getConfForFeature(f>=e?"style.pos_color":"style.neg_color",d)),Math.abs(f-e)):new g(j.getConfForFeature("style.clip_marker_color",
d))||(1<f?a:b)}}();dojo.forEach(f,function(a,b){var c=h[b];o.fillStyle=""+s(a);o.fillRect(c.l,0,c.w,l)})},_postDraw:function(){}})})},"JBrowse/View/Track/Alignments":function(){define(["dojo/_base/declare","dojo/_base/array","JBrowse/Util","JBrowse/View/Track/HTMLFeatures","JBrowse/View/Track/_AlignmentsMixin"],function(h,j,g,i,f){return h([i,f],{_defaultConfig:function(){return g.deepUpdate(dojo.clone(this.inherited(arguments)),{maxFeatureScreenDensity:1.5,layoutPitchY:4,style:{_defaultLabelScale:50,
className:"alignment",arrowheadClass:"arrowhead",centerChildrenVertically:!0,showMismatches:!0,showSubfeatures:!1}})},renderFeature:function(d,b,e,c,a,f,g,h){var i=this.inherited(arguments);if(!i)return null;var j=Math.max(d.get("start"),g),l=Math.min(d.get("end"),h);this.config.style.showMismatches&&this._drawMismatches(d,i,c,j,l);d.get("multi_segment_template")&&!d.get("multi_segment_all_aligned")&&(i.className+=" missing_mate");return i},handleSubFeatures:function(d,b,e,c,a){this.config.style.showSubfeatures&&
this.inherited(arguments)},_drawMismatches:function(d,b,e,c,a){var f=a-c;if(1<f*e){var g=this._getMismatches(d),h=this.getCharacterMeasurements(),i=e>=h.w;j.forEach(g,function(g){var h=d.get("start")+g.start,j=h+g.length;if(!(j<=c||h>=a)){var p=g.base,q=Math.max(h,c),j=Math.min(j,a),r=j-q,v=dojo.create("span",{className:g.type+" base_"+p.toLowerCase(),style:{position:"absolute",left:100*(q-c)/f+"%",width:1<e*r?100*r/f+"%":"1px"}},b);if(!i)v.title=p;if(i&&20>=g.length)for(var t=0;t<g.length;t++){var w=
h+t;w>=q&&w<=j&&dojo.create("span",{className:"base base_"+p.toLowerCase(),style:{position:"absolute",width:e+"px",left:100*((w-q)/r)+"%"},innerHTML:p},v)}}},this)}},getCharacterMeasurements:function(){if(!this._measurements)this._measurements=this._measureSequenceCharacterSize(this.div);return this._measurements},_measureSequenceCharacterSize:function(d){var b=dojo.create("div",{innerHTML:'<span class="base mismatch">A</span><span class="base mismatch">C</span><span class="base mismatch">T</span><span class="base mismatch">G</span><span class="base mismatch">N</span>',
style:{visibility:"hidden",position:"absolute",left:"0px"}},d),e={w:b.clientWidth/5,h:b.clientHeight};d.removeChild(b);return e}})})},"JBrowse/View/Track/_AlignmentsMixin":function(){define(["dojo/_base/declare","dojo/_base/array","JBrowse/Util","JBrowse/Store/SeqFeature/_MismatchesMixin"],function(h,j,g,i){return h(i,{defaultFeatureDetail:function(f,d){var b=dojo.create("div",{className:"detail feature-detail feature-detail-"+f.name.replace(/\s+/g,"_").toLowerCase(),innerHTML:""}),e=dojo.hitch(this,
function(a,c){a=g.ucFirst(a.replace(/_/g," "));return this.renderDetailField(b,a,c)});e("Name",d.get("name"));e("Type",d.get("type"));e("Score",d.get("score"));e("Description",d.get("note"));e("Position",g.assembleLocString({start:d.get("start"),end:d.get("end"),ref:this.refSeq.name})+({1:" (+)","-1":" (-)","0":" (no strand)"}[d.get("strand")]||""));d.get("seq")&&e("Sequence and Quality",this._renderSeqQual(d));var c=j.filter(d.tags(),function(a){return!{name:1,score:1,start:1,end:1,strand:1,note:1,
subfeatures:1,type:1}[a.toLowerCase()]}).sort();dojo.forEach(c,function(a){e(a,d.get(a))});return b},_renderSeqQual:function(f){var d=f.get("seq"),f=f.get("qual")||"";if(!d)return"";for(var f=f.split(/\s+/),b="",e=0;e<d.length;e++)b+='<div class="basePosition" title="position '+(e+1)+'"><span class="seq">'+d[e]+"</span>",f[e]&&(b+='<span class="qual">'+f[e]+"</span>"),b+="</div>";return'<div class="baseQuality">'+b+"</div>"},_getStyleSheets:function(f){var d=[];j.forEach(f,function(b){d.push(b);j.forEach(b.cssRules||
b.rules,function(b){b.styleSheet&&d.push.apply(d,this._getStyleSheets([b.styleSheet]))},this)},this);return d},colorForBase:function(f){this._baseStyles=this._baseStyles||function(){var d={},b=this._getStyleSheets(document.styleSheets);j.forEach(b,function(b){(b=b.rules||b.cssRules)&&j.forEach(b,function(b){var a=/^\.base_([^\s_]+)$/.exec(b.selectorText);if(a&&a[1]){var e=a[1];if((a=/\#[0-9a-f]{3,6}|(?:rgb|hsl)a?\([^\)]*\)/gi.exec(b.cssText))&&a[0])d[e.toLowerCase()]=a[0],d[e.toUpperCase()]=a[0]}})});
return d}.call(this);return this._baseStyles[f]||"#999"}})})},"JBrowse/Store/SeqFeature/_MismatchesMixin":function(){define(["dojo/_base/declare","dojo/_base/array"],function(h,j){return h(null,{constructor:function(){this.cigarAttributeName=(this.config.cigarAttribute||"cigar").toLowerCase();this.mdAttributeName=(this.config.mdAttribute||"md").toLowerCase()},_getMismatches:function(g){var h=[],f=g.get(this.cigarAttributeName),d;f&&(d=this._parseCigar(f),h.push.apply(h,this._cigarToMismatches(g,d)));
(f=g.get(this.mdAttributeName))&&h.push.apply(h,this._mdToMismatches(g,f,d,h));return h},_parseCigar:function(g){return j.map(g.match(/\d+\D/g),function(g){return[g.match(/\D/)[0].toUpperCase(),parseInt(g)]})},_cigarToMismatches:function(g,h){var f=0,d=[];j.forEach(h,function(b){var e=b[0].toUpperCase();e&&(b=b[1],"I"==e?d.push({start:f,type:"insertion",base:""+b,length:1}):"D"==e?d.push({start:f,type:"deletion",base:"*",length:b}):"N"==e?d.push({start:f,type:"skip",base:"N",length:b}):"X"==e&&d.push({start:f,
type:"mismatch",base:"X",length:b}),"I"!=e&&"S"!=e&&"H"!=e&&(f+=b))});return d},_mdToMismatches:function(g,h,f,d){function b(a,b){for(var c=0,e=0,d=0;d<b.length&&e<=a;d++){var f=b[d][0],g=b[d][1];"H"==f||"S"==f||"I"==f?c+=g:("D"==f||"N"==f||"P"==f||(c+=g),e+=g)}return c-(e-a)}function e(){j.forEach(d||[],function(b){"skip"==b.type&&a.start>=b.start&&(a.start+=b.len)});c.push(a);a={start:a.start+a.length,length:0,base:"",type:"mismatch"}}var c=[],a={start:0,base:"",length:0,type:"mismatch"},k=g.get("seq");
j.forEach(h.match(/(\d+|\^[a-z]+|[a-z])/ig),function(c){if(c.match(/^\d/))a.start+=parseInt(c);else if(c.match(/^\^/))a.length=c.length-1,a.base="*",a.type="deletion",e();else if(c.match(/^[a-z]/i))for(var d=0;d<c.length;d++)a.length=1,a.base=k?k.substr(b(a.start,f),1):"X",e()});return c}})})},"JBrowse/View/Track/Alignments2":function(){define(["dojo/_base/declare","dojo/_base/array","JBrowse/Util","JBrowse/View/Track/CanvasFeatures","JBrowse/View/Track/_AlignmentsMixin"],function(h,j,g,i,f){return h([i,
f],{constructor:function(){},_defaultConfig:function(){return g.deepUpdate(dojo.clone(this.inherited(arguments)),{glyph:"JBrowse/View/FeatureGlyph/Alignment",style:{showLabels:!1}})}})})},"JBrowse/View/Track/CanvasFeatures":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-construct,dojo/dom-geometry,dojo/Deferred,dojo/on,JBrowse/has,JBrowse/View/GranularRectLayout,JBrowse/View/Track/BlockBased,JBrowse/Errors,JBrowse/View/Track/FeatureDetailMixin".split(","),function(h,j,g,i,f,d,b,e,
c,a,k){var p=h(null,{constructor:function(a){this.dims={h:a.h,w:a.w};this.byID={}},getByID:function(a){return this.byID[a]},addAll:function(a){var b=this.byID;j.forEach(a,function(a){a&&(b[a.f.id()]=a)},this)}});return h([c,k],{constructor:function(){this._setupEventHandlers();this.glyphsLoaded={};this.glyphsBeingLoaded={};this.regionStats={};this.showLabels=this.config.style.showLabels},_defaultConfig:function(){return{maxFeatureScreenDensity:400,glyph:"JBrowse/View/FeatureGlyph/Box",maxFeatureGlyphExpansion:500,
maxHeight:600,style:{_defaultHistScale:4,_defaultLabelScale:30,_defaultDescriptionScale:120,showLabels:!0}}},fillBlock:function(a){var c=a.blockIndex,e=a.block,d=a.scale;b("canvas")?this.store.getGlobalStats(dojo.hitch(this,function(b){b=dojo.mixin({stats:b,showFeatures:d>=(this.config.style.featureScale||b.featureDensity/this.config.maxFeatureScreenDensity),showLabels:this.showLabels&&d>=(this.config.style.labelScale||b.featureDensity*this.config.style._defaultLabelScale),showDescriptions:this.showLabels&&
d>=(this.config.style.descriptionScale||b.featureDensity*this.config.style._defaultDescriptionScale)},a);b.showFeatures?this.fillFeatures(dojo.mixin(b,a)):(this.fillTooManyFeaturesMessage(c,e,d),a.finishCallback())}),dojo.hitch(this,function(b){this._handleError(b,a);a.finishCallback(b)})):(this.fatalError="This browser does not support HTML canvas elements.",this.fillBlockError(c,e,this.fatalError))},_getLayout:function(a){if(!this.layout||this.layout.pitchX!=4/a)this.layout=new e({pitchX:4/a,pitchY:this.config.layoutPitchY||
4,maxHeight:this.getConf("maxHeight")});return this.layout},getGlyph:function(a,b,c){var e=this.getConfForFeature("glyph",b),d;if(d=this.glyphsLoaded[e])c(d);else if(a=this.glyphsBeingLoaded[e])a.push(c);else{var f=this;this.glyphsBeingLoaded[e]=[c];require([e],function(a){d=f.glyphsLoaded[e]=new a({track:f,config:f.config,browser:f.browser});j.forEach(f.glyphsBeingLoaded[e],function(a){a(d)});delete f.glyphsBeingLoaded[e]})}},fillFeatures:function(a){var b=this,c=a.blockIndex,e=a.block,d=e.domNode.offsetWidth,
h=a.scale,i=a.leftBase,j=a.rightBase,k=a.finishCallback,t=[],w=0,p=new f,B=!1,A=dojo.hitch(b,function(b){this._handleError(b,a);k(b)}),E=this._getLayout(h),h=Math.round(this.config.maxFeatureGlyphExpansion/h);this.store.getFeatures({ref:this.refSeq.name,start:Math.max(0,i-h),end:j+h},function(c){if(!b.destroyed){t.push(null);w++;var f=t.length-1;b.getGlyph(a,c,function(b){var g=b.layoutFeature(a,E,c);null===g?e.maxHeightExceeded=!0:(g.glyph=b,g.l>=d||0>g.l+g.w||(t[f]=g));!--w&&B&&p.resolve()},A)}},
function(){b.destroyed||(B=!0,!w&&!p.isFulfilled()&&p.resolve(),p.then(function(){var d=E.getTotalHeight();e.featureCanvas=g.create("canvas",{height:d,width:e.domNode.offsetWidth+1,style:{cursor:"default",height:d+"px"},innerHTML:"Your web browser cannot display this type of track.",className:"canvas-track"},e.domNode);e.maxHeightExceeded&&b.markBlockHeightOverflow(e);b.heightUpdate(d,c);b.renderFeatures(a,t);b.renderClickMap(a,t);k()}))},A)},startZoom:function(){this.inherited(arguments);j.forEach(this.blocks,
function(a){try{a.featureCanvas.style.width="100%"}catch(b){}})},endZoom:function(){j.forEach(this.blocks,function(a){try{delete a.featureCanvas.style.width}catch(b){}});this.clear();this.inherited(arguments)},renderClickMap:function(a,b){var c=this,e=a.block,f=new p({h:e.featureCanvas.height,w:e.featureCanvas.width});e.fRectIndex=f;f.addAll(b);if(!e.featureCanvas||!e.featureCanvas.getContext("2d"))console.warn("No 2d context available from canvas");else{e.own(d(e.featureCanvas,"mousemove",function(a){i.normalizeEvent(a);
a=c.layout.getByCoord(a.layerX/e.scale+e.startBase,a.layerY);c.mouseoverFeature(a)}));e.own(d(e.featureCanvas,"mouseout",function(){c.mouseoverFeature(void 0)}));for(var g in this.eventHandlers){var h=this.eventHandlers[g];e.own(d(e.featureCanvas,g,function(a){i.normalizeEvent(a);(a=c.layout.getByCoord(a.layerX/e.scale+e.startBase,a.layerY))&&h.call({track:c,feature:a,callbackArgs:[c,a]})}))}}},getRenderingContext:function(a){if(!a.block||!a.block.featureCanvas)return null;try{return a.block.featureCanvas.getContext("2d")}catch(b){return console.error(b,
b.stack),null}},renderFeatures:function(a,b){var c=this.getRenderingContext(a);if(c){var e=this;j.forEach(b,function(b){b&&e.renderFeature(c,a.block,b)})}},mouseoverFeature:function(a){if(this.lastMouseover!=a)j.forEach(this.blocks,function(b){if(b){var c=this.getRenderingContext({block:b,leftBase:b.startBase,scale:b.scale});if(c){if(this.lastMouseover){var e=b.fRectIndex.getByID(this.lastMouseover.id());e&&this.renderFeature(c,b,e)}a&&(e=b.fRectIndex.getByID(a.id()))&&e.glyph.mouseoverFeature(c,
b,e)}}},this),this.lastMouseover=a},cleanupBlock:function(a){a&&this.layout&&this.layout.discardRange(a.startBase,a.endBase)},renderFeature:function(a,b,c){c.glyph.renderFeature(a,b,c)},destroy:function(){this.destroyed=!0;delete this.layout;delete this.glyphsLoaded;this.inherited(arguments)}})})},"JBrowse/View/Track/FeatureCoverage":function(){define(["dojo/_base/declare","dojo/_base/array","JBrowse/View/Track/Wiggle/XYPlot","JBrowse/Util","JBrowse/Store/SeqFeature/Coverage"],function(h,j,g,i,f){return h(g,
{constructor:function(){this.store=new f({store:this.store,browser:this.browser})},_defaultConfig:function(){return i.deepUpdate(dojo.clone(this.inherited(arguments)),{autoscale:"local"})}})})},"JBrowse/Store/SeqFeature/Coverage":function(){define(["dojo/_base/declare","JBrowse/Store/SeqFeature","JBrowse/Util","JBrowse/Model/CoverageFeature"],function(h,j,g,i){return h(j,{constructor:function(f){this.store=f.store},getGlobalStats:function(f){f({})},getFeatures:function(f,d,b,e){var c=f.start,a=f.end-
c,g=Math.ceil(1/(f.scale||("basesPerSpan"in f?1/f.basesPerSpan:10))),h=Array(Math.ceil(a/g)),j=function(a,b){var e=(a-c-1)/g,d=Math.floor(e);return{bin:d,overlap:b?1-(e-d):e-d}};this.store.getFeatures(f,function(a){var b=j(a.get("start"),!1),a=j(a.get("end"),!0);b.bin==a.bin?h[b.bin]=(h[b.bin]||0)+a.overlap+b.overlap-1:(h[b.bin]=(h[b.bin]||0)+b.overlap,h[a.bin]=(h[a.bin]||0)+a.overlap);for(b=b.bin+1;b<=a.bin-1;b++)h[b]=(h[b]||0)+1},function(){for(var a=0;a<h.length;a++){var e=c+g*a;d(new i({start:e,
end:e+g,score:h[a]||0}))}b()},e)}})})},"JBrowse/Model/CoverageFeature":function(){define(["JBrowse/Util"],function(h){return h.fastDeclare({get:function(h){return this[h]},tags:function(){return["start","end","score"]},score:0,constructor:function(h){this.start=h.start;this.end=h.end;this.score=h.score}})})},"JBrowse/View/Track/SNPCoverage":function(){define("dojo/_base/declare,dojo/_base/array,JBrowse/View/Track/Wiggle/XYPlot,JBrowse/Util,JBrowse/View/Track/_AlignmentsMixin,JBrowse/Store/SeqFeature/SNPCoverage".split(","),
function(h,j,g,i,f,d){return h([g,f],{constructor:function(){delete this.config.bicolor_pivot;delete this.config.scale;delete this.config.align;this.store=new d({store:this.store,browser:this.browser})},_defaultConfig:function(){return i.deepUpdate(dojo.clone(this.inherited(arguments)),{autoscale:"local",min_score:0})},_drawFeatures:function(b,e,c,a,d,f,g,h){var i=this,j=d.getContext("2d"),n=d.height,s=dojo.hitch(this,function(a){return n*(1-h.normalize.call(this,a))}),u=s(h.origin),b=parseInt(a.domNode.parentNode.style.height)-
d.height,r=dojo.create("canvas",{height:b,width:d.width,style:{cursor:"default",width:"100%",height:b+"px"},innerHTML:"Your web browser cannot display this type of track.",className:"SNP-indicator-track"},a.domNode),v=r.getContext("2d"),t=this.config.style.neg_color,w=this.config.style.clip_marker_color,x=this.config.style.bg_color,B=this.config.disable_clip_markers,A=function(a,b,c,e){if(b<=n)if(j.fillStyle=i.colorForBase(a),b<=u){if(j.fillRect(e.l,b,e.w,c),!B&&0>b)j.fillStyle=w||t,j.fillRect(e.l,
0,e.w,2)}else if(j.fillRect(e.l,u,e.w,c),!B&&b>=n)j.fillStyle=w||i.colorForBase(a),j.fillRect(e.l,n-3,e.w,2)};dojo.forEach(f,function(a,b){var c=g[b],e=a.get("score");if(x)j.fillStyle=x,j.fillRect(c.l,0,c.w,n);A("reference",s(e.total()),u-s(e.get("reference"))+1,c)});dojo.forEach(f,function(a,b){var c=g[b],e=a.get("score"),d=e.total();e.forEach(function(a,b){if("reference"!=b&&a>0.5*d)v.beginPath(),v.arc(c.l+0.5*c.w,0.4*r.height,0.2*r.height,1.75*Math.PI,1.25*Math.PI,!1),v.lineTo(c.l+0.5*c.w,0),v.closePath(),
v.fillStyle=i.colorForBase(b),v.fill(),v.lineWidth=1,v.strokeStyle="black",v.stroke()});d-=e.get("reference");e.forEach(function(a,b){"reference"!=b&&(A(b,s(d),u-s(a)+1,c),d-=a)})},this)},_showPixelValue:function(b,e){function c(a){return parseFloat(a).toPrecision(6).replace(/0+$/,"").replace(/\.$/,"")}if(!e)return!1;if(e.snpsCounted){var a=e.total(),d="<table>",f=function(b){return Math.round(100*(b/a))+"%"},d=d+('<tr class="ref"><td>'+(e.refBase?e.refBase+"*":"Ref")+'</td><td class="count">'+c(e.get("reference"))+
'</td><td class="pct">'+f(e.get("reference"))+"</td></tr>");e.forEach(function(a,b){if("reference"!=b){var e="";a.forEach&&(e=[],a.forEach(function(a,b){e.push(c(a)+" "+b)}),(e=e.join(", "))&&(e="("+e+")"));b={"*":"del"}[b]||b;d+="<tr><td>"+b+'</td><td class="count">'+c(a)+'</td><td class="pct">'+f(a)+'</td><td class="subdist">'+e+"</td></tr>"}});d+='<tr class="total"><td>Total</td><td class="count">'+c(a)+'</td><td class="pct">&nbsp;</td><td class="subdist">&nbsp;</td></tr>';b.innerHTML=d+"</table>"}else b.innerHTML=
'<table><tr><td>Total</td><td class="count">'+c(e)+"</td></tr></table>";return!0}})})},"JBrowse/Store/SeqFeature/SNPCoverage":function(){define(["dojo/_base/declare","dojo/_base/array","JBrowse/Store/SeqFeature","JBrowse/Model/NestedFrequencyTable","JBrowse/Model/CoverageFeature"],function(h,j,g,i,f){return h(g,{constructor:function(d){this.store=d.store},getGlobalStats:function(d){d({})},getFeatures:function(d,b,e,c){var a=this,g=d.start,h=d.end,j=d.scale||"basesPerSpan"in d?1/d.basesPerSpan:10,
m=function(){var a=1/j;return 30>=a?1:Math.ceil(a)}(),o=function(a){return Math.floor((a-g)/m)},l=o(h),n=Array(l+1),s=0;for(;s<=l;s++)n[s]=new i;var u=function(a,b){var c=(a-g)/m,e=Math.floor(c);return 0<=e&&e<=l?{bin:e,overlap:b?1-(c-e):c-e}:b?{bin:l,overlap:1}:{bin:0,overlap:1}};a.store.getFeatures(d,function(b){var c=u(b.get("start"),!1),e=u(b.get("end")-1,!0);c.bin==e.bin?n[c.bin].increment("reference",e.overlap+c.overlap-1):(n[c.bin].increment("reference",c.overlap),n[e.bin].increment("reference",
e.overlap));for(var d=c.bin+1;d<=e.bin-1;d++)n[d].increment("reference",1);if(1==m){for(d=c.bin;d<=e.bin;d++)n[d].snpsCounted=1;if(d=b.get("md")){c=a._mdToMismatches(b,d);for(d=0;d<c.length;d++)if(e=o(b.get("start")+c[d].start),e=n[e]){var f={"-1":"-",1:"+"}[""+b.get("strand")]||"unstranded";e.decrement("reference",1/m);e.getNested(c[d].bases).increment(f,1/m)}}}},function(){var c=function(){for(var a=0;a<=l;a++){var c=g+m*a;b(new f({start:c,end:c+m,score:n[a]}))}e()};if(1==m){var i;a.browser.getStore("refseqs",
function(a){a?a.getFeatures(d,function(a){i=a.get("seq")},function(){if(i)for(var a=g;a<=h;a++){var b=o(a);n[b].refBase=i[b]}c()},c):c()})}else c()},c)},_mdToMismatches:function(d,b){var e=[],c={start:0,bases:""},a=d.get("seq"),f=function(){e.push(c);c={start:c.start+c.bases.length,bases:""}};j.forEach(b.match(/(\d+|\^[a-z]+|[a-z])/ig),function(b){if(b.match(/^\d/))c.start+=parseInt(b);else if(b.match(/^\^/))for(b=b.length-1;b--;)c.bases="*",f();else if(b.match(/^[a-z]/i))c.bases=a.substr(c.start,
b.length),f()});return e}})})},"JBrowse/Model/NestedFrequencyTable":function(){define(["JBrowse/Util"],function(h){var j=h.fastDeclare({constructor:function(g){this._categories={};g&&dojo.mixin(this._categories,g)},total:function(){var g=0,h;for(h in this._categories)var f=this._categories[h],g=g+(f.total?f.total():f);return g},decrement:function(g,h){h||(h=1);g=g?g.toString():"default";return this._categories[g]?this._categories[g]=Math.max(0,this._categories[g]-h):0},increment:function(g,h){h||
(h=1);g=g?g.toString():"default";return this._categories[g]=(this._categories[g]||0)+h},get:function(g){return this._categories[g]||0},getNested:function(g){"string"==typeof g&&(g=g.split("/"));if(!g.length)return this;var h=g[0].toString(),f=this._categories[h];if(!f||!f._categories)f=this._categories[h]=new j(f?{"default":f+0}:{});return 1<g.length?f.getNested(g.slice(1)):f},categories:function(){return h.dojof.keys(this._categories)},toString:function(){return this.total().toPrecision(6).toString().replace(/\.?0+$/,
"")},valueOf:function(){return this.total()},forEach:function(g,h){var f=this._categories;if(h)for(var d in f)g.call(h,f[d],d);else for(d in f)g(f[d],d)}});return j})},"JBrowse/Store/TrackMetaData":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/data/util/simpleFetch","JBrowse/Util","JBrowse/Digest/Crc32"],function(h,j,g,i,f){var d=i.dojof,h=h(null,{_noDataValue:"(no data)",constructor:function(b){var e=["conf"];this._filterFacet=function(){var a=b.indexFacets||function(){return!0};
"string"==typeof a&&(a=[a]);if(dojo.isArray(a))var c=a,a=function(a){return dojo.some(c,function(b){return a==b.toLowerCase()})};var d=this.getIdentityAttributes();return function(b){return dojo.some(d,function(a){return a==b})||a(b)&&!dojo.some(e,function(a){return a==b})}}.call(this);this.onReadyFuncs=dojo.isArray(b.onReady)?dojo.clone(b.onReady):b.onReady?[b.onReady]:[];this._indexItems({store:this,items:dojo.map(b.trackConfigs,dojo.hitch(this,"_trackConfigToItem"))});var c=0;b.metadataStores=
dojo.filter(b.metadataStores,function(a){return a});if(!b.metadataStores||!b.metadataStores.length)this._finishLoad();else{var a=dojo.hitch(this,function(){++c==b.metadataStores.length&&this._finishLoad()});dojo.forEach(b.metadataStores,function(b){b.fetch({scope:this,onComplete:dojo.hitch(this,function(c){this._indexItems({store:b,items:c,supplementalOnly:!0});a()}),onError:function(b){console.error(b,b.stack);a()}})},this)}b.browser.subscribe("/jbrowse/v1/c/tracks/new",dojo.hitch(this,"addTracks"));
b.browser.subscribe("/jbrowse/v1/c/tracks/replace",dojo.hitch(this,function(a){this.deleteTracks(a);this.addTracks(a)}));b.browser.subscribe("/jbrowse/v1/c/tracks/delete",dojo.hitch(this,"deleteTracks"))},_trackConfigToItem:function(b){var e=dojo.clone(b.metadata||{});e.label=b.label;e.key=b.key;e.conf=b;e["track type"]=b.type;if(b.category)e.category=b.category;return e},addTracks:function(b){b.length&&(delete this.previousQueryFingerprint,delete this.previousResults);j.forEach(b,function(b){this._indexItems({store:this,
items:[this._trackConfigToItem(b)]});var c=b.label,a=this.fetchItemByIdentity(c);if(a)this.onNew(a);else console.error("failed to add "+c+" track to track metadata store",b)},this)},deleteTracks:function(b){b.length&&(delete this.previousQueryFingerprint,delete this.previousResults);j.forEach(b,function(b){if(b=this.fetchItemByIdentity(b.label))b.DELETED=!0,this.onDelete(b)},this)},_finishLoad:function(){this.facets.sort();dojo.forEach(d.values(this.facetIndexes.byName),function(b){b.avgBucketSize=
b.itemCount/b.bucketCount});this.facetIndexes.facetRank=dojo.clone(this.facets).sort(dojo.hitch(this,function(b,c){return this.facetIndexes.byName[b].avgBucketSize-this.facetIndexes.byName[c].avgBucketSize}));var b=dojo.hitch(this,"_itemSortFunc");dojo.forEach(d.values(this.facetIndexes.byName),function(e){dojo.forEach(d.keys(e.byValue),function(c){e.byValue[c].items=e.byValue[c].items.sort(b)})},this);this.ready=!0;this._onReady()},_itemSortFunc:function(b,e){var c=this.getIdentity(b),a=this.getIdentity(e);
return c==a?0:c>a?1:c<a?-1:0},_indexItems:function(b){var e=b.store,c=b.items,a={},c=dojo.map(c,function(b){var c=e.getAttributes(b),d={};dojo.forEach(c,function(c){if(c){var f=c.toLowerCase();a[f]=!0;d[f]=e.getValue(b,c)}});return d},this);this.identIndex=this.identIndex||{};var c=function(){var a={};return dojo.map(c,function(c){var e=this.getIdentity(c),d=this.identIndex[e];d&&d.DELETED&&delete d.DELETED;if(a[e]||b.supplementalOnly&&!d)return null;a[e]=!0;return this.identIndex[e]=dojo.mixin(d||
{},c)},this)}.call(this),c=dojo.filter(c,function(a){return a}),f=this._addFacets(d.keys(a));this.facetIndexes=this.facetIndexes||{itemCount:0,bucketCount:0,byName:{}};dojo.forEach(f,function(a){this.facetIndexes.byName[a]||(this.facetIndexes.bucketCount++,this.facetIndexes.byName[a]={itemCount:0,bucketCount:0,byValue:{}})},this);if(f.length){var g={};dojo.forEach(f,function(a){g[a]={}});dojo.forEach(c,function(a){this.facetIndexes.itemCount++;dojo.forEach(f,function(b){var c=this.getValue(a,b,void 0);
"undefined"!=typeof c&&(g[b][this.getIdentity(a)]=1,this._indexItem(b,c,a))},this)},this);dojo.forEach(f,function(a){dojo.forEach(d.values(this.identIndex),function(b){g[a][this.getIdentity(b)]||this._indexItem(a,this._noDataValue,b)},this)},this)}},_indexItem:function(b,e,c){var b=this.facetIndexes.byName[b],a=b.byValue[e];a||(a=b.byValue[e]={itemCount:0,items:[]},b.bucketCount++);a.itemCount++;b.itemCount++;a.items.push(c)},_addFacets:function(b){var e=this.facets||[],c={};this.facets=dojo.filter(e.concat(b),
function(a){var b=this._filterFacet(a)&&!c[a];c[a]=!0;return b},this);return this.facets.slice(e.length)},getCount:function(){return this._fetchCount},getFacetCounts:function(b){var e=this._fetchFacetCounts[b]||this._fetchFacetCounts.__other__;return e?e[b]:void 0},getFacetNames:function(){return this.facets},getFacetValues:function(b){b=this.facetIndexes.byName[b];return!b?[]:d.keys(b.byValue)},getFacetStats:function(b){var e=this.facetIndexes.byName[b];if(!e)return{};var c={};dojo.forEach(["itemCount",
"bucketCount","avgBucketSize"],function(a){c[a]=e[a]});return c},getValue:function(b,e,c){b=b[e];return"undefined"==typeof b?c:b},getValues:function(b,e){var c=[b[e]];return"undefined"==typeof c[0]?[]:c},getAttributes:function(b){return d.keys(b)},hasAttribute:function(b,e){return b.hasOwnProperty(e)},containsValue:function(b,e,c){return b[e]==c},isItem:function(b){return"object"==typeof b&&"string"==typeof b.label},isItemLoaded:function(){return this.ready},loadItem:function(){},getItem:function(b){return this.ready?
this.identIndex[b]:null},_fetchItems:function(b,e,c){if(this.ready){var a=dojo.clone(b.query||{});dojo.forEach(d.keys(a),function(b){dojo.isArray(a[b])||(a[b]=[a[b]])},this);c=f.objectFingerprint(a);c==this.previousQueryFingerprint?c=this.previousResults:(this.previousQueryFingerprint=c,this.previousResults=c=this._doQuery(a));e(c,b);this.onFetchSuccess()}else this.onReady(dojo.hitch(this,"_fetchItems",b,e,c))},_doQuery:function(b){var e=this._compileTextFilter(b.text);delete b.text;var c=[],a=[];
if(e)a.push(this._filterDeleted(j.filter(d.values(this.identIndex),e)).sort(dojo.hitch(this,"_itemSortFunc"))),a[0].facetName="Contains text";a.push.apply(a,dojo.map(d.keys(b),function(a){var c=b[a],e=[];if(!this.facetIndexes.byName[a])throw console.error("No facet defined with name '"+a+"'."),"No facet defined with name '"+a+"', faceted search failed.";dojo.forEach(c,function(b){e.push.apply(e,this._filterDeleted((this.facetIndexes.byName[a].byValue[b]||{}).items||[]))},this);e.facetName=a;e.sort(dojo.hitch(this,
"_itemSortFunc"));return e},this));dojo.forEach(a,function(a){a.myOffset=0;a.topItem=function(){return this[this.myOffset]};a.shift=function(){this.myOffset++}});var f={};if(a.length){var g=0;for(dojo.forEach(a,function(a){g+=a.length});g;){var h={},i=[],o,l;dojo.forEach(a,function(a){o=(l=a.topItem())?this.getIdentity(l):"(at end of set)";h[o]?h[o].push(a):(h[o]=[a],i.push(o))},this);1==i.length?c.push(l):(i.sort(),"(at end of set)"==i[0]?(o=i[1],e=0):(o=i[0],e=1),o="(at end of set)"==i[0]?i[1]:
i[0],2==i.length&&h[o].length==a.length-1&&(e=h[i[e]][0],this._countItem(f,h[o][0].topItem(),e.facetName)));dojo.forEach(h[o],function(a){a.shift();g--})}}else c=this._filterDeleted(d.values(this.identIndex));dojo.forEach(d.keys(f).concat(["__other__"]),function(a){dojo.forEach(c,function(b){this._countItem(f,b,a)},this)},this);1==a.length&&dojo.forEach(d.values(this.identIndex),function(b){this._countItem(f,b,a[0].facetName)},this);this._fetchFacetCounts=f;this._fetchCount=c.length;return c},_countItem:function(b,
e,c){var a=b[c];a||(a=b[c]={});dojo.forEach("__other__"==c?this.facets:[c],function(b){var c=this.getValue(e,b,this._noDataValue),d=a[b];d||(d=a[b]={},d[c]=0);d[c]=(d[c]||0)+1},this)},onReady:function(b,e){b=b||dojo.global;e=dojo.hitch(b,e);this.ready?e():this.onReadyFuncs.push(e)},_onReady:function(){dojo.forEach(this.onReadyFuncs||[],function(b){b.call()})},onFetchSuccess:function(){},onNew:function(){},onDelete:function(){},onSet:function(){},_filterDeleted:function(b){return j.filter(b,function(b){return!b.DELETED})},
_compileTextFilter:function(b){if(void 0===b)return null;for(var e=/\s*["']([^"']+)["']\s*/g,c=/(\S+)/g,a=function(){var a=e.exec(b)||c.exec(b);if(a){var a=a[1],d=Math.max(e.lastIndex,c.lastIndex);c.lastIndex=e.lastIndex=d}return a},d=[],f;f=a();)f=dojo.regexp.escapeString(f,"*?").replace(/\*/g,".+").replace(/ /g,"\\s+").replace(/\?/g,"."),d.push(RegExp(f,"i"));return dojo.hitch(this,function(a){return dojo.some(this.facets,function(b){var c=this.getValue(a,b);return j.every(d,function(a){return a.test(c)})},
this)})},getFeatures:function(){return{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0,"dojo.data.api.Notification":!0}},close:function(){},getLabel:function(b){return this.getValue(b,"key",void 0)},getLabelAttributes:function(){return["key"]},getIdentityAttributes:function(){return["label"]},getIdentity:function(b){return this.getValue(b,"label",void 0)},fetchItemByIdentity:function(b){return this.identIndex[b]}});dojo.extend(h,g);return h})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang",
"../../_base/kernel","./sorter"],function(h,j,g){var i={};h.setObject("dojo.data.util.simpleFetch",i);i.errorHandler=function(f,d){d.onError&&d.onError.call(d.scope||j.global,f,d)};i.fetchHandler=function(f,d){var b=d.abort||null,e=!1,c=d.start?d.start:0,a=d.count&&Infinity!==d.count?c+d.count:f.length;d.abort=function(){e=!0;b&&b.call(d)};var h=d.scope||j.global;if(!d.store)d.store=this;d.onBegin&&d.onBegin.call(h,f.length,d);d.sort&&f.sort(g.createSortFunction(d.sort,this));if(d.onItem)for(var i=
c;i<f.length&&i<a;++i){var q=f[i];e||d.onItem.call(h,q,d)}d.onComplete&&!e&&(i=null,d.onItem||(i=f.slice(c,a)),d.onComplete.call(h,i,d))};i.fetch=function(f){f=f||{};if(!f.store)f.store=this;this._fetchItems(f,h.hitch(this,"fetchHandler"),h.hitch(this,"errorHandler"));return f};return i})},"xstyle/load-css":function(){define([],function(){function h(a,b){var c=a[d]("link");c.rel="stylesheet";c.type="text/css";if(b)c.href=b;return c}function j(a){for(var a=a.split("!"),b,c=1;b=a[c++];)b=b.split("=",
2),a[b[0]]=2==b.length?b[1]:!0;return a}function g(b){if(a["dom-create-style-element"])return c=document.createElement("style"),c.setAttribute("type","text/css"),c.appendChild(document.createTextNode(b)),k.insertBefore(c,k.firstChild),c;var c=document.createStyleSheet();c.cssText=b;return c.owningElement}var i="onreadystatechange",f="onload",d="createElement",b=!1,e=document,c="undefined"==typeof _css_cache?{}:_css_cache,a={"event-link-onload":null===document.createElement("link").onload&&!navigator.userAgent.match(/AppleWebKit/),
"dom-create-style-element":!document.createStyleSheet},k=e.head||(e.head=e.getElementsByTagName("head")[0]);if(!a["bundled-css"])var p=function(c,e){function d(a){if(a=a.sheet||a.styleSheet)for(var b=document.styleSheets,c=b.length;0<c;c--)if(b[c-1]==a)return!0}function g(a,c){d(a.link)?(h(a),c()):b||setTimeout(function(){g(a,c)},a.wait)}function h(a){a=a.link;a[i]=a[f]=null}function j(){k||(k=!0,e())}if(require.onError)require.onError=function(a){return function(){b=!0;a.apply(this,arguments)}}(require.onError);
var k;(function(b,c){var e=b.link;e[i]=e[f]=function(){if(!e.readyState||"complete"==e.readyState)a["event-link-onload"]=!0,h(b),c()}})(c,j);a["event-link-onload"]||g(c,j)};return function(a,b,d){for(var f=a.split(","),i=f.length,s=function(){0==--i&&b(v.sheet||v.styleSheet)},u=0;u<f.length;u++){var a=f[u],r=c[a];if(r)return v=g(r),s();var a=j(a),r=a.shift(),r=r.lastIndexOf(".")<=r.lastIndexOf("/")?r+".css":r,v=h(e),a="nowait"in a?"false"!=a.nowait:!(!d||!d.cssDeferLoad);p({link:v,url:r,wait:d&&d.cssWatchPeriod||
25},s);a&&b(v);v.href=r;k.appendChild(v)}}})},"dojox/gfx/svg":function(){define("dojo/_base/lang,dojo/_base/sniff,dojo/_base/window,dojo/dom,dojo/_base/declare,dojo/_base/array,dojo/dom-geometry,dojo/dom-attr,dojo/_base/Color,./_base,./shape,./path".split(","),function(h,j,g,i,f,d,b,e,c,a,k,p){function q(a,b){return g.doc.createElementNS?g.doc.createElementNS(a,b):g.doc.createElement(b)}function m(a){return o.useSvgWeb?g.doc.createTextNode(a,!0):g.doc.createTextNode(a)}var o=a.svg={};o.useSvgWeb=
"undefined"!=typeof window.svgweb;var l=navigator.userAgent,n=j("ios"),s=j("android"),u=j("chrome")||s&&4<=s?"auto":"optimizeLegibility";o.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};o.getRef=function(a){return!a||"none"==a?null:a.match(/^url\(#.+\)$/)?i.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?i.byId(a.slice(1)):null};o.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,
3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var r=0;o.Shape=f("dojox.gfx.svg.Shape",k.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=o.getRef(a))&&a.parentNode.removeChild(a)}if(this.clip&&(a=this.rawNode.getAttribute("clip-path")))(a=i.byId(a.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);this.rawNode=null;k.Shape.prototype.destroy.apply(this,arguments)},setFill:function(b){if(!b)return this.fillStyle=
null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var c,e=function(a){this.setAttribute(a,c[a].toFixed(8))};if("object"==typeof b&&"type"in b){switch(b.type){case "linear":c=a.makeParameters(a.defaultLinearGradient,b);b=this._setFillObject(c,"linearGradient");d.forEach(["x1","y1","x2","y2"],e,b);break;case "radial":c=a.makeParameters(a.defaultRadialGradient,b);b=this._setFillObject(c,"radialGradient");d.forEach(["cx","cy","r"],e,b);break;case "pattern":c=
a.makeParameters(a.defaultPattern,b),b=this._setFillObject(c,"pattern"),d.forEach(["x","y","width","height"],e,b)}this.fillStyle=c;return this}this.fillStyle=c=a.normalizeColor(b);this.rawNode.setAttribute("fill",c.toCss());this.rawNode.setAttribute("fill-opacity",c.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(b){var e=this.rawNode;if(!b)return this.strokeStyle=null,e.setAttribute("stroke","none"),e.setAttribute("stroke-opacity",0),this;if("string"==typeof b||
h.isArray(b)||b instanceof c)b={color:b};b=this.strokeStyle=a.makeParameters(a.defaultStroke,b);b.color=a.normalizeColor(b.color);if(b){e.setAttribute("stroke",b.color.toCss());e.setAttribute("stroke-opacity",b.color.a);e.setAttribute("stroke-width",b.width);e.setAttribute("stroke-linecap",b.cap);"number"==typeof b.join?(e.setAttribute("stroke-linejoin","miter"),e.setAttribute("stroke-miterlimit",b.join)):e.setAttribute("stroke-linejoin",b.join);var d=b.style.toLowerCase();d in o.dasharray&&(d=o.dasharray[d]);
if(d instanceof Array){for(var d=h._toArray(d),f=0;f<d.length;++f)d[f]*=b.width;if("butt"!=b.cap){for(f=0;f<d.length;f+=2)d[f]-=b.width,1>d[f]&&(d[f]=1);for(f=1;f<d.length;f+=2)d[f]+=b.width}d=d.join(",")}e.setAttribute("stroke-dasharray",d);e.setAttribute("dojoGfxStrokeStyle",b.style)}return this},_getParentSurface:function(){for(var b=this.parent;b&&!(b instanceof a.Surface);b=b.parent);return b},_setFillObject:function(b,c){var e=o.xmlns.svg;this.fillStyle=b;var d=this._getParentSurface().defNode,
f=this.rawNode.getAttribute("fill");if(f=o.getRef(f))if(f.tagName.toLowerCase()!=c.toLowerCase()){var g=f.id;f.parentNode.removeChild(f);f=q(e,c);f.setAttribute("id",g);d.appendChild(f)}else for(;f.childNodes.length;)f.removeChild(f.lastChild);else f=q(e,c),f.setAttribute("id",a._base._getUniqueId()),d.appendChild(f);if("pattern"==c)f.setAttribute("patternUnits","userSpaceOnUse"),e=q(e,"image"),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("width",b.width.toFixed(8)),e.setAttribute("height",
b.height.toFixed(8)),e.setAttributeNS?e.setAttributeNS(o.xmlns.xlink,"xlink:href",b.src):e.setAttribute("xlink:href",b.src),f.appendChild(e);else{f.setAttribute("gradientUnits","userSpaceOnUse");for(d=0;d<b.colors.length;++d){var g=b.colors[d],h=q(e,"stop"),i=g.color=a.normalizeColor(g.color);h.setAttribute("offset",g.offset.toFixed(8));h.setAttribute("stop-color",i.toCss());h.setAttribute("stop-opacity",i.a);f.appendChild(h)}}this.rawNode.setAttribute("fill","url(#"+f.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");
this.rawNode.setAttribute("fill-rule","evenodd");return f},_applyTransform:function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+","+a.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(a){a=this.rawNode=a;"image"!=this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke",
"none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this.getUID()},setShape:function(b){this.shape=a.makeParameters(this.shape,b);for(var c in this.shape)"type"!=c&&this.rawNode.setAttribute(c,this.shape[c]);this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,
this.rawNode.parentNode.firstChild);return this},setClip:function(a){this.inherited(arguments);var b=a?"width"in a?"rect":"cx"in a?"ellipse":"points"in a?"polyline":"d"in a?"path":null:null;if(a&&!b)return this;if("polyline"===b)a=h.clone(a),a.points=a.points.join(",");var c,d=e.get(this.rawNode,"clip-path");d&&(c=i.byId(d.match(/gfx_clip[\d]+/)[0]))&&c.removeChild(c.childNodes[0]);a?(c?(b=q(o.xmlns.svg,b),c.appendChild(b)):(d="gfx_clip"+ ++r,this.rawNode.setAttribute("clip-path","url(#"+d+")"),c=
q(o.xmlns.svg,"clipPath"),b=q(o.xmlns.svg,b),c.appendChild(b),this.rawNode.parentNode.appendChild(c),e.set(c,"id",d)),e.set(b,a)):(this.rawNode.removeAttribute("clip-path"),c&&c.parentNode.removeChild(c));return this},_removeClipNode:function(){var a,b=e.get(this.rawNode,"clip-path");b&&(a=i.byId(b.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);return a}});o.Group=f("dojox.gfx.svg.Group",o.Shape,{constructor:function(){k.Container._init.call(this)},setRawNode:function(a){this.rawNode=a;
this.rawNode.__gfxObject__=this.getUID()},destroy:function(){this.clear(!0);o.Shape.prototype.destroy.apply(this,arguments)}});o.Group.nodeType="g";o.Rect=f("dojox.gfx.svg.Rect",[o.Shape,k.Rect],{setShape:function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;for(var c in this.shape)"type"!=c&&"r"!=c&&this.rawNode.setAttribute(c,this.shape[c]);null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});o.Rect.nodeType=
"rect";o.Ellipse=f("dojox.gfx.svg.Ellipse",[o.Shape,k.Ellipse],{});o.Ellipse.nodeType="ellipse";o.Circle=f("dojox.gfx.svg.Circle",[o.Shape,k.Circle],{});o.Circle.nodeType="circle";o.Line=f("dojox.gfx.svg.Line",[o.Shape,k.Line],{});o.Line.nodeType="line";o.Polyline=f("dojox.gfx.svg.Polyline",[o.Shape,k.Polyline],{setShape:function(b,c){b&&b instanceof Array?(this.shape=a.makeParameters(this.shape,{points:b}),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=a.makeParameters(this.shape,
b);this.bbox=null;this._normalizePoints();for(var e=[],d=this.shape.points,f=0;f<d.length;++f)e.push(d[f].x.toFixed(8),d[f].y.toFixed(8));this.rawNode.setAttribute("points",e.join(" "));return this}});o.Polyline.nodeType="polyline";o.Image=f("dojox.gfx.svg.Image",[o.Shape,k.Image],{setShape:function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;var b=this.rawNode,c;for(c in this.shape)"type"!=c&&"src"!=c&&b.setAttribute(c,this.shape[c]);b.setAttribute("preserveAspectRatio","none");b.setAttributeNS?
b.setAttributeNS(o.xmlns.xlink,"xlink:href",this.shape.src):b.setAttribute("xlink:href",this.shape.src);b.__gfxObject__=this.getUID();return this}});o.Image.nodeType="image";o.Text=f("dojox.gfx.svg.Text",[o.Shape,k.Text],{setShape:function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;var b=this.rawNode,c=this.shape;b.setAttribute("x",c.x);b.setAttribute("y",c.y);b.setAttribute("text-anchor",c.align);b.setAttribute("text-decoration",c.decoration);b.setAttribute("rotate",c.rotated?90:
0);b.setAttribute("kerning",c.kerning?"auto":0);b.setAttribute("text-rendering",u);b.firstChild?b.firstChild.nodeValue=c.text:b.appendChild(m(c.text));return this},getTextWidth:function(){var a=this.rawNode,b=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var c=0,e=a.firstChild.nodeValue;b.appendChild(a);if(""!=e)for(;!c;)c=a.getBBox?parseInt(a.getBBox().width):68;b.removeChild(a);return c}});o.Text.nodeType="text";o.Path=f("dojox.gfx.svg.Path",[o.Shape,p.Path],{_updateWithSegment:function(a){this.inherited(arguments);
"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(a){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});o.Path.nodeType="path";o.TextPath=f("dojox.gfx.svg.TextPath",[o.Shape,p.TextPath],{_updateWithSegment:function(a){this.inherited(arguments);this._setTextPath()},setShape:function(a){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==
typeof this.shape.path){var b=this.rawNode;if(!b.firstChild){var c=q(o.xmlns.svg,"textPath"),e=m("");c.appendChild(e);b.appendChild(c)}c=(c=b.firstChild.getAttributeNS(o.xmlns.xlink,"href"))&&o.getRef(c);if(!c&&(e=this._getParentSurface())){var e=e.defNode,c=q(o.xmlns.svg,"path"),d=a._base._getUniqueId();c.setAttribute("id",d);e.appendChild(c);b.firstChild.setAttributeNS?b.firstChild.setAttributeNS(o.xmlns.xlink,"xlink:href","#"+d):b.firstChild.setAttribute("xlink:href","#"+d)}c&&c.setAttribute("d",
this.shape.path)}},_setText:function(){var a=this.rawNode;if(!a.firstChild){var b=q(o.xmlns.svg,"textPath"),c=m("");b.appendChild(c);a.appendChild(b)}a=a.firstChild;b=this.text;a.setAttribute("alignment-baseline","middle");switch(b.align){case "middle":a.setAttribute("text-anchor","middle");a.setAttribute("startOffset","50%");break;case "end":a.setAttribute("text-anchor","end");a.setAttribute("startOffset","100%");break;default:a.setAttribute("text-anchor","start"),a.setAttribute("startOffset","0%")}a.setAttribute("baseline-shift",
"0.5ex");a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.firstChild.data=b.text}});o.TextPath.nodeType="text";var v=534<function(){var a=/WebKit\/(\d*)/.exec(l);return a?a[1]:0}();o.Surface=f("dojox.gfx.svg.Surface",k.Surface,{constructor:function(){k.Container._init.call(this)},destroy:function(){k.Container.clear.call(this,!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(a,b){if(!this.rawNode)return this;
this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",b);if(v)this.rawNode.style.width=a,this.rawNode.style.height=b;return this},getDimensions:function(){return this.rawNode?{width:a.normalizedLength(this.rawNode.getAttribute("width")),height:a.normalizedLength(this.rawNode.getAttribute("height"))}:null}});o.createSurface=function(a,b,c){var e=new o.Surface;e.rawNode=q(o.xmlns.svg,"svg");e.rawNode.setAttribute("overflow","hidden");b&&e.rawNode.setAttribute("width",b);c&&e.rawNode.setAttribute("height",
c);b=q(o.xmlns.svg,"defs");e.rawNode.appendChild(b);e.defNode=b;e._parent=i.byId(a);e._parent.appendChild(e.rawNode);return e};var j={_setFont:function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)}},t=k.Container,f={openBatch:function(){this.fragment=o.useSvgWeb?g.doc.createDocumentFragment(!0):
g.doc.createDocumentFragment()},closeBatch:function(){this.fragment&&(this.rawNode.appendChild(this.fragment),delete this.fragment)},add:function(a){this!=a.getParent()&&(this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode),t.add.apply(this,arguments),a.setClip(a.clip));return this},remove:function(a,b){this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode),this.fragment&&this.fragment==a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode),
a._removeClipNode(),t.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var b=this.defNode;if(b){for(;b.lastChild;)b.removeChild(b.lastChild);a.appendChild(b)}return t.clear.apply(this,arguments)},getBoundingBox:t.getBoundingBox,_moveChildToFront:t._moveChildToFront,_moveChildToBack:t._moveChildToBack},p={createObject:function(a,b){if(!this.rawNode)return null;var c=new a,e=q(o.xmlns.svg,a.nodeType);c.setRawNode(e);c.setShape(b);
this.add(c);return c}};h.extend(o.Text,j);h.extend(o.TextPath,j);h.extend(o.Group,f);h.extend(o.Group,k.Creator);h.extend(o.Group,p);h.extend(o.Surface,f);h.extend(o.Surface,k.Creator);h.extend(o.Surface,p);o.fixTarget=function(a){if(!a.gfxTarget)a.gfxTarget=n&&a.target.wholeText?k.byId(a.target.parentElement.__gfxObject__):k.byId(a.target.__gfxObject__);return!0};if(o.useSvgWeb)o.createSurface=function(c,e,d){var f=new o.Surface;if(!e||!d)var g=b.position(c),e=e||g.w,d=d||g.h;var c=i.byId(c),g=c.id?
c.id+"_svgweb":a._base._getUniqueId(),h=q(o.xmlns.svg,"svg");h.id=g;h.setAttribute("width",e);h.setAttribute("height",d);svgweb.appendChild(h,c);h.addEventListener("SVGLoad",function(){f.rawNode=this;f.isLoaded=!0;var a=q(o.xmlns.svg,"defs");f.rawNode.appendChild(a);f.defNode=a;if(f.onLoad)f.onLoad(f)},!1);f.isLoaded=!1;return f},o.Surface.extend({destroy:function(){var a=this.rawNode;svgweb.removeChild(a,a.parentNode)}}),j={connect:function(a,b,c){"on"===a.substring(0,2)&&(a=a.substring(2));c=2==
arguments.length?b:h.hitch(b,c);this.getEventSource().addEventListener(a,c,!1);return[this,a,c]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],!1);delete a[0]}},h.extend(o.Shape,j),h.extend(o.Surface,j);return o})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(h,j,g,i,f){f=g("dojox.gfx.path.Path",f.Shape,{constructor:function(d){this.shape=j.clone(h.defaultPath);this.segments=[];this.tbbox=null;this.absolute=
!0;this.last={};this.rawNode=d;this.segmented=!1},setAbsoluteMode:function(d){this._confirmSegmented();this.absolute="string"==typeof d?"absolute"==d:d;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;
var d=this.bbox,b=this._getRealMatrix();this.bbox=null;for(var e=0,c=this.segments.length;e<c;++e)this._updateWithSegment(this.segments[e],b);b=this.bbox;this.bbox=d;return this.tbbox=b?[{x:b.l,y:b.t},{x:b.r,y:b.t},{x:b.r,y:b.b},{x:b.l,y:b.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(d,b,e){if(e)b=i.multiplyPoint(e,d,b),d=b.x,b=b.y;if(this.bbox&&
"l"in this.bbox){if(this.bbox.l>d)this.bbox.l=d;if(this.bbox.r<d)this.bbox.r=d;if(this.bbox.t>b)this.bbox.t=b;if(this.bbox.b<b)this.bbox.b=b}else this.bbox={l:d,b:b,r:d,t:b}},_updateWithSegment:function(d,b){var e=d.args,c=e.length,a;switch(d.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(a=0;a<c;a+=2)this._updateBBox(e[a],e[a+1],b);this.last.x=e[c-2];this.last.y=e[c-1];this.absolute=!0;break;case "H":for(a=0;a<c;++a)this._updateBBox(e[a],this.last.y,b);this.last.x=e[c-1];this.absolute=
!0;break;case "V":for(a=0;a<c;++a)this._updateBBox(this.last.x,e[a],b);this.last.y=e[c-1];this.absolute=!0;break;case "m":a=0;if(!("x"in this.last))this._updateBBox(this.last.x=e[0],this.last.y=e[1],b),a=2;for(;a<c;a+=2)this._updateBBox(this.last.x+=e[a],this.last.y+=e[a+1],b);this.absolute=!1;break;case "l":case "t":for(a=0;a<c;a+=2)this._updateBBox(this.last.x+=e[a],this.last.y+=e[a+1],b);this.absolute=!1;break;case "h":for(a=0;a<c;++a)this._updateBBox(this.last.x+=e[a],this.last.y,b);this.absolute=
!1;break;case "v":for(a=0;a<c;++a)this._updateBBox(this.last.x,this.last.y+=e[a],b);this.absolute=!1;break;case "c":for(a=0;a<c;a+=6)this._updateBBox(this.last.x+e[a],this.last.y+e[a+1],b),this._updateBBox(this.last.x+e[a+2],this.last.y+e[a+3],b),this._updateBBox(this.last.x+=e[a+4],this.last.y+=e[a+5],b);this.absolute=!1;break;case "s":case "q":for(a=0;a<c;a+=4)this._updateBBox(this.last.x+e[a],this.last.y+e[a+1],b),this._updateBBox(this.last.x+=e[a+2],this.last.y+=e[a+3],b);this.absolute=!1;break;
case "A":for(a=0;a<c;a+=7)this._updateBBox(e[a+5],e[a+6],b);this.last.x=e[c-2];this.last.y=e[c-1];this.absolute=!0;break;case "a":for(a=0;a<c;a+=7)this._updateBBox(this.last.x+=e[a+5],this.last.y+=e[a+6],b);this.absolute=!1}var f=[d.action];for(a=0;a<c;++a)f.push(h.formatNumber(e[a],!0));"string"==typeof this.shape.path?this.shape.path+=f.join(""):Array.prototype.push.apply(this.shape.path,f)},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(d,b){this.tbbox=null;var e=
this._validSegments[d.toLowerCase()];"number"==typeof e&&(e?b.length>=e&&(e={action:d,args:b.slice(0,b.length-b.length%e)},this.segments.push(e),this._updateWithSegment(e)):(e={action:d,args:[]},this.segments.push(e),this._updateWithSegment(e)))},_collectArgs:function(d,b){for(var e=0;e<b.length;++e){var c=b[e];"boolean"==typeof c?d.push(c?1:0):"number"==typeof c?d.push(c):c instanceof Array?this._collectArgs(d,c):"x"in c&&"y"in c&&d.push(c.x,c.y)}},moveTo:function(){this._confirmSegmented();var d=
[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"M":"m",d);return this},lineTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"L":"l",d);return this},hLineTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"H":"h",d);return this},vLineTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"V":"v",d);return this},
curveTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"C":"c",d);return this},smoothCurveTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"S":"s",d);return this},qCurveTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"Q":"q",d);return this},qSmoothCurveTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,
arguments);this._pushSegment(this.absolute?"T":"t",d);return this},arcTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"A":"a",d);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var d=this.shape.path;this.shape.path=[];this._setPath(d);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(d){d=j.isArray(d)?d:d.match(h.pathSvgRegExp);
this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(d){for(var b="",e=[],c=d.length,a=0;a<c;++a){var f=d[a],g=parseFloat(f);isNaN(g)?(b&&this._pushSegment(b,e),e=[],b=f):e.push(g)}this._pushSegment(b,e)}},setShape:function(d){this.inherited(arguments,["string"==typeof d?{path:d}:d]);this.segmented=!1;this.segments=[];h.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});g=g("dojox.gfx.path.TextPath",f,{constructor:function(){if(!("text"in this))this.text=j.clone(h.defaultTextPath);
if(!("fontStyle"in this))this.fontStyle=j.clone(h.defaultFont)},getText:function(){return this.text},setText:function(d){this.text=h.makeParameters(this.text,"string"==typeof d?{text:d}:d);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(d){this.fontStyle="string"==typeof d?h.splitFontString(d):h.makeParameters(h.defaultFont,d);this._setFont();return this}});return h.path={Path:f,TextPath:g}})},"dojox/data/CsvStore":function(){define("dojo/_base/lang,dojo/_base/declare,dojo/_base/xhr,dojo/_base/kernel,dojo/data/util/filter,dojo/data/util/simpleFetch".split(","),
function(h,j,g,i,f,d){j=j("dojox.data.CsvStore",null,{constructor:function(b){this._attributes=[];this._attributeIndexes={};this._dataArray=[];this._arrayOfAllItems=[];this._loadFinished=!1;if(b.url)this.url=b.url;this._csvData=b.data;if(b.label)this.label=b.label;else if(""===this.label)this.label=void 0;this._storeProp="_csvStore";this._idProp="_csvId";this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._loadInProgress=!1;this._queuedFetches=[];this.identifier=b.identifier;
""===this.identifier?delete this.identifier:this._idMap={};if("separator"in b)this.separator=b.separator;if("urlPreventCache"in b)this.urlPreventCache=b.urlPreventCache?!0:!1},url:"",label:"",identifier:"",separator:",",urlPreventCache:!1,_assertIsItem:function(b){if(!this.isItem(b))throw Error(this.declaredClass+": a function was passed an item argument that was not an item");},_getIndex:function(b){b=this.getIdentity(b);this.identifier&&(b=this._idMap[b]);return b},getValue:function(b,e,c){this._assertIsItem(b);
var a=c;if("string"===typeof e)e=this._attributeIndexes[e],null!=e&&(a=this._dataArray[this._getIndex(b)][e]||c);else throw Error(this.declaredClass+": a function was passed an attribute argument that was not a string");return a},getValues:function(b,e){var c=this.getValue(b,e);return c?[c]:[]},getAttributes:function(b){this._assertIsItem(b);for(var e=[],b=this._dataArray[this._getIndex(b)],c=0;c<b.length;c++)""!==b[c]&&e.push(this._attributes[c]);return e},hasAttribute:function(b,e){this._assertIsItem(b);
if("string"===typeof e){var c=this._attributeIndexes[e],a=this._dataArray[this._getIndex(b)];return"undefined"!==typeof c&&c<a.length&&""!==a[c]}throw Error(this.declaredClass+": a function was passed an attribute argument that was not a string");},containsValue:function(b,e,c){var a=void 0;"string"===typeof c&&(a=f.patternToRegExp(c,!1));return this._containsValue(b,e,c,a)},_containsValue:function(b,e,c,a){b=this.getValues(b,e);for(e=0;e<b.length;++e){var d=b[e];if("string"===typeof d&&a)return null!==
d.match(a);if(c===d)return!0}return!1},isItem:function(b){if(b&&b[this._storeProp]===this)if(b=b[this._idProp],this.identifier){if(this._dataArray[this._idMap[b]])return!0}else if(0<=b&&b<this._dataArray.length)return!0;return!1},isItemLoaded:function(b){return this.isItem(b)},loadItem:function(){},getFeatures:function(){return this._features},getLabel:function(b){if(this.label&&this.isItem(b))return this.getValue(b,this.label)},getLabelAttributes:function(){return this.label?[this.label]:null},_fetchItems:function(b,
e,c){var a=this,d=function(b,c){var d=null;if(b.query){var g,h,d=[],i=b.queryOptions?b.queryOptions.ignoreCase:!1,j={};for(g in b.query)h=b.query[g],"string"===typeof h&&(j[g]=f.patternToRegExp(h,i));for(i=0;i<c.length;++i){var k=!0,o=c[i];for(g in b.query)h=b.query[g],a._containsValue(o,g,h,j[g])||(k=!1);k&&d.push(o)}}else d=c.slice(0,c.length);e(d,b)};if(this._loadFinished)d(b,this._arrayOfAllItems);else if(""!==this.url)if(this._loadInProgress)this._queuedFetches.push({args:b,filter:d});else{this._loadInProgress=
!0;var h=g.get({url:a.url,handleAs:"text",preventCache:a.urlPreventCache});h.addCallback(function(e){try{a._processData(e),d(b,a._arrayOfAllItems),a._handleQueuedFetches()}catch(f){c(f,b)}});h.addErrback(function(e){a._loadInProgress=!1;if(c)c(e,b);else throw e;});var i=null;if(b.abort)i=b.abort;b.abort=function(){h&&-1===h.fired&&h.cancel();i&&i.call(b)}}else if(this._csvData)try{this._processData(this._csvData),this._csvData=null,d(b,this._arrayOfAllItems)}catch(j){c(j,b)}else{var o=Error(this.declaredClass+
": No CSV source data was provided as either URL or String data input.");if(c)c(o,b);else throw o;}},close:function(){},_getArrayOfArraysFromCsvFileContents:function(b){if(h.isString(b)){for(var e=RegExp("^\\s+","g"),c=RegExp("\\s+$","g"),a=RegExp('""',"g"),d=[],f=this._splitLines(b),b=0;b<f.length;++b){var g=f[b];if(0<g.length){for(var g=g.split(this.separator),i=0;i<g.length;){var j=g[i].replace(e,""),l=j.replace(c,""),n=l.charAt(0),s=l.charAt(l.length-1),u=l.charAt(l.length-2),r=l.charAt(l.length-
3);if(2===l.length&&'""'==l)g[i]="";else if('"'==n&&('"'!=s||'"'==s&&'"'==u&&'"'!=r)){if(i+1===g.length)return;g[i]=j+this.separator+g[i+1];g.splice(i+1,1)}else'"'==n&&'"'==s&&(l=l.slice(1,l.length-1),l=l.replace(a,'"')),g[i]=l,i+=1}d.push(g)}}this._attributes=d.shift();for(b=0;b<this._attributes.length;b++)this._attributeIndexes[this._attributes[b]]=b;this._dataArray=d}},_splitLines:function(b){var e=[],c,a="",d=!1;for(c=0;c<b.length;c++){var f=b.charAt(c);switch(f){case '"':d=!d;a+=f;break;case "\r":d?
a+=f:(e.push(a),a="",c<b.length-1&&"\n"==b.charAt(c+1)&&c++);break;case "\n":d?a+=f:(e.push(a),a="");break;default:a+=f}}""!==a&&e.push(a);return e},_processData:function(b){this._getArrayOfArraysFromCsvFileContents(b);this._arrayOfAllItems=[];if(this.identifier&&void 0===this._attributeIndexes[this.identifier])throw Error(this.declaredClass+": Identity specified is not a column header in the data set.");for(b=0;b<this._dataArray.length;b++){var e=b;this.identifier&&(e=this._dataArray[b][this._attributeIndexes[this.identifier]],
this._idMap[e]=b);this._arrayOfAllItems.push(this._createItemFromIdentity(e))}this._loadFinished=!0;this._loadInProgress=!1},_createItemFromIdentity:function(b){var e={};e[this._storeProp]=this;e[this._idProp]=b;return e},getIdentity:function(b){return this.isItem(b)?b[this._idProp]:null},fetchItemByIdentity:function(b){var e,c=b.scope?b.scope:i.global;if(this._loadFinished)e=this._createItemFromIdentity(b.identity),this.isItem(e)||(e=null),b.onItem&&b.onItem.call(c,e);else{var a=this;if(""!==this.url)this._loadInProgress?
this._queuedFetches.push({args:b}):(this._loadInProgress=!0,e=g.get({url:a.url,handleAs:"text"}),e.addCallback(function(e){try{a._processData(e);var d=a._createItemFromIdentity(b.identity);a.isItem(d)||(d=null);b.onItem&&b.onItem.call(c,d);a._handleQueuedFetches()}catch(f){b.onError&&b.onError.call(c,f)}}),e.addErrback(function(a){this._loadInProgress=!1;b.onError&&b.onError.call(c,a)}));else if(this._csvData)try{a._processData(a._csvData),a._csvData=null,e=a._createItemFromIdentity(b.identity),a.isItem(e)||
(e=null),b.onItem&&b.onItem.call(c,e)}catch(d){b.onError&&b.onError.call(c,d)}}},getIdentityAttributes:function(){return this.identifier?[this.identifier]:null},_handleQueuedFetches:function(){if(0<this._queuedFetches.length){for(var b=0;b<this._queuedFetches.length;b++){var e=this._queuedFetches[b],c=e.filter,a=e.args;c?c(a,this._arrayOfAllItems):this.fetchItemByIdentity(e.args)}this._queuedFetches=[]}}});h.extend(j,d);return j})},"jszlib/main":function(){define(["jszlib/inflate"],function(h){return{inflate:h}})},
"jszlib/inflate":function(){define(["./arrayCopy"],function(h){function j(){}function g(){this.was=[0]}function i(a,b,c){this.hufts=new Int32Array(3*e);this.window=new Uint8Array(c);this.end=c;this.checkfn=b;this.mode=k;this.reset(a,null);this.index=this.table=this.left=0;this.blens=null;this.bb=new Int32Array(1);this.tb=new Int32Array(1);this.codes=new f;this.check=this.write=this.read=this.bitb=this.bitk=this.last=0;this.inftree=new d}function f(){}function d(){}function b(a,b,c,e){if(null==b)return 1;
for(var d=a&65535,a=a>>16&65535,f;0<e;){f=e<v?e:v;for(e-=f;16<=f;)d+=b[c++]&255,a+=d,d+=b[c++]&255,a+=d,d+=b[c++]&255,a+=d,d+=b[c++]&255,a+=d,d+=b[c++]&255,a+=d,d+=b[c++]&255,a+=d,d+=b[c++]&255,a+=d,d+=b[c++]&255,a+=d,d+=b[c++]&255,a+=d,d+=b[c++]&255,a+=d,d+=b[c++]&255,a+=d,d+=b[c++]&255,a+=d,d+=b[c++]&255,a+=d,d+=b[c++]&255,a+=d,d+=b[c++]&255,a+=d,d+=b[c++]&255,a+=d,f-=16;if(0!=f){do d+=b[c++]&255,a+=d;while(0!=--f)}d%=r;a%=r}return a<<16|d}var e=1440,c=["Z_OK: stream correct","Z_STREAM_END: end of stream",
"Z_NEED_DICT: stream not yet complete"];c[-1]="Z_ERRNO";c[-2]="Z_STREAM_ERROR";c[-3]="Z_DATA_ERROR";c[-4]="Z_MEM_ERROR";c[-5]="Z_BUF_ERROR: premature end of buffer";c[-6]="Z_VERSION_ERROR";var a=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],k=0,p=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,
72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,
0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,
258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,
0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,
7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,
0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,
133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,
80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],q=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],m=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,
0,0],o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],n=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];j.prototype.inflateInit=function(a,b){a||(a=15);b&&(b=!1);this.istate=new g;return this.istate.inflateInit(this,b?-a:a)};j.prototype.inflate=function(a){return null==this.istate?-2:this.istate.inflate(this,a)};j.prototype.inflateEnd=function(){if(null==
this.istate)return-2;var a=istate.inflateEnd(this);this.istate=null;return a};j.prototype.inflateSync=function(){return istate.inflateSync(this)};j.prototype.inflateSetDictionary=function(a,b){return istate.inflateSetDictionary(this,a,b)};g.prototype.inflateReset=function(a){if(null==a||null==a.istate)return-2;a.total_in=a.total_out=0;a.msg=null;a.istate.mode=0!=a.istate.nowrap?7:0;a.istate.blocks.reset(a,null);return 0};g.prototype.inflateEnd=function(a){null!=this.blocks&&this.blocks.free(a);this.blocks=
null;return 0};g.prototype.inflateInit=function(a,b){this.blocks=a.msg=null;0>b&&(b=-b);if(8>b||15<b)return this.inflateEnd(a),-2;this.wbits=b;a.istate.blocks=new i(a,0!=a.istate.nowrap?null:this,1<<b);this.inflateReset(a);return 0};g.prototype.inflate=function(a,b){var c,d;if(null==a||null==a.istate||null==a.next_in)return-2;b=4==b?-5:0;for(c=-5;;)switch(a.istate.mode){case 0:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;if(8!=((a.istate.method=a.next_in[a.next_in_index++])&15)){a.istate.mode=
13;a.msg="unknown compression method";a.istate.marker=5;break}if((a.istate.method>>4)+8>a.istate.wbits){a.istate.mode=13;a.msg="invalid window size";a.istate.marker=5;break}a.istate.mode=1;case 1:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;d=a.next_in[a.next_in_index++]&255;if(0!=((a.istate.method<<8)+d)%31){a.istate.mode=13;a.msg="incorrect header check";a.istate.marker=5;break}if(0==(d&32)){a.istate.mode=7;break}a.istate.mode=2;case 2:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;
a.istate.need=(a.next_in[a.next_in_index++]&255)<<24&4278190080;a.istate.mode=3;case 3:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<16&16711680;a.istate.mode=4;case 4:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<8&65280;a.istate.mode=5;case 5:if(0==a.avail_in)return c;a.avail_in--;a.total_in++;a.istate.need+=a.next_in[a.next_in_index++]&255;a.adler=a.istate.need;a.istate.mode=
6;return 2;case 6:return a.istate.mode=13,a.msg="need dictionary",a.istate.marker=0,-2;case 7:c=a.istate.blocks.proc(a,c);if(-3==c){a.istate.mode=13;a.istate.marker=0;break}0==c&&(c=b);if(1!=c)return c;c=b;a.istate.blocks.reset(a,a.istate.was);if(0!=a.istate.nowrap){a.istate.mode=12;break}a.istate.mode=8;case 8:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need=(a.next_in[a.next_in_index++]&255)<<24&4278190080;a.istate.mode=9;case 9:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;
a.istate.need+=(a.next_in[a.next_in_index++]&255)<<16&16711680;a.istate.mode=10;case 10:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<8&65280;a.istate.mode=11;case 11:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=a.next_in[a.next_in_index++]&255;if(a.istate.was[0]!=a.istate.need){a.istate.mode=13;a.msg="incorrect data check";a.istate.marker=5;break}a.istate.mode=12;case 12:return 1;case 13:return-3;default:return-2}};
g.prototype.inflateSetDictionary=function(a,c,d){var e=0,f=d;if(null==a||null==a.istate||6!=a.istate.mode)return-2;if(b(1,c,0,d)!=a.adler)return-3;a.adler=b(0,null,0,0);f>=1<<a.istate.wbits&&(f=(1<<a.istate.wbits)-1,e=d-f);a.istate.blocks.set_dictionary(c,e,f);a.istate.mode=7;return 0};var s=[0,0,255,255];g.prototype.inflateSync=function(a){var b,c,d;if(null==a||null==a.istate)return-2;if(13!=a.istate.mode)a.istate.mode=13,a.istate.marker=0;if(0==(b=a.avail_in))return-5;c=a.next_in_index;for(d=a.istate.marker;0!=
b&&4>d;)a.next_in[c]==s[d]?d++:d=0!=a.next_in[c]?0:4-d,c++,b--;a.total_in+=c-a.next_in_index;a.next_in_index=c;a.avail_in=b;a.istate.marker=d;if(4!=d)return-3;b=a.total_in;c=a.total_out;this.inflateReset(a);a.total_in=b;a.total_out=c;a.istate.mode=7;return 0};g.prototype.inflateSyncPoint=function(a){return null==a||null==a.istate||null==a.istate.blocks?-2:a.istate.blocks.sync_point()};var u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];i.prototype.reset=function(a,c){if(c)c[0]=this.check;6==this.mode&&
this.codes.free(a);this.mode=k;this.read=this.write=this.bitb=this.bitk=0;if(this.checkfn)this.check=b(0,null,0,0),a.adler=this.check};i.prototype.proc=function(b,c){var d,e,f,g,i,j,l;g=b.next_in_index;i=b.avail_in;e=this.bitb;f=this.bitk;j=this.write;for(l=j<this.read?this.read-j-1:this.end-j;;)switch(this.mode){case k:for(;3>f;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[g++]&
255)<<f;f+=8}d=e&7;this.last=d&1;switch(d>>>1){case 0:e>>>=3;f-=3;d=f&7;e>>>=d;f-=d;this.mode=1;break;case 1:var o=new Int32Array(1),n=new Int32Array(1),m=[],r=[];d=n;var s=m,v=r;o[0]=9;d[0]=5;s[0]=p;v[0]=q;this.codes.init(o[0],n[0],m[0],0,r[0],0,b);e>>>=3;f-=3;this.mode=6;break;case 2:e>>>=3;f-=3;this.mode=3;break;case 3:return e>>>=3,f-=3,this.mode=13,b.msg="invalid block type",c=-3,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,
c)}break;case 1:for(;32>f;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[g++]&255)<<f;f+=8}if((~e>>>16&65535)!=(e&65535))return this.mode=13,b.msg="invalid stored block lengths",c=-3,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);this.left=e&65535;e=f=0;this.mode=0!=this.left?2:0!=this.last?7:k;break;case 2:if(0==
i||0==l&&(j==end&&0!=read&&(j=0,l=j<this.read?this.read-j-1:this.end-j),0==l&&(this.write=j,c=this.inflate_flush(b,c),j=this.write,l=j<this.read?this.read-j-1:this.end-j,j==this.end&&0!=this.read&&(j=0,l=j<this.read?this.read-j-1:this.end-j),0==l)))return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);c=0;d=this.left;d>i&&(d=i);d>l&&(d=l);h(b.next_in,g,this.window,j,d);g+=d;i-=d;j+=d;l-=d;if(0!=(this.left-=d))break;this.mode=
0!=this.last?7:k;break;case 3:for(;14>f;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[g++]&255)<<f;f+=8}this.table=d=e&16383;if(29<(d&31)||29<(d>>5&31))return this.mode=9,b.msg="too many length or distance symbols",c=-3,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);d=258+(d&31)+(d>>5&31);if(null==this.blens||
this.blens.length<d)this.blens=new Int32Array(d);else for(l=0;l<d;l++)this.blens[l]=0;e>>>=14;f-=14;this.index=0;this.mode=4;case 4:for(;this.index<4+(this.table>>>10);){for(;3>f;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[g++]&255)<<f;f+=8}this.blens[u[this.index++]]=e&7;e>>>=3;f-=3}for(;19>this.index;)this.blens[u[this.index++]]=0;this.bb[0]=7;d=this.inftree.inflate_trees_bits(this.blens,
this.bb,this.tb,this.hufts,b);if(0!=d){c=d;if(-3==c)this.blens=null,this.mode=9;this.bitb=e;this.bitk=f;b.avail_in=i;b.total_in+=g-b.next_in_index;b.next_in_index=g;this.write=j;return this.inflate_flush(b,c)}this.index=0;this.mode=5;case 5:for(;;){d=this.table;if(!(this.index<258+(d&31)+(d>>5&31)))break;for(d=this.bb[0];f<d;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[g++]&255)<<
f;f+=8}d=this.hufts[3*(this.tb[0]+(e&a[d]))+1];n=this.hufts[3*(this.tb[0]+(e&a[d]))+2];if(16>n)e>>>=d,f-=d,this.blens[this.index++]=n;else{l=18==n?7:n-14;for(o=18==n?11:3;f<d+l;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[g++]&255)<<f;f+=8}e>>>=d;f-=d;o+=e&a[l];e>>>=l;f-=l;l=this.index;d=this.table;if(l+o>258+(d&31)+(d>>5&31)||16==n&&1>l)return this.blens=null,this.mode=9,b.msg=
"invalid bit length repeat",c=-3,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);n=16==n?this.blens[l-1]:0;do this.blens[l++]=n;while(0!=--o);this.index=l}}this.tb[0]=-1;o=new Int32Array(1);n=new Int32Array(1);m=new Int32Array(1);r=new Int32Array(1);o[0]=9;n[0]=6;d=this.table;d=this.inftree.inflate_trees_dynamic(257+(d&31),1+(d>>5&31),this.blens,o,n,m,r,this.hufts,b);if(0!=d){if(-3==d)this.blens=null,this.mode=13;c=d;this.bitb=
e;this.bitk=f;b.avail_in=i;b.total_in+=g-b.next_in_index;b.next_in_index=g;this.write=j;return this.inflate_flush(b,c)}this.codes.init(o[0],n[0],this.hufts,m[0],this.hufts,r[0],b);this.mode=6;case 6:this.bitb=e;this.bitk=f;b.avail_in=i;b.total_in+=g-b.next_in_index;b.next_in_index=g;this.write=j;if(1!=(c=this.codes.proc(this,b,c)))return this.inflate_flush(b,c);c=0;this.codes.free(b);g=b.next_in_index;i=b.avail_in;e=this.bitb;f=this.bitk;j=this.write;l=j<this.read?this.read-j-1:this.end-j;if(0==this.last){this.mode=
k;break}this.mode=7;case 7:this.write=j;c=this.inflate_flush(b,c);j=this.write;if(this.read!=this.write)return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);this.mode=12;case 8:return c=1,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);case 9:return c=-3,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=
j,this.inflate_flush(b,c);default:return c=-2,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c)}};i.prototype.free=function(a){this.reset(a,null);this.hufts=this.window=null};i.prototype.set_dictionary=function(a,b,c){h(a,b,this.window,0,c);this.read=this.write=c};i.prototype.sync_point=function(){return 1==this.mode};i.prototype.inflate_flush=function(a,c){var d,e,f;e=a.next_out_index;f=this.read;d=(f<=this.write?this.write:
this.end)-f;if(d>a.avail_out)d=a.avail_out;0!=d&&-5==c&&(c=0);a.avail_out-=d;a.total_out+=d;if(null!=this.checkfn)this.check=b(this.check,this.window,f,d),a.adler=this.check;h(this.window,f,a.next_out,e,d);e+=d;f+=d;if(f==this.end){f=0;if(this.write==this.end)this.write=0;d=this.write-f;if(d>a.avail_out)d=a.avail_out;0!=d&&-5==c&&(c=0);a.avail_out-=d;a.total_out+=d;if(null!=this.checkfn)this.check=b(this.check,this.window,f,d),a.adler=this.check;h(this.window,f,a.next_out,e,d);e+=d;f+=d}a.next_out_index=
e;this.read=f;return c};f.prototype.init=function(a,b,c,d,e,f){this.mode=0;this.lbits=a;this.dbits=b;this.ltree=c;this.ltree_index=d;this.dtree=e;this.dtree_index=f;this.tree=null};f.prototype.proc=function(b,c,d){var e,f,g=0,h=0,i=0,j,k,l,i=c.next_in_index;j=c.avail_in;g=b.bitb;h=b.bitk;k=b.write;for(l=k<b.read?b.read-k-1:b.end-k;;)switch(this.mode){case 0:if(258<=l&&10<=j&&(b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,d=this.inflate_fast(this.lbits,this.dbits,
this.ltree,this.ltree_index,this.dtree,this.dtree_index,b,c),i=c.next_in_index,j=c.avail_in,g=b.bitb,h=b.bitk,k=b.write,l=k<b.read?b.read-k-1:b.end-k,0!=d)){this.mode=1==d?7:9;break}this.need=this.lbits;this.tree=this.ltree;this.tree_index=this.ltree_index;this.mode=1;case 1:for(e=this.need;h<e;){if(0!=j)d=0;else return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);j--;g|=(c.next_in[i++]&255)<<h;h+=8}e=3*(this.tree_index+(g&a[e]));g>>>=
this.tree[e+1];h-=this.tree[e+1];f=this.tree[e];if(0==f){this.lit=this.tree[e+2];this.mode=6;break}if(0!=(f&16)){this.get=f&15;this.len=this.tree[e+2];this.mode=2;break}if(0==(f&64)){this.need=f;this.tree_index=e/3+this.tree[e+2];break}if(0!=(f&32)){this.mode=7;break}this.mode=9;c.msg="invalid literal/length code";d=-3;b.bitb=g;b.bitk=h;c.avail_in=j;c.total_in+=i-c.next_in_index;c.next_in_index=i;b.write=k;return b.inflate_flush(c,d);case 2:for(e=this.get;h<e;){if(0!=j)d=0;else return b.bitb=g,b.bitk=
h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);j--;g|=(c.next_in[i++]&255)<<h;h+=8}this.len+=g&a[e];g>>=e;h-=e;this.need=this.dbits;this.tree=this.dtree;this.tree_index=this.dtree_index;this.mode=3;case 3:for(e=this.need;h<e;){if(0!=j)d=0;else return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);j--;g|=(c.next_in[i++]&255)<<h;h+=8}e=3*(this.tree_index+(g&a[e]));g>>=this.tree[e+1];h-=this.tree[e+
1];f=this.tree[e];if(0!=(f&16)){this.get=f&15;this.dist=this.tree[e+2];this.mode=4;break}if(0==(f&64)){this.need=f;this.tree_index=e/3+this.tree[e+2];break}this.mode=9;c.msg="invalid distance code";d=-3;b.bitb=g;b.bitk=h;c.avail_in=j;c.total_in+=i-c.next_in_index;c.next_in_index=i;b.write=k;return b.inflate_flush(c,d);case 4:for(e=this.get;h<e;){if(0!=j)d=0;else return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);j--;g|=(c.next_in[i++]&
255)<<h;h+=8}this.dist+=g&a[e];g>>=e;h-=e;this.mode=5;case 5:for(e=k-this.dist;0>e;)e+=b.end;for(;0!=this.len;){if(0==l&&(k==b.end&&0!=b.read&&(k=0,l=k<b.read?b.read-k-1:b.end-k),0==l&&(b.write=k,d=b.inflate_flush(c,d),k=b.write,l=k<b.read?b.read-k-1:b.end-k,k==b.end&&0!=b.read&&(k=0,l=k<b.read?b.read-k-1:b.end-k),0==l)))return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);b.window[k++]=b.window[e++];l--;e==b.end&&(e=0);this.len--}this.mode=
0;break;case 6:if(0==l&&(k==b.end&&0!=b.read&&(k=0,l=k<b.read?b.read-k-1:b.end-k),0==l&&(b.write=k,d=b.inflate_flush(c,d),k=b.write,l=k<b.read?b.read-k-1:b.end-k,k==b.end&&0!=b.read&&(k=0,l=k<b.read?b.read-k-1:b.end-k),0==l)))return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);d=0;b.window[k++]=this.lit;l--;this.mode=0;break;case 7:7<h&&(h-=8,j++,i--);b.write=k;d=b.inflate_flush(c,d);k=b.write;if(b.read!=b.write)return b.bitb=g,b.bitk=
h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);this.mode=8;case 8:return d=1,b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);case 9:return d=-3,b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);default:return d=-2,b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d)}};f.prototype.free=
function(){};f.prototype.inflate_fast=function(b,c,d,e,f,g,i,j){var k,l,o,n,m,p,q,r,s,v,u,D;p=j.next_in_index;q=j.avail_in;n=i.bitb;m=i.bitk;r=i.write;s=r<i.read?i.read-r-1:i.end-r;b=a[b];v=a[c];do{for(;20>m;)q--,n|=(j.next_in[p++]&255)<<m,m+=8;k=n&b;l=d;o=e;D=3*(o+k);if(0==(c=l[D]))n>>=l[D+1],m-=l[D+1],i.window[r++]=l[D+2],s--;else{do{n>>=l[D+1];m-=l[D+1];if(0!=(c&16)){c&=15;u=l[D+2]+(n&a[c]);n>>=c;for(m-=c;15>m;)q--,n|=(j.next_in[p++]&255)<<m,m+=8;k=n&v;l=f;o=g;D=3*(o+k);c=l[D];do if(n>>=l[D+1],
m-=l[D+1],0!=(c&16)){for(c&=15;m<c;)q--,n|=(j.next_in[p++]&255)<<m,m+=8;k=l[D+2]+(n&a[c]);n>>=c;m-=c;s-=u;if(r>=k)k=r-k,i.window[r++]=i.window[k++],i.window[r++]=i.window[k++],u-=2;else{k=r-k;do k+=i.end;while(0>k);c=i.end-k;if(u>c){u-=c;if(0<r-k&&c>r-k){do i.window[r++]=i.window[k++];while(0!=--c)}else h(i.window,k,i.window,r,c),r+=c;k=0}}do i.window[r++]=i.window[k++];while(0!=--u);break}else if(0==(c&64))k+=l[D+2],k+=n&a[c],D=3*(o+k),c=l[D];else return j.msg="invalid distance code",u=j.avail_in-
q,u=m>>3<u?m>>3:u,q+=u,p-=u,m-=u<<3,i.bitb=n,i.bitk=m,j.avail_in=q,j.total_in+=p-j.next_in_index,j.next_in_index=p,i.write=r,-3;while(1);break}if(0==(c&64)){if(k+=l[D+2],k+=n&a[c],D=3*(o+k),0==(c=l[D])){n>>=l[D+1];m-=l[D+1];i.window[r++]=l[D+2];s--;break}}else{if(0!=(c&32))return u=j.avail_in-q,u=m>>3<u?m>>3:u,q+=u,p-=u,m-=u<<3,i.bitb=n,i.bitk=m,j.avail_in=q,j.total_in+=p-j.next_in_index,j.next_in_index=p,i.write=r,1;j.msg="invalid literal/length code";u=j.avail_in-q;u=m>>3<u?m>>3:u;q+=u;p-=u;m-=
u<<3;i.bitb=n;i.bitk=m;j.avail_in=q;j.total_in+=p-j.next_in_index;j.next_in_index=p;i.write=r;return-3}}while(1)}}while(258<=s&&10<=q);u=j.avail_in-q;u=m>>3<u?m>>3:u;p-=u;i.bitb=n;i.bitk=m-(u<<3);j.avail_in=q+u;j.total_in+=p-j.next_in_index;j.next_in_index=p;i.write=r;return 0};d.prototype.huft_build=function(a,b,c,d,f,g,i,j,k,l,o){var n,m,p,q,r,s,u,v,D;s=0;m=c;do this.c[a[b+s]]++,s++,m--;while(0!=m);if(this.c[0]==c)return i[0]=-1,j[0]=0;r=j[0];for(p=1;15>=p&&!(0!=this.c[p]);p++);q=p;r<p&&(r=p);for(m=
15;0!=m&&!(0!=this.c[m]);m--);l=m;r>m&&(r=m);j[0]=r;for(j=1<<p;p<m;p++,j<<=1)if(0>(j-=this.c[p]))return-3;if(0>(j-=this.c[m]))return-3;this.c[m]+=j;this.x[1]=p=0;s=1;for(u=2;0!=--m;)this.x[u]=p+=this.c[s],u++,s++;s=m=0;do{if(0!=(p=a[b+s]))this.v[this.x[p]++]=m;s++}while(++m<c);c=this.x[l];s=this.x[0]=m=0;b=-1;v=-r;for(D=u=this.u[0]=0;q<=l;q++)for(a=this.c[q];0!=a--;){for(;q>v+r;){b++;v+=r;D=l-v;D=D>r?r:D;if((n=1<<(p=q-v))>a+1)if(n-=a+1,u=q,p<D)for(;++p<D&&!((n<<=1)<=this.c[++u]);)n-=this.c[u];D=1<<
p;if(this.hn[0]+D>e)return-3;this.u[b]=u=this.hn[0];this.hn[0]+=D;0!=b?(this.x[b]=m,this.r[0]=p,this.r[1]=r,p=m>>>v-r,this.r[2]=u-this.u[b-1]-p,h(this.r,0,k,3*(this.u[b-1]+p),3)):i[0]=u}this.r[1]=q-v;s>=c?this.r[0]=192:o[s]<d?(this.r[0]=256>this.v[s]?0:96,this.r[2]=this.v[s++]):(this.r[0]=g[this.v[s]-d]+16+64,this.r[2]=f[this.v[s++]-d]);n=1<<q-v;for(p=m>>>v;p<D;p+=n)h(this.r,0,k,3*(u+p),3);for(p=1<<q-1;0!=(m&p);p>>>=1)m^=p;m^=p;for(p=(1<<v)-1;(m&p)!=this.x[b];)b--,v-=r,p=(1<<v)-1}return 0!=j&&1!=
l?-5:0};d.prototype.inflate_trees_bits=function(a,b,c,d,e){this.initWorkArea(19);this.hn[0]=0;a=this.huft_build(a,0,19,19,null,null,c,b,d,this.hn,this.v);if(-3==a)e.msg="oversubscribed dynamic bit lengths tree";else if(-5==a||0==b[0])e.msg="incomplete dynamic bit lengths tree",a=-3;return a};d.prototype.inflate_trees_dynamic=function(a,b,c,d,e,f,g,h,i){this.initWorkArea(288);this.hn[0]=0;f=this.huft_build(c,0,a,257,m,o,f,d,h,this.hn,this.v);if(0!=f||0==d[0]){if(-3==f)i.msg="oversubscribed literal/length tree";
else if(-4!=f)i.msg="incomplete literal/length tree",f=-3;return f}this.initWorkArea(288);f=this.huft_build(c,a,b,0,l,n,g,e,h,this.hn,this.v);if(0!=f||0==e[0]&&257<a){if(-3==f)i.msg="oversubscribed distance tree";else if(-5==f)i.msg="incomplete distance tree",f=-3;else if(-4!=f)i.msg="empty distance tree with lengths",f=-3;return f}return 0};d.prototype.initWorkArea=function(a){var b;if(null==this.hn)this.hn=new Int32Array(1),this.v=new Int32Array(a),this.c=new Int32Array(16),this.r=new Int32Array(3),
this.u=new Int32Array(15),this.x=new Int32Array(16);if(this.v.length<a)this.v=new Int32Array(a);for(b=0;b<a;b++)this.v[b]=0;for(b=0;16>b;b++)this.c[b]=0;for(b=0;3>b;b++)this.r[b]=0;h(this.c,0,this.u,0,15);h(this.c,0,this.x,0,16)};var r=65521,v=5552;return function(a,b,d,e){a=b?new Uint8Array(a,b,d):new Uint8Array(a);d=new j;d.inflateInit(15,!0);d.next_in=a;d.next_in_index=0;d.avail_in=a.length;for(var a=[],f=0;;){var g=new Uint8Array(32E3);d.next_out=g;d.next_out_index=0;d.avail_out=g.length;var i=
d.inflate(0);if(0!=i&&1!=i)throw a=d.msg?"object"==typeof d.msg?d.msg:"string"==typeof d.msg?Error(d.msg):Error('Unknown error in inflate: msg="'+d.msg+'", status="'+c[i]||i+'"'):Error('Inflate error, status="'+c[i]||i+'")'),a.statusCode=i,a.statusString=c[i],a;if(0!=d.avail_out){var k=new Uint8Array(g.length-d.avail_out);h(g,0,k,0,g.length-d.avail_out);g=k}a.push(g);f+=g.length;if(1==i)break}e&&(e[0]=(b||0)+d.next_in_index);if(1==a.length)return a[0].buffer;b=new Uint8Array(f);for(d=e=0;d<a.length;++d)i=
a[d],h(i,0,b,e,i.length),e+=i.length;return b.buffer}})},"*now":function(h){h(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});(function(){var h=this.require;h({cache:{}});!h.async&&h(["dojo"]);h.boot&&h.apply(null,h.boot)})();