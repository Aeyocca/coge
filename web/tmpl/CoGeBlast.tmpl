<TMPL_IF NAME="JAVASCRIPT">
<link rel="stylesheet" type="text/css" href="/CoGe/css/ui.tabs.css" />
<SCRIPT language="JavaScript" type="text/javascript" src="./js/jquery.tablesorter.2.0.1.js"></SCRIPT>
<SCRIPT language="JavaScript" type="text/javascript" src="./js/ui.tabs.js"></SCRIPT>
<!--<SCRIPT language="JavaScript" type="text/javascript" src="./js/jquery.tablesorter.parsers.js"></SCRIPT>-->
<!--<SCRIPT language="JavaScript" type="text/javascript" src="./js/metadata.js"></SCRIPT>-->
<!--<SCRIPT language="JavaScript" type="text/javascript" src="./js/menu.js"></SCRIPT>-->
<SCRIPT language="JavaScript">

$(document).ready(function(){
  display_correct_radio($('#cn').is(':checked'));
  blast_param_on_select('cn','coge');
  blast_param([],[animate_params]);
  database_param([],['database']);
  
  //Object Generation
  var seqview = <TMPL_VAR NAME=SEQVIEW> || 0;
  if(seqview !=0){
    var featid = <TMPL_VAR NAME=FEATID>;
    if ((featid) && (featid!=0)){
      seqObj = new generate_seq_obj(<TMPL_VAR NAME=DSID>,<TMPL_VAR NAME=UPSTREAM>,<TMPL_VAR NAME=DOWNSTREAM>,seqview,'<TMPL_VAR NAME=CHR>',<TMPL_VAR NAME=RC>,featid);
    }
    else{
      seqObj = new generate_seq_obj(<TMPL_VAR NAME=DSID>,<TMPL_VAR NAME=UPSTREAM>,<TMPL_VAR NAME=DOWNSTREAM>,seqview,'<TMPL_VAR NAME=CHR>',<TMPL_VAR NAME=RC>);
    }
  }
  //TODO - handle js object error when checking for value when it hasn't been instantiated
  else{
    seqObj = new Object();
  }
  get_displayFeature();
  //alert(seqObj.dsid);
  //alert(seqObj.chr);
  //alert(seqObj.featid);
});

function update_info_box(featid) {
 var table_width = $('#overlap').width();
 $('#overlap_box').width(table_width);
 //if(pageObj.highlight)
 //{
 //  $('#'+pageObj.highlight).removeClass('highlight');
// }
 //$('#'+featid).addClass('highlight');
 //pageObj.highlight = featid;
 //alert(table_width);
 if ($('#overlap_box').is(':hidden')) $('#overlap_box').slideDown(pageObj.speed);
  generate_feat_info(['args__'+featid],['overlap_box']);
 
}

$(document).ready(function(){
  $("#tab > ul").tabs();
});

function update_hsp_info (featid) {
 hide_big_picture();
 show_hsp_div();
 loading('image_info','Information');
 loading('query_image','Image');
 loading('subject_image','Image');
 get_hsp_info(['args__blastfile','args__'+pageObj.basename,'args__num','args__'+featid],['image_info','query_image','subject_image']);
}

function show_hsp_div() {
  if( $('#result_visual').is(':hidden') == true) $('#result_visual').show(0);
}

function add_to_list(ds,org){
  var check = $('#'+ds).val();
  if (check){
   alert('You have already added '+org+'.');
   return;
  }
  var html = '<option id='+ds+' value='+ds+'>'+org+'</option>';
  //alert(html);
  $('#blank').remove();
  $('#db_choice').append(html).sortSelect();
  counting();
}

function loading(id,msg) {
  var message = '<font class="loading">Loading '+msg+' . . .</font>';
  $('#'+id).html(message);
}

function fill_nearby_feats(id) {
 var table_width = $('#overlap').width() || 300;
 $('#overlap_box').width(table_width);
 if ($('#overlap_box').is(':hidden')) $('#overlap_box').slideDown(pageObj.speed);
 get_nearby_feats(['args__basefile','args__'+pageObj.basename,'args__num','args__'+id],['overlap_box','feat'+id,'checkbox'+id,'dist'+id]);
}


function overlap_checkboxes() {
  var action = $('#overlap_action').val();
  var accn = $('#feature_list').getCheckboxes();
  //if ($('#no_feat_checkbox').is(':checked')) {
 //   accn = accn + $('#no_feat_checkbox').val()+",";
 // }
  //alert(accn);
  if (accn == ",") {
    alert("You have not checked any features.");
    return;
  }
  if(action == "gevo") {
    overlap_feats_parse(['args__'+accn],[send_to_gevo]);
  }
  else if (action == "fasta"){
    export_fasta_file(['args__'+accn,'args__'+pageObj.basename],[export_file]);
  }
  else if (action == "xls"){
    generate_excel_feature_file(['args__'+accn,'args__'+pageObj.basename],[export_file]);
  }
  else if(action == "tab"){
    generate_tab_deliminated(['args__'+accn,'args__'+pageObj.basename],[export_file]);
  }
  else if(action == "list"){
    generate_feat_list(['args__'+accn,'args__'+pageObj.basename],[export_file]);
  }
  else {
    alert("We will get this working ... soon.");
  }
}

function export_file(dir) {
  window.open(dir);
}

function send_to_gevo(url,num_accns) {
  if (url == "alert") {
    var remove = num_accns - 10;
    alert("You have exceeded the number of features you can send to GEvo ( 10 Max ). You currently have "+num_accns+" selected. Please uncheck "+remove+" of your checked item(s).");
  }
  else {
    window.open(url);
  }
}

jQuery.fn.getCheckboxes = function()
{
	var str = ",";
	this.each(
			function()
			{
				jQuery("input[@type=checkbox]",this).each(
					function() {
					  //alert(this.value);
					  if (this.checked == true) str = str + this.value +",";
					}
				);
			}
		);
	return str;
};

jQuery.fn.checkCheckboxes = function()
{
	//var returnWhat = jQuery([]);
	this.each(
		function()
		{
			jQuery("input[@type=checkbox]", this).each(
				function()
				{
					this.checked = true;
				}
			);
			//returnWhat = checked;
		}
	);
	//returnWhat = this;
};


jQuery.fn.unCheckCheckboxes = function()
{
	//var returnWhat = jQuery([]);
	this.each(
		function()
		{
			jQuery("input[@type=checkbox]", this).each(
				function()
				{
					this.checked = false;
				}
			).filter(":not(:checked)");
		}
	);
};

jQuery.fn.selectOptions = function(index) {
  this.each(
  	function() {
  		var opts = this.options;
  		opts[index].selected = true;
  	}	
  );	
  return this;
};


function enlarge_picture_window(id) {
  var window_width = $(window).width();
  //alert(window_width);
  var image_width = pageObj.image_width || 800;
  //alert(image_width);
  var left_padding;
  if ((window_width - image_width) <= 0) {
    left_padding = 4;
  }
  else {
    left_padding = ((window_width - image_width)/2);
  }
  //alert(image_width);
  //alert(window_width);
 // alert($(window).width());
  //alert(left_padding);
  var html = "<a href='#' onClick=\"$('#big_picture').slideToggle(pageObj.speed);$('#overlap_body').css('overflow','auto');\" style='float: right;'><img src='/CoGe/picts/delete.png' width='16' height='16' border='0'></a>";
  html = html + $('#large_db'+id).html();
  html = html+'<br>'+$('#large_pic'+id).html();
  
  $('#overlap_body').css("overflow","hidden");
  $('#big_picture').html(html).css("left",''+left_padding).width(image_width).slideDown(pageObj.speed);
}
  
function show_seq(seq,name,num,dsid,chr,start,stop) {
  if (num == 1) which_seq = "Query";
  else if (num == 2) which_seq = "Subject";
  else which_seq = "Alignment";
  //alert(seqObj.dsid);
  //alert(seqObj.chr);
  if (seqObj){
    if (dsid == "seqObj") dsid = seqObj.dsid;
    if (chr == "seqObj") chr = seqObj.chr;
  } 
  var html = "<a href='#' onClick=\"$('#sequence_popup').slideToggle(pageObj.speed);\" style='float: right;'><img src='/CoGe/picts/delete.png' width='16' height='16' border='0'></a>";
  html = html + "<TABLE width=100%><TR><TD valign='top' align='right'>"+which_seq+" Name: </TD><TD align=justify>"+name+"</TD></TR>";
  
  //*1 to make sure js sees integer
  if (stop*1 > start*1) { 
    html = html + "<TR><TD valign='top' align='right'>"+which_seq+" Position: </TD><TD align=justify><pre>"+start+"-"+stop+"</pre></TD></TR>";
  }
  
  html = html + "<TR><TD valign='top' align='right'>"+which_seq+" Sequence: </TD><TD align=justify>"+seq+"</TD></TR></TABLE>";
  
  //check to see if SeqView is an option, then display link
  var regex = /^\d+$/;
  if (regex.test(dsid) && dsid != 0 && which_seq == "Subject") {
    html = html + "<br><a target='_blank' href='/CoGe/SeqView.pl?dsid="+dsid+"&chr="+chr+"&start="+start+"&stop="+stop+"'>Click to view sequence in SeqView</a>";
  }
  var window_width = $(document).width();
  var left_padding;
  var info_width = 800;
  if ((window_width - info_width) <= 0) {
    left_padding = 4;
  }
  else {
    left_padding = ((window_width - info_width)/2);
  }
  //$('#overlap_body').css("overflow","hidden");
  $('#sequence_popup').html(html).css("left",''+left_padding).width(info_width).slideDown(pageObj.speed);
  if ($('#sequence_popup').height() >= $(document).height() - 40) {
    $('#sequence_popup').css("height",''+$(document).height() - 40);
  }
} 

function generate_seq_obj(dsid,upstream,downstream,seqview,chr,rc,featid){
 // alert(dsid+','+upstream+','+downstream+','+seqview+','+chr+','+rc+','+featid);
  this.featid=featid;
  //alert(seqObj.featid);
  this.dsid=dsid;
  this.upstream=upstream;
  this.downstream=downstream;
  this.seqview=seqview;
  this.chr=chr;
  this.rc=rc;
}

function counting(){
  var count = $('#db_choice').getLength();
  if (count == 0) {$('#db_choice').html('<option id=blank value=null>No Database Selected</option>');}
  $('.count').html('Database count: '+count);
}

function blastOff(){
  var check = $('#db_choice').getLength();
  if(($('#blank').val())||(check==0)){
    alert('You have not selected any databases to blast. You must select at least one.');
    $('#coge_blast').slideDown(pageObj.speed);
    return;
  }

  var params = get_params();

  $('.bresults').slideToggle(pageObj.speed);
  $('#blast_results').html('<font class="loading dna">Loading. . .</font>');

  program = params.p;
  expect = params.e;
  job_title = params.j;
  word_size = params.w;
  comp = params.c;
  matrix = params.m
  match_score = params.mm;
  gapcost = params.g;
  seq = params.s;
//  hsp_type = $('#hsp_type').val();
  var page_width = ($('#co').width())*(95/100);
  pageObj.image_width = page_width;
  var blastable_db = $('#db_choice').getLength(1);
//  blastoff_search(['args__program','args__'+program,'args__expect','args__'+expect,'args__job_title','args__'+job_title,'args__wordsize','args__'+word_size,'args__comp','args__'+comp,'args__matrix','args__'+matrix,'args__matchscore','args__'+match_score,'args__gapcost','args__'+gapcost,'args__seq','args__'+seq,'args__blastable','args__'+blastable_db,'args__width','args__'+page_width,'args__type','args__'+hsp_type],[blastresults],'POST');
  blastoff_search(['args__program','args__'+program,'args__expect','args__'+expect,'args__job_title','args__'+job_title,'args__wordsize','args__'+word_size,'args__comp','args__'+comp,'args__matrix','args__'+matrix,'args__matchscore','args__'+match_score,'args__gapcost','args__'+gapcost,'args__seq','args__'+seq,'args__blastable','args__'+blastable_db,'args__width','args__'+page_width],[blastresults],'POST');
  
}

function blastresults(html,basename){
  pageObj.basename = basename;
  //alert(pageObj.basename);
  $('#blast_results').html(html);
  if($('#null').html() == "null") {
    //$('#null').hide(0);
   // $('#table_size').remove().html("No Overlapping Features");
    $('#result_features').hide();
    return;
  }
  else {
  var overlap_height = $('#overlap_body').height();
  var overlap_max = 300;
  if (overlap_height > overlap_max) $('#overlap_body').height(overlap_max);
 		
// 		var select_index = $('#hsp_type')[0].selectedIndex;
// 		$('#color_hsp').selectOptions(select_index);
  
/*  var myTextExtraction = function(node)  
  {  
    // extract data from markup and return it  
    return node.childNodes[0].childNodes[0].innerHTML; 
  } */ 
  $(function(){
  $("#overlap").tablesorter({		
// 		sortColumn: 'Name',			// Integer or String of the name of the column to sort by.
		sortClassAsc: 'headerSortUp',		// Class name for ascending sorting action to header
		sortClassDesc: 'headerSortDown',	// Class name for descending sorting action to header
		headerClass: 'header',			// Class name for headers (th's)
		widgets: ['zebra'],
		textExtraction: 'complex',
		});
 });
 
 $(function(){
 $("#no_table").tablesorter({		
// 		sortColumn: 'Org',			// Integer or String of the name of the column to sort by.
		sortClassAsc: 'headerSortUp',		// Class name for ascending sorting action to header
		sortClassDesc: 'headerSortDown',	// Class name for descending sorting action to header
		headerClass: 'header',			// Class name for headers (th's)
		widgets: ['zebra'],
		textExtraction: 'complex',
		});
 });
 }
}

function update_gapcost(pro) {
    $('.gapcosts').hide();
    if(pro)
    {
      var val = $('#matrix').val();
      $('#gapcosts_'+val).slideToggle(pageObj.speed);
    }
    else
    {
      var str = $('#match_score').val();
      var num1 = str.substr(0,1);
      var num2 = str.substr(2);
      $('#gapcosts_'+num1+num2).slideToggle(pageObj.speed);
    }
}

function update_gapcost_ncbi(pro) {
    $('.ncbi_gapcosts').hide();
    if(pro)
    {
      var val = $('#ncbi_matrix').val();
      $('#ncbi_gapcosts_'+val).slideToggle(pageObj.speed);
    }
    else
    {
      var str = $('#ncbi_match_score').val();
      var num1 = str.substr(0,1);
      var num2 = str.substr(2);
       $('#ncbi_gapcosts_'+num1+num2).slideToggle(pageObj.speed);
    }
}

$.fn.getLength = function(val){
  var opt_length;
  var blastable;
  this.each(
  	function()
  	{
  		var opts = this.options;
  		opt_length = opts.length;
  		if (opt_length == 0) {return opt_length;}
  		blastable = opts[0].id;
  		if (val){
  		  for(var i=1;i<opts.length;i++)
	  	  {
	  		blastable += ","+opts[i].id;
	  		//need to chopoff last comma
	  	  }
  		}
  	}
  );
  if(val) return blastable;
  else return opt_length;
};

$.fn.sortSelect = function(){
  this.each(
	  function()
	  {
	  	if(this.nodeName.toLowerCase() != "select"){
	  	  return;}
	  	var opts = this.options;
	  	var sortArray = [];
	  	for(var i=0;i<opts.length;i++)
	  	{
	  		sortArray[i] = {
	  				v: opts[i].value,
	  				t: opts[i].text,
	  				d: opts[i].id,
	  				}
	  	}
	  	sortArray.sort(
	  			function(obj1,obj2)
	  			{
	  				obj1t = obj1.t.toLowerCase(),
	  				obj2t = obj2.t.toLowerCase();
	  				if(obj1t == obj2t){
	  				  return 0;}
	  				return obj1t < obj2t ? -1 : 1;
	  			}
	  	);
	  	for(var i=0;i<opts.length;i++)
	  	{
	  		opts[i].id = sortArray[i].d;
	  		opts[i].text = sortArray[i].t;
	  		opts[i].value = sortArray[i].v;
	  	}
	  }
	);
	return this;
};


function get_params(){
 radio = get_radio("cn","coge");
 var word_size = $('#word_size').val();
 var expect = $('#e_value').val();
 var match_mismatch = $('#match_score').val();
 var gapcost;
 var matrix = $('#matrix').val();
 if ($('#cn').is(':checked'))
  {
    var num1 = match_mismatch.substr(0,1);
    var num2 = match_mismatch.substr(2);
    gapcost = $('#gapcosts_'+num1+num2).val();
  }
 else
  {
    gapcost = $('#gapcosts_'+matrix).val();
  }
 var program = $('#'+radio).val();


 var comp = $('#comp_adj').val();
 var seq = $('#seq_box').val();
 return {w : word_size, e : expect,g : gapcost,p : program,mm: match_mismatch,m : matrix,c : comp,s : seq};
}

function get_ncbi_params(){
 radio = get_radio("bn","ncbi");
 var word_size = $('#ncbi_word_size').val();
 var expect = $('#ncbi_e_value').val();
 var db = $('#ncbi_db').val();
 var match_mismatch = $('#ncbi_match_score').val();
 if (match_mismatch)
  {
    var num1 = match_mismatch.substr(0,1);
    var num2 = match_mismatch.substr(2);
  }
 var gapcost = $('#ncbi_gapcosts_'+num1+num2).val();
 var job_title = $('#job_title').val();
 var program = $('#'+radio).val();

 var matrix = $('#ncbi_matrix').val();
 var comp = $('#ncbi_comp_adj').val();
 var seq = $('#seq_box').val();
 return {w : word_size, e : expect, db : db,g : gapcost,j : job_title,p : program,mm: match_mismatch,m : matrix,c : comp,s : seq};
}

function ncbi_blast(url) {
 if (url == 1)
  {alert('You have not selected a BLAST program! Please select a program to run.');}
 else {
   var params = get_ncbi_params();
   seq = params.s;
   seq = seq.replace(/\n/,'%0D');
 //alert('seq: '+seq);
   db = params.db;
   expect = params.e;
   job_title = params.j;
   word_size = params.w;
   comp = params.c;
   matrix = params.m
   match_score = params.mm;
 
   url = url+'&DATABASE='+db+'&EXPECT='+expect+'&QUERY='+seq+'&JOB_TITLE='+job_title+'&WORD_SIZE='+word_size;
 
   if (program == 'blastn') {
     window.open(url+'&MATCH_SCORES='+match_score);
   }

   else {
     if ($('#comp_adj').is(':hidden')) {window.open(url+'&MATRIX_NAME='+matrix);}
     else {window.open(url+'&MATRIX_NAME='+matrix+'&COMPOSITION_BASED_STATISTICS='+comp);}
   }
 }
}

function display_correct_radio(display,val) {
  if (display == false) {
    $("#"+val+"_select_n").hide(0);
    $("#"+val+"_select_p").slideDown(pageObj.speed);
  }
  else {
    $("#"+val+"_select_p").hide(0);
    $("#"+val+"_select_n").slideDown(pageObj.speed);
  }
}

function hide_big_picture() {
  if ($('#big_picture').is(':hidden') == false) $('#big_picture').slideToggle(pageObj.speed);
}

function select_blast() {
  var radio = get_radio('bn','ncbi');
  //alert(radio);
  get_url([radio],[ncbi_blast]);
}

function get_radio(which_type,val){
  var radio = $('#'+which_type)[0].checked;
  if (radio == true){
   radio = val+"_blast_type_n";}
  else{
   radio = val+"_blast_type_p";}
  return radio;
}

function get_seq(which_type) {
 dsid = seqObj.dsid;
 featid = seqObj.featid;
 chr = seqObj.chr;
// radio2 = kaj.GS('bn');
// alert('bn');
 if (featid) {
   get_sequence(['args__'+featid,'args__'+dsid,which_type, 'args__'+seqObj.seqview, 'args__'+seqObj.upstream,'args__'+seqObj.downstream,'args__'+seqObj.rc],['seq_box']);
 }
 else if (chr) {
   get_sequence(['args__'+chr,'args__'+dsid,which_type, 'args__'+seqObj.seqview, 'args__'+seqObj.upstream,'args__'+seqObj.downstream],['seq_box']);
 }
 else {
// alert('Im being called!'+accn+dsid+type_name);
  return;
 }
}

function blast_param_on_select(which_type,val) {
 radio = get_radio(which_type,val);
 program = $('#'+radio).val();
 //alert(''+program);
 database_param([radio],['database']);
 
 if ((program == 'blastx') || (program == 'tblastx')) {
 //alert('Program is true!');
  blast_param(['args__blast_type','args__'+"blast_type_p",'args__translate','args__1','args__version','args__'+which_type],[animate_params]);
  $('#word_size').val(3);
 }
 else if ((program == 'blastp') || (program == 'tblastn')) {
  blast_param(['args__blast_type','args__'+"blast_type_p",'args__version','args__'+which_type],[animate_params]);
  $('#word_size').val(3);
 }
 else {
   blast_param(['args__version','args__'+which_type],[animate_params]);
  $('#word_size').val(8);
 }
}

function animate_params (html,version,pro){
  if(version == "cn") {
      $('#pro_or_nu_param').hide(0).html(html).slideDown(pageObj.speed);
      update_gapcost(pro);
  }
  else{
      $('#ncbi_pro_or_nu_param').hide(0).html(html).slideDown(pageObj.speed);
      update_gapcost_ncbi(pro);
  }
}

function get_displayFeature(){
 if (!$('#feature_display').val()){
  return;
 }
 var stuff = $('#pretty_print_anno').html();
 var check = 0;
 if ($('#feature_display')[0].checked) {
  check = 1;
 }
 if (stuff){
  toggleFeature("",check);
 }
 else if (check){
  generate_feat_info(['args__'+seqObj.featid,'args__1'],[toggleFeature]);
 }
}

function get_organism_name_chain(val) {
 get_orgs(['args__'+val], ['org_list']);	 
}

function show_add() {
  if($('#add').is(":hidden")) {
    $('#remove').hide(0);$('#add').show(0);
  }
}

function clear_if_no_seq(){
  if($('#seq_box').val() == "Enter a fasta sequence here"){
    $('#seq_box').html('');
  }
}

function toggleFeature(html,check) {
 var size = $('#seq_box').width();
 if (html) {
   $('#pretty_print_anno').html(html).width(size).show(pageObj.speed);
//    animate_section("#pretty_print_anno", "show");
 }
 else if (check) {
   $('#pretty_print_anno').width(size).show(pageObj.speed);
 }
 else {
  animate_section("#pretty_print_anno", "hide");
 }
}

function timing(){
  if (pageObj.time){
   clearTimeout(pageObj.time);
  }
   pageObj.time = setTimeout("get_organism_name_chain($('#org_text').val())",500);
}

function search_bar(div_id){
  if($('#'+div_id).val() == "Search") $('#'+div_id).val("").css({fontStyle: "normal"});
}

function restore_search_bar(div_id){
  //alert($('#'+div_id).val());
  if($('#'+div_id).val() == "") {
  var regex = /^Organism\scount:\s(\d+)$/;
  var count = regex.exec($('#org_count').html());
  //alert(count[1]);
 // alert($('#org_count').val());
 
 //TODO - use javascript obj to update this value 3473 to current number of organisms!
   if (count[1] < 3473) get_organism_name_chain($('#org_text').val()); 
   $('#'+div_id).val("Search").css({fontStyle: "italic"});
 }
}

function org_info(info){
  var html = "<a href='#' onClick=\"$('#org_info_popup').slideToggle(pageObj.speed);\" style='float: right;'><img src='/CoGe/picts/delete.png' width='16' height='16' border='0'></a>";
  html = html + info;
  var window_width = $(document).width();
  var left_padding;
  var info_width = 800;
  if ((window_width - info_width) <= 0) {
    left_padding = 4;
  }
  else {
    left_padding = ((window_width - info_width)/2);
  }
  //$('#overlap_body').css("overflow","hidden");
  $('#org_info_popup').html(html).css("left",''+left_padding).width(info_width).slideDown(pageObj.speed);
  if ($('#org_info_popup').height() >= $(document).height() - 40) {
    $('#org_info_popup').css("height",''+$(document).height() - 40);
  }
}

function adjust_blast_types(val){
  if(val == 1){
    if($('#ncbi_blast_type').is(":hidden")){
      $('#coge_blast_type').hide(0);
      $('#ncbi_blast_type').show(0);
      get_seq('bn');
    }
    else return;
  }
  else{
    if($('#coge_blast_type').is(":hidden")){
      $('#coge_blast_type').show(0);
      $('#ncbi_blast_type').hide(0);
      get_seq('cn');
    }
    else return;
  }
}

</SCRIPT>
</TMPL_IF>

<TMPL_IF NAME="BLAST_FRONT_PAGE">
<div id=big_picture title="Enlarged Image of HSP Hits" class="image_window" style="display:none;"></div>
<div id="sequence_popup" class="image_window" style="display:none;overflow: auto;max-height: 300px;"></div>
<div id="org_info_popup" class="image_window" style="display:none;overflow: auto;max-height: 300px;"></div>
<TABLE width=100%>
 <TR>
 <TD><DIV id=blast_results></DIV></TD>
 </TR>
</TABLE>
<!--<TABLE>
 <TR>
   <TD>
    <a href="#" id="coge_blast_button" onClick="blastOff();"><span>CoGe BLAST</span></a>
   </TD>
   <TD>
     <a href="#" id="ncbi_blast_button" onClick="select_blast()"><span>NCBI BLAST</span></a>
   </TD>
  </TR>
</TABLE>-->
<TABLE width=100%>
 <TR>
  <TD>
  <div id=tab>
   <ul class="ui-tabs-nav">
     <li class="ui-tabs-selected">
       <a href="#cogeblast_option" onclick="adjust_blast_types()">
        <span>Use CoGe Blast</span>
       </a>
      </li>
      <li class="ui-tabs-selected">
       <a href="#ncbiblast_option" onclick="adjust_blast_types(1)">
        <span>Use NCBI Blast</span>
       </a>
      </li>
     </ul>
    </div>
  </TD>
 </TR>
 <TR>
  <!--<TD>-->
  <TH colspan="3">
  <div id="cogeblast_option">
  <a href="#" id="coge_blast_button" onClick="blastOff();"><span>CoGe BLAST</span></a><br>
   <DIV class="cogeblast_opts">
   <DIV id = "co" name="slider" class="topItem" onMouseOver="$('#co').removeClass('topItem').addClass('topItemSelected');" onMouseOut="$('#co').removeClass('topItemSelected').addClass('topItem');" onClick='animate_section("#coge_blast", "slideToggle")'>CoGe BLAST Options:</DIV>
   <DIV class="dropMenu" id="coge_blast">
   <TABLE class="list" >
       <TR>
          <TD>
   	<DIV id="org_name"><TMPL_VAR NAME="ORG_NAME"></DIV>
   	<DIV id="blah">Organism Name: <input type="text" size=11 onFocus="show_add();search_bar('org_text')" style="font-style:italic" value="Search" name="org_text" id="org_text" onBlur="restore_search_bar('org_text')" onKeyUp='timing();'></DIV>
   	<DIV id="org_list"><TMPL_VAR NAME="ORG_LIST"></DIV>
   	<input type=button value="Get Org Info" onClick="dataset_description_for_org(['org_id'],[org_info]);">
   	  </TD>
   	  <TD valign="middle" align=middle>
   	  <input type="button" id=add value="Add &rarr;  " onClick="get_from_id(['org_id'],[add_to_list]);">
   	  <input type="button" style="display: none" id=remove value="&larr; Remove" onClick="$('#'+$('#db_choice').val()).remove();counting();">
   	  </TD>
           <TD>
              <div id=db_title>Organism Database(s) to BLAST:</DIV>
              <font class="small count">Database count: 0</font>
              <DIV id=db_select><SELECT id="db_choice" SIZE="8" MULTIPLE onClick="$('#add').hide(0);$('#remove').show(0);">
              <option id=blank value=null>No Database Selected</option>
              </SELECT></DIV>
           </TD>
           <!--<td width="1" bgcolor="#99ff99"/>
           <TD valign="top">
      	<TH align=left valign="top"> <u>Results Options</u><br>
     </TD>-->
     <td width="1" bgcolor="#99ff99"/>
     <TD valign="top">
      <TH align=left valign="top"> <u>Blast Parameters</u><br>
      <TABLE>
       <TR>
	<TD>
	  E-Value
	</TD>
	<TD>
	    <select name=e_value id=e_value>
             <option value = ".000001"> 1e-6
	     <option value = ".00001"> 1e-5
	     <option value = ".0001" selected> 0.0001
             <option value = ".001"> 0.001
             <option value = ".01"> 0.01
             <option value = ".1"> 0.1
	     <option value = "1"> 1
	     <option value = "10"> 10
             <option value = "100"> 100
            </select>
       </TR>
       <TR>
	<TD>
	   Word size
	</TD>
	<TD>
	 <input type=text id=word_size value="8" size="7">
       </TR>
       <TR>
	<TD>
	  Gap Costs:
       </TD>
	<TD>
	  <select id="gapcosts_1-2" class="gapcosts" style="display: block">
	  	<option value = "0 0"  >Linear</option>   
		<option value = "5 2"  >Existence:  5 Extension: 2</option>				
		<option value = "2 2"  >Existence:  2 Extension: 2</option>				
		<option value = "1 2"  >Existence:  1 Extension: 2</option>
		<option value = "0 2"  >Existence:  0 Extension: 2</option>
		<option value = "3 1"  >Existence:  3 Extension: 1</option>		
		<option value = "2 1"  >Existence:  2 Extension: 1</option>		
		<option value = "1 1"  >Existence: 1 Extension: 1</option>				
	</select>
	<select id="gapcosts_1-3" class="gapcosts" style="display: none">
		<option value = "0 0" >Linear</option>   
		<option value = "5 2" >Existence:  5 Extension: 2</option>				
		<option value = "2 2"  >Existence:  2 Extension: 2</option>		
		<option value = "1 2"  >Existence:  1 Extension: 2</option>		
		<option value = "0 2"  >Existence:  0 Extension: 2</option>		
		<option value = "2 1"  >Existence:  2 Extension: 1</option>		
		<option value = "1 1"  >Existence: 1 Extension: 1</option>	
	</select>

	<select id="gapcosts_1-4" class="gapcosts" style="display: none">
		<option value = "0 0" >Linear</option>   
		<option value = "5 2" >Existence:  5 Extension: 2</option>					
		<option value = "1 2"  >Existence:  1 Extension: 2</option>		
		<option value = "0 2"  >Existence:  0 Extension: 2</option>		
		<option value = "2 1"  >Existence:  2 Extension: 1</option>		
		<option value = "1 1"  >Existence: 1 Extension: 1</option>	
	</select>
	<select id="gapcosts_2-3" class="gapcosts" style="display: none">
		<option value = "0 0" >Linear</option>   
		<option value = "4 4"  >Existence:  4 Extension: 4</option>		
		<option value = "2 4"  >Existence:  2 Extension: 4</option>		
		<option value = "0 4"  >Existence:  0 Extension: 4</option>		
		<option value = "3 3"  >Existence:  3 Extension: 3</option>		
		<option value = "6 2"  >Existence:  6 Extension: 2</option>		
		<option value = "5 2" >Existence:  5 Extension: 2</option>		
		<option value = "4 2"  >Existence: 4 Extension: 2</option>		
		<option value = "2 2"  >Existence:  2 Extension: 2</option>				
	</select>
	<select id="gapcosts_4-5" class="gapcosts" style="display: none">
		<option value = "0 0" >Linear</option>   
		<option value = "12 8" >Existence:  12 Extension: 8</option>		
		<option value = "6 5"  >Existence:  6 Extension: 5</option>		
		<option value = "5 5"  >Existence:  5 Extension: 5</option>		
		<option value = "4 5"  >Existence:  4 Extension: 5</option>		
		<option value = "3 5"  >Existence:  3 Extension: 5</option>	
	</select>
	<select id="gapcosts_1-1" class="gapcosts" style="display: none">
		<option value = "5 2"  >Existence:  5 Extension: 2</option>							
		<option value = "3 2"  >Existence:  3 Extension: 2</option>		
		<option value = "2 2"  >Existence:  2 Extension: 2</option>		
		<option value = "1 2"  >Existence:  1 Extension: 2</option>		
		<option value = "0 2"  >Existence:  0 Extension: 2</option>		
		<option value = "4 1"  >Existence:  4 Extension: 1</option>		
		<option value = "3 1"  >Existence:  3 Extension: 1</option>		
		<option value = "2 1"  >Existence:  2 Extension: 1</option>
	</select>
	<select id="gapcosts_BLOSUM62" class="gapcosts" style="display: none">
		<option value = "9 2"   >Existence:  9 Extension: 2</option>	
		<option value = "8 2"   >Existence:  8 Extension: 2</option>	
		<option value = "7 2"   >Existence:  7 Extension: 2</option>	
		<option value = "12 1"  >Existence: 12 Extension: 1</option>	
		<option value = "11 1" selected >Existence: 11 Extension: 1</option>	
		<option value = "10 1"  >Existence: 10 Extension: 1</option>		
	</select>
	<select id="gapcosts_PAM30" class="gapcosts" style="display: none">
		<option value = "7 2"  >Existence:  7 Extension: 2</option>			
		<option value = "6 2"  >Existence:  6 Extension: 2</option>		
		<option value = "5 2"  >Existence:  5 Extension: 2</option>		
		<option value = "10 1" >Existence: 10 Extension: 1</option>		
		<option value = "9 1"  selected>Existence: 9 Extension: 1</option>		
		<option value = "8 1"  >Existence: 8 Extension: 1</option>
	</select>
	<select id="gapcosts_PAM70" class="gapcosts" style="display: none">
		<option value = "8 2"  >Existence:  8 Extension: 2</option>	
		<option value = "7 2"  >Existence:  7 Extension: 2</option>			
		<option value = "6 2"  >Existence:  6 Extension: 2</option>			
		<option value = "11 1" >Existence: 11 Extension: 1</option>	
		<option value = "10 1" selected>Existence: 10 Extension: 1</option>		
		<option value = "9 1"  >Existence: 9 Extension: 1</option>
	</select>
	<select id="gapcosts_BLOSUM80" class="gapcosts" style="display: none">
		<option value = "8 2"   >Existence:  8 Extension: 2</option>	
		<option value = "7 2"   >Existence:  7 Extension: 2</option>			
		<option value = "6 2"   >Existence:  6 Extension: 2</option>			
		<option value = "11 1"   >Existence: 11 Extension: 1</option>	
		<option value = "10 1"   selected>Existence: 10 Extension: 1</option>		
		<option value = "9 1"   >Existence: 9 Extension: 1</option>		
	</select>
	<select id="gapcosts_BLOSUM45" class="gapcosts" style="display: none">
		<option value = "13 3"   >Existence: 13 Extension: 3</option>	
		<option value = "12 3"   >Existence: 12 Extension: 3</option>	
		<option value = "11 3"   >Existence: 11 Extension: 3</option>	
		<option value = "10 3"   >Existence: 10 Extension: 3</option>	
		<option value = "15 2"  selected >Existence: 15 Extension: 2</option>	
		<option value = "14 2"   >Existence: 14 Extension: 2</option>	
		<option value = "13 2"   >Existence: 13 Extension: 2</option>	
		<option value = "12 2"   >Existence: 12 Extension: 2</option>	
		<option value = "19 1"   >Existence: 19 Extension: 1</option>	
		<option value = "18 1"   >Existence: 18 Extension: 1</option>	
		<option value = "17 1"   >Existence: 17 Extension: 1</option>	
		<option value = "16 1"   >Existence: 16 Extension: 1</option>		
	</select>
	
	  </td>
	 </tr>
<!--	<TR>
	 <TD>
 	 Visualize HSP Results by:
 	</TD>
 	<TD>
           <select name=hsp_type id=hsp_type >
            <option value = "percent"> Percent Identity </option>
            <option value = "eval"> E-value </option>
            <option value = "score"> Score </option>
            <option value = "length"> Length </option>
     </select>
     </td>
     </tr>-->
      </TABLE>
     </TD>
     <td width="1" bgcolor="#99ff99"/>
     <TD valign="top">
    <DIV id=pro_or_nu_param></DIV>
          </TR>
         </TABLE>
</DIV>
 </DIV>
<!--   </TD> -->
  </div>
   <div id="ncbiblast_option" ><!-- NCBI BLAST</div>-->
   <a href="#" id="ncbi_blast_button" onClick="select_blast()"><span>NCBI BLAST</span></a><br>
   <DIV class="ncbiblast_opts">
   <DIV id = "ncbio" name="slider" class="topItem" onMouseOver="$('#ncbio').removeClass('topItem').addClass('topItemSelected');" onMouseOut="$('#ncbio').removeClass('topItemSelected').addClass('topItem');" onClick='animate_section("#ncbi_blast_opts", "slideToggle")'>NCBI BLAST Options:</DIV>
   <DIV class="dropMenu" id="ncbi_blast_opts">
   <TABLE width=100% id=stuff>
    <TR>
     <TD valign="top">
      <TH align=left valign="top"><u>BLAST Parameters</u><br>
      <TABLE>
       <TR>
	<TD>
	 Job Title
	</TD>
	<TD> 
	 <input id=job_title type=text value="<TMPL_VAR NAME=USER_NAME>'s BLAST">
	</TD>
       </TR>
       <TR>
        <TD>
	  Database
	</TD>
	<TD>
	<DIV id=database></DIV>
       </TR>
       <TR>
	<TD>
	  Filter
 	</TD>
	<TD>
	     <select name=complexity id=complexity>
              <option value = "0"> Off
	      <option value = "L"> Low Complexity
              <option value = "R"> Human Repeats
              <option value = "m"> Mask for Lookup
             </select>
       </TR>
      </TABLE>
     </TD>
     <td width="1" bgcolor="#99ff99"/>
     <TD valign="top">
      <TH align=left valign="top"> <u>BLAST Scoring</u><br>
      <TABLE>
       <TR>
	<TD>
	  E-Value
	</TD>
	<TD>
	    <select name=ncbi_e_value id=ncbi_e_value>
             <option value = ".000001"> 1e-6
	     <option value = ".00001"> 1e-5
	     <option value = ".0001" selected> 0.0001
             <option value = ".001"> 0.001
             <option value = ".01"> 0.01
             <option value = ".1"> 0.1
	     <option value = "1"> 1
	     <option value = "10"> 10
             <option value = "100"> 100
            </select>
       </TR>
       <TR>
	<TD>
	   Word size
	</TD>
	<TD>
	 	 <select name=ncbi_word_size id=ncbi_word_size>
           <option value = "16"> 16
	       <option value = "20"> 20
	       <option value = "24"> 24
           <option value = "28" selected> 28
           <option value = "32"> 32
           <option value = "48"> 48
	       <option value = "64"> 64
         </select>
       </TR>
       <TR>
	<TD>
	  Gap Costs:
       </TD>
	<TD>
	  <select id="ncbi_gapcosts_1-2" class="ncbi_gapcosts" style="display: block">
	  	<option value = "0 0"  >Linear</option>   
		<option value = "5 2"  >Existence:  5 Extension: 2</option>				
		<option value = "2 2"  >Existence:  2 Extension: 2</option>				
		<option value = "1 2"  >Existence:  1 Extension: 2</option>
		<option value = "0 2"  >Existence:  0 Extension: 2</option>
		<option value = "3 1"  >Existence:  3 Extension: 1</option>		
		<option value = "2 1"  >Existence:  2 Extension: 1</option>		
		<option value = "1 1"  >Existence: 1 Extension: 1</option>				
	</select>
	<select id="ncbi_gapcosts_1-3" class="ncbi_gapcosts" style="display: none">
		<option value = "0 0" >Linear</option>   
		<option value = "5 2" >Existence:  5 Extension: 2</option>				
		<option value = "2 2"  >Existence:  2 Extension: 2</option>		
		<option value = "1 2"  >Existence:  1 Extension: 2</option>		
		<option value = "0 2"  >Existence:  0 Extension: 2</option>		
		<option value = "2 1"  >Existence:  2 Extension: 1</option>		
		<option value = "1 1"  >Existence: 1 Extension: 1</option>	
	</select>

	<select id="ncbi_gapcosts_1-4" class="ncbi_gapcosts" style="display: none">
		<option value = "0 0" >Linear</option>   
		<option value = "5 2" >Existence:  5 Extension: 2</option>					
		<option value = "1 2"  >Existence:  1 Extension: 2</option>		
		<option value = "0 2"  >Existence:  0 Extension: 2</option>		
		<option value = "2 1"  >Existence:  2 Extension: 1</option>		
		<option value = "1 1"  >Existence: 1 Extension: 1</option>	
	</select>
	<select id="ncbi_gapcosts_2-3" class="ncbi_gapcosts" style="display: none">
		<option value = "0 0" >Linear</option>   
		<option value = "4 4"  >Existence:  4 Extension: 4</option>		
		<option value = "2 4"  >Existence:  2 Extension: 4</option>		
		<option value = "0 4"  >Existence:  0 Extension: 4</option>		
		<option value = "3 3"  >Existence:  3 Extension: 3</option>		
		<option value = "6 2"  >Existence:  6 Extension: 2</option>		
		<option value = "5 2" >Existence:  5 Extension: 2</option>		
		<option value = "4 2"  >Existence: 4 Extension: 2</option>		
		<option value = "2 2"  >Existence:  2 Extension: 2</option>				
	</select>
	<select id="ncbi_gapcosts_4-5" class="ncbi_gapcosts" style="display: none">
		<option value = "0 0" >Linear</option>   
		<option value = "12 8" >Existence:  12 Extension: 8</option>		
		<option value = "6 5"  >Existence:  6 Extension: 5</option>		
		<option value = "5 5"  >Existence:  5 Extension: 5</option>		
		<option value = "4 5"  >Existence:  4 Extension: 5</option>		
		<option value = "3 5"  >Existence:  3 Extension: 5</option>	
	</select>
	<select id="ncbi_gapcosts_1-1" class="ncbi_gapcosts" style="display: none">
		<option value = "5 2"  >Existence:  5 Extension: 2</option>							
		<option value = "3 2"  >Existence:  3 Extension: 2</option>		
		<option value = "2 2"  >Existence:  2 Extension: 2</option>		
		<option value = "1 2"  >Existence:  1 Extension: 2</option>		
		<option value = "0 2"  >Existence:  0 Extension: 2</option>		
		<option value = "4 1"  >Existence:  4 Extension: 1</option>		
		<option value = "3 1"  >Existence:  3 Extension: 1</option>		
		<option value = "2 1"  >Existence:  2 Extension: 1</option>	
	</select>
	<select id="ncbi_gapcosts_BLOSUM62" class="ncbi_gapcosts" style="display: none">
		<option value = "9 2"   >Existence:  9 Extension: 2</option>	
		<option value = "8 2"   >Existence:  8 Extension: 2</option>	
		<option value = "7 2"   >Existence:  7 Extension: 2</option>	
		<option value = "12 1"  >Existence: 12 Extension: 1</option>	
		<option value = "11 1" selected >Existence: 11 Extension: 1</option>	
		<option value = "10 1"  >Existence: 10 Extension: 1</option>		
	</select>
	<select id="ncbi_gapcosts_PAM30" class="ncbi_gapcosts" style="display: none">
		<option value = "7 2"  >Existence:  7 Extension: 2</option>			
		<option value = "6 2"  >Existence:  6 Extension: 2</option>		
		<option value = "5 2"  >Existence:  5 Extension: 2</option>		
		<option value = "10 1" >Existence: 10 Extension: 1</option>		
		<option value = "9 1"  selected>Existence: 9 Extension: 1</option>		
		<option value = "8 1"  >Existence: 8 Extension: 1</option>
	</select>
	<select id="ncbi_gapcosts_PAM70" class="ncbi_gapcosts" style="display: none">
		<option value = "8 2"  >Existence:  8 Extension: 2</option>	
		<option value = "7 2"  >Existence:  7 Extension: 2</option>			
		<option value = "6 2"  >Existence:  6 Extension: 2</option>			
		<option value = "11 1" >Existence: 11 Extension: 1</option>	
		<option value = "10 1" selected>Existence: 10 Extension: 1</option>		
		<option value = "9 1"  >Existence: 9 Extension: 1</option>
	</select>
	<select id="ncbi_gapcosts_BLOSUM80" class="ncbi_gapcosts" style="display: none">
		<option value = "8 2"   >Existence:  8 Extension: 2</option>	
		<option value = "7 2"   >Existence:  7 Extension: 2</option>			
		<option value = "6 2"   >Existence:  6 Extension: 2</option>			
		<option value = "11 1"   >Existence: 11 Extension: 1</option>	
		<option value = "10 1"   selected>Existence: 10 Extension: 1</option>		
		<option value = "9 1"   >Existence: 9 Extension: 1</option>		
	</select>
	<select id="ncbi_gapcosts_BLOSUM45" class="ncbi_gapcosts" style="display: none">
		<option value = "13 3"   >Existence: 13 Extension: 3</option>	
		<option value = "12 3"   >Existence: 12 Extension: 3</option>	
		<option value = "11 3"   >Existence: 11 Extension: 3</option>	
		<option value = "10 3"   >Existence: 10 Extension: 3</option>	
		<option value = "15 2"  selected >Existence: 15 Extension: 2</option>	
		<option value = "14 2"   >Existence: 14 Extension: 2</option>	
		<option value = "13 2"   >Existence: 13 Extension: 2</option>	
		<option value = "12 2"   >Existence: 12 Extension: 2</option>	
		<option value = "19 1"   >Existence: 19 Extension: 1</option>	
		<option value = "18 1"   >Existence: 18 Extension: 1</option>	
		<option value = "17 1"   >Existence: 17 Extension: 1</option>	
		<option value = "16 1"   >Existence: 16 Extension: 1</option>		
	</select>
      </TR>
      </TABLE>
     </TD>
     <td width="1" bgcolor="#99ff99"/>
     <TD valign="top">
    <DIV id=ncbi_pro_or_nu_param></DIV>
   </TMPL_IF>
    <TMPL_IF NAME="REST">
     </TR>
    </TABLE>
</DIV>
 </DIV>
  </div>
 </TR>

 <TR>
<!--  <TD> -->
   <TH colspan="3">
   <DIV class="mainDiv">
   <DIV id = "dr" class="topItem" onMouseOver="$('#dr').removeClass('topItem').addClass('topItemSelected');" onMouseOut="$('#dr').removeClass('topItemSelected').addClass('topItem');" onClick='animate_section("#query_seqs", "slideToggle")'>Query Sequence(s):</DIV>
   <DIV class="dropMenu" id="query_seqs">
   <DIV class="subMenu" style="display:inline;">
   <TABLE> 
    <TR align=left valign=top>
     <TH>Sequences (fasta format)
      <TD><textarea class="backbox" type="textarea" onFocus="clear_if_no_seq()" name="seq_box" id ="seq_box" wrap=off cols=80 rows=15><TMPL_VAR NAME="SEQUENCE"></textarea>
      </TD>
      <TD valign="top"> Select a BLAST to run: <br>
       <div id="coge_blast_type">
       <TABLE>
       <TR>
        <TD valign="top">
         <label><input id=cn type=radio name=cogeblast value="coge_blast_type_n" checked="" onClick="display_correct_radio($('#cn')[0].checked,'coge');get_seq('cn');blast_param_on_select('cn','coge');">Nucleotide Sequence</label>
         <br>
          <div id=coge_select_n>
           <select name=coge_blasttype id=coge_blast_type_n onChange="blast_param_on_select('cn','coge')">
            <optgroup label="--- Select BLAST Type ---">
            <option value = "blastn"> blastn
            <option value = "tblastx"> tblastx
           </optgroup>
           </select>
           <br>
          </div>
         <br>
         <label><input id=cn type=radio name=cogeblast value="coge_blast_type_p" onClick="display_correct_radio($('#cn')[0].checked,'coge');get_seq('cn');blast_param_on_select('cn','coge')">Protein Sequence</label>
         <br>
          <div id=coge_select_p style="display:none;">
           <select name=coge_blasttype id=coge_blast_type_p onChange="blast_param_on_select('cn','coge')">
            <optgroup label="--- Select BLAST Type ---">
            <option value = "tblastn"> tblastn
            </optgroup>
           </select>
           <br>
          </div>
         <br>
         <!--<input type=image name= onClick="get_radio(['args__bn','bn'],[select_blast])">-->
         </TR>
         </TABLE>
         </div>
      <div id="ncbi_blast_type" style="display:none;">
       <TABLE>
       <TR>
        <TD valign="top">
         <label><input id=bn type=radio name=ncbiblast value="ncbi_blast_type_n" checked="" onClick="display_correct_radio($('#bn')[0].checked,'ncbi');get_seq('bn');blast_param_on_select('bn','ncbi');">Nucleotide Sequence</label>
         <br>
          <div id=ncbi_select_n>
           <select name=ncbi_blasttype id=ncbi_blast_type_n onChange="blast_param_on_select('bn','ncbi')">
            <optgroup label="--- Select BLAST Type ---">
            <option value = "blastn"> blastn
            <option value = "blastx"> blastx
            <option value = "tblastx"> tblastx
           </optgroup>
           </select>
           <br>
          </div>
         <br>
         <label><input id=bn type=radio name=ncbiblast value="ncbi_blast_type_p" onClick="display_correct_radio($('#bn')[0].checked,'ncbi');get_seq('bn');blast_param_on_select('bn','ncbi')">Protein Sequence</label>
         <br>
          <div id=ncbi_select_p style="display:none;">
           <select name=ncbi_blasttype id=ncbi_blast_type_p onChange="blast_param_on_select('bn','ncbi')">
            <optgroup label="--- Select BLAST Type ---">
            <option value = "blastp"> blastp
            <option value = "tblastn"> tblastn
            </optgroup>
           </select>
           <br>
          </div>
         <br>
         <!--<input type=image name= onClick="get_radio(['args__bn','bn'],[select_blast])">-->
         </TR>
         </TABLE>
         </div>
      </TD>
   </TR>
   <TR align=left valign=top>
   <TMPL_IF NAME=DISPLAY_FEAT>
   <TD>
    <TABLE>
        <TR>
         <TD><form name=check_feat>
          <input type="checkbox" name="feature_display" id="feature_display" onClick="get_displayFeature();"></form>
         </TD>
         <TD valign="top">
          Click to show feature information
        </TR>
       </TABLE>
    </TD>
    <TD>
     <DIV id=pretty_print_anno class="backbox" style="display: none;"></DIV>
    </TD>
    </TMPL_IF>    
    </TR>
  </table>
   </DIV>
   </DIV>
   </DIV>
 </TR>
 <!--<TR>
 <TD> 
  <TH colspan="3">
   <DIV class="mainDiv">
   <DIV id = "dr3" class="topItem" onMouseOver="$('#dr3').removeClass('topItem').addClass('topItemSelected');" onMouseOut="$('#dr3').removeClass('topItemSelected').addClass('topItem')" onClick='animate_section("#blast_params", "slideToggle")' >Additional BLAST Options:</DIV>
   <DIV class="dropMenu" id="blast_params">
   <DIV class="subMenu" style="display:inline;">-->
   <!--<TABLE width=100% id=stuff>
    <TR>
     <TD valign="top">
      <TH align=left valign="top"><u>BLAST Parameters</u><br>
      <TABLE>
       <TR>
	<TD>
	 Job Title
	</TD>
	<TD> 
	 <input id=job_title type=text value="<TMPL_VAR NAME=USER_NAME>'s BLAST">
	</TD>
       </TR>
       <TR>
        <TD>
	  Database
	</TD>
	<TD>
	<DIV id=database></DIV>
       </TR>
       <TR>
	<TD>
	  Filter
 	</TD>
	<TD>
	     <select name=complexity id=complexity>
              <option value = "0"> Off
	      <option value = "L"> Low Complexity
              <option value = "R"> Human Repeats
              <option value = "m"> Mask for Lookup
             </select>
       </TR>
      </TABLE>
     </TD>
     <td width="1" bgcolor="#99ff99"/>
     <TD valign="top">
      <TH align=left valign="top"> <u>BLAST Scoring</u><br>
      <TABLE>
       <TR>
	<TD>
	  E-Value
	</TD>
	<TD>
	    <select name=e_value id=e_value>
             <option value = ".000001"> 1e-6
	     <option value = ".00001"> 1e-5
	     <option value = ".0001" selected> 0.0001
             <option value = ".001"> 0.001
             <option value = ".01"> 0.01
             <option value = ".1"> 0.1
	     <option value = "1"> 1
	     <option value = "10"> 10
             <option value = "100"> 100
            </select>
       </TR>
       <TR>
	<TD>
	   Word size
	</TD>
	<TD>
	 <input type=text id=word_size value="8" size="7">
       </TR>
       <TR>
	<TD>
	  Gap Costs:
       </TD>
	<TD>
	  <select id="gapcosts_1-2" class="gapcosts" style="display: block">
	  	<option value = "0 0"  >Linear</option>   
		<option value = "5 2"  >Existence:  5 Extension: 2</option>				
		<option value = "2 2"  >Existence:  2 Extension: 2</option>				
		<option value = "1 2"  >Existence:  1 Extension: 2</option>
		<option value = "0 2"  >Existence:  0 Extension: 2</option>
		<option value = "3 1"  >Existence:  3 Extension: 1</option>		
		<option value = "2 1"  >Existence:  2 Extension: 1</option>		
		<option value = "1 1"  >Existence: 1 Extension: 1</option>				
	</select>
	<select id="gapcosts_1-3" class="gapcosts" style="display: none">
		<option value = "0 0" >Linear</option>   
		<option value = "5 2" >Existence:  5 Extension: 2</option>				
		<option value = "2 2"  >Existence:  2 Extension: 2</option>		
		<option value = "1 2"  >Existence:  1 Extension: 2</option>		
		<option value = "0 2"  >Existence:  0 Extension: 2</option>		
		<option value = "2 1"  >Existence:  2 Extension: 1</option>		
		<option value = "1 1"  >Existence: 1 Extension: 1</option>	
	</select>

	<select id="gapcosts_1-4" class="gapcosts" style="display: none">
		<option value = "0 0" >Linear</option>   
		<option value = "5 2" >Existence:  5 Extension: 2</option>					
		<option value = "1 2"  >Existence:  1 Extension: 2</option>		
		<option value = "0 2"  >Existence:  0 Extension: 2</option>		
		<option value = "2 1"  >Existence:  2 Extension: 1</option>		
		<option value = "1 1"  >Existence: 1 Extension: 1</option>	
	</select>
	<select id="gapcosts_2-3" class="gapcosts" style="display: none">
		<option value = "0 0" >Linear</option>   
		<option value = "4 4"  >Existence:  4 Extension: 4</option>		
		<option value = "2 4"  >Existence:  2 Extension: 4</option>		
		<option value = "0 4"  >Existence:  0 Extension: 4</option>		
		<option value = "3 3"  >Existence:  3 Extension: 3</option>		
		<option value = "6 2"  >Existence:  6 Extension: 2</option>		
		<option value = "5 2" >Existence:  5 Extension: 2</option>		
		<option value = "4 2"  >Existence: 4 Extension: 2</option>		
		<option value = "2 2"  >Existence:  2 Extension: 2</option>				
	</select>
	<select id="gapcosts_4-5" class="gapcosts" style="display: none">
		<option value = "0 0" >Linear</option>   
		<option value = "12 8" >Existence:  12 Extension: 8</option>		
		<option value = "6 5"  >Existence:  6 Extension: 5</option>		
		<option value = "5 5"  >Existence:  5 Extension: 5</option>		
		<option value = "4 5"  >Existence:  4 Extension: 5</option>		
		<option value = "3 5"  >Existence:  3 Extension: 5</option>	
	</select>
	<select id="gapcosts_1-1" class="gapcosts" style="display: none">
		<option value = "5 2"  >Existence:  5 Extension: 2</option>							
		<option value = "3 2"  >Existence:  3 Extension: 2</option>		
		<option value = "2 2"  >Existence:  2 Extension: 2</option>		
		<option value = "1 2"  >Existence:  1 Extension: 2</option>		
		<option value = "0 2"  >Existence:  0 Extension: 2</option>		
		<option value = "4 1"  >Existence:  4 Extension: 1</option>		
		<option value = "3 1"  >Existence:  3 Extension: 1</option>		
		<option value = "2 1"  >Existence:  2 Extension: 1</option>	
      </TR>
      </TABLE>
     </TD>
     <td width="1" bgcolor="#99ff99"/>
     <TD valign="top">
    <DIV id=pro_or_nu_param></DIV>
   </TMPL_IF>
    <TMPL_IF NAME="REST">
     </TR>
    </TABLE>-->
<!--</DIV>
</DIV>
</DIV>
 </TR> -->
 </TABLE>
</TMPL_IF>


    <TMPL_IF NAME="BLAST_NU">
     <TH align=left valign="top"><u> Nucleotide Specific Parameters</u><br>
      <TABLE>
       <TR>
	<TD valign="top">
	 Match/Mismatch Scores:
         </TD>
         <TD>
	    <select id=match_score name=match_score onchange="update_gapcost()">
	     <option selected="selected" value="1,-2">1,-2</option>
	     <option value="1,-3">1,-3</option>
	     <option value="1,-4">1,-4</option>
	     <option value="2,-3">2,-3</option>
     	     <option value="4,-5">4,-5</option>
	     <option value="1,-1">1,-1</option>
	 </TD>
       </TR>
      </TABLE>
    </TMPL_IF>
    <TMPL_IF NAME="BLAST_PRO">
     <TH align=left valign="top"><u>Protein Specific Parameters</u><br>
      <TABLE>
       <TR>
        <TD valign="top">
	 Matrix
        </TD>
        <TD>
	     <select name=matrix id=matrix onChange="update_gapcost(1)">
              <option value = "PAM30"> PAM30
	      <option value = "PAM70"> PAM70
              <option value = "BLOSUM80"> BLOSUM80
              <option value = "BLOSUM62" selected> BLOSUM62
              <option value = "BLOSUM45"> BLOSUM45
             </select>
       </TR>
       <TMPL_IF NAME=BLAST_PRO_COMP>
       <TR>
        <TD>
	 Compositional adjustments
	</TD>
	<TD>
	     <select name=comp_adj id=comp_adj>
              <option value = "0"> No adjustment
	      <option value = "1" selected> Composition-based statistics
              <option value = "2"> Conditional compositional score matrix adjustment
              <option value = "3"> Universal compositional score matrix adjustment
             </select>
       </TR>
       </TMPL_IF>
      </TABLE>
    </TMPL_IF>
    
     <TMPL_IF NAME="NCBI_BLAST_NU">
     <TH align=left valign="top"><u> Nucleotide Specific Parameters</u><br>
      <TABLE>
       <TR>
	<TD valign="top">
	 Match/Mismatch Scores:
         </TD>
         <TD>
	    <select id=ncbi_match_score name=ncbi_match_score onchange="update_gapcost_ncbi()">
	     <option selected="selected" value="1,-2">1,-2</option>
	     <option value="1,-3">1,-3</option>
	     <option value="1,-4">1,-4</option>
	     <option value="2,-3">2,-3</option>
     	     <option value="4,-5">4,-5</option>
	     <option value="1,-1">1,-1</option>
	 </TD>
       </TR>
      </TABLE>
    </TMPL_IF>
    <TMPL_IF NAME="NCBI_BLAST_PRO">
     <TH align=left valign="top"><u>Protein Specific Parameters</u><br>
      <TABLE>
       <TR>
        <TD valign="top">
	 Matrix
        </TD>
        <TD>
	     <select name=ncbi_matrix id=ncbi_matrix onChange="update_gapcost_ncbi(1)">
              <option value = "PAM30"> PAM30
	      <option value = "PAM70"> PAM70
              <option value = "BLOSUM80"> BLOSUM80
              <option value = "BLOSUM62" selected> BLOSUM62
              <option value = "BLOSUM45"> BLOSUM45
             </select>
       </TR>
       <TMPL_IF NAME=NCBI_BLAST_PRO_COMP>
       <TR>
        <TD>
	 Compositional adjustments
	</TD>
	<TD>
	     <select name=ncbi_comp_adj id=ncbi_comp_adj>
              <option value = "0"> No adjustment
	      <option value = "1" selected> Composition-based statistics
              <option value = "2"> Conditional compositional score matrix adjustment
              <option value = "3"> Universal compositional score matrix adjustment
             </select>
       </TR>
       </TMPL_IF>
      </TABLE>
    </TMPL_IF>
    
    <TMPL_IF NAME=NU_DB>
    <select name=ncbi_db id=ncbi_db>
	  <optgroup label="Genomic plus Transcript">
           <option value = "Test/gpipe/9606/allcontig_and_rna"> Human genomic plus transcript
           <option value = "Test/gpipe/10090/allcontig_and_rna"> Mouse genomic plus transcript
	  </optgroup>
	  <optgroup label="Other Databases">
           <option value = "nr" selected> Nucleotide collection (nr/nt)
           <option value = "refseq_rna"> Reference mRNA sequences (refseq_rna)
           <option value = "refseq_genomic"> Reference genomic sequences (refseq_genomic)
           <option value = "est"> Expressed sequence tags (est)
           <option value = "est_others"> Non-human, non-mouse ESTs (est_others)
           <option value = "gss"> Genomic survey sequences (gss)
           <option value = "htgs"> High throughput genomic sequences (HTGS)
           <option value = "pat"> Patent sequences (pat)
           <option value = "pdb"> Protein Data Bank (pdb)
           <option value = "alu"> Human ALU repeat elements (alu_repeat)
           <option value = "dbsts"> Sequence tagged sites (dbsts)
           <option value = "wgs"> Whole-genome shotgun reads (wgs)
           <option value = "env_nt"> Environmental samples (env_nt)
	  </optgroup>
          </select>
    </TMPL_IF>
   
    <TMPL_IF NAME=PRO_DB>
    <select name=blast_db id=blast_db>
	<option value="nr" selected>Non-redundant protein sequences (nr)</option>
	<option value="refseq_protein">Reference proteins (refseq_protein)</option>	
	<option value="swissprot">Swissprot protein sequences(swissprot)</option>
	<option value="pat">Patented protein sequences(pat)</option>
	<option value="pdb">Protein Data Bank proteins(pdb)</option>
	<option value="env_nr">Environmental samples(env_nr)</option>
    </TMPL_IF>

    <TMPL_IF NAME=T_DB>
    <select name=blast_db id=blast_db>
        <option value="nr" selected>Nucleotide collection (nr/nt)</option>
	<option value="refseq_rna">Reference mRNA sequences (refseq_rna)</option>
	<option value="refseq_genomic">Reference genomic sequences (refseq_genomic)</option>
	<option value="est">Expressed sequence tags (est)</option>
	<option value="est_others">Non-human, non-mouse ESTs (est_others)</option>
	<option value="gss">Genomic survey sequences (gss)</option>
	<option value="htgs">High throughput genomic sequences (HTGS)</option>
	
	<option value="pat">Patent sequences(pat)</option>
	<option value="pdb">Protein Data Bank (pdb)</option>
	<option value="alu">Human ALU repeat elements (alu_repeats)</option>
	<option value="dbsts">Sequence tagged sites (dbsts)</option>
	<option value="wgs">Whole-genome shotgun reads (wgs)</option>
	<option value="env_nt">Environmental samples (env_nt)</option>
   </TMPL_IF>
   
   
   <TMPL_IF NAME="OVERLAP_FEATURE_IF">
   Total Number of HSPs: <TMPL_VAR NAME=HSP_COUNT>
   <div id="null"><TMPL_VAR NAME=NULLIFY></div>
   <div id=table_size style="max-height: 360px;">
   <TABLE id="overlap" cellspacing="2" class="resultborder" style="overflow: auto;">
     <caption>Features Overlapped by HSPs:</caption>
   	<THEAD>
         <TR align=middle>
          <TH class=small>click to sort &rarr;</TH>
          <TH class="header" >Name</TH>
          <TH class="header" >HSP No.</TH>
          <TH class="header" >E-Value</TH>
          <TH class="header" >Percent ID</TH>
          <TH class="header" >Score</TH>
          <TH class="header" >Feat Length</TH>
          <TH class="header" >Org</TH>
         </TR>
         </THEAD>
         <TBODY id=overlap_body style="overflow: auto;">
         <TMPL_LOOP NAME=FEATURE_TABLE>
         <TR id="table_row<TMPL_VAR NAME=FID>" title="Click for info" align=right class="feat">
         <!--onmouseover="$('#table_row<TMPL_VAR NAME=FID>').addClass('highlight_tablerows');" onmouseout="$('#table_row<TMPL_VAR NAME=FID>').removeClass('highlight_tablerows');"-->
          <TD><input type=checkbox id="feature_checkbox<TMPL_VAR NAME=FID>" name="feature_checkbox" value="<TMPL_VAR NAME=FID>"></TD>
          <TD ><TMPL_VAR NAME=FEATURE_NAME></TD>
          <TD ><TMPL_VAR NAME=FEATURE_HSP></TD>
          <TD ><TMPL_VAR NAME=FEATURE_EVAL></TD>
          <TD ><TMPL_VAR NAME=FEATURE_PID></TD>
          <TD ><TMPL_VAR NAME=FEATURE_SCORE></TD>
          <TD ><TMPL_VAR NAME=FEATURE_LENGTH></TD>
          <TD style="white-space:nowrap;"><TMPL_VAR NAME=FEATURE_ORG></TD>
         </TR>
        </TMPL_LOOP>
        </TBODY>
        </TABLE>
        </div>
        <input type=button value="Select All" onClick="$('#feature_list').checkCheckboxes()">  <input type=button value="Select None" onClick="$('#feature_list').unCheckCheckboxes()"> 
        <br>
        <br>
         <DIV id=overlap_box valign="top" align="left" class="resultborder" style="overflow: auto;display: none;max-height: 300px;"></DIV>
         <TMPL_IF NAME=NO_FEAT_IF>
         <br>
          <div id=no_table_size style="max-height: 150px;overflow: auto;">
             <table id="no_table" class="resultborder">
               <caption>HSPs w/o overlapping features:</caption>
               <THEAD>
                <TR align=middle>
                  <TH> </TH>
                  <TH class=header>Org</TH>
                  <TH class=header>HSP No.</TH>
                  <TH class=header>E-value</TH>
                  <TH class=header>Perc ID</TH>
                  <TH class=header>Score</TH>
                  <TH class=header>Feature</TH>
                  <TH class=header>Dist (kb)</TH>
                 </TR>
               </THEAD>
               <tbody id=no_feats style="overflow: auto">
               <TMPL_LOOP NAME=NO_FEATS>
               <!--onclick="hide_big_picture();show_hsp_div();loading('image_info','Information');loading('query_image','Image');loading('subject_image','Image');get_hsp_info(['args__blastfile','args__'+pageObj.basename,'args__num','args__<TMPL_VAR NAME=ID>'],['image_info','query_image','subject_image']);"-->
                 <tr class="feat" id="<TMPL_VAR NAME=ID>" >
                   <td id="checkbox<TMPL_VAR NAME=ID>"></td>
                   <td><TMPL_VAR NAME=NO_FEAT_ORG></td>
                   <td><TMPL_VAR NAME=NO_FEAT></td>
                   <td><TMPL_VAR NAME=NO_FEAT_EVAL></td>
                   <td><TMPL_VAR NAME=NO_FEAT_PID></td>
                   <td><TMPL_VAR NAME=NO_FEAT_SCORE></td>
                   <td id="feat<TMPL_VAR NAME=ID>"><TMPL_VAR NAME=NO_FEAT_LINK></td>
                   <td id="dist<TMPL_VAR NAME=ID>">-</td>
                 </tr>
               </TMPL_LOOP>
              </tbody>
             </table>
           </div>
           <br>
           <!--<div id=nearby_feat></div>
           <div id=nearby_feat_results valign="top" align="left" class="resultborder" style="overflow: auto;display: none;max-height: 300px;"></div>-->
         </TMPL_IF>
   </TMPL_IF>
   
   <TMPL_IF NAME=CHROMOSOMES_IF>
       <TMPL_LOOP NAME=CHROMOSOME_LOOP>
         <TMPL_VAR NAME=DB_NAME>
         <TMPL_VAR NAME=CHR_IMAGE>
         <TMPL_IF NAME=HIT>
         <a href='#imagewindow' onClick="enlarge_picture_window(<TMPL_VAR NAME=IMAGE_ID>);">Enlarge Picture</a>
         </TMPL_IF>
        <br>
       </TMPL_LOOP>
   </TMPL_IF>
   
   <TMPL_IF NAME=CHROMOSOMES_LARGE_IF>
        <TMPL_LOOP NAME=CHROMOSOME_LOOP_LARGE>
          <div id=large_db<TMPL_VAR NAME=IMAGE_ID_LARGE> style="display:none"><TMPL_VAR NAME=DB_NAME_LARGE></div>
          <div id=large_pic<TMPL_VAR NAME=IMAGE_ID_LARGE> style="display:none"><TMPL_VAR NAME=CHR_IMAGE_LARGE></div>
        </TMPL_LOOP>
   </TMPL_IF>
   
   <TMPL_IF NAME=HSP_IF>
       <TABLE id="hsp_table" class="resultborder" style="width: 400px; overflow: auto;" cellspacing="2">
     <caption>HSP Number <TMPL_VAR NAME=HSP_NUM> Info</caption>
      <tr>
      <td valign="top">
      <table >
   	  <THEAD>
         <TR>
          <TH> </TH>
          <TH class="header">Query</TH>
          <TH class="header">Subject</TH>
         </TR>
         </THEAD>
         <TBODY style="font-size: 10pt;">
         <TMPL_LOOP NAME=HSP_QS>
         <!--onmouseover="$('#table_row<TMPL_VAR NAME=FID>').addClass('highlight_tablerows');" onmouseout="$('#table_row<TMPL_VAR NAME=FID>').removeClass('highlight_tablerows');"-->
          <tr>
          <TD >Perc ID</TD>
          <TD><TMPL_VAR NAME=HSP_PID_QUERY></TD>
          <TD><TMPL_VAR NAME=HSP_PID_SUB></TD>
          </tr>
          <tr>
          <TD >Perc Sim</TD>
          <TD><TMPL_VAR NAME=HSP_PSIM_QUERY></TD>
          <TD><TMPL_VAR NAME=HSP_PSIM_SUB></TD>
          </tr>
          <TR >
          <TD >Match</TD>
          <TD><TMPL_VAR NAME=HSP_MATCH_QUERY></TD>
          <TD><TMPL_VAR NAME=HSP_MATCH_SUB></TD>
          </tr>
          <tr>
          <TD >Mismatch</TD>
          <TD><TMPL_VAR NAME=HSP_MISMATCH_QUERY></TD>
          <TD><TMPL_VAR NAME=HSP_MISMATCH_SUB></TD>
          </tr>
          <tr>
          <TD >Gap</TD>
          <TD><TMPL_VAR NAME=HSP_GAP_QUERY></TD>
          <TD><TMPL_VAR NAME=HSP_GAP_SUB></TD>
         </TR>
         <tr>
          <TD >Position</TD>
          <TD><TMPL_VAR NAME=HSP_POSITION_QUERY></TD>
          <TD><TMPL_VAR NAME=HSP_POSITION_SUB></TD>
          </TR>
          <tr>
        </TBODY>
        </TMPL_LOOP>
        </table>
        </TD>
        <TD valign="top">
        <table>
         <THEAD>
         <TR>
          <TH> </TH>
          <TH class="header">HSP</TH>
         </TR>
         </THEAD>
          <TMPL_LOOP NAME=HSP_HSP>
         <TBODY style="font-size: 10pt;">
           <TR>
          <TD>E-Value</TD>
          <TD><TMPL_VAR NAME=HSP_EVAL></TD>
          </tr>
          <tr>
          <TD >Score</TD>
          <TD><TMPL_VAR NAME=HSP_SCORE></TD>
          </tr>
          <tr>
          <TD >Strand</TD>
          <TD><TMPL_VAR NAME=HSP_STRAND></TD>
          </tr>
          <TD >Length</TD>
          <TD><TMPL_VAR NAME=HSP_LENGTH></TD>
          </TR>
          <tr>
           <TD >Chromosome</TD>
           <TD><TMPL_VAR NAME=HSP_CHR></TD>
          </TR>
        </TBODY>
        </TMPL_LOOP>
        </table>
        </TR>
        </TABLE>
        <br>
        <table width=100%>
          <tr>
            <td><TMPL_VAR NAME=QUERY_SEQ></td>
            <td><TMPL_VAR NAME=SUB_SEQ></TD>
            <td><TMPL_VAR NAME=ALIGNMENT></td>
          </tr>
         </table>
  </TMPL_IF>
   
<TMPL_IF NAME=BLAST_RESULTS>
<TABLE width=100%>
  <TR>
    <TD>
   <TH colspan="3">
   <DIV class="mainDiv bresults">
   <DIV id = "br" class="topItem bresults" style="display: none" onMouseOver="$('#br').removeClass('topItem').addClass('topItemSelected');" onMouseOut="$('#br').removeClass('topItemSelected').addClass('topItem');" onClick='animate_section("#results", "slideToggle")'>Blast Results:</DIV>
   <DIV class="dropMenu bresults" id="results">
   <DIV class="subMenu" style="display:inline;">
   <TABLE width=100%>
    <TR>
     <TD align=left valign="top" >
     Genomic HSP Visualization:
     <DIV id=chromosomes class="resultborder" style="width: 405px;overflow: auto;max-height: 80%;">
     <TMPL_VAR NAME=CHROMOSOMES>
     <TMPL_VAR NAME=CHR_LARGE>
      </DIV>
<!--      Color HSP Hits by: 
      <select name=color_hsp id=color_hsp onchange="loading('chromosomes','Images');generate_overview_image(['args__basename','args__'+pageObj.basename,'args__type','args__'+$('#color_hsp').val(),'args__width','args__'+pageObj.image_width],['chromosomes']);">
            <option value = "percent"> Percent Identity </option>
            <option value = "eval"> E-value </option>
            <option value = "score"> Score </option>
            <option value = "length"> Length </option>
     </select>-->
      </TD>
      <TD valign="top">
       <DIV id=result_visual valign="top" style="display: none;width:450">
         HSP Graphics:<br>
        <DIV id=query_image class="hsp_image"></DIV>
        <BR>
        <BR>
        <BR>
        <DIV id=subject_image class="hsp_image"></DIV>
        <BR>
        <BR>
        <DIV id=image_info><TMPL_VAR NAME=HSP></DIV>
        </DIV>
      </TD>
      <TD valign="top" align=right>
       <DIV id=result_features align=right valign="top">
         <form id=feature_list style="position:static">
         <TMPL_VAR NAME="OVERLAP_FEATURE_LIST">
         </form>
         Do Following to Checked Features: 
          <select name=overlap_action id=overlap_action>
            <option value = "gevo">Send to GEvo</option>
            <option value = "fasta">Create FASTA File</option>
            <option value = "xls">Export to Excel</option>
            <option value = "tab">Tab Deliminated</option>
            <option value = "list">Get Feature List</option>
            <option value = "user">Add to MFF</option> 
          </selected>  
          <input type=button value="Go" onClick="overlap_checkboxes()">
       </DIV>
     </TD>
    <TR>
    <td><TMPL_VAR NAME="DATA_FILES">
   </TABLE>
   </TD>
</DIV>
</DIV>
</DIV>
  </TR>
</TABLE>
   </TMPL_IF>