<HTML>
<HEAD>
<meta http-equiv="Pragma" content="no-cache" />
<TITLE>CoGe: <TMPL_VAR NAME="PAGE_TITLE"></TITLE>
<meta name="description" content="The CoGe Comparative Genomics Platform.  A software suite of interlinked and interconnected web-based tools for easily visualizing, comparing, and understanding the evolution, struture and dynamics of genomes." />
<meta name="keywords" content="Genetics, Genome, Genomics, Human Genome, Genome Project, Genomics, Homolog, Homologue, Homologous, Homology, Molecular Genetics, Genomes, bioinformatics, mirna, microrna, dna sequencing, computational biology, gene sequencing, shotgun sequencing, Genome Browser, Genetic Information, Biology Genetics, Genome Sequence, Genome Sequencing, Homologous Chromosomes, DNA Genetics, DNA, Genetics Research, Genome Research, Functional Genomics, Genetics Genes, Genetics Map, Genome Analysis, Comparative Genomics, Genome Biology, Genomics Genetics, Homologous Chromosome, Mouse Genome, Human Genome, Yeast Genome, Complete Genomics, Bioinformatics, Bioinformatics genomics, gene genome, homologs, structural genomics, genetic genome, yeast genetics, bioinformatics genome, genes, genome, synteny, syntenic, whole genome sequencing, comparative genome, genetic variations, genome sequences, genome genetics, homologous gene, snp genome" />
<meta name="google-site-verification" content="Pp2O8PKsZWc6dO67lYe2ONCofCYgMwQcoy6bWhkvbXs" />
<meta name="google-site-verification" content="voXZn_uzuPQj7YtCxw5ogRAW5PgalKg-8rA_VT7TooA" />
<meta name="google-site-verification" content="LFIw-oo_UpW85cg_ONvoPuH1IpWYjlfmipsWhOvo1kk" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<TMPL_INCLUDE NAME="header_includes.tmpl">

<style type="text/css">
	@font-face {
		font-family: 'Glyphicons Halflings';
		src: url('./js/vendor/bootstrap/fonts/glyphicons-halflings-regular.eot');
		src: url('./js/vendor/bootstrap/fonts/glyphicons-halflings-regular.eot?#iefix') format('embedded-opentype'), url('./js/vendor/bootstrap/fonts/glyphicons-halflings-regular.woff') format('woff'), url('./js/vendor/bootstrap/fonts/glyphicons-halflings-regular.ttf') format('truetype'), url('./js/vendor/bootstrap/fonts/glyphicons-halflings-regular.svg#glyphicons_halflingsregular') format('svg');
	}
	
	.glyphicon {
		position: relative;
		top: 1px;
		right: 4px;
		display: inline-block;
		font-family: 'Glyphicons Halflings';
		font-style: normal;
		font-weight: normal;
		line-height: 1;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
	}
	
	.glyphicon-search:before {
		content: "\e003";
	}
</style>

<TMPL_VAR NAME="HEAD">

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="shortcut icon" href="picts/urlicon/favicon.ico">
</HEAD>

<BODY <TMPL_VAR NAME="BODY_ONLOAD">>

<div id="logout_dialog" class="hidden dialog_box" title="Log out of CoGe">
    <div style="text-align:center;padding:30px;">
        <div class="info">Would you like to log out of all iPlant applications?</div>
        <br><br>
        <span onClick="location.href='index.pl?logout_coge=1';" style="font-size:0.75em;margin:15px;padding:5px;" class='ui-button ui-corner-all'>Log out of CoGe only</span>
        <span onClick="location.href='index.pl?logout_all=1';" style="font-size:0.75em;margin:15px;padding:5px;" class='ui-button ui-corner-all'>Log out of all iPlant services</span>
    </div>
</div>

<TMPL_VAR NAME="JAVASCRIPT">

<script>
jQuery(document).ready(function(){
    pageObj = new Object();
    if (jQuery.browser.msie) {browserAlert()};
    setup_button_states();

    // Show indicator if not on main site
    if (document.URL.indexOf('genomevolution.org') == -1 && document.URL.indexOf('coge.iplantcollaborative.org') == -1) {
        $('#brand').addClass("dev");
    }
    
    //Setup API
    coge.services.init({
    	baseUrl: API_BASE_URL,
    	userName: USER_NAME
    });
});

function browserAlert(){
    $('#main_alert').html('IE is not supported.  Please use FireFox: http://www.mozilla.com/en-US/firefox/');
    alert('IE is not supported.  Please use FireFox: http://www.mozilla.com/en-US/firefox/');
}

//set up the jquery ui button behavior
function setup_button_states (id) {
//$(function() {
         //button effects on events
	var item;

	if (id) { item='#'+id; }
	else { item = '.ui-button'; }
	$(item+':not(.ui-state-disabled)')
		.hover( function(){
			$(this).addClass("ui-state-hover");
		},
		function(){
			$(this).removeClass("ui-state-hover");
		});
	$(item+':not(.ui-button-toggle)') //buttons that aren't toggle-able
		.mousedown(function(){
			$(this).addClass("ui-state-active");
		})
		.mouseup(function(){
			$(this).removeClass("ui-state-active");
		});
	$(item+'.ui-button-toggle') // buttons that are toggle-able
		.click(function(){
			if( $(this).hasClass('ui-state-active') ){
				$(this).removeClass("ui-state-active");
			}
			else { $(this).addClass("ui-state-active"); }
		});

}

//add button behavior to new buttons, takes in array
function add_button_states (ids) {
    if(!ids) return;

    if(!(ids instanceof Array)) ids = [ids]; //check if ids is an array, if not, make it one

    for(var i=0; i<ids.length; i++)
    {
         setup_button_states(ids[i]);
    }
}

//initialize superfish plugin (dropdown menu)
/*$(document).ready( function() {
    $('ul.sf-menu').supersubs({
            minWidth:    8,   // minimum width of sub-menus in em units
            maxWidth:    27,   // maximum width of sub-menus in em units
            extraWidth:  1     // extra width can ensure lines don't sometimes turn over
                               // due to slight rounding differences and font-family
             }).superfish({
        delay: 300
    });
    $('#menubar').css('visibility', 'visible'); // mdb added 10/21/13 -- hidden on startup to prevent "glitching" in rendering
});*/

function search() {
	var token = $('#header_search_token').val();
	console.log(token);
	//window.location.href = "api/v1/global/search/" + token;
	window.location.href = "SearchResults.pl?s=" + token;
}

function searchKey(event) {
	if (event.which == 13) {
		event.preventDefault(); //Without this, the page just reloads
		search();
	}
}

function toggleDropdown(element) {
	console.log(element + '_label');
	$(element).toggle();
	
	if( $(element + '_label').find('img').attr('src') == "picts/arrow-right-icon.png" ) {
    	$(element + '_label').find('img').attr("src", "picts/arrow-down-icon.png");
    } else {
    	$(element + '_label').find('img').attr("src", "picts/arrow-right-icon.png");
    }
}

</script>
<header class="coge-header">
		
	<!--Header contains logo and search bar-->
	<ul id="header_main" class="coge-header-main" style="margin-left:1em">
		<li id="brand" style="margin-right:1em;margin-top:0.25em;">
			<a href="<TMPL_VAR NAME=HOME>">
				<font face="impact" color="#41AD41" size="20">CoGe</font>
			</a>
		</li>
		
		<li>
			<ul class="coge-header-search">
				<li>
					<div class="coge-header-searchbar">
				    	<input id="header_search_token" type="text" placeholder="Search Database" spellcheck="false" onkeypress="searchKey(event)">
				    </div>
				</li>
				<li>
				    <button id="header_search_button" class="ui-button ui-corner-all coge-button" type="button" onclick="search();">
				    	<span style="font-size:1.5em;" class="glyphicon glyphicon-search"></span>
				    </button>
			    </li>
			</ul>
	    </li>
	</ul>
	
	<!--Buttons and links-->
	<ul id="header_menu" class="coge-header-menu">
		<TMPL_IF NAME="LOGON">
			<li id="login" class="coge-login-button">
					<div><TMPL_VAR NAME="USER"></div>
					<input type="image" src="image.pl" style="height:3em;width:3em;margin-left:33%;" onclick="$('#logout_dialog').dialog({modal: true, width: 500}).dialog('open');">
					<div><a href="#" class="link" style="" onclick="$('#logout_dialog').dialog({modal: true, width: 500}).dialog('open');">Log Out</a></div>
			</li>
		<TMPL_ELSE>
			<li id="header_login_button" class="coge-header-button" onclick="login_cas();return true;">
					<div>Log in</div>
			</li>
		</TMPL_IF>
		<li class="dropdown coge-header-button" onclick="toggleDropdown('#help_drop')">
			<div id="help_drop_label" class="dropdown-label">Help <img src="picts/arrow-right-icon.png" class="link" style="width:10px;height:10px;padding-bottom:0.15em;"></div>
			<ul id="help_drop" class="dropdown-menu hidden">
				<li><a href="<TMPL_VAR NAME=WIKI_URL>" target="_blank">CoGePedia</a></li>
				<li><a href="<TMPL_VAR NAME=WIKI_URL>/<TMPL_VAR NAME=HELP>" target="_blank">Page Docs</a></li>
				<li><a href="http://iplant.co/AskCoGe" target="_blank">Forums</a></li>
				<li><a href="<TMPL_VAR NAME=WIKI_URL>/FAQs" target="_blank">FAQ</a></li>
				<li><a href="<TMPL_VAR NAME=WIKI_URL>/Tutorials" target="_blank">Tutorials</a></li>
				<li><a href="<TMPL_VAR NAME=WIKI_URL>/Contact_Page" target="_blank">Contact or Cite Us</a></li>
				<li><a href="<TMPL_VAR NAME=WIKI_URL>/System_Support" target="_blank">System Support</a></li>
				<li><a href="<TMPL_VAR NAME=WIKI_URL>/CoGepedia:Current_events" target="_blank">Latest News</a><li>
			</ul>
		</li>
		<li class="dropdown coge-header-button" onclick="toggleDropdown('#tool_drop')">
			<div id="tool_drop_label" class="dropdown-label">Tools <img src="picts/arrow-right-icon.png" class="link" style="width:10px;height:10px;padding-bottom:0.15em;"></div>
			<ul id="tool_drop" class="dropdown-menu hidden">
				<li><a href="OrganismView.pl">OrganismView</a></li>
				<li><a href="CoGeBlast.pl">CoGeBlast</a></li>
				<li><a href="FeatView.pl">FeatView</a></li>
				<li><a href="SynFind.pl">SynFind</a></li>
				<li><a href="SynMap.pl">SynMap</a></li>
				<li><a href="GEvo.pl">GEvo</a></li>
			</ul>
		</li>
		<TMPL_IF NAME="ADMIN_ONLY">
			<li class="coge-header-button" onclick="location.href='Admin.pl';"><div>Admin</div></li>
		</TMPL_IF>
		<li class="coge-header-button" onclick="location.href='User.pl';"><div>Profile</div></li>
	</ul>
</header>

<!--<div class="tagline"><TMPL_VAR NAME="TITLE"></div>-->
